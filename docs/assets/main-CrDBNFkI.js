(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Vw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jg={exports:{}},ru={},Zg={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zo=Symbol.for("react.element"),jw=Symbol.for("react.portal"),Mw=Symbol.for("react.fragment"),Ow=Symbol.for("react.strict_mode"),Lw=Symbol.for("react.profiler"),Fw=Symbol.for("react.provider"),zw=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),Bw=Symbol.for("react.suspense"),$w=Symbol.for("react.memo"),qw=Symbol.for("react.lazy"),Pp=Symbol.iterator;function Hw(t){return t===null||typeof t!="object"?null:(t=Pp&&t[Pp]||t["@@iterator"],typeof t=="function"?t:null)}var ey={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ty=Object.assign,ny={};function as(t,e,n){this.props=t,this.context=e,this.refs=ny,this.updater=n||ey}as.prototype.isReactComponent={};as.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};as.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ry(){}ry.prototype=as.prototype;function Zd(t,e,n){this.props=t,this.context=e,this.refs=ny,this.updater=n||ey}var eh=Zd.prototype=new ry;eh.constructor=Zd;ty(eh,as.prototype);eh.isPureReactComponent=!0;var Dp=Array.isArray,iy=Object.prototype.hasOwnProperty,th={current:null},sy={key:!0,ref:!0,__self:!0,__source:!0};function oy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)iy.call(e,r)&&!sy.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zo,type:t,key:s,ref:o,props:i,_owner:th.current}}function Ww(t,e){return{$$typeof:zo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nh(t){return typeof t=="object"&&t!==null&&t.$$typeof===zo}function Kw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vp=/\/+/g;function Qu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kw(""+t.key):e.toString(36)}function Ja(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zo:case jw:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Qu(o,0):r,Dp(i)?(n="",t!=null&&(n=t.replace(Vp,"$&/")+"/"),Ja(i,e,n,"",function(d){return d})):i!=null&&(nh(i)&&(i=Ww(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Dp(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Qu(s,l);o+=Ja(s,e,n,u,i)}else if(u=Hw(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Qu(s,l++),o+=Ja(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sa(t,e,n){if(t==null)return t;var r=[],i=0;return Ja(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Qw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Za={transition:null},Gw={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Za,ReactCurrentOwner:th};function ay(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Sa,forEach:function(t,e,n){Sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sa(t,function(){e++}),e},toArray:function(t){return Sa(t,function(e){return e})||[]},only:function(t){if(!nh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=as;re.Fragment=Mw;re.Profiler=Lw;re.PureComponent=Zd;re.StrictMode=Ow;re.Suspense=Bw;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gw;re.act=ay;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ty({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=th.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)iy.call(e,u)&&!sy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:zo,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:zw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fw,_context:t},t.Consumer=t};re.createElement=oy;re.createFactory=function(t){var e=oy.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:Uw,render:t}};re.isValidElement=nh;re.lazy=function(t){return{$$typeof:qw,_payload:{_status:-1,_result:t},_init:Qw}};re.memo=function(t,e){return{$$typeof:$w,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Za.transition;Za.transition={};try{t()}finally{Za.transition=e}};re.unstable_act=ay;re.useCallback=function(t,e){return At.current.useCallback(t,e)};re.useContext=function(t){return At.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return At.current.useDeferredValue(t)};re.useEffect=function(t,e){return At.current.useEffect(t,e)};re.useId=function(){return At.current.useId()};re.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return At.current.useMemo(t,e)};re.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};re.useRef=function(t){return At.current.useRef(t)};re.useState=function(t){return At.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return At.current.useTransition()};re.version="18.3.1";Zg.exports=re;var P=Zg.exports;const bt=Vw(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw=P,Xw=Symbol.for("react.element"),Jw=Symbol.for("react.fragment"),Zw=Object.prototype.hasOwnProperty,e1=Yw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t1={key:!0,ref:!0,__self:!0,__source:!0};function ly(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Zw.call(e,r)&&!t1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Xw,type:t,key:s,ref:o,props:i,_owner:e1.current}}ru.Fragment=Jw;ru.jsx=ly;ru.jsxs=ly;Jg.exports=ru;var f=Jg.exports,uy={exports:{}},Wt={},cy={exports:{}},dy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var G=$.length;$.push(K);e:for(;0<G;){var fe=G-1>>>1,X=$[fe];if(0<i(X,K))$[fe]=K,$[G]=X,G=fe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],G=$.pop();if(G!==K){$[0]=G;e:for(var fe=0,X=$.length,F=X>>>1;fe<F;){var ne=2*(fe+1)-1,J=$[ne],Z=ne+1,Le=$[Z];if(0>i(J,G))Z<X&&0>i(Le,J)?($[fe]=Le,$[Z]=G,fe=Z):($[fe]=J,$[ne]=G,fe=ne);else if(Z<X&&0>i(Le,G))$[fe]=Le,$[Z]=G,fe=Z;else break e}}return K}function i($,K){var G=$.sortIndex-K.sortIndex;return G!==0?G:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,g=null,y=3,S=!1,b=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A($){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=$)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function V($){if(C=!1,A($),!b)if(n(u)!==null)b=!0,Ke(O);else{var K=n(d);K!==null&&_e(V,K.startTime-$)}}function O($,K){b=!1,C&&(C=!1,x(m),m=-1),S=!0;var G=y;try{for(A(K),g=n(u);g!==null&&(!(g.expirationTime>K)||$&&!N());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,y=g.priorityLevel;var X=fe(g.expirationTime<=K);K=t.unstable_now(),typeof X=="function"?g.callback=X:g===n(u)&&r(u),A(K)}else r(u);g=n(u)}if(g!==null)var F=!0;else{var ne=n(d);ne!==null&&_e(V,ne.startTime-K),F=!1}return F}finally{g=null,y=G,S=!1}}var M=!1,w=null,m=-1,_=5,T=-1;function N(){return!(t.unstable_now()-T<_)}function k(){if(w!==null){var $=t.unstable_now();T=$;var K=!0;try{K=w(!0,$)}finally{K?I():(M=!1,w=null)}}else M=!1}var I;if(typeof E=="function")I=function(){E(k)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,$e=ge.port2;ge.port1.onmessage=k,I=function(){$e.postMessage(null)}}else I=function(){R(k,0)};function Ke($){w=$,M||(M=!0,I())}function _e($,K){m=R(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){b||S||(b=!0,Ke(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var G=y;y=K;try{return $()}finally{y=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var G=y;y=$;try{return K()}finally{y=G}},t.unstable_scheduleCallback=function($,K,G){var fe=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?fe+G:fe):G=fe,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=G+X,$={id:p++,callback:K,priorityLevel:$,startTime:G,expirationTime:X,sortIndex:-1},G>fe?($.sortIndex=G,e(d,$),n(u)===null&&$===n(d)&&(C?(x(m),m=-1):C=!0,_e(V,G-fe))):($.sortIndex=X,e(u,$),b||S||(b=!0,Ke(O))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var K=y;return function(){var G=y;y=K;try{return $.apply(this,arguments)}finally{y=G}}}})(dy);cy.exports=dy;var n1=cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1=P,Ht=n1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hy=new Set,uo={};function ui(t,e){Ki(t,e),Ki(t+"Capture",e)}function Ki(t,e){for(uo[t]=e,t=0;t<e.length;t++)hy.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pc=Object.prototype.hasOwnProperty,i1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jp={},Mp={};function s1(t){return Pc.call(Mp,t)?!0:Pc.call(jp,t)?!1:i1.test(t)?Mp[t]=!0:(jp[t]=!0,!1)}function o1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function a1(t,e,n,r){if(e===null||typeof e>"u"||o1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rh=/[\-:]([a-z])/g;function ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rh,ih);ut[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rh,ih);ut[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rh,ih);ut[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sh(t,e,n,r){var i=ut.hasOwnProperty(e)?ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(a1(e,n,i,r)&&(n=null),r||i===null?s1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=r1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),Ii=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),oh=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),fy=Symbol.for("react.provider"),py=Symbol.for("react.context"),ah=Symbol.for("react.forward_ref"),Vc=Symbol.for("react.suspense"),jc=Symbol.for("react.suspense_list"),lh=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),my=Symbol.for("react.offscreen"),Op=Symbol.iterator;function Rs(t){return t===null||typeof t!="object"?null:(t=Op&&t[Op]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Gu;function Fs(t){if(Gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gu=e&&e[1]||""}return`
`+Gu+t}var Yu=!1;function Xu(t,e){if(!t||Yu)return"";Yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fs(t):""}function l1(t){switch(t.tag){case 5:return Fs(t.type);case 16:return Fs("Lazy");case 13:return Fs("Suspense");case 19:return Fs("SuspenseList");case 0:case 2:case 15:return t=Xu(t.type,!1),t;case 11:return t=Xu(t.type.render,!1),t;case 1:return t=Xu(t.type,!0),t;default:return""}}function Mc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ci:return"Fragment";case Ii:return"Portal";case Dc:return"Profiler";case oh:return"StrictMode";case Vc:return"Suspense";case jc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case py:return(t.displayName||"Context")+".Consumer";case fy:return(t._context.displayName||"Context")+".Provider";case ah:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lh:return e=t.displayName||null,e!==null?e:Mc(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return Mc(t(e))}catch{}}return null}function u1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mc(e);case 8:return e===oh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function c1(t){var e=gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ca(t){t._valueTracker||(t._valueTracker=c1(t))}function yy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oc(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vy(t,e){e=e.checked,e!=null&&sh(t,"checked",e,!1)}function Lc(t,e){vy(t,e);var n=Ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fc(t,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fc(t,e,n){(e!=="number"||gl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zs=Array.isArray;function Li(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ir(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(zs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ir(n)}}function _y(t,e){var n=Ir(e.value),r=Ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Up(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,xy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d1=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(t){d1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ks[e]=Ks[t]})});function Ey(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ks.hasOwnProperty(t)&&Ks[t]?(""+e).trim():e+"px"}function Ty(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ey(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var h1=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bc(t,e){if(e){if(h1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function $c(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=null;function uh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hc=null,Fi=null,zi=null;function Bp(t){if(t=$o(t)){if(typeof Hc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=lu(e),Hc(t.stateNode,t.type,e))}}function Sy(t){Fi?zi?zi.push(t):zi=[t]:Fi=t}function Iy(){if(Fi){var t=Fi,e=zi;if(zi=Fi=null,Bp(t),e)for(t=0;t<e.length;t++)Bp(e[t])}}function Cy(t,e){return t(e)}function Ay(){}var Ju=!1;function Ny(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return Cy(t,e,n)}finally{Ju=!1,(Fi!==null||zi!==null)&&(Ay(),Iy())}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var r=lu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Wc=!1;if(qn)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Wc=!1}function f1(t,e,n,r,i,s,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Qs=!1,yl=null,vl=!1,Kc=null,p1={onError:function(t){Qs=!0,yl=t}};function m1(t,e,n,r,i,s,o,l,u){Qs=!1,yl=null,f1.apply(p1,arguments)}function g1(t,e,n,r,i,s,o,l,u){if(m1.apply(this,arguments),Qs){if(Qs){var d=yl;Qs=!1,yl=null}else throw Error(U(198));vl||(vl=!0,Kc=d)}}function ci(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ry(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $p(t){if(ci(t)!==t)throw Error(U(188))}function y1(t){var e=t.alternate;if(!e){if(e=ci(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $p(i),t;if(s===r)return $p(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function by(t){return t=y1(t),t!==null?ky(t):null}function ky(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ky(t);if(e!==null)return e;t=t.sibling}return null}var Py=Ht.unstable_scheduleCallback,qp=Ht.unstable_cancelCallback,v1=Ht.unstable_shouldYield,_1=Ht.unstable_requestPaint,Oe=Ht.unstable_now,w1=Ht.unstable_getCurrentPriorityLevel,ch=Ht.unstable_ImmediatePriority,Dy=Ht.unstable_UserBlockingPriority,_l=Ht.unstable_NormalPriority,x1=Ht.unstable_LowPriority,Vy=Ht.unstable_IdlePriority,iu=null,An=null;function E1(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(iu,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:I1,T1=Math.log,S1=Math.LN2;function I1(t){return t>>>=0,t===0?32:31-(T1(t)/S1|0)|0}var Na=64,Ra=4194304;function Us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Us(l):(s&=o,s!==0&&(r=Us(s)))}else o=n&~i,o!==0?r=Us(o):s!==0&&(r=Us(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),i=1<<n,r|=t[n],e&=~i;return r}function C1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-fn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=C1(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Qc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jy(){var t=Na;return Na<<=1,!(Na&4194240)&&(Na=64),t}function Zu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function N1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-fn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function dh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pe=0;function My(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Oy,hh,Ly,Fy,zy,Gc=!1,ba=[],fr=null,pr=null,mr=null,fo=new Map,po=new Map,lr=[],R1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hp(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(e.pointerId)}}function ks(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=$o(e),e!==null&&hh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function b1(t,e,n,r,i){switch(e){case"focusin":return fr=ks(fr,t,e,n,r,i),!0;case"dragenter":return pr=ks(pr,t,e,n,r,i),!0;case"mouseover":return mr=ks(mr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fo.set(s,ks(fo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,po.set(s,ks(po.get(s)||null,t,e,n,r,i)),!0}return!1}function Uy(t){var e=Kr(t.target);if(e!==null){var n=ci(e);if(n!==null){if(e=n.tag,e===13){if(e=Ry(n),e!==null){t.blockedOn=e,zy(t.priority,function(){Ly(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function el(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qc=r,n.target.dispatchEvent(r),qc=null}else return e=$o(n),e!==null&&hh(e),t.blockedOn=n,!1;e.shift()}return!0}function Wp(t,e,n){el(t)&&n.delete(e)}function k1(){Gc=!1,fr!==null&&el(fr)&&(fr=null),pr!==null&&el(pr)&&(pr=null),mr!==null&&el(mr)&&(mr=null),fo.forEach(Wp),po.forEach(Wp)}function Ps(t,e){t.blockedOn===e&&(t.blockedOn=null,Gc||(Gc=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,k1)))}function mo(t){function e(i){return Ps(i,t)}if(0<ba.length){Ps(ba[0],t);for(var n=1;n<ba.length;n++){var r=ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&Ps(fr,t),pr!==null&&Ps(pr,t),mr!==null&&Ps(mr,t),fo.forEach(e),po.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)Uy(n),n.blockedOn===null&&lr.shift()}var Ui=Xn.ReactCurrentBatchConfig,xl=!0;function P1(t,e,n,r){var i=pe,s=Ui.transition;Ui.transition=null;try{pe=1,fh(t,e,n,r)}finally{pe=i,Ui.transition=s}}function D1(t,e,n,r){var i=pe,s=Ui.transition;Ui.transition=null;try{pe=4,fh(t,e,n,r)}finally{pe=i,Ui.transition=s}}function fh(t,e,n,r){if(xl){var i=Yc(t,e,n,r);if(i===null)uc(t,e,r,El,n),Hp(t,r);else if(b1(i,t,e,n,r))r.stopPropagation();else if(Hp(t,r),e&4&&-1<R1.indexOf(t)){for(;i!==null;){var s=$o(i);if(s!==null&&Oy(s),s=Yc(t,e,n,r),s===null&&uc(t,e,r,El,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else uc(t,e,r,null,n)}}var El=null;function Yc(t,e,n,r){if(El=null,t=uh(r),t=Kr(t),t!==null)if(e=ci(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ry(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return El=t,null}function By(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(w1()){case ch:return 1;case Dy:return 4;case _l:case x1:return 16;case Vy:return 536870912;default:return 16}default:return 16}}var cr=null,ph=null,tl=null;function $y(){if(tl)return tl;var t,e=ph,n=e.length,r,i="value"in cr?cr.value:cr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return tl=i.slice(t,1<r?1-r:void 0)}function nl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ka(){return!0}function Kp(){return!1}function Kt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ka:Kp,this.isPropagationStopped=Kp,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),e}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mh=Kt(ls),Bo=Ne({},ls,{view:0,detail:0}),V1=Kt(Bo),ec,tc,Ds,su=Ne({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ds&&(Ds&&t.type==="mousemove"?(ec=t.screenX-Ds.screenX,tc=t.screenY-Ds.screenY):tc=ec=0,Ds=t),ec)},movementY:function(t){return"movementY"in t?t.movementY:tc}}),Qp=Kt(su),j1=Ne({},su,{dataTransfer:0}),M1=Kt(j1),O1=Ne({},Bo,{relatedTarget:0}),nc=Kt(O1),L1=Ne({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),F1=Kt(L1),z1=Ne({},ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U1=Kt(z1),B1=Ne({},ls,{data:0}),Gp=Kt(B1),$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=H1[t])?!!e[t]:!1}function gh(){return W1}var K1=Ne({},Bo,{key:function(t){if(t.key){var e=$1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?q1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gh,charCode:function(t){return t.type==="keypress"?nl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q1=Kt(K1),G1=Ne({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=Kt(G1),Y1=Ne({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gh}),X1=Kt(Y1),J1=Ne({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z1=Kt(J1),ex=Ne({},su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tx=Kt(ex),nx=[9,13,27,32],yh=qn&&"CompositionEvent"in window,Gs=null;qn&&"documentMode"in document&&(Gs=document.documentMode);var rx=qn&&"TextEvent"in window&&!Gs,qy=qn&&(!yh||Gs&&8<Gs&&11>=Gs),Xp=" ",Jp=!1;function Hy(t,e){switch(t){case"keyup":return nx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ai=!1;function ix(t,e){switch(t){case"compositionend":return Wy(e);case"keypress":return e.which!==32?null:(Jp=!0,Xp);case"textInput":return t=e.data,t===Xp&&Jp?null:t;default:return null}}function sx(t,e){if(Ai)return t==="compositionend"||!yh&&Hy(t,e)?(t=$y(),tl=ph=cr=null,Ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qy&&e.locale!=="ko"?null:e.data;default:return null}}var ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ox[t.type]:e==="textarea"}function Ky(t,e,n,r){Sy(r),e=Tl(e,"onChange"),0<e.length&&(n=new mh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ys=null,go=null;function ax(t){iv(t,0)}function ou(t){var e=bi(t);if(yy(e))return t}function lx(t,e){if(t==="change")return e}var Qy=!1;if(qn){var rc;if(qn){var ic="oninput"in document;if(!ic){var em=document.createElement("div");em.setAttribute("oninput","return;"),ic=typeof em.oninput=="function"}rc=ic}else rc=!1;Qy=rc&&(!document.documentMode||9<document.documentMode)}function tm(){Ys&&(Ys.detachEvent("onpropertychange",Gy),go=Ys=null)}function Gy(t){if(t.propertyName==="value"&&ou(go)){var e=[];Ky(e,go,t,uh(t)),Ny(ax,e)}}function ux(t,e,n){t==="focusin"?(tm(),Ys=e,go=n,Ys.attachEvent("onpropertychange",Gy)):t==="focusout"&&tm()}function cx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ou(go)}function dx(t,e){if(t==="click")return ou(e)}function hx(t,e){if(t==="input"||t==="change")return ou(e)}function fx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:fx;function yo(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Pc.call(e,i)||!gn(t[i],e[i]))return!1}return!0}function nm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rm(t,e){var n=nm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nm(n)}}function Yy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xy(){for(var t=window,e=gl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gl(t.document)}return e}function vh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function px(t){var e=Xy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yy(n.ownerDocument.documentElement,n)){if(r!==null&&vh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=rm(n,s);var o=rm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mx=qn&&"documentMode"in document&&11>=document.documentMode,Ni=null,Xc=null,Xs=null,Jc=!1;function im(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jc||Ni==null||Ni!==gl(r)||(r=Ni,"selectionStart"in r&&vh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xs&&yo(Xs,r)||(Xs=r,r=Tl(Xc,"onSelect"),0<r.length&&(e=new mh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ni)))}function Pa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ri={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionend:Pa("Transition","TransitionEnd")},sc={},Jy={};qn&&(Jy=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function au(t){if(sc[t])return sc[t];if(!Ri[t])return t;var e=Ri[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jy)return sc[t]=e[n];return t}var Zy=au("animationend"),ev=au("animationiteration"),tv=au("animationstart"),nv=au("transitionend"),rv=new Map,sm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(t,e){rv.set(t,e),ui(e,[t])}for(var oc=0;oc<sm.length;oc++){var ac=sm[oc],gx=ac.toLowerCase(),yx=ac[0].toUpperCase()+ac.slice(1);br(gx,"on"+yx)}br(Zy,"onAnimationEnd");br(ev,"onAnimationIteration");br(tv,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br(nv,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function om(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,g1(r,e,void 0,t),t.currentTarget=null}function iv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;om(i,l,d),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;om(i,l,d),s=u}}}if(vl)throw t=Kc,vl=!1,Kc=null,t}function xe(t,e){var n=e[rd];n===void 0&&(n=e[rd]=new Set);var r=t+"__bubble";n.has(r)||(sv(e,t,2,!1),n.add(r))}function lc(t,e,n){var r=0;e&&(r|=4),sv(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function vo(t){if(!t[Da]){t[Da]=!0,hy.forEach(function(n){n!=="selectionchange"&&(vx.has(n)||lc(n,!1,t),lc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,lc("selectionchange",!1,e))}}function sv(t,e,n,r){switch(By(e)){case 1:var i=P1;break;case 4:i=D1;break;default:i=fh}n=i.bind(null,e,n,t),i=void 0,!Wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function uc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Kr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Ny(function(){var d=s,p=uh(n),g=[];e:{var y=rv.get(t);if(y!==void 0){var S=mh,b=t;switch(t){case"keypress":if(nl(n)===0)break e;case"keydown":case"keyup":S=Q1;break;case"focusin":b="focus",S=nc;break;case"focusout":b="blur",S=nc;break;case"beforeblur":case"afterblur":S=nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=M1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=X1;break;case Zy:case ev:case tv:S=F1;break;case nv:S=Z1;break;case"scroll":S=V1;break;case"wheel":S=tx;break;case"copy":case"cut":case"paste":S=U1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Yp}var C=(e&4)!==0,R=!C&&t==="scroll",x=C?y!==null?y+"Capture":null:y;C=[];for(var E=d,A;E!==null;){A=E;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,x!==null&&(V=ho(E,x),V!=null&&C.push(_o(E,V,A)))),R)break;E=E.return}0<C.length&&(y=new S(y,b,null,n,p),g.push({event:y,listeners:C}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",y&&n!==qc&&(b=n.relatedTarget||n.fromElement)&&(Kr(b)||b[Hn]))break e;if((S||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,S?(b=n.relatedTarget||n.toElement,S=d,b=b?Kr(b):null,b!==null&&(R=ci(b),b!==R||b.tag!==5&&b.tag!==6)&&(b=null)):(S=null,b=d),S!==b)){if(C=Qp,V="onMouseLeave",x="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(C=Yp,V="onPointerLeave",x="onPointerEnter",E="pointer"),R=S==null?y:bi(S),A=b==null?y:bi(b),y=new C(V,E+"leave",S,n,p),y.target=R,y.relatedTarget=A,V=null,Kr(p)===d&&(C=new C(x,E+"enter",b,n,p),C.target=A,C.relatedTarget=R,V=C),R=V,S&&b)t:{for(C=S,x=b,E=0,A=C;A;A=xi(A))E++;for(A=0,V=x;V;V=xi(V))A++;for(;0<E-A;)C=xi(C),E--;for(;0<A-E;)x=xi(x),A--;for(;E--;){if(C===x||x!==null&&C===x.alternate)break t;C=xi(C),x=xi(x)}C=null}else C=null;S!==null&&am(g,y,S,C,!1),b!==null&&R!==null&&am(g,R,b,C,!0)}}e:{if(y=d?bi(d):window,S=y.nodeName&&y.nodeName.toLowerCase(),S==="select"||S==="input"&&y.type==="file")var O=lx;else if(Zp(y))if(Qy)O=hx;else{O=cx;var M=ux}else(S=y.nodeName)&&S.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=dx);if(O&&(O=O(t,d))){Ky(g,O,n,p);break e}M&&M(t,y,d),t==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&Fc(y,"number",y.value)}switch(M=d?bi(d):window,t){case"focusin":(Zp(M)||M.contentEditable==="true")&&(Ni=M,Xc=d,Xs=null);break;case"focusout":Xs=Xc=Ni=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,im(g,n,p);break;case"selectionchange":if(mx)break;case"keydown":case"keyup":im(g,n,p)}var w;if(yh)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Ai?Hy(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(qy&&n.locale!=="ko"&&(Ai||m!=="onCompositionStart"?m==="onCompositionEnd"&&Ai&&(w=$y()):(cr=p,ph="value"in cr?cr.value:cr.textContent,Ai=!0)),M=Tl(d,m),0<M.length&&(m=new Gp(m,t,null,n,p),g.push({event:m,listeners:M}),w?m.data=w:(w=Wy(n),w!==null&&(m.data=w)))),(w=rx?ix(t,n):sx(t,n))&&(d=Tl(d,"onBeforeInput"),0<d.length&&(p=new Gp("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=w))}iv(g,e)})}function _o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ho(t,n),s!=null&&r.unshift(_o(t,s,i)),s=ho(t,e),s!=null&&r.push(_o(t,s,i))),t=t.return}return r}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function am(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=ho(n,s),u!=null&&o.unshift(_o(n,u,l))):i||(u=ho(n,s),u!=null&&o.push(_o(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _x=/\r\n?/g,wx=/\u0000|\uFFFD/g;function lm(t){return(typeof t=="string"?t:""+t).replace(_x,`
`).replace(wx,"")}function Va(t,e,n){if(e=lm(e),lm(t)!==e&&n)throw Error(U(425))}function Sl(){}var Zc=null,ed=null;function td(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,xx=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,Ex=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(t){return um.resolve(null).then(t).catch(Tx)}:nd;function Tx(t){setTimeout(function(){throw t})}function cc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);mo(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var us=Math.random().toString(36).slice(2),Cn="__reactFiber$"+us,wo="__reactProps$"+us,Hn="__reactContainer$"+us,rd="__reactEvents$"+us,Sx="__reactListeners$"+us,Ix="__reactHandles$"+us;function Kr(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cm(t);t!==null;){if(n=t[Cn])return n;t=cm(t)}return e}t=n,n=t.parentNode}return null}function $o(t){return t=t[Cn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function lu(t){return t[wo]||null}var id=[],ki=-1;function kr(t){return{current:t}}function Se(t){0>ki||(t.current=id[ki],id[ki]=null,ki--)}function ve(t,e){ki++,id[ki]=t.current,t.current=e}var Cr={},Et=kr(Cr),Vt=kr(!1),ei=Cr;function Qi(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jt(t){return t=t.childContextTypes,t!=null}function Il(){Se(Vt),Se(Et)}function dm(t,e,n){if(Et.current!==Cr)throw Error(U(168));ve(Et,e),ve(Vt,n)}function ov(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,u1(t)||"Unknown",i));return Ne({},n,r)}function Cl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,ei=Et.current,ve(Et,t),ve(Vt,Vt.current),!0}function hm(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=ov(t,e,ei),r.__reactInternalMemoizedMergedChildContext=t,Se(Vt),Se(Et),ve(Et,t)):Se(Vt),ve(Vt,n)}var zn=null,uu=!1,dc=!1;function av(t){zn===null?zn=[t]:zn.push(t)}function Cx(t){uu=!0,av(t)}function Pr(){if(!dc&&zn!==null){dc=!0;var t=0,e=pe;try{var n=zn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,uu=!1}catch(i){throw zn!==null&&(zn=zn.slice(t+1)),Py(ch,Pr),i}finally{pe=e,dc=!1}}return null}var Pi=[],Di=0,Al=null,Nl=0,Jt=[],Zt=0,ti=null,Un=1,Bn="";function qr(t,e){Pi[Di++]=Nl,Pi[Di++]=Al,Al=t,Nl=e}function lv(t,e,n){Jt[Zt++]=Un,Jt[Zt++]=Bn,Jt[Zt++]=ti,ti=t;var r=Un;t=Bn;var i=32-fn(r)-1;r&=~(1<<i),n+=1;var s=32-fn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Un=1<<32-fn(e)+i|n<<i|r,Bn=s+t}else Un=1<<s|n<<i|r,Bn=t}function _h(t){t.return!==null&&(qr(t,1),lv(t,1,0))}function wh(t){for(;t===Al;)Al=Pi[--Di],Pi[Di]=null,Nl=Pi[--Di],Pi[Di]=null;for(;t===ti;)ti=Jt[--Zt],Jt[Zt]=null,Bn=Jt[--Zt],Jt[Zt]=null,Un=Jt[--Zt],Jt[Zt]=null}var qt=null,Bt=null,Ie=!1,hn=null;function uv(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Bt=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ti!==null?{id:Un,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Bt=null,!0):!1;default:return!1}}function sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function od(t){if(Ie){var e=Bt;if(e){var n=e;if(!fm(t,e)){if(sd(t))throw Error(U(418));e=gr(n.nextSibling);var r=qt;e&&fm(t,e)?uv(r,n):(t.flags=t.flags&-4097|2,Ie=!1,qt=t)}}else{if(sd(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ie=!1,qt=t}}}function pm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function ja(t){if(t!==qt)return!1;if(!Ie)return pm(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!td(t.type,t.memoizedProps)),e&&(e=Bt)){if(sd(t))throw cv(),Error(U(418));for(;e;)uv(t,e),e=gr(e.nextSibling)}if(pm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=qt?gr(t.stateNode.nextSibling):null;return!0}function cv(){for(var t=Bt;t;)t=gr(t.nextSibling)}function Gi(){Bt=qt=null,Ie=!1}function xh(t){hn===null?hn=[t]:hn.push(t)}var Ax=Xn.ReactCurrentBatchConfig;function Vs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ma(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mm(t){var e=t._init;return e(t._payload)}function dv(t){function e(x,E){if(t){var A=x.deletions;A===null?(x.deletions=[E],x.flags|=16):A.push(E)}}function n(x,E){if(!t)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function r(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function i(x,E){return x=wr(x,E),x.index=0,x.sibling=null,x}function s(x,E,A){return x.index=A,t?(A=x.alternate,A!==null?(A=A.index,A<E?(x.flags|=2,E):A):(x.flags|=2,E)):(x.flags|=1048576,E)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,E,A,V){return E===null||E.tag!==6?(E=vc(A,x.mode,V),E.return=x,E):(E=i(E,A),E.return=x,E)}function u(x,E,A,V){var O=A.type;return O===Ci?p(x,E,A.props.children,V,A.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===sr&&mm(O)===E.type)?(V=i(E,A.props),V.ref=Vs(x,E,A),V.return=x,V):(V=ul(A.type,A.key,A.props,null,x.mode,V),V.ref=Vs(x,E,A),V.return=x,V)}function d(x,E,A,V){return E===null||E.tag!==4||E.stateNode.containerInfo!==A.containerInfo||E.stateNode.implementation!==A.implementation?(E=_c(A,x.mode,V),E.return=x,E):(E=i(E,A.children||[]),E.return=x,E)}function p(x,E,A,V,O){return E===null||E.tag!==7?(E=Jr(A,x.mode,V,O),E.return=x,E):(E=i(E,A),E.return=x,E)}function g(x,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return E=vc(""+E,x.mode,A),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ia:return A=ul(E.type,E.key,E.props,null,x.mode,A),A.ref=Vs(x,null,E),A.return=x,A;case Ii:return E=_c(E,x.mode,A),E.return=x,E;case sr:var V=E._init;return g(x,V(E._payload),A)}if(zs(E)||Rs(E))return E=Jr(E,x.mode,A,null),E.return=x,E;Ma(x,E)}return null}function y(x,E,A,V){var O=E!==null?E.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return O!==null?null:l(x,E,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ia:return A.key===O?u(x,E,A,V):null;case Ii:return A.key===O?d(x,E,A,V):null;case sr:return O=A._init,y(x,E,O(A._payload),V)}if(zs(A)||Rs(A))return O!==null?null:p(x,E,A,V,null);Ma(x,A)}return null}function S(x,E,A,V,O){if(typeof V=="string"&&V!==""||typeof V=="number")return x=x.get(A)||null,l(E,x,""+V,O);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ia:return x=x.get(V.key===null?A:V.key)||null,u(E,x,V,O);case Ii:return x=x.get(V.key===null?A:V.key)||null,d(E,x,V,O);case sr:var M=V._init;return S(x,E,A,M(V._payload),O)}if(zs(V)||Rs(V))return x=x.get(A)||null,p(E,x,V,O,null);Ma(E,V)}return null}function b(x,E,A,V){for(var O=null,M=null,w=E,m=E=0,_=null;w!==null&&m<A.length;m++){w.index>m?(_=w,w=null):_=w.sibling;var T=y(x,w,A[m],V);if(T===null){w===null&&(w=_);break}t&&w&&T.alternate===null&&e(x,w),E=s(T,E,m),M===null?O=T:M.sibling=T,M=T,w=_}if(m===A.length)return n(x,w),Ie&&qr(x,m),O;if(w===null){for(;m<A.length;m++)w=g(x,A[m],V),w!==null&&(E=s(w,E,m),M===null?O=w:M.sibling=w,M=w);return Ie&&qr(x,m),O}for(w=r(x,w);m<A.length;m++)_=S(w,x,m,A[m],V),_!==null&&(t&&_.alternate!==null&&w.delete(_.key===null?m:_.key),E=s(_,E,m),M===null?O=_:M.sibling=_,M=_);return t&&w.forEach(function(N){return e(x,N)}),Ie&&qr(x,m),O}function C(x,E,A,V){var O=Rs(A);if(typeof O!="function")throw Error(U(150));if(A=O.call(A),A==null)throw Error(U(151));for(var M=O=null,w=E,m=E=0,_=null,T=A.next();w!==null&&!T.done;m++,T=A.next()){w.index>m?(_=w,w=null):_=w.sibling;var N=y(x,w,T.value,V);if(N===null){w===null&&(w=_);break}t&&w&&N.alternate===null&&e(x,w),E=s(N,E,m),M===null?O=N:M.sibling=N,M=N,w=_}if(T.done)return n(x,w),Ie&&qr(x,m),O;if(w===null){for(;!T.done;m++,T=A.next())T=g(x,T.value,V),T!==null&&(E=s(T,E,m),M===null?O=T:M.sibling=T,M=T);return Ie&&qr(x,m),O}for(w=r(x,w);!T.done;m++,T=A.next())T=S(w,x,m,T.value,V),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?m:T.key),E=s(T,E,m),M===null?O=T:M.sibling=T,M=T);return t&&w.forEach(function(k){return e(x,k)}),Ie&&qr(x,m),O}function R(x,E,A,V){if(typeof A=="object"&&A!==null&&A.type===Ci&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ia:e:{for(var O=A.key,M=E;M!==null;){if(M.key===O){if(O=A.type,O===Ci){if(M.tag===7){n(x,M.sibling),E=i(M,A.props.children),E.return=x,x=E;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===sr&&mm(O)===M.type){n(x,M.sibling),E=i(M,A.props),E.ref=Vs(x,M,A),E.return=x,x=E;break e}n(x,M);break}else e(x,M);M=M.sibling}A.type===Ci?(E=Jr(A.props.children,x.mode,V,A.key),E.return=x,x=E):(V=ul(A.type,A.key,A.props,null,x.mode,V),V.ref=Vs(x,E,A),V.return=x,x=V)}return o(x);case Ii:e:{for(M=A.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===A.containerInfo&&E.stateNode.implementation===A.implementation){n(x,E.sibling),E=i(E,A.children||[]),E.return=x,x=E;break e}else{n(x,E);break}else e(x,E);E=E.sibling}E=_c(A,x.mode,V),E.return=x,x=E}return o(x);case sr:return M=A._init,R(x,E,M(A._payload),V)}if(zs(A))return b(x,E,A,V);if(Rs(A))return C(x,E,A,V);Ma(x,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,E!==null&&E.tag===6?(n(x,E.sibling),E=i(E,A),E.return=x,x=E):(n(x,E),E=vc(A,x.mode,V),E.return=x,x=E),o(x)):n(x,E)}return R}var Yi=dv(!0),hv=dv(!1),Rl=kr(null),bl=null,Vi=null,Eh=null;function Th(){Eh=Vi=bl=null}function Sh(t){var e=Rl.current;Se(Rl),t._currentValue=e}function ad(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bi(t,e){bl=t,Eh=Vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(Eh!==t)if(t={context:t,memoizedValue:e,next:null},Vi===null){if(bl===null)throw Error(U(308));Vi=t,bl.dependencies={lanes:0,firstContext:t}}else Vi=Vi.next=t;return e}var Qr=null;function Ih(t){Qr===null?Qr=[t]:Qr.push(t)}function fv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ih(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Ch(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ih(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wn(t,n)}function rl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dh(t,n)}}function gm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kl(t,e,n,r){var i=t.updateQueue;or=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;o=0,p=d=u=null,l=s;do{var y=l.lane,S=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,C=l;switch(y=e,S=n,C.tag){case 1:if(b=C.payload,typeof b=="function"){g=b.call(S,g,y);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=C.payload,y=typeof b=="function"?b.call(S,g,y):b,y==null)break e;g=Ne({},g,y);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else S={eventTime:S,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=S,u=g):p=p.next=S,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(u=g),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ri|=o,t.lanes=o,t.memoizedState=g}}function ym(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var qo={},Nn=kr(qo),xo=kr(qo),Eo=kr(qo);function Gr(t){if(t===qo)throw Error(U(174));return t}function Ah(t,e){switch(ve(Eo,e),ve(xo,t),ve(Nn,qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uc(e,t)}Se(Nn),ve(Nn,e)}function Xi(){Se(Nn),Se(xo),Se(Eo)}function mv(t){Gr(Eo.current);var e=Gr(Nn.current),n=Uc(e,t.type);e!==n&&(ve(xo,t),ve(Nn,n))}function Nh(t){xo.current===t&&(Se(Nn),Se(xo))}var Ce=kr(0);function Pl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hc=[];function Rh(){for(var t=0;t<hc.length;t++)hc[t]._workInProgressVersionPrimary=null;hc.length=0}var il=Xn.ReactCurrentDispatcher,fc=Xn.ReactCurrentBatchConfig,ni=0,Ae=null,qe=null,Ye=null,Dl=!1,Js=!1,To=0,Nx=0;function gt(){throw Error(U(321))}function bh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function kh(t,e,n,r,i,s){if(ni=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,il.current=t===null||t.memoizedState===null?Px:Dx,t=n(r,i),Js){s=0;do{if(Js=!1,To=0,25<=s)throw Error(U(301));s+=1,Ye=qe=null,e.updateQueue=null,il.current=Vx,t=n(r,i)}while(Js)}if(il.current=Vl,e=qe!==null&&qe.next!==null,ni=0,Ye=qe=Ae=null,Dl=!1,e)throw Error(U(300));return t}function Ph(){var t=To!==0;return To=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ae.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function rn(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ye===null?Ae.memoizedState:Ye.next;if(e!==null)Ye=e,qe=t;else{if(t===null)throw Error(U(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ye===null?Ae.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function So(t,e){return typeof e=="function"?e(t):e}function pc(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,d=s;do{var p=d.lane;if((ni&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,Ae.lanes|=p,ri|=p}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=l,gn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,ri|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mc(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);gn(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function gv(){}function yv(t,e){var n=Ae,r=rn(),i=e(),s=!gn(r.memoizedState,i);if(s&&(r.memoizedState=i,Dt=!0),r=r.queue,Dh(wv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Io(9,_v.bind(null,n,r,i,e),void 0,null),Je===null)throw Error(U(349));ni&30||vv(n,e,i)}return i}function vv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _v(t,e,n,r){e.value=n,e.getSnapshot=r,xv(e)&&Ev(t)}function wv(t,e,n){return n(function(){xv(e)&&Ev(t)})}function xv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function Ev(t){var e=Wn(t,1);e!==null&&pn(e,t,1,-1)}function vm(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:t},e.queue=t,t=t.dispatch=kx.bind(null,Ae,t),[e.memoizedState,t]}function Io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tv(){return rn().memoizedState}function sl(t,e,n,r){var i=In();Ae.flags|=t,i.memoizedState=Io(1|e,n,void 0,r===void 0?null:r)}function cu(t,e,n,r){var i=rn();r=r===void 0?null:r;var s=void 0;if(qe!==null){var o=qe.memoizedState;if(s=o.destroy,r!==null&&bh(r,o.deps)){i.memoizedState=Io(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=Io(1|e,n,s,r)}function _m(t,e){return sl(8390656,8,t,e)}function Dh(t,e){return cu(2048,8,t,e)}function Sv(t,e){return cu(4,2,t,e)}function Iv(t,e){return cu(4,4,t,e)}function Cv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Av(t,e,n){return n=n!=null?n.concat([t]):null,cu(4,4,Cv.bind(null,e,t),n)}function Vh(){}function Nv(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rv(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bv(t,e,n){return ni&21?(gn(n,e)||(n=jy(),Ae.lanes|=n,ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function Rx(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=fc.transition;fc.transition={};try{t(!1),e()}finally{pe=n,fc.transition=r}}function kv(){return rn().memoizedState}function bx(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Pv(t))Dv(e,n);else if(n=fv(t,e,n,r),n!==null){var i=Ct();pn(n,t,r,i),Vv(n,e,r)}}function kx(t,e,n){var r=_r(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pv(t))Dv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,gn(l,o)){var u=e.interleaved;u===null?(i.next=i,Ih(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=fv(t,e,i,r),n!==null&&(i=Ct(),pn(n,t,r,i),Vv(n,e,r))}}function Pv(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Dv(t,e){Js=Dl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dh(t,n)}}var Vl={readContext:nn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},Px={readContext:nn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:_m,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sl(4194308,4,Cv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return sl(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bx.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:vm,useDebugValue:Vh,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=vm(!1),e=t[0];return t=Rx.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=In();if(Ie){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Je===null)throw Error(U(349));ni&30||vv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_m(wv.bind(null,r,s,t),[t]),r.flags|=2048,Io(9,_v.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=In(),e=Je.identifierPrefix;if(Ie){var n=Bn,r=Un;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=To++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Nx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Dx={readContext:nn,useCallback:Nv,useContext:nn,useEffect:Dh,useImperativeHandle:Av,useInsertionEffect:Sv,useLayoutEffect:Iv,useMemo:Rv,useReducer:pc,useRef:Tv,useState:function(){return pc(So)},useDebugValue:Vh,useDeferredValue:function(t){var e=rn();return bv(e,qe.memoizedState,t)},useTransition:function(){var t=pc(So)[0],e=rn().memoizedState;return[t,e]},useMutableSource:gv,useSyncExternalStore:yv,useId:kv,unstable_isNewReconciler:!1},Vx={readContext:nn,useCallback:Nv,useContext:nn,useEffect:Dh,useImperativeHandle:Av,useInsertionEffect:Sv,useLayoutEffect:Iv,useMemo:Rv,useReducer:mc,useRef:Tv,useState:function(){return mc(So)},useDebugValue:Vh,useDeferredValue:function(t){var e=rn();return qe===null?e.memoizedState=t:bv(e,qe.memoizedState,t)},useTransition:function(){var t=mc(So)[0],e=rn().memoizedState;return[t,e]},useMutableSource:gv,useSyncExternalStore:yv,useId:kv,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ld(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var du={isMounted:function(t){return(t=t._reactInternals)?ci(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=_r(t),s=$n(r,i);s.payload=e,n!=null&&(s.callback=n),e=yr(t,s,i),e!==null&&(pn(e,t,i,r),rl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=_r(t),s=$n(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=yr(t,s,i),e!==null&&(pn(e,t,i,r),rl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=_r(t),i=$n(n,r);i.tag=2,e!=null&&(i.callback=e),e=yr(t,i,r),e!==null&&(pn(e,t,r,n),rl(e,t,r))}};function wm(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!yo(n,r)||!yo(i,s):!0}function jv(t,e,n){var r=!1,i=Cr,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(i=jt(e)?ei:Et.current,r=e.contextTypes,s=(r=r!=null)?Qi(t,i):Cr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=du,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&du.enqueueReplaceState(e,e.state,null)}function ud(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ch(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nn(s):(s=jt(e)?ei:Et.current,i.context=Qi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ld(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&du.enqueueReplaceState(i,i.state,null),kl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ji(t,e){try{var n="",r=e;do n+=l1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jx=typeof WeakMap=="function"?WeakMap:Map;function Mv(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,wd=r),cd(t,e)},n}function Ov(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cd(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Em(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Gx.bind(null,t,e,n),e.then(t,t))}function Tm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var Mx=Xn.ReactCurrentOwner,Dt=!1;function It(t,e,n,r){e.child=t===null?hv(e,null,n,r):Yi(e,t.child,n,r)}function Im(t,e,n,r,i){n=n.render;var s=e.ref;return Bi(e,i),r=kh(t,e,n,r,s,i),n=Ph(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kn(t,e,i)):(Ie&&n&&_h(e),e.flags|=1,It(t,e,r,i),e.child)}function Cm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Lv(t,e,s,r,i)):(t=ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(o,r)&&t.ref===e.ref)return Kn(t,e,i)}return e.flags|=1,t=wr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Lv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(yo(s,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,Kn(t,e,i)}return dd(t,e,n,r,i)}function Fv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Mi,Ut),Ut|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Mi,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ve(Mi,Ut),Ut|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ve(Mi,Ut),Ut|=r;return It(t,e,i,n),e.child}function zv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dd(t,e,n,r,i){var s=jt(n)?ei:Et.current;return s=Qi(e,s),Bi(e,i),n=kh(t,e,n,r,s,i),r=Ph(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kn(t,e,i)):(Ie&&r&&_h(e),e.flags|=1,It(t,e,n,i),e.child)}function Am(t,e,n,r,i){if(jt(n)){var s=!0;Cl(e)}else s=!1;if(Bi(e,i),e.stateNode===null)ol(t,e),jv(e,n,r),ud(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=nn(d):(d=jt(n)?ei:Et.current,d=Qi(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&xm(e,o,r,d),or=!1;var y=e.memoizedState;o.state=y,kl(e,r,o,i),u=e.memoizedState,l!==r||y!==u||Vt.current||or?(typeof p=="function"&&(ld(e,n,p,r),u=e.memoizedState),(l=or||wm(e,n,l,r,y,u,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:cn(e.type,l),o.props=d,g=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=nn(u):(u=jt(n)?ei:Et.current,u=Qi(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||y!==u)&&xm(e,o,r,u),or=!1,y=e.memoizedState,o.state=y,kl(e,r,o,i);var b=e.memoizedState;l!==g||y!==b||Vt.current||or?(typeof S=="function"&&(ld(e,n,S,r),b=e.memoizedState),(d=or||wm(e,n,d,r,y,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return hd(t,e,n,r,s,i)}function hd(t,e,n,r,i,s){zv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hm(e,n,!1),Kn(t,e,s);r=e.stateNode,Mx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yi(e,t.child,null,s),e.child=Yi(e,null,l,s)):It(t,e,l,s),e.memoizedState=r.state,i&&hm(e,n,!0),e.child}function Uv(t){var e=t.stateNode;e.pendingContext?dm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dm(t,e.context,!1),Ah(t,e.containerInfo)}function Nm(t,e,n,r,i){return Gi(),xh(i),e.flags|=256,It(t,e,n,r),e.child}var fd={dehydrated:null,treeContext:null,retryLane:0};function pd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bv(t,e,n){var r=e.pendingProps,i=Ce.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(Ce,i&1),t===null)return od(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pu(o,r,0,null),t=Jr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pd(n),e.memoizedState=fd,t):jh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Ox(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=wr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=wr(l,s):(s=Jr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=fd,r}return s=t.child,t=s.sibling,r=wr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jh(t,e){return e=pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oa(t,e,n,r){return r!==null&&xh(r),Yi(e,t.child,null,n),t=jh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ox(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=gc(Error(U(422))),Oa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pu({mode:"visible",children:r.children},i,0,null),s=Jr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Yi(e,t.child,null,o),e.child.memoizedState=pd(o),e.memoizedState=fd,s);if(!(e.mode&1))return Oa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=gc(s,r,void 0),Oa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Dt||l){if(r=Je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wn(t,i),pn(r,t,i,-1))}return Uh(),r=gc(Error(U(421))),Oa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Yx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Bt=gr(i.nextSibling),qt=e,Ie=!0,hn=null,t!==null&&(Jt[Zt++]=Un,Jt[Zt++]=Bn,Jt[Zt++]=ti,Un=t.id,Bn=t.overflow,ti=e),e=jh(e,r.children),e.flags|=4096,e)}function Rm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ad(t.return,e,n)}function yc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $v(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(It(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rm(t,n,e);else if(t.tag===19)Rm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yc(e,!0,n,null,s);break;case"together":yc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ol(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Lx(t,e,n){switch(e.tag){case 3:Uv(e),Gi();break;case 5:mv(e);break;case 1:jt(e.type)&&Cl(e);break;case 4:Ah(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(Rl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?Bv(t,e,n):(ve(Ce,Ce.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);ve(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $v(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Fv(t,e,n)}return Kn(t,e,n)}var qv,md,Hv,Wv;qv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};md=function(){};Hv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Gr(Nn.current);var s=null;switch(n){case"input":i=Oc(t,i),r=Oc(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=zc(t,i),r=zc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sl)}Bc(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(uo.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(uo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&xe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Wv=function(t,e,n,r){n!==r&&(e.flags|=4)};function js(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fx(t,e,n){var r=e.pendingProps;switch(wh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return jt(e.type)&&Il(),yt(e),null;case 3:return r=e.stateNode,Xi(),Se(Vt),Se(Et),Rh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Td(hn),hn=null))),md(t,e),yt(e),null;case 5:Nh(e);var i=Gr(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Hv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return yt(e),null}if(t=Gr(Nn.current),ja(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Cn]=e,r[wo]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<Bs.length;i++)xe(Bs[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Lp(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":zp(r,s),xe("invalid",r)}Bc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),i=["children",""+l]):uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Ca(r),Fp(r,s,!0);break;case"textarea":Ca(r),Up(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[wo]=r,qv(t,e,!1,!1),e.stateNode=t;e:{switch(o=$c(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bs.length;i++)xe(Bs[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":Lp(t,r),i=Oc(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),xe("invalid",t);break;case"textarea":zp(t,r),i=zc(t,r),xe("invalid",t);break;default:i=r}Bc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Ty(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xy(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&co(t,u):typeof u=="number"&&co(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(uo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&xe("scroll",t):u!=null&&sh(t,s,u,o))}switch(n){case"input":Ca(t),Fp(t,r,!1);break;case"textarea":Ca(t),Up(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ir(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Li(t,!!r.multiple,s,!1):r.defaultValue!=null&&Li(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Sl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)Wv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Gr(Eo.current),Gr(Nn.current),ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(s=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return yt(e),null;case 13:if(Se(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Bt!==null&&e.mode&1&&!(e.flags&128))cv(),Gi(),e.flags|=98560,s=!1;else if(s=ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Cn]=e}else Gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),s=!1}else hn!==null&&(Td(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?We===0&&(We=3):Uh())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return Xi(),md(t,e),t===null&&vo(e.stateNode.containerInfo),yt(e),null;case 10:return Sh(e.type._context),yt(e),null;case 17:return jt(e.type)&&Il(),yt(e),null;case 19:if(Se(Ce),s=e.memoizedState,s===null)return yt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)js(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pl(t),o!==null){for(e.flags|=128,js(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ce,Ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&Oe()>Zi&&(e.flags|=128,r=!0,js(s,!1),e.lanes=4194304)}else{if(!r)if(t=Pl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),js(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return yt(e),null}else 2*Oe()-s.renderingStartTime>Zi&&n!==1073741824&&(e.flags|=128,r=!0,js(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Oe(),e.sibling=null,n=Ce.current,ve(Ce,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return zh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function zx(t,e){switch(wh(e),e.tag){case 1:return jt(e.type)&&Il(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(),Se(Vt),Se(Et),Rh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nh(e),null;case 13:if(Se(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ce),null;case 4:return Xi(),null;case 10:return Sh(e.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var La=!1,wt=!1,Ux=typeof WeakSet=="function"?WeakSet:Set,q=null;function ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function gd(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var bm=!1;function Bx(t,e){if(Zc=xl,t=Xy(),vh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,p=0,g=t,y=null;t:for(;;){for(var S;g!==n||i!==0&&g.nodeType!==3||(l=o+i),g!==s||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(S=g.firstChild)!==null;)y=g,g=S;for(;;){if(g===t)break t;if(y===n&&++d===i&&(l=o),y===s&&++p===r&&(u=o),(S=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ed={focusedElem:t,selectionRange:n},xl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,R=b.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?C:cn(e.type,C),R);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(V){Pe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=bm,bm=!1,b}function Zs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&gd(e,n,s)}i=i.next}while(i!==r)}}function hu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kv(t){var e=t.alternate;e!==null&&(t.alternate=null,Kv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[wo],delete e[rd],delete e[Sx],delete e[Ix])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qv(t){return t.tag===5||t.tag===3||t.tag===4}function km(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sl));else if(r!==4&&(t=t.child,t!==null))for(vd(t,e,n),t=t.sibling;t!==null;)vd(t,e,n),t=t.sibling}function _d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_d(t,e,n),t=t.sibling;t!==null;)_d(t,e,n),t=t.sibling}var rt=null,dn=!1;function rr(t,e,n){for(n=n.child;n!==null;)Gv(t,e,n),n=n.sibling}function Gv(t,e,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(iu,n)}catch{}switch(n.tag){case 5:wt||ji(n,e);case 6:var r=rt,i=dn;rt=null,rr(t,e,n),rt=r,dn=i,rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?cc(t.parentNode,n):t.nodeType===1&&cc(t,n),mo(t)):cc(rt,n.stateNode));break;case 4:r=rt,i=dn,rt=n.stateNode.containerInfo,dn=!0,rr(t,e,n),rt=r,dn=i;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gd(n,e,o),i=i.next}while(i!==r)}rr(t,e,n);break;case 1:if(!wt&&(ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,rr(t,e,n),wt=r):rr(t,e,n);break;default:rr(t,e,n)}}function Pm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ux),e.forEach(function(r){var i=Xx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:rt=l.stateNode,dn=!1;break e;case 3:rt=l.stateNode.containerInfo,dn=!0;break e;case 4:rt=l.stateNode.containerInfo,dn=!0;break e}l=l.return}if(rt===null)throw Error(U(160));Gv(s,o,i),rt=null,dn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Pe(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yv(e,t),e=e.sibling}function Yv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),Tn(t),r&4){try{Zs(3,t,t.return),hu(3,t)}catch(C){Pe(t,t.return,C)}try{Zs(5,t,t.return)}catch(C){Pe(t,t.return,C)}}break;case 1:un(e,t),Tn(t),r&512&&n!==null&&ji(n,n.return);break;case 5:if(un(e,t),Tn(t),r&512&&n!==null&&ji(n,n.return),t.flags&32){var i=t.stateNode;try{co(i,"")}catch(C){Pe(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&vy(i,s),$c(l,o);var d=$c(l,s);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?Ty(i,g):p==="dangerouslySetInnerHTML"?xy(i,g):p==="children"?co(i,g):sh(i,p,g,d)}switch(l){case"input":Lc(i,s);break;case"textarea":_y(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?Li(i,!!s.multiple,S,!1):y!==!!s.multiple&&(s.defaultValue!=null?Li(i,!!s.multiple,s.defaultValue,!0):Li(i,!!s.multiple,s.multiple?[]:"",!1))}i[wo]=s}catch(C){Pe(t,t.return,C)}}break;case 6:if(un(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Pe(t,t.return,C)}}break;case 3:if(un(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(C){Pe(t,t.return,C)}break;case 4:un(e,t),Tn(t);break;case 13:un(e,t),Tn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lh=Oe())),r&4&&Pm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(d=wt)||p,un(e,t),wt=d):un(e,t),Tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(g=q=p;q!==null;){switch(y=q,S=y.child,y.tag){case 0:case 11:case 14:case 15:Zs(4,y,y.return);break;case 1:ji(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(C){Pe(r,n,C)}}break;case 5:ji(y,y.return);break;case 22:if(y.memoizedState!==null){Vm(g);continue}}S!==null?(S.return=y,q=S):Vm(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{i=g.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ey("display",o))}catch(C){Pe(t,t.return,C)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(C){Pe(t,t.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:un(e,t),Tn(t),r&4&&Pm(t);break;case 21:break;default:un(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(co(i,""),r.flags&=-33);var s=km(t);_d(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=km(t);vd(t,l,o);break;default:throw Error(U(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $x(t,e,n){q=t,Xv(t)}function Xv(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||La;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||wt;l=La;var d=wt;if(La=o,(wt=u)&&!d)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?jm(i):u!==null?(u.return=o,q=u):jm(i);for(;s!==null;)q=s,Xv(s),s=s.sibling;q=i,La=l,wt=d}Dm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Dm(t)}}function Dm(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||hu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ym(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ym(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&mo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}wt||e.flags&512&&yd(e)}catch(y){Pe(e,e.return,y)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Vm(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function jm(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hu(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pe(e,i,u)}}var s=e.return;try{yd(e)}catch(u){Pe(e,s,u)}break;case 5:var o=e.return;try{yd(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var qx=Math.ceil,jl=Xn.ReactCurrentDispatcher,Mh=Xn.ReactCurrentOwner,tn=Xn.ReactCurrentBatchConfig,ue=0,Je=null,Ue=null,at=0,Ut=0,Mi=kr(0),We=0,Co=null,ri=0,fu=0,Oh=0,eo=null,kt=null,Lh=0,Zi=1/0,Fn=null,Ml=!1,wd=null,vr=null,Fa=!1,dr=null,Ol=0,to=0,xd=null,al=-1,ll=0;function Ct(){return ue&6?Oe():al!==-1?al:al=Oe()}function _r(t){return t.mode&1?ue&2&&at!==0?at&-at:Ax.transition!==null?(ll===0&&(ll=jy()),ll):(t=pe,t!==0||(t=window.event,t=t===void 0?16:By(t.type)),t):1}function pn(t,e,n,r){if(50<to)throw to=0,xd=null,Error(U(185));Uo(t,n,r),(!(ue&2)||t!==Je)&&(t===Je&&(!(ue&2)&&(fu|=n),We===4&&ur(t,at)),Mt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Zi=Oe()+500,uu&&Pr()))}function Mt(t,e){var n=t.callbackNode;A1(t,e);var r=wl(t,t===Je?at:0);if(r===0)n!==null&&qp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qp(n),e===1)t.tag===0?Cx(Mm.bind(null,t)):av(Mm.bind(null,t)),Ex(function(){!(ue&6)&&Pr()}),n=null;else{switch(My(r)){case 1:n=ch;break;case 4:n=Dy;break;case 16:n=_l;break;case 536870912:n=Vy;break;default:n=_l}n=s0(n,Jv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jv(t,e){if(al=-1,ll=0,ue&6)throw Error(U(327));var n=t.callbackNode;if($i()&&t.callbackNode!==n)return null;var r=wl(t,t===Je?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ll(t,r);else{e=r;var i=ue;ue|=2;var s=e0();(Je!==t||at!==e)&&(Fn=null,Zi=Oe()+500,Xr(t,e));do try{Kx();break}catch(l){Zv(t,l)}while(!0);Th(),jl.current=s,ue=i,Ue!==null?e=0:(Je=null,at=0,e=We)}if(e!==0){if(e===2&&(i=Qc(t),i!==0&&(r=i,e=Ed(t,i))),e===1)throw n=Co,Xr(t,0),ur(t,r),Mt(t,Oe()),n;if(e===6)ur(t,r);else{if(i=t.current.alternate,!(r&30)&&!Hx(i)&&(e=Ll(t,r),e===2&&(s=Qc(t),s!==0&&(r=s,e=Ed(t,s))),e===1))throw n=Co,Xr(t,0),ur(t,r),Mt(t,Oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Hr(t,kt,Fn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=Lh+500-Oe(),10<e)){if(wl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nd(Hr.bind(null,t,kt,Fn),e);break}Hr(t,kt,Fn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-fn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qx(r/1960))-r,10<r){t.timeoutHandle=nd(Hr.bind(null,t,kt,Fn),r);break}Hr(t,kt,Fn);break;case 5:Hr(t,kt,Fn);break;default:throw Error(U(329))}}}return Mt(t,Oe()),t.callbackNode===n?Jv.bind(null,t):null}function Ed(t,e){var n=eo;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=Ll(t,e),t!==2&&(e=kt,kt=n,e!==null&&Td(e)),t}function Td(t){kt===null?kt=t:kt.push.apply(kt,t)}function Hx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Oh,e&=~fu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function Mm(t){if(ue&6)throw Error(U(327));$i();var e=wl(t,0);if(!(e&1))return Mt(t,Oe()),null;var n=Ll(t,e);if(t.tag!==0&&n===2){var r=Qc(t);r!==0&&(e=r,n=Ed(t,r))}if(n===1)throw n=Co,Xr(t,0),ur(t,e),Mt(t,Oe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,kt,Fn),Mt(t,Oe()),null}function Fh(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Zi=Oe()+500,uu&&Pr())}}function ii(t){dr!==null&&dr.tag===0&&!(ue&6)&&$i();var e=ue;ue|=1;var n=tn.transition,r=pe;try{if(tn.transition=null,pe=1,t)return t()}finally{pe=r,tn.transition=n,ue=e,!(ue&6)&&Pr()}}function zh(){Ut=Mi.current,Se(Mi)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xx(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(wh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Il();break;case 3:Xi(),Se(Vt),Se(Et),Rh();break;case 5:Nh(r);break;case 4:Xi();break;case 13:Se(Ce);break;case 19:Se(Ce);break;case 10:Sh(r.type._context);break;case 22:case 23:zh()}n=n.return}if(Je=t,Ue=t=wr(t.current,null),at=Ut=e,We=0,Co=null,Oh=fu=ri=0,kt=eo=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Qr=null}return t}function Zv(t,e){do{var n=Ue;try{if(Th(),il.current=Vl,Dl){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dl=!1}if(ni=0,Ye=qe=Ae=null,Js=!1,To=0,Mh.current=null,n===null||n.return===null){We=1,Co=e,Ue=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=at,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Tm(o);if(S!==null){S.flags&=-257,Sm(S,o,l,s,e),S.mode&1&&Em(s,d,e),e=S,u=d;var b=e.updateQueue;if(b===null){var C=new Set;C.add(u),e.updateQueue=C}else b.add(u);break e}else{if(!(e&1)){Em(s,d,e),Uh();break e}u=Error(U(426))}}else if(Ie&&l.mode&1){var R=Tm(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Sm(R,o,l,s,e),xh(Ji(u,l));break e}}s=u=Ji(u,l),We!==4&&(We=2),eo===null?eo=[s]:eo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Mv(s,u,e);gm(s,x);break e;case 1:l=u;var E=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(vr===null||!vr.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=Ov(s,l,e);gm(s,V);break e}}s=s.return}while(s!==null)}n0(n)}catch(O){e=O,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function e0(){var t=jl.current;return jl.current=Vl,t===null?Vl:t}function Uh(){(We===0||We===3||We===2)&&(We=4),Je===null||!(ri&268435455)&&!(fu&268435455)||ur(Je,at)}function Ll(t,e){var n=ue;ue|=2;var r=e0();(Je!==t||at!==e)&&(Fn=null,Xr(t,e));do try{Wx();break}catch(i){Zv(t,i)}while(!0);if(Th(),ue=n,jl.current=r,Ue!==null)throw Error(U(261));return Je=null,at=0,We}function Wx(){for(;Ue!==null;)t0(Ue)}function Kx(){for(;Ue!==null&&!v1();)t0(Ue)}function t0(t){var e=i0(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?n0(t):Ue=e,Mh.current=null}function n0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zx(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ue=null;return}}else if(n=Fx(n,e,Ut),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);We===0&&(We=5)}function Hr(t,e,n){var r=pe,i=tn.transition;try{tn.transition=null,pe=1,Qx(t,e,n,r)}finally{tn.transition=i,pe=r}return null}function Qx(t,e,n,r){do $i();while(dr!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(N1(t,s),t===Je&&(Ue=Je=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fa||(Fa=!0,s0(_l,function(){return $i(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=tn.transition,tn.transition=null;var o=pe;pe=1;var l=ue;ue|=4,Mh.current=null,Bx(t,n),Yv(n,t),px(ed),xl=!!Zc,ed=Zc=null,t.current=n,$x(n),_1(),ue=l,pe=o,tn.transition=s}else t.current=n;if(Fa&&(Fa=!1,dr=t,Ol=i),s=t.pendingLanes,s===0&&(vr=null),E1(n.stateNode),Mt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ml)throw Ml=!1,t=wd,wd=null,t;return Ol&1&&t.tag!==0&&$i(),s=t.pendingLanes,s&1?t===xd?to++:(to=0,xd=t):to=0,Pr(),null}function $i(){if(dr!==null){var t=My(Ol),e=tn.transition,n=pe;try{if(tn.transition=null,pe=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,Ol=0,ue&6)throw Error(U(331));var i=ue;for(ue|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(q=d;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:Zs(8,p,s)}var g=p.child;if(g!==null)g.return=p,q=g;else for(;q!==null;){p=q;var y=p.sibling,S=p.return;if(Kv(p),p===d){q=null;break}if(y!==null){y.return=S,q=y;break}q=S}}}var b=s.alternate;if(b!==null){var C=b.child;if(C!==null){b.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zs(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,q=x;break e}q=s.return}}var E=t.current;for(q=E;q!==null;){o=q;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,q=A;else e:for(o=E;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hu(9,l)}}catch(O){Pe(l,l.return,O)}if(l===o){q=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,q=V;break e}q=l.return}}if(ue=i,Pr(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(iu,t)}catch{}r=!0}return r}finally{pe=n,tn.transition=e}}return!1}function Om(t,e,n){e=Ji(n,e),e=Mv(t,e,1),t=yr(t,e,1),e=Ct(),t!==null&&(Uo(t,1,e),Mt(t,e))}function Pe(t,e,n){if(t.tag===3)Om(t,t,n);else for(;e!==null;){if(e.tag===3){Om(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=Ji(n,t),t=Ov(e,t,1),e=yr(e,t,1),t=Ct(),e!==null&&(Uo(e,1,t),Mt(e,t));break}}e=e.return}}function Gx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(at&n)===n&&(We===4||We===3&&(at&130023424)===at&&500>Oe()-Lh?Xr(t,0):Oh|=n),Mt(t,e)}function r0(t,e){e===0&&(t.mode&1?(e=Ra,Ra<<=1,!(Ra&130023424)&&(Ra=4194304)):e=1);var n=Ct();t=Wn(t,e),t!==null&&(Uo(t,e,n),Mt(t,n))}function Yx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r0(t,n)}function Xx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),r0(t,n)}var i0;i0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,Lx(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ie&&e.flags&1048576&&lv(e,Nl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ol(t,e),t=e.pendingProps;var i=Qi(e,Et.current);Bi(e,n),i=kh(null,e,r,t,i,n);var s=Ph();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(s=!0,Cl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ch(e),i.updater=du,e.stateNode=i,i._reactInternals=e,ud(e,r,t,n),e=hd(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&_h(e),It(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ol(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Zx(r),t=cn(r,t),i){case 0:e=dd(null,e,r,t,n);break e;case 1:e=Am(null,e,r,t,n);break e;case 11:e=Im(null,e,r,t,n);break e;case 14:e=Cm(null,e,r,cn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),dd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),Am(t,e,r,i,n);case 3:e:{if(Uv(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,pv(t,e),kl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ji(Error(U(423)),e),e=Nm(t,e,r,n,i);break e}else if(r!==i){i=Ji(Error(U(424)),e),e=Nm(t,e,r,n,i);break e}else for(Bt=gr(e.stateNode.containerInfo.firstChild),qt=e,Ie=!0,hn=null,n=hv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===i){e=Kn(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return mv(e),t===null&&od(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,td(r,i)?o=null:s!==null&&td(r,s)&&(e.flags|=32),zv(t,e),It(t,e,o,n),e.child;case 6:return t===null&&od(e),null;case 13:return Bv(t,e,n);case 4:return Ah(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yi(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),Im(t,e,r,i,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ve(Rl,r._currentValue),r._currentValue=o,s!==null)if(gn(s.value,o)){if(s.children===i.children&&!Vt.current){e=Kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=$n(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ad(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ad(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bi(e,n),i=nn(i),r=r(i),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,i=cn(r,e.pendingProps),i=cn(r.type,i),Cm(t,e,r,i,n);case 15:return Lv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cn(r,i),ol(t,e),e.tag=1,jt(r)?(t=!0,Cl(e)):t=!1,Bi(e,n),jv(e,r,i),ud(e,r,i,n),hd(null,e,r,!0,t,n);case 19:return $v(t,e,n);case 22:return Fv(t,e,n)}throw Error(U(156,e.tag))};function s0(t,e){return Py(t,e)}function Jx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new Jx(t,e,n,r)}function Bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zx(t){if(typeof t=="function")return Bh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ah)return 11;if(t===lh)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ul(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Bh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ci:return Jr(n.children,i,s,e);case oh:o=8,i|=8;break;case Dc:return t=en(12,n,e,i|2),t.elementType=Dc,t.lanes=s,t;case Vc:return t=en(13,n,e,i),t.elementType=Vc,t.lanes=s,t;case jc:return t=en(19,n,e,i),t.elementType=jc,t.lanes=s,t;case my:return pu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fy:o=10;break e;case py:o=9;break e;case ah:o=11;break e;case lh:o=14;break e;case sr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=en(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Jr(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function pu(t,e,n,r){return t=en(22,t,r,e),t.elementType=my,t.lanes=n,t.stateNode={isHidden:!1},t}function vc(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function _c(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $h(t,e,n,r,i,s,o,l,u){return t=new eE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=en(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ch(s),t}function tE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ii,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function o0(t){if(!t)return Cr;t=t._reactInternals;e:{if(ci(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(jt(n))return ov(t,n,e)}return e}function a0(t,e,n,r,i,s,o,l,u){return t=$h(n,r,!0,t,i,s,o,l,u),t.context=o0(null),n=t.current,r=Ct(),i=_r(n),s=$n(r,i),s.callback=e??null,yr(n,s,i),t.current.lanes=i,Uo(t,i,r),Mt(t,r),t}function mu(t,e,n,r){var i=e.current,s=Ct(),o=_r(i);return n=o0(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(i,e,o),t!==null&&(pn(t,i,o,s),rl(t,i,o)),o}function Fl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qh(t,e){Lm(t,e),(t=t.alternate)&&Lm(t,e)}function nE(){return null}var l0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hh(t){this._internalRoot=t}gu.prototype.render=Hh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));mu(t,e,null,null)};gu.prototype.unmount=Hh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ii(function(){mu(null,t,null,null)}),e[Hn]=null}};function gu(t){this._internalRoot=t}gu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&Uy(t)}};function Wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fm(){}function rE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Fl(o);s.call(d)}}var o=a0(e,r,t,0,null,!1,!1,"",Fm);return t._reactRootContainer=o,t[Hn]=o.current,vo(t.nodeType===8?t.parentNode:t),ii(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Fl(u);l.call(d)}}var u=$h(t,0,!1,null,null,!1,!1,"",Fm);return t._reactRootContainer=u,t[Hn]=u.current,vo(t.nodeType===8?t.parentNode:t),ii(function(){mu(e,u,n,r)}),u}function vu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Fl(o);l.call(u)}}mu(e,o,t,i)}else o=rE(n,e,t,i,r);return Fl(o)}Oy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Us(e.pendingLanes);n!==0&&(dh(e,n|1),Mt(e,Oe()),!(ue&6)&&(Zi=Oe()+500,Pr()))}break;case 13:ii(function(){var r=Wn(t,1);if(r!==null){var i=Ct();pn(r,t,1,i)}}),qh(t,1)}};hh=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=Ct();pn(e,t,134217728,n)}qh(t,134217728)}};Ly=function(t){if(t.tag===13){var e=_r(t),n=Wn(t,e);if(n!==null){var r=Ct();pn(n,t,e,r)}qh(t,e)}};Fy=function(){return pe};zy=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Hc=function(t,e,n){switch(e){case"input":if(Lc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lu(r);if(!i)throw Error(U(90));yy(r),Lc(r,i)}}}break;case"textarea":_y(t,n);break;case"select":e=n.value,e!=null&&Li(t,!!n.multiple,e,!1)}};Cy=Fh;Ay=ii;var iE={usingClientEntryPoint:!1,Events:[$o,bi,lu,Sy,Iy,Fh]},Ms={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sE={bundleType:Ms.bundleType,version:Ms.version,rendererPackageName:Ms.rendererPackageName,rendererConfig:Ms.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=by(t),t===null?null:t.stateNode},findFiberByHostInstance:Ms.findFiberByHostInstance||nE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{iu=za.inject(sE),An=za}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iE;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wh(e))throw Error(U(200));return tE(t,e,null,n)};Wt.createRoot=function(t,e){if(!Wh(t))throw Error(U(299));var n=!1,r="",i=l0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$h(t,1,!1,null,null,n,!1,r,i),t[Hn]=e.current,vo(t.nodeType===8?t.parentNode:t),new Hh(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=by(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return ii(t)};Wt.hydrate=function(t,e,n){if(!yu(e))throw Error(U(200));return vu(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Wh(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=l0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=a0(e,null,t,1,n??null,i,!1,s,o),t[Hn]=e.current,vo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gu(e)};Wt.render=function(t,e,n){if(!yu(e))throw Error(U(200));return vu(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!yu(t))throw Error(U(40));return t._reactRootContainer?(ii(function(){vu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Wt.unstable_batchedUpdates=Fh;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return vu(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function u0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u0)}catch(t){console.error(t)}}u0(),uy.exports=Wt;var Oi=uy.exports,c0,zm=Oi;c0=zm.createRoot,zm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),De=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,...d},p)=>P.createElement("svg",{ref:p,...oE,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${aE(t)}`,l].join(" "),...d},[...e.map(([g,y])=>P.createElement(g,y)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=De("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=De("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=De("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=De("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=De("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=De("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=De("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=De("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=De("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=De("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gE=({children:t,currentPage:e,onPageChange:n})=>{const r=[{id:"dashboard",name:"대시보드",icon:h0},{id:"demand-register",name:"수요처 등록",icon:Sd},{id:"demand-list",name:"수요처 관리",icon:f0},{id:"performance-input",name:"실적 입력",icon:mE},{id:"performance-list",name:"실적 조회",icon:Ao}];return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[f.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:f.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"관리자 대시보드"})}),f.jsx("nav",{className:"mt-8",children:f.jsx("div",{className:"space-y-1 px-4",children:r.map(i=>{const s=i.icon;return f.jsxs("button",{onClick:()=>n(i.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${e===i.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[f.jsx(s,{className:"mr-3 h-5 w-5"}),i.name]},i.id)})})})]}),f.jsx("div",{className:"pl-64",children:f.jsx("main",{className:"p-8",children:t})})]})};function yE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return P.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const _u=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function cs(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Yh(t){return"nodeType"in t}function Lt(t){var e,n;return t?cs(t)?t:Yh(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Xh(t){const{Document:e}=Lt(t);return t instanceof e}function Ho(t){return cs(t)?!1:t instanceof Lt(t).HTMLElement}function y0(t){return t instanceof Lt(t).SVGElement}function ds(t){return t?cs(t)?t.document:Yh(t)?Xh(t)?t:Ho(t)||y0(t)?t.ownerDocument:document:document:document}const Pn=_u?P.useLayoutEffect:P.useEffect;function Jh(t){const e=P.useRef(t);return Pn(()=>{e.current=t}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function vE(){const t=P.useRef(null),e=P.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=P.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function No(t,e){e===void 0&&(e=[t]);const n=P.useRef(t);return Pn(()=>{n.current!==t&&(n.current=t)},e),n}function Wo(t,e){const n=P.useRef();return P.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Bl(t){const e=Jh(t),n=P.useRef(null),r=P.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Id(t){const e=P.useRef();return P.useEffect(()=>{e.current=t},[t]),e.current}let wc={};function Ko(t,e){return P.useMemo(()=>{if(e)return e;const n=wc[t]==null?0:wc[t]+1;return wc[t]=n,t+"-"+n},[t,e])}function v0(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[u,d]of l){const p=s[u];p!=null&&(s[u]=p+t*d)}return s},{...e})}}const qi=v0(1),$l=v0(-1);function _E(t){return"clientX"in t&&"clientY"in t}function Zh(t){if(!t)return!1;const{KeyboardEvent:e}=Lt(t.target);return e&&t instanceof e}function wE(t){if(!t)return!1;const{TouchEvent:e}=Lt(t.target);return e&&t instanceof e}function Cd(t){if(wE(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return _E(t)?{x:t.clientX,y:t.clientY}:null}const Ro=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ro.Translate.toString(t),Ro.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Bm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xE(t){return t.matches(Bm)?t:t.querySelector(Bm)}const EE={display:"none"};function TE(t){let{id:e,value:n}=t;return bt.createElement("div",{id:e,style:EE},n)}function SE(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return bt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function IE(){const[t,e]=P.useState("");return{announce:P.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const _0=P.createContext(null);function CE(t){const e=P.useContext(_0);P.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function AE(){const[t]=P.useState(()=>new Set),e=P.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[P.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const NE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},RE={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function bE(t){let{announcements:e=RE,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=NE}=t;const{announce:s,announcement:o}=IE(),l=Ko("DndLiveRegion"),[u,d]=P.useState(!1);if(P.useEffect(()=>{d(!0)},[]),CE(P.useMemo(()=>({onDragStart(g){let{active:y}=g;s(e.onDragStart({active:y}))},onDragMove(g){let{active:y,over:S}=g;e.onDragMove&&s(e.onDragMove({active:y,over:S}))},onDragOver(g){let{active:y,over:S}=g;s(e.onDragOver({active:y,over:S}))},onDragEnd(g){let{active:y,over:S}=g;s(e.onDragEnd({active:y,over:S}))},onDragCancel(g){let{active:y,over:S}=g;s(e.onDragCancel({active:y,over:S}))}}),[s,e])),!u)return null;const p=bt.createElement(bt.Fragment,null,bt.createElement(TE,{id:r,value:i.draggable}),bt.createElement(SE,{id:l,announcement:o}));return n?Oi.createPortal(p,n):p}var He;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(He||(He={}));function ql(){}function kE(t,e){return P.useMemo(()=>({sensor:t,options:{}}),[t,e])}function PE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return P.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const yn=Object.freeze({x:0,y:0});function DE(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function VE(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function jE(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function ME(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function $m(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const OE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=$m(e,e.left,e.top),s=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=DE($m(u),i);s.push({id:l,data:{droppableContainer:o,value:d}})}}return s.sort(VE)};function LE(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,l=s-n;if(r<i&&n<s){const u=e.width*e.height,d=t.width*t.height,p=o*l,g=p/(u+d-p);return Number(g.toFixed(4))}return 0}const FE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=LE(l,e);u>0&&i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(jE)};function zE(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function w0(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:yn}function UE(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const BE=UE(1);function $E(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function qE(t,e,n){const r=$E(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:l}=r,u=t.left-o-(1-i)*parseFloat(n),d=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?t.width/i:t.width,g=s?t.height/s:t.height;return{width:p,height:g,top:d,right:u+p,bottom:d+g,left:u}}const HE={ignoreTransform:!1};function hs(t,e){e===void 0&&(e=HE);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=Lt(t).getComputedStyle(t);d&&(n=qE(n,d,p))}const{top:r,left:i,width:s,height:o,bottom:l,right:u}=n;return{top:r,left:i,width:s,height:o,bottom:l,right:u}}function qm(t){return hs(t,{ignoreTransform:!0})}function WE(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function KE(t,e){return e===void 0&&(e=Lt(t).getComputedStyle(t)),e.position==="fixed"}function QE(t,e){e===void 0&&(e=Lt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function ef(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Xh(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Ho(i)||y0(i)||n.includes(i))return n;const s=Lt(t).getComputedStyle(i);return i!==t&&QE(i,s)&&n.push(i),KE(i,s)?n:r(i.parentNode)}return t?r(t):n}function x0(t){const[e]=ef(t,1);return e??null}function xc(t){return!_u||!t?null:cs(t)?t:Yh(t)?Xh(t)||t===ds(t).scrollingElement?window:Ho(t)?t:null:null}function E0(t){return cs(t)?t.scrollX:t.scrollLeft}function T0(t){return cs(t)?t.scrollY:t.scrollTop}function Ad(t){return{x:E0(t),y:T0(t)}}var Xe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Xe||(Xe={}));function S0(t){return!_u||!t?!1:t===document.scrollingElement}function I0(t){const e={x:0,y:0},n=S0(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const GE={x:.2,y:.2};function YE(t,e,n,r,i){let{top:s,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=GE);const{isTop:d,isBottom:p,isLeft:g,isRight:y}=I0(t),S={x:0,y:0},b={x:0,y:0},C={height:e.height*i.y,width:e.width*i.x};return!d&&s<=e.top+C.height?(S.y=Xe.Backward,b.y=r*Math.abs((e.top+C.height-s)/C.height)):!p&&u>=e.bottom-C.height&&(S.y=Xe.Forward,b.y=r*Math.abs((e.bottom-C.height-u)/C.height)),!y&&l>=e.right-C.width?(S.x=Xe.Forward,b.x=r*Math.abs((e.right-C.width-l)/C.width)):!g&&o<=e.left+C.width&&(S.x=Xe.Backward,b.x=r*Math.abs((e.left+C.width-o)/C.width)),{direction:S,speed:b}}function XE(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function C0(t){return t.reduce((e,n)=>qi(e,Ad(n)),yn)}function JE(t){return t.reduce((e,n)=>e+E0(n),0)}function ZE(t){return t.reduce((e,n)=>e+T0(n),0)}function eT(t,e){if(e===void 0&&(e=hs),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);x0(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const tT=[["x",["left","right"],JE],["y",["top","bottom"],ZE]];class tf{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ef(n),i=C0(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of tT)for(const u of o)Object.defineProperty(this,u,{get:()=>{const d=l(r),p=i[s]-d;return this.rect[u]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class no{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function nT(t){const{EventTarget:e}=Lt(t);return t instanceof e?t:ds(t)}function Ec(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Xt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Xt||(Xt={}));function Hm(t){t.preventDefault()}function rT(t){t.stopPropagation()}var he;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(he||(he={}));const A0={start:[he.Space,he.Enter],cancel:[he.Esc],end:[he.Space,he.Enter,he.Tab]},iT=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case he.Right:return{...n,x:n.x+25};case he.Left:return{...n,x:n.x-25};case he.Down:return{...n,y:n.y+25};case he.Up:return{...n,y:n.y-25}}};class N0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new no(ds(n)),this.windowListeners=new no(Lt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xt.Resize,this.handleCancel),this.windowListeners.add(Xt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&eT(r),n(yn)}handleKeyDown(e){if(Zh(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=A0,coordinateGetter:o=iT,scrollBehavior:l="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:yn;this.referenceCoordinates||(this.referenceCoordinates=p);const g=o(e,{active:n,context:r.current,currentCoordinates:p});if(g){const y=$l(g,p),S={x:0,y:0},{scrollableAncestors:b}=r.current;for(const C of b){const R=e.code,{isTop:x,isRight:E,isLeft:A,isBottom:V,maxScroll:O,minScroll:M}=I0(C),w=XE(C),m={x:Math.min(R===he.Right?w.right-w.width/2:w.right,Math.max(R===he.Right?w.left:w.left+w.width/2,g.x)),y:Math.min(R===he.Down?w.bottom-w.height/2:w.bottom,Math.max(R===he.Down?w.top:w.top+w.height/2,g.y))},_=R===he.Right&&!E||R===he.Left&&!A,T=R===he.Down&&!V||R===he.Up&&!x;if(_&&m.x!==g.x){const N=C.scrollLeft+y.x,k=R===he.Right&&N<=O.x||R===he.Left&&N>=M.x;if(k&&!y.y){C.scrollTo({left:N,behavior:l});return}k?S.x=C.scrollLeft-N:S.x=R===he.Right?C.scrollLeft-O.x:C.scrollLeft-M.x,S.x&&C.scrollBy({left:-S.x,behavior:l});break}else if(T&&m.y!==g.y){const N=C.scrollTop+y.y,k=R===he.Down&&N<=O.y||R===he.Up&&N>=M.y;if(k&&!y.x){C.scrollTo({top:N,behavior:l});return}k?S.y=C.scrollTop-N:S.y=R===he.Down?C.scrollTop-O.y:C.scrollTop-M.y,S.y&&C.scrollBy({top:-S.y,behavior:l});break}}this.handleMove(e,qi($l(g,this.referenceCoordinates),S))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}N0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=A0,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Wm(t){return!!(t&&"distance"in t)}function Km(t){return!!(t&&"delay"in t)}class nf{constructor(e,n,r){var i;r===void 0&&(r=nT(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=ds(o),this.documentListeners=new no(this.document),this.listeners=new no(r),this.windowListeners=new no(Lt(o)),this.initialCoordinates=(i=Cd(s))!=null?i:yn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Xt.Resize,this.handleCancel),this.windowListeners.add(Xt.DragStart,Hm),this.windowListeners.add(Xt.VisibilityChange,this.handleCancel),this.windowListeners.add(Xt.ContextMenu,Hm),this.documentListeners.add(Xt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Km(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Wm(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Xt.Click,rT,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xt.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const u=(n=Cd(e))!=null?n:yn,d=$l(i,u);if(!r&&l){if(Wm(l)){if(l.tolerance!=null&&Ec(d,l.tolerance))return this.handleCancel();if(Ec(d,l.distance))return this.handleStart()}if(Km(l)&&Ec(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===he.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const sT={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rf extends nf{constructor(e){const{event:n}=e,r=ds(n.target);super(e,sT,r)}}rf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const oT={move:{name:"mousemove"},end:{name:"mouseup"}};var Nd;(function(t){t[t.RightClick=2]="RightClick"})(Nd||(Nd={}));class aT extends nf{constructor(e){super(e,oT,ds(e.event.target))}}aT.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Nd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Tc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class lT extends nf{constructor(e){super(e,Tc)}static setup(){return window.addEventListener(Tc.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Tc.move.name,e)};function e(){}}}lT.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var ro;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ro||(ro={}));var Hl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Hl||(Hl={}));function uT(t){let{acceleration:e,activator:n=ro.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=Hl.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:p,delta:g,threshold:y}=t;const S=dT({delta:g,disabled:!s}),[b,C]=vE(),R=P.useRef({x:0,y:0}),x=P.useRef({x:0,y:0}),E=P.useMemo(()=>{switch(n){case ro.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case ro.DraggableRect:return i}},[n,i,u]),A=P.useRef(null),V=P.useCallback(()=>{const M=A.current;if(!M)return;const w=R.current.x*x.current.x,m=R.current.y*x.current.y;M.scrollBy(w,m)},[]),O=P.useMemo(()=>l===Hl.TreeOrder?[...d].reverse():d,[l,d]);P.useEffect(()=>{if(!s||!d.length||!E){C();return}for(const M of O){if((r==null?void 0:r(M))===!1)continue;const w=d.indexOf(M),m=p[w];if(!m)continue;const{direction:_,speed:T}=YE(M,m,E,e,y);for(const N of["x","y"])S[N][_[N]]||(T[N]=0,_[N]=0);if(T.x>0||T.y>0){C(),A.current=M,b(V,o),R.current=T,x.current=_;return}}R.current={x:0,y:0},x.current={x:0,y:0},C()},[e,V,r,C,s,o,JSON.stringify(E),JSON.stringify(S),b,d,O,p,JSON.stringify(y)])}const cT={x:{[Xe.Backward]:!1,[Xe.Forward]:!1},y:{[Xe.Backward]:!1,[Xe.Forward]:!1}};function dT(t){let{delta:e,disabled:n}=t;const r=Id(e);return Wo(i=>{if(n||!r||!i)return cT;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Xe.Backward]:i.x[Xe.Backward]||s.x===-1,[Xe.Forward]:i.x[Xe.Forward]||s.x===1},y:{[Xe.Backward]:i.y[Xe.Backward]||s.y===-1,[Xe.Forward]:i.y[Xe.Forward]||s.y===1}}},[n,e,r])}function hT(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Wo(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function fT(t,e){return P.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var bo;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(bo||(bo={}));var Rd;(function(t){t.Optimized="optimized"})(Rd||(Rd={}));const Qm=new Map;function pT(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=P.useState(null),{frequency:l,measure:u,strategy:d}=i,p=P.useRef(t),g=R(),y=No(g),S=P.useCallback(function(x){x===void 0&&(x=[]),!y.current&&o(E=>E===null?x:E.concat(x.filter(A=>!E.includes(A))))},[y]),b=P.useRef(null),C=Wo(x=>{if(g&&!n)return Qm;if(!x||x===Qm||p.current!==t||s!=null){const E=new Map;for(let A of t){if(!A)continue;if(s&&s.length>0&&!s.includes(A.id)&&A.rect.current){E.set(A.id,A.rect.current);continue}const V=A.node.current,O=V?new tf(u(V),V):null;A.rect.current=O,O&&E.set(A.id,O)}return E}return x},[t,s,n,g,u]);return P.useEffect(()=>{p.current=t},[t]),P.useEffect(()=>{g||S()},[n,g]),P.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),P.useEffect(()=>{g||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{S(),b.current=null},l))},[l,g,S,...r]),{droppableRects:C,measureDroppableContainers:S,measuringScheduled:s!=null};function R(){switch(d){case bo.Always:return!1;case bo.BeforeDragging:return n;default:return!n}}}function R0(t,e){return Wo(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function mT(t,e){return R0(t,e)}function gT(t){let{callback:e,disabled:n}=t;const r=Jh(e),i=P.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return P.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function wu(t){let{callback:e,disabled:n}=t;const r=Jh(e),i=P.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return P.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function yT(t){return new tf(hs(t),t)}function Gm(t,e,n){e===void 0&&(e=yT);const[r,i]=P.useState(null);function s(){i(u=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=u??n)!=null?d:null}const p=e(t);return JSON.stringify(u)===JSON.stringify(p)?u:p})}const o=gT({callback(u){if(t)for(const d of u){const{type:p,target:g}=d;if(p==="childList"&&g instanceof HTMLElement&&g.contains(t)){s();break}}}}),l=wu({callback:s});return Pn(()=>{s(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function vT(t){const e=R0(t);return w0(t,e)}const Ym=[];function _T(t){const e=P.useRef(t),n=Wo(r=>t?r&&r!==Ym&&t&&e.current&&t.parentNode===e.current.parentNode?r:ef(t):Ym,[t]);return P.useEffect(()=>{e.current=t},[t]),n}function wT(t){const[e,n]=P.useState(null),r=P.useRef(t),i=P.useCallback(s=>{const o=xc(s.target);o&&n(l=>l?(l.set(o,Ad(o)),new Map(l)):null)},[]);return P.useEffect(()=>{const s=r.current;if(t!==s){o(s);const l=t.map(u=>{const d=xc(u);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,Ad(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(u=>{const d=xc(u);d==null||d.removeEventListener("scroll",i)})}},[i,t]),P.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>qi(s,o),yn):C0(t):yn,[t,e])}function Xm(t,e){e===void 0&&(e=[]);const n=P.useRef(null);return P.useEffect(()=>{n.current=null},e),P.useEffect(()=>{const r=t!==yn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?$l(t,n.current):yn}function xT(t){P.useEffect(()=>{if(!_u)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function ET(t,e){return P.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function b0(t){return P.useMemo(()=>t?WE(t):null,[t])}const Jm=[];function TT(t,e){e===void 0&&(e=hs);const[n]=t,r=b0(n?Lt(n):null),[i,s]=P.useState(Jm);function o(){s(()=>t.length?t.map(u=>S0(u)?r:new tf(e(u),u)):Jm)}const l=wu({callback:o});return Pn(()=>{l==null||l.disconnect(),o(),t.forEach(u=>l==null?void 0:l.observe(u))},[t]),i}function ST(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Ho(e)?e:t}function IT(t){let{measure:e}=t;const[n,r]=P.useState(null),i=P.useCallback(d=>{for(const{target:p}of d)if(Ho(p)){r(g=>{const y=e(p);return g?{...g,width:y.width,height:y.height}:y});break}},[e]),s=wu({callback:i}),o=P.useCallback(d=>{const p=ST(d);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?e(p):null)},[e,s]),[l,u]=Bl(o);return P.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const CT=[{sensor:rf,options:{}},{sensor:N0,options:{}}],AT={current:{}},cl={draggable:{measure:qm},droppable:{measure:qm,strategy:bo.WhileDragging,frequency:Rd.Optimized},dragOverlay:{measure:hs}};class io extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const NT={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new io,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ql},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cl,measureDroppableContainers:ql,windowRect:null,measuringScheduled:!1},RT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ql,draggableNodes:new Map,over:null,measureDroppableContainers:ql},xu=P.createContext(RT),k0=P.createContext(NT);function bT(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new io}}}function kT(t,e){switch(e.type){case He.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case He.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case He.DragEnd:case He.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case He.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new io(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case He.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new io(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case He.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new io(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function PT(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=P.useContext(xu),s=Id(r),o=Id(n==null?void 0:n.id);return P.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!Zh(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[u.current,d.current]){if(!p)continue;const g=xE(p);if(g){g.focus();break}}})}},[r,e,i,o,s]),null}function DT(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function VT(t){return P.useMemo(()=>({draggable:{...cl.draggable,...t==null?void 0:t.draggable},droppable:{...cl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...cl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function jT(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=P.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Pn(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=n(d),g=w0(p,r);if(o||(g.x=0),l||(g.y=0),s.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const y=x0(d);y&&y.scrollBy({top:g.y,left:g.x})}},[e,o,l,r,n])}const P0=P.createContext({...yn,scaleX:1,scaleY:1});var ar;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ar||(ar={}));const MT=P.memo(function(e){var n,r,i,s;let{id:o,accessibility:l,autoScroll:u=!0,children:d,sensors:p=CT,collisionDetection:g=FE,measuring:y,modifiers:S,...b}=e;const C=P.useReducer(kT,void 0,bT),[R,x]=C,[E,A]=AE(),[V,O]=P.useState(ar.Uninitialized),M=V===ar.Initialized,{draggable:{active:w,nodes:m,translate:_},droppable:{containers:T}}=R,N=w!=null?m.get(w):null,k=P.useRef({initial:null,translated:null}),I=P.useMemo(()=>{var Fe;return w!=null?{id:w,data:(Fe=N==null?void 0:N.data)!=null?Fe:AT,rect:k}:null},[w,N]),ge=P.useRef(null),[$e,Ke]=P.useState(null),[_e,$]=P.useState(null),K=No(b,Object.values(b)),G=Ko("DndDescribedBy",o),fe=P.useMemo(()=>T.getEnabled(),[T]),X=VT(y),{droppableRects:F,measureDroppableContainers:ne,measuringScheduled:J}=pT(fe,{dragging:M,dependencies:[_.x,_.y],config:X.droppable}),Z=hT(m,w),Le=P.useMemo(()=>_e?Cd(_e):null,[_e]),Qt=Or(),Ze=mT(Z,X.draggable.measure);jT({activeNode:w!=null?m.get(w):null,config:Qt.layoutShiftCompensation,initialRect:Ze,measure:X.draggable.measure});const se=Gm(Z,X.draggable.measure,Ze),_n=Gm(Z?Z.parentElement:null),Rt=P.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:F,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),wn=T.getNodeFor((n=Rt.current.over)==null?void 0:n.id),Ft=IT({measure:X.dragOverlay.measure}),xn=(r=Ft.nodeRef.current)!=null?r:Z,jn=M?(i=Ft.rect)!=null?i:se:null,na=!!(Ft.nodeRef.current&&Ft.rect),ra=vT(na?null:se),fi=b0(xn?Lt(xn):null),Gt=_T(M?wn??Z:null),jr=TT(Gt),pi=DT(S,{transform:{x:_.x-ra.x,y:_.y-ra.y,scaleX:1,scaleY:1},activatorEvent:_e,active:I,activeNodeRect:se,containerNodeRect:_n,draggingNodeRect:jn,over:Rt.current.over,overlayNodeRect:Ft.rect,scrollableAncestors:Gt,scrollableAncestorRects:jr,windowRect:fi}),mi=Le?qi(Le,_):null,gi=wT(Gt),ia=Xm(gi),Qe=Xm(gi,[se]),be=qi(pi,ia),sn=jn?BE(jn,pi):null,Jn=I&&sn?g({active:I,collisionRect:sn,droppableRects:F,droppableContainers:fe,pointerCoordinates:mi}):null,_s=ME(Jn,"id"),[En,Zn]=P.useState(null),sa=na?pi:qi(pi,Qe),oa=zE(sa,(s=En==null?void 0:En.rect)!=null?s:null,se),Mr=P.useRef(null),aa=P.useCallback((Fe,et)=>{let{sensor:Ve,options:on}=et;if(ge.current==null)return;const tt=m.get(ge.current);if(!tt)return;const dt=Fe.nativeEvent,ht=new Ve({active:ge.current,activeNode:tt,event:dt,options:on,context:Rt,onAbort(ae){if(!m.get(ae))return;const{onDragAbort:ft}=K.current,Tt={id:ae};ft==null||ft(Tt),E({type:"onDragAbort",event:Tt})},onPending(ae,an,ft,Tt){if(!m.get(ae))return;const{onDragPending:Fr}=K.current,St={id:ae,constraint:an,initialCoordinates:ft,offset:Tt};Fr==null||Fr(St),E({type:"onDragPending",event:St})},onStart(ae){const an=ge.current;if(an==null)return;const ft=m.get(an);if(!ft)return;const{onDragStart:Tt}=K.current,Lr={activatorEvent:dt,active:{id:an,data:ft.data,rect:k}};Oi.unstable_batchedUpdates(()=>{Tt==null||Tt(Lr),O(ar.Initializing),x({type:He.DragStart,initialCoordinates:ae,active:an}),E({type:"onDragStart",event:Lr}),Ke(Mr.current),$(dt)})},onMove(ae){x({type:He.DragMove,coordinates:ae})},onEnd:Mn(He.DragEnd),onCancel:Mn(He.DragCancel)});Mr.current=ht;function Mn(ae){return async function(){const{active:ft,collisions:Tt,over:Lr,scrollAdjustedTranslate:Fr}=Rt.current;let St=null;if(ft&&Fr){const{cancelDrop:zr}=K.current;St={activatorEvent:dt,active:ft,collisions:Tt,delta:Fr,over:Lr},ae===He.DragEnd&&typeof zr=="function"&&await Promise.resolve(zr(St))&&(ae=He.DragCancel)}ge.current=null,Oi.unstable_batchedUpdates(()=>{x({type:ae}),O(ar.Uninitialized),Zn(null),Ke(null),$(null),Mr.current=null;const zr=ae===He.DragEnd?"onDragEnd":"onDragCancel";if(St){const ws=K.current[zr];ws==null||ws(St),E({type:zr,event:St})}})}}},[m]),ju=P.useCallback((Fe,et)=>(Ve,on)=>{const tt=Ve.nativeEvent,dt=m.get(on);if(ge.current!==null||!dt||tt.dndKit||tt.defaultPrevented)return;const ht={active:dt};Fe(Ve,et.options,ht)===!0&&(tt.dndKit={capturedBy:et.sensor},ge.current=on,aa(Ve,et))},[m,aa]),yi=fT(p,ju);xT(p),Pn(()=>{se&&V===ar.Initializing&&O(ar.Initialized)},[se,V]),P.useEffect(()=>{const{onDragMove:Fe}=K.current,{active:et,activatorEvent:Ve,collisions:on,over:tt}=Rt.current;if(!et||!Ve)return;const dt={active:et,activatorEvent:Ve,collisions:on,delta:{x:be.x,y:be.y},over:tt};Oi.unstable_batchedUpdates(()=>{Fe==null||Fe(dt),E({type:"onDragMove",event:dt})})},[be.x,be.y]),P.useEffect(()=>{const{active:Fe,activatorEvent:et,collisions:Ve,droppableContainers:on,scrollAdjustedTranslate:tt}=Rt.current;if(!Fe||ge.current==null||!et||!tt)return;const{onDragOver:dt}=K.current,ht=on.get(_s),Mn=ht&&ht.rect.current?{id:ht.id,rect:ht.rect.current,data:ht.data,disabled:ht.disabled}:null,ae={active:Fe,activatorEvent:et,collisions:Ve,delta:{x:tt.x,y:tt.y},over:Mn};Oi.unstable_batchedUpdates(()=>{Zn(Mn),dt==null||dt(ae),E({type:"onDragOver",event:ae})})},[_s]),Pn(()=>{Rt.current={activatorEvent:_e,active:I,activeNode:Z,collisionRect:sn,collisions:Jn,droppableRects:F,draggableNodes:m,draggingNode:xn,draggingNodeRect:jn,droppableContainers:T,over:En,scrollableAncestors:Gt,scrollAdjustedTranslate:be},k.current={initial:jn,translated:sn}},[I,Z,Jn,sn,m,xn,jn,F,T,En,Gt,be]),uT({...Qt,delta:_,draggingRect:sn,pointerCoordinates:mi,scrollableAncestors:Gt,scrollableAncestorRects:jr});const la=P.useMemo(()=>({active:I,activeNode:Z,activeNodeRect:se,activatorEvent:_e,collisions:Jn,containerNodeRect:_n,dragOverlay:Ft,draggableNodes:m,droppableContainers:T,droppableRects:F,over:En,measureDroppableContainers:ne,scrollableAncestors:Gt,scrollableAncestorRects:jr,measuringConfiguration:X,measuringScheduled:J,windowRect:fi}),[I,Z,se,_e,Jn,_n,Ft,m,T,F,En,ne,Gt,jr,X,J,fi]),ua=P.useMemo(()=>({activatorEvent:_e,activators:yi,active:I,activeNodeRect:se,ariaDescribedById:{draggable:G},dispatch:x,draggableNodes:m,over:En,measureDroppableContainers:ne}),[_e,yi,I,se,x,G,m,En,ne]);return bt.createElement(_0.Provider,{value:A},bt.createElement(xu.Provider,{value:ua},bt.createElement(k0.Provider,{value:la},bt.createElement(P0.Provider,{value:oa},d)),bt.createElement(PT,{disabled:(l==null?void 0:l.restoreFocus)===!1})),bt.createElement(bE,{...l,hiddenTextDescribedById:G}));function Or(){const Fe=($e==null?void 0:$e.autoScrollEnabled)===!1,et=typeof u=="object"?u.enabled===!1:u===!1,Ve=M&&!Fe&&!et;return typeof u=="object"?{...u,enabled:Ve}:{enabled:Ve}}}),OT=P.createContext(null),Zm="button",LT="Draggable";function FT(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Ko(LT),{activators:o,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:p,draggableNodes:g,over:y}=P.useContext(xu),{role:S=Zm,roleDescription:b="draggable",tabIndex:C=0}=i??{},R=(u==null?void 0:u.id)===e,x=P.useContext(R?P0:OT),[E,A]=Bl(),[V,O]=Bl(),M=ET(o,e),w=No(n);Pn(()=>(g.set(e,{id:e,key:s,node:E,activatorNode:V,data:w}),()=>{const _=g.get(e);_&&_.key===s&&g.delete(e)}),[g,e]);const m=P.useMemo(()=>({role:S,tabIndex:C,"aria-disabled":r,"aria-pressed":R&&S===Zm?!0:void 0,"aria-roledescription":b,"aria-describedby":p.draggable}),[r,S,C,R,b,p.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:m,isDragging:R,listeners:r?void 0:M,node:E,over:y,setNodeRef:A,setActivatorNodeRef:O,transform:x}}function zT(){return P.useContext(k0)}const UT="Droppable",BT={timeout:25};function $T(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Ko(UT),{active:o,dispatch:l,over:u,measureDroppableContainers:d}=P.useContext(xu),p=P.useRef({disabled:n}),g=P.useRef(!1),y=P.useRef(null),S=P.useRef(null),{disabled:b,updateMeasurementsFor:C,timeout:R}={...BT,...i},x=No(C??r),E=P.useCallback(()=>{if(!g.current){g.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),S.current=null},R)},[R]),A=wu({callback:E,disabled:b||!o}),V=P.useCallback((m,_)=>{A&&(_&&(A.unobserve(_),g.current=!1),m&&A.observe(m))},[A]),[O,M]=Bl(V),w=No(e);return P.useEffect(()=>{!A||!O.current||(A.disconnect(),g.current=!1,A.observe(O.current))},[O,A]),P.useEffect(()=>(l({type:He.RegisterDroppable,element:{id:r,key:s,disabled:n,node:O,rect:y,data:w}}),()=>l({type:He.UnregisterDroppable,key:s,id:r})),[r]),P.useEffect(()=>{n!==p.current.disabled&&(l({type:He.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,l]),{active:o,rect:y,isOver:(u==null?void 0:u.id)===r,node:O,over:u,setNodeRef:M}}function sf(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function qT(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function Ua(t){return t!==null&&t>=0}function HT(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function WT(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const D0=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=sf(e,r,n),o=e[i],l=s[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Ba={scaleX:1,scaleY:1},KT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const l=(e=s[n])!=null?e:r;if(!l)return null;if(i===n){const d=s[o];return d?{x:0,y:n<o?d.top+d.height-(l.top+l.height):d.top-l.top,...Ba}:null}const u=QT(s,i,n);return i>n&&i<=o?{x:0,y:-l.height-u,...Ba}:i<n&&i>=o?{x:0,y:l.height+u,...Ba}:{x:0,y:0,...Ba}};function QT(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const V0="Sortable",j0=bt.createContext({activeIndex:-1,containerId:V0,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:D0,disabled:{draggable:!1,droppable:!1}});function GT(t){let{children:e,id:n,items:r,strategy:i=D0,disabled:s=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:p}=zT(),g=Ko(V0,n),y=l.rect!==null,S=P.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),b=o!=null,C=o?S.indexOf(o.id):-1,R=d?S.indexOf(d.id):-1,x=P.useRef(S),E=!HT(S,x.current),A=R!==-1&&C===-1||E,V=WT(s);Pn(()=>{E&&b&&p(S)},[E,S,b,p]),P.useEffect(()=>{x.current=S},[S]);const O=P.useMemo(()=>({activeIndex:C,containerId:g,disabled:V,disableTransforms:A,items:S,overIndex:R,useDragOverlay:y,sortedRects:qT(S,u),strategy:i}),[C,g,V.draggable,V.droppable,A,S,R,u,y,i]);return bt.createElement(j0.Provider,{value:O},e)}const YT=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return sf(n,r,i).indexOf(e)},XT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:l,previousContainerId:u,transition:d}=t;return!d||!r||l!==s&&i===o?!1:n?!0:o!==i&&e===u},JT={duration:200,easing:"ease"},M0="transform",ZT=Ro.Transition.toString({property:M0,duration:0,easing:"linear"}),eS={roleDescription:"sortable"};function tS(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=P.useState(null),l=P.useRef(n);return Pn(()=>{if(!e&&n!==l.current&&r.current){const u=i.current;if(u){const d=hs(r.current,{ignoreTransform:!0}),p={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(p.x||p.y)&&o(p)}}n!==l.current&&(l.current=n)},[e,n,r,i]),P.useEffect(()=>{s&&o(null)},[s]),s}function nS(t){let{animateLayoutChanges:e=XT,attributes:n,disabled:r,data:i,getNewIndex:s=YT,id:o,strategy:l,resizeObserverConfig:u,transition:d=JT}=t;const{items:p,containerId:g,activeIndex:y,disabled:S,disableTransforms:b,sortedRects:C,overIndex:R,useDragOverlay:x,strategy:E}=P.useContext(j0),A=rS(r,S),V=p.indexOf(o),O=P.useMemo(()=>({sortable:{containerId:g,index:V,items:p},...i}),[g,i,V,p]),M=P.useMemo(()=>p.slice(p.indexOf(o)),[p,o]),{rect:w,node:m,isOver:_,setNodeRef:T}=$T({id:o,data:O,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...u}}),{active:N,activatorEvent:k,activeNodeRect:I,attributes:ge,setNodeRef:$e,listeners:Ke,isDragging:_e,over:$,setActivatorNodeRef:K,transform:G}=FT({id:o,data:O,attributes:{...eS,...n},disabled:A.draggable}),fe=yE(T,$e),X=!!N,F=X&&!b&&Ua(y)&&Ua(R),ne=!x&&_e,J=ne&&F?G:null,Le=F?J??(l??E)({rects:C,activeNodeRect:I,activeIndex:y,overIndex:R,index:V}):null,Qt=Ua(y)&&Ua(R)?s({id:o,items:p,activeIndex:y,overIndex:R}):V,Ze=N==null?void 0:N.id,se=P.useRef({activeId:Ze,items:p,newIndex:Qt,containerId:g}),_n=p!==se.current.items,Rt=e({active:N,containerId:g,isDragging:_e,isSorting:X,id:o,index:V,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),wn=tS({disabled:!Rt,index:V,node:m,rect:w});return P.useEffect(()=>{X&&se.current.newIndex!==Qt&&(se.current.newIndex=Qt),g!==se.current.containerId&&(se.current.containerId=g),p!==se.current.items&&(se.current.items=p)},[X,Qt,g,p]),P.useEffect(()=>{if(Ze===se.current.activeId)return;if(Ze!=null&&se.current.activeId==null){se.current.activeId=Ze;return}const xn=setTimeout(()=>{se.current.activeId=Ze},50);return()=>clearTimeout(xn)},[Ze]),{active:N,activeIndex:y,attributes:ge,data:O,rect:w,index:V,newIndex:Qt,items:p,isOver:_,isSorting:X,isDragging:_e,listeners:Ke,node:m,overIndex:R,over:$,setNodeRef:fe,setActivatorNodeRef:K,setDroppableNodeRef:T,setDraggableNodeRef:$e,transform:wn??Le,transition:Ft()};function Ft(){if(wn||_n&&se.current.newIndex===V)return ZT;if(!(ne&&!Zh(k)||!d)&&(X||Rt))return Ro.Transition.toString({...d,property:M0})}}function rS(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}he.Down,he.Right,he.Up,he.Left;var eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},L0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,p=s>>2,g=(s&3)<<4|l>>4;let y=(l&15)<<2|d>>6,S=d&63;u||(S=64,o||(y=64)),r.push(n[p],n[g],n[y],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||g==null)throw new sS;const y=s<<2|l>>4;if(r.push(y),d!==64){const S=l<<4&240|d>>2;if(r.push(S),g!==64){const b=d<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oS=function(t){const e=O0(t);return L0.encodeByteArray(e,!0)},Wl=function(t){return oS(t).replace(/\./g,"")},aS=function(t){try{return L0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=()=>lS().__FIREBASE_DEFAULTS__,cS=()=>{if(typeof process>"u"||typeof eg>"u")return;const t=eg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aS(t[1]);return e&&JSON.parse(e)},of=()=>{try{return uS()||cS()||dS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hS=t=>{var e,n;return(n=(e=of())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fS=t=>{const e=hS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},F0=()=>{var t;return(t=of())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wl(JSON.stringify(n)),Wl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yS(){var t;const e=(t=of())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vS(){return!yS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _S(){try{return typeof indexedDB=="object"}catch{return!1}}function wS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="FirebaseError";class fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xS,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z0.prototype.create)}}class z0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ES(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new fs(i,l,r)}}function ES(t,e){return t.replace(TS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TS=/\{\$([^}]+)}/g;function bd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tg(s)&&tg(o)){if(!bd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class ko{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CS(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IS(t){return t===Wr?void 0:t}function CS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const NS={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},RS=le.INFO,bS={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},kS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bS[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class U0{constructor(e){this.name=e,this._logLevel=RS,this._logHandler=kS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const PS=(t,e)=>e.some(n=>t instanceof n);let ng,rg;function DS(){return ng||(ng=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VS(){return rg||(rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,kd=new WeakMap,$0=new WeakMap,Sc=new WeakMap,af=new WeakMap;function jS(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&B0.set(n,t)}).catch(()=>{}),af.set(e,t),e}function MS(t){if(kd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kd.set(t,e)}let Pd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OS(t){Pd=t(Pd)}function LS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ic(this),e,...n);return $0.set(r,e.sort?e.sort():[e]),xr(r)}:VS().includes(t)?function(...e){return t.apply(Ic(this),e),xr(B0.get(this))}:function(...e){return xr(t.apply(Ic(this),e))}}function FS(t){return typeof t=="function"?LS(t):(t instanceof IDBTransaction&&MS(t),PS(t,DS())?new Proxy(t,Pd):t)}function xr(t){if(t instanceof IDBRequest)return jS(t);if(Sc.has(t))return Sc.get(t);const e=FS(t);return e!==t&&(Sc.set(t,e),af.set(e,t)),e}const Ic=t=>af.get(t);function zS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=xr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xr(o.result),u.oldVersion,u.newVersion,xr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const US=["get","getKey","getAll","getAllKeys","count"],BS=["put","add","delete","clear"],Cc=new Map;function ig(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cc.get(e))return Cc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=BS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||US.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return Cc.set(e,s),s}OS(t=>({...t,get:(e,n,r)=>ig(e,n)||t.get(e,n,r),has:(e,n)=>!!ig(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dd="@firebase/app",sg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new U0("@firebase/app"),HS="@firebase/app-compat",WS="@firebase/analytics-compat",KS="@firebase/analytics",QS="@firebase/app-check-compat",GS="@firebase/app-check",YS="@firebase/auth",XS="@firebase/auth-compat",JS="@firebase/database",ZS="@firebase/data-connect",eI="@firebase/database-compat",tI="@firebase/functions",nI="@firebase/functions-compat",rI="@firebase/installations",iI="@firebase/installations-compat",sI="@firebase/messaging",oI="@firebase/messaging-compat",aI="@firebase/performance",lI="@firebase/performance-compat",uI="@firebase/remote-config",cI="@firebase/remote-config-compat",dI="@firebase/storage",hI="@firebase/storage-compat",fI="@firebase/firestore",pI="@firebase/vertexai-preview",mI="@firebase/firestore-compat",gI="firebase",yI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="[DEFAULT]",vI={[Dd]:"fire-core",[HS]:"fire-core-compat",[KS]:"fire-analytics",[WS]:"fire-analytics-compat",[GS]:"fire-app-check",[QS]:"fire-app-check-compat",[YS]:"fire-auth",[XS]:"fire-auth-compat",[JS]:"fire-rtdb",[ZS]:"fire-data-connect",[eI]:"fire-rtdb-compat",[tI]:"fire-fn",[nI]:"fire-fn-compat",[rI]:"fire-iid",[iI]:"fire-iid-compat",[sI]:"fire-fcm",[oI]:"fire-fcm-compat",[aI]:"fire-perf",[lI]:"fire-perf-compat",[uI]:"fire-rc",[cI]:"fire-rc-compat",[dI]:"fire-gcs",[hI]:"fire-gcs-compat",[fI]:"fire-fst",[mI]:"fire-fst-compat",[pI]:"fire-vertex","fire-js":"fire-js",[gI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,_I=new Map,jd=new Map;function og(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ql(t){const e=t.name;if(jd.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;jd.set(e,t);for(const n of Kl.values())og(n,t);for(const n of _I.values())og(n,t);return!0}function wI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new z0("app","Firebase",xI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=yI;function q0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Er.create("bad-app-name",{appName:String(i)});if(n||(n=F0()),!n)throw Er.create("no-options");const s=Kl.get(i);if(s){if(bd(n,s.options)&&bd(r,s.config))return s;throw Er.create("duplicate-app",{appName:i})}const o=new AS(i);for(const u of jd.values())o.addComponent(u);const l=new EI(n,r,o);return Kl.set(i,l),l}function SI(t=Vd){const e=Kl.get(t);if(!e&&t===Vd&&F0())return q0();if(!e)throw Er.create("no-app",{appName:t});return e}function Hi(t,e,n){var r;let i=(r=vI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(l.join(" "));return}Ql(new ko(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebase-heartbeat-database",CI=1,Po="firebase-heartbeat-store";let Ac=null;function H0(){return Ac||(Ac=zS(II,CI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Po)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),Ac}async function AI(t){try{const n=(await H0()).transaction(Po),r=await n.objectStore(Po).get(W0(t));return await n.done,r}catch(e){if(e instanceof fs)Qn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function ag(t,e){try{const r=(await H0()).transaction(Po,"readwrite");await r.objectStore(Po).put(e,W0(t)),await r.done}catch(n){if(n instanceof fs)Qn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function W0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=1024,RI=30*24*60*60*1e3;class bI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=RI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lg(),{heartbeatsToSend:r,unsentEntries:i}=kI(this._heartbeatsCache.heartbeats),s=Wl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Qn.warn(n),""}}}function lg(){return new Date().toISOString().substring(0,10)}function kI(t,e=NI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ug(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ug(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _S()?wS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ag(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ag(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ug(t){return Wl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){Ql(new ko("platform-logger",e=>new $S(e),"PRIVATE")),Ql(new ko("heartbeat",e=>new bI(e),"PRIVATE")),Hi(Dd,sg,t),Hi(Dd,sg,"esm2017"),Hi("fire-js","")}DI("");var cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,K0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,m){function _(){}_.prototype=m.prototype,w.D=m.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(T,N,k){for(var I=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)I[ge-2]=arguments[ge];return m.prototype[N].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,m,_){_||(_=0);var T=Array(16);if(typeof m=="string")for(var N=0;16>N;++N)T[N]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(N=0;16>N;++N)T[N]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=w.g[0],_=w.g[1],N=w.g[2];var k=w.g[3],I=m+(k^_&(N^k))+T[0]+3614090360&4294967295;m=_+(I<<7&4294967295|I>>>25),I=k+(N^m&(_^N))+T[1]+3905402710&4294967295,k=m+(I<<12&4294967295|I>>>20),I=N+(_^k&(m^_))+T[2]+606105819&4294967295,N=k+(I<<17&4294967295|I>>>15),I=_+(m^N&(k^m))+T[3]+3250441966&4294967295,_=N+(I<<22&4294967295|I>>>10),I=m+(k^_&(N^k))+T[4]+4118548399&4294967295,m=_+(I<<7&4294967295|I>>>25),I=k+(N^m&(_^N))+T[5]+1200080426&4294967295,k=m+(I<<12&4294967295|I>>>20),I=N+(_^k&(m^_))+T[6]+2821735955&4294967295,N=k+(I<<17&4294967295|I>>>15),I=_+(m^N&(k^m))+T[7]+4249261313&4294967295,_=N+(I<<22&4294967295|I>>>10),I=m+(k^_&(N^k))+T[8]+1770035416&4294967295,m=_+(I<<7&4294967295|I>>>25),I=k+(N^m&(_^N))+T[9]+2336552879&4294967295,k=m+(I<<12&4294967295|I>>>20),I=N+(_^k&(m^_))+T[10]+4294925233&4294967295,N=k+(I<<17&4294967295|I>>>15),I=_+(m^N&(k^m))+T[11]+2304563134&4294967295,_=N+(I<<22&4294967295|I>>>10),I=m+(k^_&(N^k))+T[12]+1804603682&4294967295,m=_+(I<<7&4294967295|I>>>25),I=k+(N^m&(_^N))+T[13]+4254626195&4294967295,k=m+(I<<12&4294967295|I>>>20),I=N+(_^k&(m^_))+T[14]+2792965006&4294967295,N=k+(I<<17&4294967295|I>>>15),I=_+(m^N&(k^m))+T[15]+1236535329&4294967295,_=N+(I<<22&4294967295|I>>>10),I=m+(N^k&(_^N))+T[1]+4129170786&4294967295,m=_+(I<<5&4294967295|I>>>27),I=k+(_^N&(m^_))+T[6]+3225465664&4294967295,k=m+(I<<9&4294967295|I>>>23),I=N+(m^_&(k^m))+T[11]+643717713&4294967295,N=k+(I<<14&4294967295|I>>>18),I=_+(k^m&(N^k))+T[0]+3921069994&4294967295,_=N+(I<<20&4294967295|I>>>12),I=m+(N^k&(_^N))+T[5]+3593408605&4294967295,m=_+(I<<5&4294967295|I>>>27),I=k+(_^N&(m^_))+T[10]+38016083&4294967295,k=m+(I<<9&4294967295|I>>>23),I=N+(m^_&(k^m))+T[15]+3634488961&4294967295,N=k+(I<<14&4294967295|I>>>18),I=_+(k^m&(N^k))+T[4]+3889429448&4294967295,_=N+(I<<20&4294967295|I>>>12),I=m+(N^k&(_^N))+T[9]+568446438&4294967295,m=_+(I<<5&4294967295|I>>>27),I=k+(_^N&(m^_))+T[14]+3275163606&4294967295,k=m+(I<<9&4294967295|I>>>23),I=N+(m^_&(k^m))+T[3]+4107603335&4294967295,N=k+(I<<14&4294967295|I>>>18),I=_+(k^m&(N^k))+T[8]+1163531501&4294967295,_=N+(I<<20&4294967295|I>>>12),I=m+(N^k&(_^N))+T[13]+2850285829&4294967295,m=_+(I<<5&4294967295|I>>>27),I=k+(_^N&(m^_))+T[2]+4243563512&4294967295,k=m+(I<<9&4294967295|I>>>23),I=N+(m^_&(k^m))+T[7]+1735328473&4294967295,N=k+(I<<14&4294967295|I>>>18),I=_+(k^m&(N^k))+T[12]+2368359562&4294967295,_=N+(I<<20&4294967295|I>>>12),I=m+(_^N^k)+T[5]+4294588738&4294967295,m=_+(I<<4&4294967295|I>>>28),I=k+(m^_^N)+T[8]+2272392833&4294967295,k=m+(I<<11&4294967295|I>>>21),I=N+(k^m^_)+T[11]+1839030562&4294967295,N=k+(I<<16&4294967295|I>>>16),I=_+(N^k^m)+T[14]+4259657740&4294967295,_=N+(I<<23&4294967295|I>>>9),I=m+(_^N^k)+T[1]+2763975236&4294967295,m=_+(I<<4&4294967295|I>>>28),I=k+(m^_^N)+T[4]+1272893353&4294967295,k=m+(I<<11&4294967295|I>>>21),I=N+(k^m^_)+T[7]+4139469664&4294967295,N=k+(I<<16&4294967295|I>>>16),I=_+(N^k^m)+T[10]+3200236656&4294967295,_=N+(I<<23&4294967295|I>>>9),I=m+(_^N^k)+T[13]+681279174&4294967295,m=_+(I<<4&4294967295|I>>>28),I=k+(m^_^N)+T[0]+3936430074&4294967295,k=m+(I<<11&4294967295|I>>>21),I=N+(k^m^_)+T[3]+3572445317&4294967295,N=k+(I<<16&4294967295|I>>>16),I=_+(N^k^m)+T[6]+76029189&4294967295,_=N+(I<<23&4294967295|I>>>9),I=m+(_^N^k)+T[9]+3654602809&4294967295,m=_+(I<<4&4294967295|I>>>28),I=k+(m^_^N)+T[12]+3873151461&4294967295,k=m+(I<<11&4294967295|I>>>21),I=N+(k^m^_)+T[15]+530742520&4294967295,N=k+(I<<16&4294967295|I>>>16),I=_+(N^k^m)+T[2]+3299628645&4294967295,_=N+(I<<23&4294967295|I>>>9),I=m+(N^(_|~k))+T[0]+4096336452&4294967295,m=_+(I<<6&4294967295|I>>>26),I=k+(_^(m|~N))+T[7]+1126891415&4294967295,k=m+(I<<10&4294967295|I>>>22),I=N+(m^(k|~_))+T[14]+2878612391&4294967295,N=k+(I<<15&4294967295|I>>>17),I=_+(k^(N|~m))+T[5]+4237533241&4294967295,_=N+(I<<21&4294967295|I>>>11),I=m+(N^(_|~k))+T[12]+1700485571&4294967295,m=_+(I<<6&4294967295|I>>>26),I=k+(_^(m|~N))+T[3]+2399980690&4294967295,k=m+(I<<10&4294967295|I>>>22),I=N+(m^(k|~_))+T[10]+4293915773&4294967295,N=k+(I<<15&4294967295|I>>>17),I=_+(k^(N|~m))+T[1]+2240044497&4294967295,_=N+(I<<21&4294967295|I>>>11),I=m+(N^(_|~k))+T[8]+1873313359&4294967295,m=_+(I<<6&4294967295|I>>>26),I=k+(_^(m|~N))+T[15]+4264355552&4294967295,k=m+(I<<10&4294967295|I>>>22),I=N+(m^(k|~_))+T[6]+2734768916&4294967295,N=k+(I<<15&4294967295|I>>>17),I=_+(k^(N|~m))+T[13]+1309151649&4294967295,_=N+(I<<21&4294967295|I>>>11),I=m+(N^(_|~k))+T[4]+4149444226&4294967295,m=_+(I<<6&4294967295|I>>>26),I=k+(_^(m|~N))+T[11]+3174756917&4294967295,k=m+(I<<10&4294967295|I>>>22),I=N+(m^(k|~_))+T[2]+718787259&4294967295,N=k+(I<<15&4294967295|I>>>17),I=_+(k^(N|~m))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+N&4294967295,w.g[3]=w.g[3]+k&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var _=m-this.blockSize,T=this.B,N=this.h,k=0;k<m;){if(N==0)for(;k<=_;)i(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<m;)if(T[N++]=w.charCodeAt(k++),N==this.blockSize){i(this,T),N=0;break}}else for(;k<m;)if(T[N++]=w[k++],N==this.blockSize){i(this,T),N=0;break}}this.h=N,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var _=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=_&255,_/=256;for(this.u(w),w=Array(16),m=_=0;4>m;++m)for(var T=0;32>T;T+=8)w[_++]=this.g[m]>>>T&255;return w};function s(w,m){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=m(w)}function o(w,m){this.h=m;for(var _=[],T=!0,N=w.length-1;0<=N;N--){var k=w[N]|0;T&&k==m||(_[N]=k,T=!1)}this.g=_}var l={};function u(w){return-128<=w&&128>w?s(w,function(m){return new o([m|0],0>m?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return R(d(-w));for(var m=[],_=1,T=0;w>=_;T++)m[T]=w/_|0,_*=4294967296;return new o(m,0)}function p(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return R(p(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(m,8)),T=g,N=0;N<w.length;N+=8){var k=Math.min(8,w.length-N),I=parseInt(w.substring(N,N+k),m);8>k?(k=d(Math.pow(m,k)),T=T.j(k).add(d(I))):(T=T.j(_),T=T.add(d(I)))}return T}var g=u(0),y=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-R(this).m();for(var w=0,m=1,_=0;_<this.g.length;_++){var T=this.i(_);w+=(0<=T?T:4294967296+T)*m,m*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(C(this))return"-"+R(this).toString(w);for(var m=d(Math.pow(w,6)),_=this,T="";;){var N=V(_,m).g;_=x(_,N.j(m));var k=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=N,b(_))return k+T;for(;6>k.length;)k="0"+k;T=k+T}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function C(w){return w.h==-1}t.l=function(w){return w=x(this,w),C(w)?-1:b(w)?0:1};function R(w){for(var m=w.g.length,_=[],T=0;T<m;T++)_[T]=~w.g[T];return new o(_,~w.h).add(y)}t.abs=function(){return C(this)?R(this):this},t.add=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],T=0,N=0;N<=m;N++){var k=T+(this.i(N)&65535)+(w.i(N)&65535),I=(k>>>16)+(this.i(N)>>>16)+(w.i(N)>>>16);T=I>>>16,k&=65535,I&=65535,_[N]=I<<16|k}return new o(_,_[_.length-1]&-2147483648?-1:0)};function x(w,m){return w.add(R(m))}t.j=function(w){if(b(this)||b(w))return g;if(C(this))return C(w)?R(this).j(R(w)):R(R(this).j(w));if(C(w))return R(this.j(R(w)));if(0>this.l(S)&&0>w.l(S))return d(this.m()*w.m());for(var m=this.g.length+w.g.length,_=[],T=0;T<2*m;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var N=0;N<w.g.length;N++){var k=this.i(T)>>>16,I=this.i(T)&65535,ge=w.i(N)>>>16,$e=w.i(N)&65535;_[2*T+2*N]+=I*$e,E(_,2*T+2*N),_[2*T+2*N+1]+=k*$e,E(_,2*T+2*N+1),_[2*T+2*N+1]+=I*ge,E(_,2*T+2*N+1),_[2*T+2*N+2]+=k*ge,E(_,2*T+2*N+2)}for(T=0;T<m;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=m;T<2*m;T++)_[T]=0;return new o(_,0)};function E(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function A(w,m){this.g=w,this.h=m}function V(w,m){if(b(m))throw Error("division by zero");if(b(w))return new A(g,g);if(C(w))return m=V(R(w),m),new A(R(m.g),R(m.h));if(C(m))return m=V(w,R(m)),new A(R(m.g),m.h);if(30<w.g.length){if(C(w)||C(m))throw Error("slowDivide_ only works with positive integers.");for(var _=y,T=m;0>=T.l(w);)_=O(_),T=O(T);var N=M(_,1),k=M(T,1);for(T=M(T,2),_=M(_,2);!b(T);){var I=k.add(T);0>=I.l(w)&&(N=N.add(_),k=I),T=M(T,1),_=M(_,1)}return m=x(w,N.j(m)),new A(N,m)}for(N=g;0<=w.l(m);){for(_=Math.max(1,Math.floor(w.m()/m.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),k=d(_),I=k.j(m);C(I)||0<I.l(w);)_-=T,k=d(_),I=k.j(m);b(k)&&(k=y),N=N.add(k),w=x(w,I)}return new A(N,w)}t.A=function(w){return V(this,w).h},t.and=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],T=0;T<m;T++)_[T]=this.i(T)&w.i(T);return new o(_,this.h&w.h)},t.or=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],T=0;T<m;T++)_[T]=this.i(T)|w.i(T);return new o(_,this.h|w.h)},t.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],T=0;T<m;T++)_[T]=this.i(T)^w.i(T);return new o(_,this.h^w.h)};function O(w){for(var m=w.g.length+1,_=[],T=0;T<m;T++)_[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(_,w.h)}function M(w,m){var _=m>>5;m%=32;for(var T=w.g.length-_,N=[],k=0;k<T;k++)N[k]=0<m?w.i(k+_)>>>m|w.i(k+_+1)<<32-m:w.i(k+_);return new o(N,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Zr=o}).apply(typeof cg<"u"?cg:typeof self<"u"?self:typeof window<"u"?window:{});var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q0,$s,G0,dl,Md,Y0,X0,J0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,h){return a==Array.prototype||a==Object.prototype||(a[c]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $a=="object"&&$a];for(var c=0;c<a.length;++c){var h=a[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var h=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var D=a[v];if(!(D in h))break e;h=h[D]}a=a[a.length-1],v=h[a],c=c(v),c!=v&&c!=null&&e(h,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var h=0,v=!1,D={next:function(){if(!v&&h<a.length){var j=h++;return{value:c(j,a[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function p(a,c,h){return a.call.apply(a.bind,arguments)}function g(a,c,h){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),a.apply(c,D)}}return function(){return a.apply(c,arguments)}}function y(a,c,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,y.apply(null,arguments)}function S(a,c){var h=Array.prototype.slice.call(arguments,1);return function(){var v=h.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function b(a,c){function h(){}h.prototype=c.prototype,a.aa=c.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(v,D,j){for(var B=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)B[ye-2]=arguments[ye];return c.prototype[D].apply(v,B)}}function C(a){const c=a.length;if(0<c){const h=Array(c);for(let v=0;v<c;v++)h[v]=a[v];return h}return[]}function R(a,c){for(let h=1;h<arguments.length;h++){const v=arguments[h];if(u(v)){const D=a.length||0,j=v.length||0;a.length=D+j;for(let B=0;B<j;B++)a[D+B]=v[B]}else a.push(v)}}class x{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var O=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function M(a,c,h){for(const v in a)c.call(h,a[v],v,a)}function w(a,c){for(const h in a)c.call(void 0,a[h],h,a)}function m(a){const c={};for(const h in a)c[h]=a[h];return c}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,c){let h,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(h in v)a[h]=v[h];for(let j=0;j<_.length;j++)h=_[j],Object.prototype.hasOwnProperty.call(v,h)&&(a[h]=v[h])}}function N(a){var c=1;a=a.split(":");const h=[];for(;0<c&&a.length;)h.push(a.shift()),c--;return a.length&&h.push(a.join(":")),h}function k(a){l.setTimeout(()=>{throw a},0)}function I(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class ge{constructor(){this.h=this.g=null}add(c,h){const v=$e.get();v.set(c,h),this.h?this.h.next=v:this.g=v,this.h=v}}var $e=new x(()=>new Ke,a=>a.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,$=!1,K=new ge,G=()=>{const a=l.Promise.resolve(void 0);_e=()=>{a.then(fe)}};var fe=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){k(h)}var c=$e;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}$=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return a}();function J(a,c){if(F.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(O){e:{try{V(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else h=="mouseover"?c=a.fromElement:h=="mouseout"&&(c=a.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Z[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&J.aa.h.call(this)}}b(J,F);var Z={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Qt=0;function Ze(a,c,h,v,D){this.listener=a,this.proxy=null,this.src=c,this.type=h,this.capture=!!v,this.ha=D,this.key=++Qt,this.da=this.fa=!1}function se(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _n(a){this.src=a,this.g={},this.h=0}_n.prototype.add=function(a,c,h,v,D){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var B=wn(a,c,v,D);return-1<B?(c=a[B],h||(c.fa=!1)):(c=new Ze(c,this.src,j,!!v,D),c.fa=h,a.push(c)),c};function Rt(a,c){var h=c.type;if(h in a.g){var v=a.g[h],D=Array.prototype.indexOf.call(v,c,void 0),j;(j=0<=D)&&Array.prototype.splice.call(v,D,1),j&&(se(c),a.g[h].length==0&&(delete a.g[h],a.h--))}}function wn(a,c,h,v){for(var D=0;D<a.length;++D){var j=a[D];if(!j.da&&j.listener==c&&j.capture==!!h&&j.ha==v)return D}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),xn={};function jn(a,c,h,v,D){if(Array.isArray(c)){for(var j=0;j<c.length;j++)jn(a,c[j],h,v,D);return null}return h=ia(h),a&&a[Le]?a.K(c,h,d(v)?!!v.capture:!!v,D):na(a,c,h,!1,v,D)}function na(a,c,h,v,D,j){if(!c)throw Error("Invalid event type");var B=d(D)?!!D.capture:!!D,ye=mi(a);if(ye||(a[Ft]=ye=new _n(a)),h=ye.add(c,h,v,B,j),h.proxy)return h;if(v=ra(),h.proxy=v,v.src=a,v.listener=h,a.addEventListener)ne||(D=B),D===void 0&&(D=!1),a.addEventListener(c.toString(),v,D);else if(a.attachEvent)a.attachEvent(jr(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return h}function ra(){function a(h){return c.call(a.src,a.listener,h)}const c=pi;return a}function fi(a,c,h,v,D){if(Array.isArray(c))for(var j=0;j<c.length;j++)fi(a,c[j],h,v,D);else v=d(v)?!!v.capture:!!v,h=ia(h),a&&a[Le]?(a=a.i,c=String(c).toString(),c in a.g&&(j=a.g[c],h=wn(j,h,v,D),-1<h&&(se(j[h]),Array.prototype.splice.call(j,h,1),j.length==0&&(delete a.g[c],a.h--)))):a&&(a=mi(a))&&(c=a.g[c.toString()],a=-1,c&&(a=wn(c,h,v,D)),(h=-1<a?c[a]:null)&&Gt(h))}function Gt(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Le])Rt(c.i,a);else{var h=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(h,v,a.capture):c.detachEvent?c.detachEvent(jr(h),v):c.addListener&&c.removeListener&&c.removeListener(v),(h=mi(c))?(Rt(h,a),h.h==0&&(h.src=null,c[Ft]=null)):se(a)}}}function jr(a){return a in xn?xn[a]:xn[a]="on"+a}function pi(a,c){if(a.da)a=!0;else{c=new J(c,this);var h=a.listener,v=a.ha||a.src;a.fa&&Gt(a),a=h.call(v,c)}return a}function mi(a){return a=a[Ft],a instanceof _n?a:null}var gi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ia(a){return typeof a=="function"?a:(a[gi]||(a[gi]=function(c){return a.handleEvent(c)}),a[gi])}function Qe(){X.call(this),this.i=new _n(this),this.M=this,this.F=null}b(Qe,X),Qe.prototype[Le]=!0,Qe.prototype.removeEventListener=function(a,c,h,v){fi(this,a,c,h,v)};function be(a,c){var h,v=a.F;if(v)for(h=[];v;v=v.F)h.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new F(c,a);else if(c instanceof F)c.target=c.target||a;else{var D=c;c=new F(v,a),T(c,D)}if(D=!0,h)for(var j=h.length-1;0<=j;j--){var B=c.g=h[j];D=sn(B,v,!0,c)&&D}if(B=c.g=a,D=sn(B,v,!0,c)&&D,D=sn(B,v,!1,c)&&D,h)for(j=0;j<h.length;j++)B=c.g=h[j],D=sn(B,v,!1,c)&&D}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var h=a.g[c],v=0;v<h.length;v++)se(h[v]);delete a.g[c],a.h--}}this.F=null},Qe.prototype.K=function(a,c,h,v){return this.i.add(String(a),c,!1,h,v)},Qe.prototype.L=function(a,c,h,v){return this.i.add(String(a),c,!0,h,v)};function sn(a,c,h,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,j=0;j<c.length;++j){var B=c[j];if(B&&!B.da&&B.capture==h){var ye=B.listener,nt=B.ha||B.src;B.fa&&Rt(a.i,B),D=ye.call(nt,v)!==!1&&D}}return D&&!v.defaultPrevented}function Jn(a,c,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function _s(a){a.g=Jn(()=>{a.g=null,a.i&&(a.i=!1,_s(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class En extends X{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:_s(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(a){X.call(this),this.h=a,this.g={}}b(Zn,X);var sa=[];function oa(a){M(a.g,function(c,h){this.g.hasOwnProperty(h)&&Gt(c)},a),a.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),oa(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mr=l.JSON.stringify,aa=l.JSON.parse,ju=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function yi(){}yi.prototype.h=null;function la(a){return a.h||(a.h=a.i())}function ua(){}var Or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fe(){F.call(this,"d")}b(Fe,F);function et(){F.call(this,"c")}b(et,F);var Ve={},on=null;function tt(){return on=on||new Qe}Ve.La="serverreachability";function dt(a){F.call(this,Ve.La,a)}b(dt,F);function ht(a){const c=tt();be(c,new dt(c))}Ve.STAT_EVENT="statevent";function Mn(a,c){F.call(this,Ve.STAT_EVENT,a),this.stat=c}b(Mn,F);function ae(a){const c=tt();be(c,new Mn(c,a))}Ve.Ma="timingevent";function an(a,c){F.call(this,Ve.Ma,a),this.size=c}b(an,F);function ft(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Tt(){this.g=!0}Tt.prototype.xa=function(){this.g=!1};function Lr(a,c,h,v,D,j){a.info(function(){if(a.g)if(j)for(var B="",ye=j.split("&"),nt=0;nt<ye.length;nt++){var ce=ye[nt].split("=");if(1<ce.length){var pt=ce[0];ce=ce[1];var mt=pt.split("_");B=2<=mt.length&&mt[1]=="type"?B+(pt+"="+ce+"&"):B+(pt+"=redacted&")}}else B=null;else B=j;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+c+`
`+h+`
`+B})}function Fr(a,c,h,v,D,j,B){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+c+`
`+h+`
`+j+" "+B})}function St(a,c,h,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+ws(a,h)+(v?" "+v:"")})}function zr(a,c){a.info(function(){return"TIMEOUT: "+c})}Tt.prototype.info=function(){};function ws(a,c){if(!a.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var v=h[a];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return Mr(h)}catch{return c}}var ca={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mu;function da(){}b(da,yi),da.prototype.g=function(){return new XMLHttpRequest},da.prototype.i=function(){return{}},Mu=new da;function er(a,c,h,v){this.j=a,this.i=c,this.l=h,this.R=v||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qf}function Qf(){this.i=null,this.g="",this.h=!1}var Gf={},Ou={};function Lu(a,c,h){a.L=1,a.v=ma(On(c)),a.m=h,a.P=!0,Yf(a,null)}function Yf(a,c){a.F=Date.now(),ha(a),a.A=On(a.v);var h=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),cp(h.i,"t",v),a.C=0,h=a.j.J,a.h=new Qf,a.g=Np(a.j,h?c:null,!a.m),0<a.O&&(a.M=new En(y(a.Y,a,a.g),a.O)),c=a.U,h=a.g,v=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(sa[0]=D.toString()),D=sa);for(var j=0;j<D.length;j++){var B=jn(h,D[j],v||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),ht(),Lr(a.i,a.u,a.A,a.l,a.R,a.m)}er.prototype.ca=function(a){a=a.target;const c=this.M;c&&Ln(a)==3?c.j():this.Y(a)},er.prototype.Y=function(a){try{if(a==this.g)e:{const mt=Ln(this.g);var c=this.g.Ba();const wi=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||yp(this.g)))){this.J||mt!=4||c==7||(c==8||0>=wi?ht(3):ht(2)),Fu(this);var h=this.g.Z();this.X=h;t:if(Xf(this)){var v=yp(this.g);a="";var D=v.length,j=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),xs(this);var B="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,a+=this.h.i.decode(v[c],{stream:!(j&&c==D-1)});v.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=h==200,Fr(this.i,this.u,this.A,this.l,this.R,mt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,nt=this.g;if((ye=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ye)){var ce=ye;break t}}ce=null}if(h=ce)St(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zu(this,h);else{this.o=!1,this.s=3,ae(12),Ur(this),xs(this);break e}}if(this.P){h=!0;let ln;for(;!this.J&&this.C<B.length;)if(ln=mw(this,B),ln==Ou){mt==4&&(this.s=4,ae(14),h=!1),St(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Gf){this.s=4,ae(15),St(this.i,this.l,B,"[Invalid Chunk]"),h=!1;break}else St(this.i,this.l,ln,null),zu(this,ln);if(Xf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||B.length!=0||this.h.h||(this.s=1,ae(16),h=!1),this.o=this.o&&h,!h)St(this.i,this.l,B,"[Invalid Chunked Response]"),Ur(this),xs(this);else if(0<B.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Wu(pt),pt.M=!0,ae(11))}}else St(this.i,this.l,B,null),zu(this,B);mt==4&&Ur(this),this.o&&!this.J&&(mt==4?Sp(this.j,this):(this.o=!1,ha(this)))}else Pw(this.g),h==400&&0<B.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),Ur(this),xs(this)}}}catch{}finally{}};function Xf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function mw(a,c){var h=a.C,v=c.indexOf(`
`,h);return v==-1?Ou:(h=Number(c.substring(h,v)),isNaN(h)?Gf:(v+=1,v+h>c.length?Ou:(c=c.slice(v,v+h),a.C=v+h,c)))}er.prototype.cancel=function(){this.J=!0,Ur(this)};function ha(a){a.S=Date.now()+a.I,Jf(a,a.I)}function Jf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ft(y(a.ba,a),c)}function Fu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}er.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(zr(this.i,this.A),this.L!=2&&(ht(),ae(17)),Ur(this),this.s=2,xs(this)):Jf(this,this.S-a)};function xs(a){a.j.G==0||a.J||Sp(a.j,a)}function Ur(a){Fu(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,oa(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function zu(a,c){try{var h=a.j;if(h.G!=0&&(h.g==a||Uu(h.h,a))){if(!a.K&&Uu(h.h,a)&&h.G==3){try{var v=h.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)xa(h),_a(h);else break e;Hu(h),ae(18)}}else h.za=D[1],0<h.za-h.T&&37500>D[2]&&h.F&&h.v==0&&!h.C&&(h.C=ft(y(h.Za,h),6e3));if(1>=tp(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else $r(h,11)}else if((a.K||h.g==a)&&xa(h),!E(c))for(D=h.Da.g.parse(c),c=0;c<D.length;c++){let ce=D[c];if(h.T=ce[0],ce=ce[1],h.G==2)if(ce[0]=="c"){h.K=ce[1],h.ia=ce[2];const pt=ce[3];pt!=null&&(h.la=pt,h.j.info("VER="+h.la));const mt=ce[4];mt!=null&&(h.Aa=mt,h.j.info("SVER="+h.Aa));const wi=ce[5];wi!=null&&typeof wi=="number"&&0<wi&&(v=1.5*wi,h.L=v,h.j.info("backChannelRequestTimeoutMs_="+v)),v=h;const ln=a.g;if(ln){const Ta=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var j=v.h;j.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Bu(j,j.h),j.h=null))}if(v.D){const Ku=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ku&&(v.ya=Ku,we(v.I,v.D,Ku))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),v=h;var B=a;if(v.qa=Ap(v,v.J?v.ia:null,v.W),B.K){np(v.h,B);var ye=B,nt=v.L;nt&&(ye.I=nt),ye.B&&(Fu(ye),ha(ye)),v.g=B}else Ep(v);0<h.i.length&&wa(h)}else ce[0]!="stop"&&ce[0]!="close"||$r(h,7);else h.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?$r(h,7):qu(h):ce[0]!="noop"&&h.l&&h.l.ta(ce),h.v=0)}}ht(4)}catch{}}var gw=class{constructor(a,c){this.g=a,this.map=c}};function Zf(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ep(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function tp(a){return a.h?1:a.g?a.g.size:0}function Uu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Bu(a,c){a.g?a.g.add(c):a.h=c}function np(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Zf.prototype.cancel=function(){if(this.i=rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function rp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const h of a.g.values())c=c.concat(h.D);return c}return C(a.i)}function yw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],h=a.length,v=0;v<h;v++)c.push(a[v]);return c}c=[],h=0;for(v in a)c[h++]=a[v];return c}function vw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var h=0;h<a;h++)c.push(h);return c}c=[],h=0;for(const v in a)c[h++]=v;return c}}}function ip(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var h=vw(a),v=yw(a),D=v.length,j=0;j<D;j++)c.call(void 0,v[j],h&&h[j],a)}var sp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _w(a,c){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var v=a[h].indexOf("="),D=null;if(0<=v){var j=a[h].substring(0,v);D=a[h].substring(v+1)}else j=a[h];c(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Br){this.h=a.h,fa(this,a.j),this.o=a.o,this.g=a.g,pa(this,a.s),this.l=a.l;var c=a.i,h=new Ss;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),op(this,h),this.m=a.m}else a&&(c=String(a).match(sp))?(this.h=!1,fa(this,c[1]||"",!0),this.o=Es(c[2]||""),this.g=Es(c[3]||"",!0),pa(this,c[4]),this.l=Es(c[5]||"",!0),op(this,c[6]||"",!0),this.m=Es(c[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}Br.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Ts(c,ap,!0),":");var h=this.g;return(h||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Ts(c,ap,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Ts(h,h.charAt(0)=="/"?Ew:xw,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Ts(h,Sw)),a.join("")};function On(a){return new Br(a)}function fa(a,c,h){a.j=h?Es(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function pa(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function op(a,c,h){c instanceof Ss?(a.i=c,Iw(a.i,a.h)):(h||(c=Ts(c,Tw)),a.i=new Ss(c,a.h))}function we(a,c,h){a.i.set(c,h)}function ma(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Es(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ts(a,c,h){return typeof a=="string"?(a=encodeURI(a).replace(c,ww),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ww(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ap=/[#\/\?@]/g,xw=/[#\?:]/g,Ew=/[#\?]/g,Tw=/[#\?@]/g,Sw=/#/g;function Ss(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function tr(a){a.g||(a.g=new Map,a.h=0,a.i&&_w(a.i,function(c,h){a.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=Ss.prototype,t.add=function(a,c){tr(this),this.i=null,a=vi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(c),this.h+=1,this};function lp(a,c){tr(a),c=vi(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function up(a,c){return tr(a),c=vi(a,c),a.g.has(c)}t.forEach=function(a,c){tr(this),this.g.forEach(function(h,v){h.forEach(function(D){a.call(c,D,v,this)},this)},this)},t.na=function(){tr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let v=0;v<c.length;v++){const D=a[v];for(let j=0;j<D.length;j++)h.push(c[v])}return h},t.V=function(a){tr(this);let c=[];if(typeof a=="string")up(this,a)&&(c=c.concat(this.g.get(vi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)c=c.concat(a[h])}return c},t.set=function(a,c){return tr(this),this.i=null,a=vi(this,a),up(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function cp(a,c,h){lp(a,c),0<h.length&&(a.i=null,a.g.set(vi(a,c),C(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var v=c[h];const j=encodeURIComponent(String(v)),B=this.V(v);for(v=0;v<B.length;v++){var D=j;B[v]!==""&&(D+="="+encodeURIComponent(String(B[v]))),a.push(D)}}return this.i=a.join("&")};function vi(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function Iw(a,c){c&&!a.j&&(tr(a),a.i=null,a.g.forEach(function(h,v){var D=v.toLowerCase();v!=D&&(lp(this,v),cp(this,D,h))},a)),a.j=c}function Cw(a,c){const h=new Tt;if(l.Image){const v=new Image;v.onload=S(nr,h,"TestLoadImage: loaded",!0,c,v),v.onerror=S(nr,h,"TestLoadImage: error",!1,c,v),v.onabort=S(nr,h,"TestLoadImage: abort",!1,c,v),v.ontimeout=S(nr,h,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function Aw(a,c){const h=new Tt,v=new AbortController,D=setTimeout(()=>{v.abort(),nr(h,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(D),j.ok?nr(h,"TestPingServer: ok",!0,c):nr(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),nr(h,"TestPingServer: error",!1,c)})}function nr(a,c,h,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(h)}catch{}}function Nw(){this.g=new ju}function Rw(a,c,h){const v=h||"";try{ip(a,function(D,j){let B=D;d(D)&&(B=Mr(D)),c.push(v+j+"="+encodeURIComponent(B))})}catch(D){throw c.push(v+"type="+encodeURIComponent("_badmap")),D}}function ga(a){this.l=a.Ub||null,this.j=a.eb||!1}b(ga,yi),ga.prototype.g=function(){return new ya(this.l,this.j)},ga.prototype.i=function(a){return function(){return a}}({});function ya(a,c){Qe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ya,Qe),t=ya.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Cs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function dp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Is(this):Cs(this),this.readyState==3&&dp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Is(this))},t.Qa=function(a){this.g&&(this.response=a,Is(this))},t.ga=function(){this.g&&Is(this)};function Is(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Cs(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=c.next();return a.join(`\r
`)};function Cs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function hp(a){let c="";return M(a,function(h,v){c+=v,c+=":",c+=h,c+=`\r
`}),c}function $u(a,c,h){e:{for(v in h){var v=!1;break e}v=!0}v||(h=hp(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):we(a,c,h))}function ke(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ke,Qe);var bw=/^https?$/i,kw=["POST","PUT"];t=ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,h,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mu.g(),this.v=this.o?la(this.o):la(Mu),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(j){fp(this,j);return}if(a=h||"",h=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)h.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())h.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(h.keys()).find(j=>j.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(kw,c,void 0))||v||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,B]of h)this.g.setRequestHeader(j,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gp(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){fp(this,j)}};function fp(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,pp(a),va(a)}function pp(a){a.A||(a.A=!0,be(a,"complete"),be(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,be(this,"complete"),be(this,"abort"),va(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),va(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mp(this):this.bb())},t.bb=function(){mp(this)};function mp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ln(a)!=4||a.Z()!=2)){if(a.u&&Ln(a)==4)Jn(a.Ea,0,a);else if(be(a,"readystatechange"),Ln(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var v;if(v=B===0){var D=String(a.D).match(sp)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!bw.test(D?D.toLowerCase():"")}h=v}if(h)be(a,"complete"),be(a,"success");else{a.m=6;try{var j=2<Ln(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",pp(a)}}finally{va(a)}}}}function va(a,c){if(a.g){gp(a);const h=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||be(a,"ready");try{h.onreadystatechange=v}catch{}}}function gp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Ln(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),aa(c)}};function yp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Pw(a){const c={};a=(a.g&&2<=Ln(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(E(a[v]))continue;var h=N(a[v]);const D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const j=c[D]||[];c[D]=j,j.push(h)}w(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(a,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||c}function vp(a){this.Aa=0,this.i=[],this.j=new Tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=As("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=As("baseRetryDelayMs",5e3,a),this.cb=As("retryDelaySeedMs",1e4,a),this.Wa=As("forwardChannelMaxRetries",2,a),this.wa=As("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Zf(a&&a.concurrentRequestLimit),this.Da=new Nw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vp.prototype,t.la=8,t.G=1,t.connect=function(a,c,h,v){ae(0),this.W=a,this.H=c||{},h&&v!==void 0&&(this.H.OSID=h,this.H.OAID=v),this.F=this.X,this.I=Ap(this,null,this.W),wa(this)};function qu(a){if(_p(a),a.G==3){var c=a.U++,h=On(a.I);if(we(h,"SID",a.K),we(h,"RID",c),we(h,"TYPE","terminate"),Ns(a,h),c=new er(a,a.j,c),c.L=2,c.v=ma(On(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=Np(c.j,null),c.g.ea(c.v)),c.F=Date.now(),ha(c)}Cp(a)}function _a(a){a.g&&(Wu(a),a.g.cancel(),a.g=null)}function _p(a){_a(a),a.u&&(l.clearTimeout(a.u),a.u=null),xa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function wa(a){if(!ep(a.h)&&!a.s){a.s=!0;var c=a.Ga;_e||G(),$||(_e(),$=!0),K.add(c,a),a.B=0}}function Dw(a,c){return tp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ft(y(a.Ga,a,c),Ip(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new er(this,this.j,a);let j=this.o;if(this.S&&(j?(j=m(j),T(j,this.S)):j=this.S),this.m!==null||this.O||(D.H=j,j=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var v=this.i[h];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=xp(this,D,c),h=On(this.I),we(h,"RID",a),we(h,"CVER",22),this.D&&we(h,"X-HTTP-Session-Id",this.D),Ns(this,h),j&&(this.O?c="headers="+encodeURIComponent(String(hp(j)))+"&"+c:this.m&&$u(h,this.m,j)),Bu(this.h,D),this.Ua&&we(h,"TYPE","init"),this.P?(we(h,"$req",c),we(h,"SID","null"),D.T=!0,Lu(D,h,null)):Lu(D,h,c),this.G=2}}else this.G==3&&(a?wp(this,a):this.i.length==0||ep(this.h)||wp(this))};function wp(a,c){var h;c?h=c.l:h=a.U++;const v=On(a.I);we(v,"SID",a.K),we(v,"RID",h),we(v,"AID",a.T),Ns(a,v),a.m&&a.o&&$u(v,a.m,a.o),h=new er(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),c&&(a.i=c.D.concat(a.i)),c=xp(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bu(a.h,h),Lu(h,v,c)}function Ns(a,c){a.H&&M(a.H,function(h,v){we(c,v,h)}),a.l&&ip({},function(h,v){we(c,v,h)})}function xp(a,c,h){h=Math.min(a.i.length,h);var v=a.l?y(a.l.Na,a.l,a):null;e:{var D=a.i;let j=-1;for(;;){const B=["count="+h];j==-1?0<h?(j=D[0].g,B.push("ofs="+j)):j=0:B.push("ofs="+j);let ye=!0;for(let nt=0;nt<h;nt++){let ce=D[nt].g;const pt=D[nt].map;if(ce-=j,0>ce)j=Math.max(0,D[nt].g-100),ye=!1;else try{Rw(pt,B,"req"+ce+"_")}catch{v&&v(pt)}}if(ye){v=B.join("&");break e}}}return a=a.i.splice(0,h),c.D=a,v}function Ep(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;_e||G(),$||(_e(),$=!0),K.add(c,a),a.v=0}}function Hu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ft(y(a.Fa,a),Ip(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Tp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ft(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),_a(this),Tp(this))};function Wu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Tp(a){a.g=new er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=On(a.qa);we(c,"RID","rpc"),we(c,"SID",a.K),we(c,"AID",a.T),we(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(c,"TO",a.ja),we(c,"TYPE","xmlhttp"),Ns(a,c),a.m&&a.o&&$u(c,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=ma(On(c)),h.m=null,h.P=!0,Yf(h,a)}t.Za=function(){this.C!=null&&(this.C=null,_a(this),Hu(this),ae(19))};function xa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Sp(a,c){var h=null;if(a.g==c){xa(a),Wu(a),a.g=null;var v=2}else if(Uu(a.h,c))h=c.D,np(a.h,c),v=1;else return;if(a.G!=0){if(c.o)if(v==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var D=a.B;v=tt(),be(v,new an(v,h)),wa(a)}else Ep(a);else if(D=c.s,D==3||D==0&&0<c.X||!(v==1&&Dw(a,c)||v==2&&Hu(a)))switch(h&&0<h.length&&(c=a.h,c.i=c.i.concat(h)),D){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Ip(a,c){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*c}function $r(a,c){if(a.j.info("Error code "+c),c==2){var h=y(a.fb,a),v=a.Xa;const D=!v;v=new Br(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fa(v,"https"),ma(v),D?Cw(v.toString(),h):Aw(v.toString(),h)}else ae(2);a.G=0,a.l&&a.l.sa(c),Cp(a),_p(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function Cp(a){if(a.G=0,a.ka=[],a.l){const c=rp(a.h);(c.length!=0||a.i.length!=0)&&(R(a.ka,c),R(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function Ap(a,c,h){var v=h instanceof Br?On(h):new Br(h);if(v.g!="")c&&(v.g=c+"."+v.g),pa(v,v.s);else{var D=l.location;v=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var j=new Br(null);v&&fa(j,v),c&&(j.g=c),D&&pa(j,D),h&&(j.l=h),v=j}return h=a.D,c=a.ya,h&&c&&we(v,h,c),we(v,"VER",a.la),Ns(a,v),v}function Np(a,c,h){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new ke(new ga({eb:h})):new ke(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rp(){}t=Rp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ea(){}Ea.prototype.g=function(a,c){return new zt(a,c)};function zt(a,c){Qe.call(this),this.g=new vp(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!E(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new _i(this)}b(zt,Qe),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){qu(this.g)},zt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Mr(a),a=h);c.i.push(new gw(c.Ya++,a)),c.G==3&&wa(c)},zt.prototype.N=function(){this.g.l=null,delete this.j,qu(this.g),delete this.g,zt.aa.N.call(this)};function bp(a){Fe.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const h in c){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}b(bp,Fe);function kp(){et.call(this),this.status=1}b(kp,et);function _i(a){this.g=a}b(_i,Rp),_i.prototype.ua=function(){be(this.g,"a")},_i.prototype.ta=function(a){be(this.g,new bp(a))},_i.prototype.sa=function(a){be(this.g,new kp)},_i.prototype.ra=function(){be(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,J0=function(){return new Ea},X0=function(){return tt()},Y0=Ve,Md={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ca.NO_ERROR=0,ca.TIMEOUT=8,ca.HTTP_ERROR=6,dl=ca,Kf.COMPLETE="complete",G0=Kf,ua.EventType=Or,Or.OPEN="a",Or.CLOSE="b",Or.ERROR="c",Or.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,$s=ua,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,Q0=ke}).apply(typeof $a<"u"?$a:typeof self<"u"?self:typeof window<"u"?window:{});const dg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ps="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new U0("@firebase/firestore");function Os(){return si.logLevel}function W(t,...e){if(si.logLevel<=le.DEBUG){const n=e.map(lf);si.debug(`Firestore (${ps}): ${t}`,...n)}}function Gn(t,...e){if(si.logLevel<=le.ERROR){const n=e.map(lf);si.error(`Firestore (${ps}): ${t}`,...n)}}function es(t,...e){if(si.logLevel<=le.WARN){const n=e.map(lf);si.warn(`Firestore (${ps}): ${t}`,...n)}}function lf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${ps}) INTERNAL ASSERTION FAILED: `+t;throw Gn(e),new Error(e)}function me(t,e){t||Y()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class jI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class MI{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new Z0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new _t(e)}}class OI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new FI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=UI(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function ts(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ee(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ee(0,0))}static max(){return new ee(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Do.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Do?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends Do{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const BI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Do{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return BI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new H(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Te.fromString(e))}static fromName(e){return new Q(Te.fromString(e).popFirst(5))}static empty(){return new Q(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Te(e.slice()))}}function $I(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new Ar(i,Q.empty(),e)}function qI(t){return new Ar(t.readTime,t.key,-1)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(ee.min(),Q.empty(),-1)}static max(){return new Ar(ee.max(),Q.empty(),-1)}}function HI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==WI)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function QI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}uf.oe=-1;function Eu(t){return t==null}function Gl(t){return t===0&&1/t==-1/0}function GI(t){return typeof t=="number"&&Number.isInteger(t)&&!Gl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function di(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qa(this.root,e,this.comparator,!0)}}class qa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=s??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new st(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fg(this.data.getIterator())}getIteratorFrom(e){return new fg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class fg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new $t([])}unionWith(e){let n=new lt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ts(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new n_("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const YI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(me(!!t),typeof t=="string"){let e=0;const n=YI.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oi(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function df(t){const e=t.mapValue.fields.__previous_value__;return cf(e)?df(e):e}function Vo(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,r,i,s,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class jo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cf(t)?4:ZI(t)?9007199254740991:JI(t)?10:11:Y()}function Vn(t,e){if(t===e)return!0;const n=ai(t);if(n!==ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Nr(i.timestampValue),l=Nr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return oi(i.bytesValue).isEqual(oi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Me(i.doubleValue),l=Me(s.doubleValue);return o===l?Gl(o)===Gl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ts(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(hg(o)!==hg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Vn(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function Mo(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function ns(t,e){if(t===e)return 0;const n=ai(t),r=ai(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Me(s.integerValue||s.doubleValue),u=Me(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return pg(t.timestampValue,e.timestampValue);case 4:return pg(Vo(t),Vo(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(s,o){const l=oi(s),u=oi(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=de(l[d],u[d]);if(p!==0)return p}return de(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=de(Me(s.latitude),Me(o.latitude));return l!==0?l:de(Me(s.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,d,p;const g=s.fields||{},y=o.fields||{},S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,b=(u=y.value)===null||u===void 0?void 0:u.arrayValue,C=de(((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return C!==0?C:mg(S,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ha.mapValue&&o===Ha.mapValue)return 0;if(s===Ha.mapValue)return 1;if(o===Ha.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const y=de(u[g],p[g]);if(y!==0)return y;const S=ns(l[u[g]],d[p[g]]);if(S!==0)return S}return de(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Y()}}function pg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Nr(t),r=Nr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function mg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ns(n[i],r[i]);if(s)return s}return de(n.length,r.length)}function rs(t){return Od(t)}function Od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Od(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Od(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function gg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ld(t){return!!t&&"integerValue"in t}function hf(t){return!!t&&"arrayValue"in t}function yg(t){return!!t&&"nullValue"in t}function vg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hl(t){return!!t&&"mapValue"in t}function JI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function so(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=so(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=so(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=so(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=so(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){di(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pt(so(this.value))}}function r_(t){const e=[];return di(t.fields,(n,r)=>{const i=new ot([n]);if(hl(r)){const s=r_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new xt(e,0,ee.min(),ee.min(),ee.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new xt(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new xt(e,2,n,ee.min(),ee.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ee.min(),ee.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.position=e,this.inclusive=n}}function _g(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=ns(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function wg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n="asc"){this.field=e,this.dir=n}}function eC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{}class Be extends i_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nC(e,n,r):n==="array-contains"?new sC(e,r):n==="in"?new oC(e,r):n==="not-in"?new aC(e,r):n==="array-contains-any"?new lC(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rC(e,r):new iC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ns(n,this.value)):n!==null&&ai(this.value)===ai(n)&&this.matchesComparison(ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends i_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new vn(e,n)}matches(e){return s_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function s_(t){return t.op==="and"}function o_(t){return tC(t)&&s_(t)}function tC(t){for(const e of t.filters)if(e instanceof vn)return!1;return!0}function Fd(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+rs(t.value);if(o_(t))return t.filters.map(e=>Fd(e)).join(",");{const e=t.filters.map(n=>Fd(n)).join(",");return`${t.op}(${e})`}}function a_(t,e){return t instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(t,e):t instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&a_(o,i.filters[l]),!0):!1}(t,e):void Y()}function l_(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${rs(n.value)}`}(t):t instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map(l_).join(" ,")+"}"}(t):"Filter"}class nC extends Be{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class rC extends Be{constructor(e,n){super(e,"in",n),this.keys=u_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iC extends Be{constructor(e,n){super(e,"not-in",n),this.keys=u_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function u_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class sC extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hf(n)&&Mo(n.arrayValue,this.value)}}class oC extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mo(this.value.arrayValue,n)}}class aC extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mo(this.value.arrayValue,n)}}class lC extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function xg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new uC(t,e,n,r,i,s,o)}function ff(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Eu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>rs(r)).join(",")),e.ue=n}return e.ue}function pf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!a_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wg(t.startAt,e.startAt)&&wg(t.endAt,e.endAt)}function zd(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cC(t,e,n,r,i,s,o,l){return new ms(t,e,n,r,i,s,o,l)}function mf(t){return new ms(t)}function Eg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function c_(t){return t.collectionGroup!==null}function oo(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new lt(ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Oo(s,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new Oo(ot.keyField(),r))}return e.ce}function Rn(t){const e=te(t);return e.le||(e.le=dC(e,oo(t))),e.le}function dC(t,e){if(t.limitType==="F")return xg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Oo(i.field,s)});const n=t.endAt?new Yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yl(t.startAt.position,t.startAt.inclusive):null;return xg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ud(t,e){const n=t.filters.concat([e]);return new ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bd(t,e,n){return new ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tu(t,e){return pf(Rn(t),Rn(e))&&t.limitType===e.limitType}function d_(t){return`${ff(Rn(t))}|lt:${t.limitType}`}function Ei(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>l_(i)).join(", ")}]`),Eu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>rs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>rs(i)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function Su(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of oo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const d=_g(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,oo(r),i)||r.endAt&&!function(o,l,u){const d=_g(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,oo(r),i))}(t,e)}function hC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h_(t){return(e,n)=>{let r=!1;for(const i of oo(t)){const s=fC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function fC(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),d=l.data.field(s);return u!==null&&d!==null?ns(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){di(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return t_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Re(Q.comparator);function Yn(){return pC}const f_=new Re(Q.comparator);function qs(...t){let e=f_;for(const n of t)e=e.insert(n.key,n);return e}function p_(t){let e=f_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return ao()}function m_(){return ao()}function ao(){return new gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const mC=new Re(Q.comparator),gC=new lt(Q.comparator);function ie(...t){let e=gC;for(const n of t)e=e.add(n);return e}const yC=new lt(de);function vC(){return yC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gl(e)?"-0":e}}function g_(t){return{integerValue:""+t}}function _C(t,e){return GI(e)?g_(e):gf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this._=void 0}}function wC(t,e,n){return t instanceof Xl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cf(s)&&(s=df(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Lo?v_(t,e):t instanceof Fo?__(t,e):function(i,s){const o=y_(i,s),l=Tg(o)+Tg(i.Pe);return Ld(o)&&Ld(i.Pe)?g_(l):gf(i.serializer,l)}(t,e)}function xC(t,e,n){return t instanceof Lo?v_(t,e):t instanceof Fo?__(t,e):n}function y_(t,e){return t instanceof Jl?function(r){return Ld(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xl extends Iu{}class Lo extends Iu{constructor(e){super(),this.elements=e}}function v_(t,e){const n=w_(e);for(const r of t.elements)n.some(i=>Vn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fo extends Iu{constructor(e){super(),this.elements=e}}function __(t,e){let n=w_(e);for(const r of t.elements)n=n.filter(i=>!Vn(i,r));return{arrayValue:{values:n}}}class Jl extends Iu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Tg(t){return Me(t.integerValue||t.doubleValue)}function w_(t){return hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function EC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Lo&&i instanceof Lo||r instanceof Fo&&i instanceof Fo?ts(r.elements,i.elements,Vn):r instanceof Jl&&i instanceof Jl?Vn(r.Pe,i.Pe):r instanceof Xl&&i instanceof Xl}(t.transform,e.transform)}class TC{constructor(e,n){this.version=e,this.transformResults=n}}class mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cu{}function x_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yf(t.key,mn.none()):new Yo(t.key,t.data,mn.none());{const n=t.data,r=Pt.empty();let i=new lt(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Dr(t.key,r,new $t(i.toArray()),mn.none())}}function SC(t,e,n){t instanceof Yo?function(i,s,o){const l=i.value.clone(),u=Ig(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(i,s,o){if(!fl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ig(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(E_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lo(t,e,n,r){return t instanceof Yo?function(s,o,l,u){if(!fl(s.precondition,o))return l;const d=s.value.clone(),p=Cg(s.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(s,o,l,u){if(!fl(s.precondition,o))return l;const d=Cg(s.fieldTransforms,u,o),p=o.data;return p.setAll(E_(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,l){return fl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function IC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=y_(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function Sg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ts(r,i,(s,o)=>EC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yo extends Cu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dr extends Cu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function E_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ig(t,e,n){const r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,xC(o,l,n[i]))}return r}function Cg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,wC(s,o,e))}return r}class yf extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CC extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&SC(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=m_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=x_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ts(this.mutations,e.mutations,(n,r)=>Sg(n,r))&&ts(this.baseMutations,e.baseMutations,(n,r)=>Sg(n,r))}}class vf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=function(){return mC}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new vf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,oe;function bC(t){switch(t){default:return Y();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function T_(t){if(t===void 0)return Gn("GRPC error has no .code"),L.UNKNOWN;switch(t){case ze.OK:return L.OK;case ze.CANCELLED:return L.CANCELLED;case ze.UNKNOWN:return L.UNKNOWN;case ze.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case ze.INTERNAL:return L.INTERNAL;case ze.UNAVAILABLE:return L.UNAVAILABLE;case ze.UNAUTHENTICATED:return L.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case ze.NOT_FOUND:return L.NOT_FOUND;case ze.ALREADY_EXISTS:return L.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return L.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case ze.ABORTED:return L.ABORTED;case ze.OUT_OF_RANGE:return L.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return L.UNIMPLEMENTED;case ze.DATA_LOSS:return L.DATA_LOSS;default:return Y()}}(oe=ze||(ze={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new Zr([4294967295,4294967295],0);function Ag(t){const e=kC().encode(t),n=new K0;return n.update(e),new Uint8Array(n.digest())}function Ng(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([i,s],0)]}class _f{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hs(`Invalid padding: ${n}`);if(r<0)throw new Hs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Zr.fromNumber(r)));return i.compare(PC)===1&&(i=new Zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ag(e),[r,i]=Ng(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _f(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ag(e),[r,i]=Ng(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Au(ee.min(),i,new Re(de),Yn(),ie())}}class Xo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xo(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class S_{constructor(e,n){this.targetId=e,this.me=n}}class I_{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rg{constructor(){this.fe=0,this.ge=kg(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Xo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=kg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=bg(),this.Qe=new Re(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(zd(s))if(r===0){const o=new Q(s.path);this.Ue(n,o,xt.newNoDocument(o,ee.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=oi(r).toUint8Array()}catch(u){if(u instanceof n_)return es("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new _f(o,i,s)}catch(u){return es(u instanceof Hs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&zd(l.target)){const u=new Q(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,xt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ie();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Au(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=bg(),this.Qe=new Re(de),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Rg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function bg(){return new Re(Q.comparator)}function kg(){return new Re(Q.comparator)}const VC={asc:"ASCENDING",desc:"DESCENDING"},jC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MC={and:"AND",or:"OR"};class OC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $d(t,e){return t.useProto3Json||Eu(e)?e:{value:e}}function Zl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LC(t,e){return Zl(t,e.toTimestamp())}function bn(t){return me(!!t),ee.fromTimestamp(function(n){const r=Nr(n);return new Ee(r.seconds,r.nanos)}(t))}function wf(t,e){return qd(t,e).canonicalString()}function qd(t,e){const n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A_(t){const e=Te.fromString(t);return me(P_(e)),e}function Hd(t,e){return wf(t.databaseId,e.path)}function Nc(t,e){const n=A_(e);if(n.get(1)!==t.databaseId.projectId)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(R_(n))}function N_(t,e){return wf(t.databaseId,e)}function FC(t){const e=A_(t);return e.length===4?Te.emptyPath():R_(e)}function Wd(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R_(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Pg(t,e,n){return{name:Hd(t,e),fields:n.value.mapValue.fields}}function zC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(me(p===void 0||typeof p=="string"),ct.fromBase64String(p||"")):(me(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ct.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?L.UNKNOWN:T_(d.code);return new H(p,d.message||"")}(o);n=new I_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nc(t,r.document.name),s=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):ee.min(),l=new Pt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(i,s,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new pl(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nc(t,r.document),s=r.readTime?bn(r.readTime):ee.min(),o=xt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new pl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nc(t,r.document),s=r.removedTargetIds||[];n=new pl([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new RC(i,s),l=r.targetId;n=new S_(l,o)}}return n}function UC(t,e){let n;if(e instanceof Yo)n={update:Pg(t,e.key,e.value)};else if(e instanceof yf)n={delete:Hd(t,e.key)};else if(e instanceof Dr)n={update:Pg(t,e.key,e.data),updateMask:YC(e.fieldMask)};else{if(!(e instanceof CC))return Y();n={verify:Hd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Lo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:LC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function BC(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?bn(i.updateTime):bn(s);return o.isEqual(ee.min())&&(o=bn(s)),new TC(o,i.transformResults||[])}(n,e))):[]}function $C(t,e){return{documents:[N_(t,e.path)]}}function qC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=N_(t,i);const s=function(d){if(d.length!==0)return k_(vn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(p=>function(y){return{field:Ti(y.field),direction:KC(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=$d(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function HC(t){let e=FC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const y=b_(g);return y instanceof vn&&o_(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(b){return new Oo(Si(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,Eu(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(g){const y=!!g.before,S=g.values||[];return new Yl(S,y)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const y=!g.before,S=g.values||[];return new Yl(S,y)}(n.endAt)),cC(e,i,o,s,l,"F",u,d)}function WC(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function b_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Si(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Si(n.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Si(n.unaryFilter.field);return Be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Si(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Be.create(Si(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(r=>b_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function KC(t){return VC[t]}function QC(t){return jC[t]}function GC(t){return MC[t]}function Ti(t){return{fieldPath:t.canonicalString()}}function Si(t){return ot.fromServerFormat(t.fieldPath)}function k_(t){return t instanceof Be?function(n){if(n.op==="=="){if(vg(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NAN"}};if(yg(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vg(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NAN"}};if(yg(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ti(n.field),op:QC(n.op),value:n.value}}}(t):t instanceof vn?function(n){const r=n.getFilters().map(i=>k_(i));return r.length===1?r[0]:{compositeFilter:{op:GC(n.op),filters:r}}}(t):Y()}function YC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function P_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,i,s=ee.min(),o=ee.min(),l=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.ct=e}}function JC(t){const e=HC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.un=new e2}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ar.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class e2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lt(Te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new is(0)}static kn(){return new is(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.changes=new gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lo(r.mutation,i,$t.empty(),Ee.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=Yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=qs();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Yn();const o=ao(),l=function(){return ao()}();return n.forEach((u,d)=>{const p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Dr)?s=s.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),lo(p.mutation,d,p.mutation.getFieldMask(),Ee.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var g;return l.set(d,new n2(p,(g=o.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ao();let i=new Re((o,l)=>o-l),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||$t.empty();p=l.applyToLocalView(d,p),r.set(u,p);const g=(i.get(l.batchId)||ie()).add(u);i=i.insert(l.batchId,g)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,g=m_();p.forEach(y=>{if(!s.has(y)){const S=x_(n.get(y),r.get(y));S!==null&&g.set(y,S),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):c_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(Yr());let l=-1,u=s;return o.next(d=>z.forEach(d,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ie())).next(p=>({batchId:l,changes:p_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=qs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=qs();return this.indexManager.getCollectionParents(e,s).next(l=>z.forEach(l,u=>{const d=function(g,y){return new ms(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,xt.newInvalidDocument(p)))});let l=qs();return o.forEach((u,d)=>{const p=s.get(u);p!==void 0&&lo(p.mutation,d,$t.empty(),Ee.now()),Su(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:JC(i.bundledQuery),readTime:bn(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.overlays=new Re(Q.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=Yr(),s=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Re((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Yr(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Yr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=i)););return z.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NC(n,r));let s=this.Ir.get(n);s===void 0&&(s=ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this.Tr=new lt(Ge.Er),this.dr=new lt(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ge(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new Te([])),r=new Ge(n,e),i=new Ge(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Te([])),r=new Ge(n,e),i=new Ge(n,e+1);let s=ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ge(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Ge.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AC(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Ge(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(de);return n.forEach(i=>{const s=new Ge(i,0),o=new Ge(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new Ge(new Q(s),0);let l=new lt(de);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.wr)),!0)},o),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,i=>{const s=new Ge(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ge(n,0),i=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.Mr=e,this.docs=function(){return new Re(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xt.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Yn();const o=n.path,l=new Q(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||HI(qI(p),r)<=0||(i.has(p.key)||Su(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new u2(this)}getSize(e){return z.resolve(this.size)}}class u2 extends t2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.persistence=e,this.Nr=new gs(n=>ff(n),pf),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xf,this.targetCount=0,this.kr=is.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new is(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new uf(0),this.Kr=!1,this.Kr=!0,this.$r=new o2,this.referenceDelegate=e(this),this.Ur=new c2(this),this.indexManager=new ZC,this.remoteDocumentCache=function(i){return new l2(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new XC(n),this.Gr=new i2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new s2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new a2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new h2(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class h2 extends KI{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Jr=new xf,this.Yr=null}static Zr(e){return new Ef(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const i=Q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ie(),i=ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Tf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vS()?8:QI(gS())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new f2;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Os()<=le.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ei(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Os()<=le.DEBUG&&W("QueryEngine","Query:",Ei(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Os()<=le.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ei(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):z.resolve())}Yi(e,n){if(Eg(n))return z.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Bd(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ie(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Bd(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return Eg(n)||i.isEqual(ee.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?z.resolve(null):(Os()<=le.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ei(n)),this.rs(e,o,n,$I(i,-1)).next(l=>l))})}ts(e,n){let r=new lt(h_(e));return n.forEach((i,s)=>{Su(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Os()<=le.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ei(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ar.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Re(de),this._s=new gs(s=>ff(s),pf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function g2(t,e,n,r){return new m2(t,e,n,r)}async function D_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ie();for(const d of i){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of s){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function y2(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const g=d.batch,y=g.keys();let S=z.resolve();return y.forEach(b=>{S=S.next(()=>p.getEntry(u,b)).next(C=>{const R=d.docVersions.get(b);me(R!==null),C.version.compareTo(R)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),p.addEntry(C)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function V_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function v2(t,e){const n=te(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((p,g)=>{const y=i.get(g);if(!y)return;l.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,g)));let S=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(ct.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),i=i.insert(g,S),function(C,R,x){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,S,p)&&l.push(n.Ur.updateTargetData(s,S))});let u=Yn(),d=ie();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(_2(s,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(ee.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}function _2(t,e,n){let r=ie(),i=ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Yn();return n.forEach((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function w2(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function x2(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Kd(t,e,n){const r=te(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Go(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Dg(t,e,n){const r=te(t);let i=ee.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const g=te(u),y=g._s.get(p);return y!==void 0?z.resolve(g.os.get(y)):g.Ur.getTargetData(d,p)}(r,o,Rn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:ie())).next(l=>(E2(r,hC(e),l),{documents:l,Ts:s})))}function E2(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Vg{constructor(){this.activeTargetIds=vC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T2{constructor(){this.so=new Vg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa=null;function Rc(){return Wa===null?Wa=function(){return 268435456+Math.round(2147483648*Math.random())}():Wa++,"0x"+Wa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class A2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Rc(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(p=>(W("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw es("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ps}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=I2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Rc();return new Promise((o,l)=>{const u=new Q0;u.setWithCredentials(!0),u.listenOnce(G0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case dl.NO_ERROR:const p=u.getResponseJson();W(vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case dl.TIMEOUT:W(vt,`RPC '${e}' ${s} timed out`),l(new H(L.DEADLINE_EXCEEDED,"Request time out"));break;case dl.HTTP_ERROR:const g=u.getStatus();if(W(vt,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y==null?void 0:y.error;if(S&&S.status&&S.message){const b=function(R){const x=R.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(x)>=0?x:L.UNKNOWN}(S.status);l(new H(b,S.message))}else l(new H(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(L.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(vt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);W(vt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Rc(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=J0(),l=X0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");W(vt,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);let y=!1,S=!1;const b=new C2({Io:R=>{S?W(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(W(vt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),W(vt,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),C=(R,x,E)=>{R.listen(x,A=>{try{E(A)}catch(V){setTimeout(()=>{throw V},0)}})};return C(g,$s.EventType.OPEN,()=>{S||(W(vt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),C(g,$s.EventType.CLOSE,()=>{S||(S=!0,W(vt,`RPC '${e}' stream ${i} transport closed`),b.So())}),C(g,$s.EventType.ERROR,R=>{S||(S=!0,es(vt,`RPC '${e}' stream ${i} transport errored:`,R),b.So(new H(L.UNAVAILABLE,"The operation could not be completed")))}),C(g,$s.EventType.MESSAGE,R=>{var x;if(!S){const E=R.data[0];me(!!E);const A=E,V=A.error||((x=A[0])===null||x===void 0?void 0:x.error);if(V){W(vt,`RPC '${e}' stream ${i} received error:`,V);const O=V.status;let M=function(_){const T=ze[_];if(T!==void 0)return T_(T)}(O),w=V.message;M===void 0&&(M=L.INTERNAL,w="Unknown error status: "+O+" with message "+V.message),S=!0,b.So(new H(M,w)),g.close()}else W(vt,`RPC '${e}' stream ${i} received:`,E),b.bo(E)}}),C(l,Y0.STAT_EVENT,R=>{R.stat===Md.PROXY?W(vt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Md.NOPROXY&&W(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function bc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){return new OC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new j_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N2 extends M_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zC(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?bn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Wd(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=zd(u)?{documents:$C(s,u)}:{query:qC(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=C_(s,o.resumeToken);const d=$d(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=Zl(s,o.snapshotVersion.toTimestamp());const d=$d(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=WC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Wd(this.serializer),n.removeTarget=e,this.a_(n)}}class R2 extends M_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BC(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Wd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>UC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,qd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(L.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,qd(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class k2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{hi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=te(u);d.L_.add(4),await Jo(d),d.q_.set("Unknown"),d.L_.delete(4),await Ru(d)}(this))})}),this.q_=new k2(r,i)}}async function Ru(t){if(hi(t))for(const e of t.B_)await e(!0)}async function Jo(t){for(const e of t.B_)await e(!1)}function O_(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Af(n)?Cf(n):ys(n).r_()&&If(n,e))}function Sf(t,e){const n=te(t),r=ys(n);n.N_.delete(e),r.r_()&&L_(n,e),n.N_.size===0&&(r.r_()?r.o_():hi(n)&&n.q_.set("Unknown"))}function If(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ys(t).A_(e)}function L_(t,e){t.Q_.xe(e),ys(t).R_(e)}function Cf(t){t.Q_=new DC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ys(t).start(),t.q_.v_()}function Af(t){return hi(t)&&!ys(t).n_()&&t.N_.size>0}function hi(t){return te(t).L_.size===0}function F_(t){t.Q_=void 0}async function D2(t){t.q_.set("Online")}async function V2(t){t.N_.forEach((e,n)=>{If(t,e)})}async function j2(t,e){F_(t),Af(t)?(t.q_.M_(e),Cf(t)):t.q_.set("Unknown")}async function M2(t,e,n){if(t.q_.set("Online"),e instanceof I_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await eu(t,r)}else if(e instanceof pl?t.Q_.Ke(e):e instanceof S_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await V_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(ct.EMPTY_BYTE_STRING,p.snapshotVersion)),L_(s,u);const g=new hr(p.target,u,d,p.sequenceNumber);If(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await eu(t,r)}}async function eu(t,e,n){if(!Go(e))throw e;t.L_.add(1),await Jo(t),t.q_.set("Offline"),n||(n=()=>V_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ru(t)})}function z_(t,e){return e().catch(n=>eu(t,n,e))}async function bu(t){const e=te(t),n=Rr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;O2(e);)try{const i=await w2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,L2(e,i)}catch(i){await eu(e,i)}U_(e)&&B_(e)}function O2(t){return hi(t)&&t.O_.length<10}function L2(t,e){t.O_.push(e);const n=Rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function U_(t){return hi(t)&&!Rr(t).n_()&&t.O_.length>0}function B_(t){Rr(t).start()}async function F2(t){Rr(t).p_()}async function z2(t){const e=Rr(t);for(const n of t.O_)e.m_(n.mutations)}async function U2(t,e,n){const r=t.O_.shift(),i=vf.from(r,e,n);await z_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bu(t)}async function B2(t,e){e&&Rr(t).V_&&await async function(r,i){if(function(o){return bC(o)&&o!==L.ABORTED}(i.code)){const s=r.O_.shift();Rr(r).s_(),await z_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await bu(r)}}(t,e),U_(t)&&B_(t)}async function Mg(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=hi(n);n.L_.add(3),await Jo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ru(n)}async function $2(t,e){const n=te(t);e?(n.L_.delete(2),await Ru(n)):e||(n.L_.add(2),await Jo(n),n.q_.set("Unknown"))}function ys(t){return t.K_||(t.K_=function(n,r,i){const s=te(n);return s.w_(),new N2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:D2.bind(null,t),Ro:V2.bind(null,t),mo:j2.bind(null,t),d_:M2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Af(t)?Cf(t):t.q_.set("Unknown")):(await t.K_.stop(),F_(t))})),t.K_}function Rr(t){return t.U_||(t.U_=function(n,r,i){const s=te(n);return s.w_(),new R2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:F2.bind(null,t),mo:B2.bind(null,t),f_:z2.bind(null,t),g_:U2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bu(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Nf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rf(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Go(t))return new H(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=qs(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Wi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.W_=new Re(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ss{constructor(e,n,r,i,s,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ss(e,n,Wi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class H2{constructor(){this.queries=Lg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=Lg(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(L.ABORTED,"Firestore shutting down"))}}function Lg(){return new gs(t=>d_(t),Tu)}async function $_(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new q2,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Rf(o,`Initialization of query '${Ei(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&bf(n)}async function q_(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function W2(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&bf(n)}function K2(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function bf(t){t.Y_.forEach(e=>{e.next()})}var Qd,Fg;(Fg=Qd||(Qd={})).ea="default",Fg.Cache="cache";class H_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.key=e}}class K_{constructor(e){this.key=e}}class Q2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=h_(e),this.Ra=new Wi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Og,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const y=i.get(p),S=Su(this.query,g)?g:null,b=!!y&&this.mutatedKeys.has(y.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let R=!1;y&&S?y.data.isEqual(S.data)?b!==C&&(r.track({type:3,doc:S}),R=!0):this.ga(y,S)||(r.track({type:2,doc:S}),R=!0,(u&&this.Aa(S,u)>0||d&&this.Aa(S,d)<0)&&(l=!0)):!y&&S?(r.track({type:0,doc:S}),R=!0):y&&!S&&(r.track({type:1,doc:y}),R=!0,(u||d)&&(l=!0)),R&&(S?(o=o.add(S),s=C?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(S,b){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return C(S)-C(b)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ss(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Og,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new K_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new W_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ss.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class G2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Y2{constructor(e){this.key=e,this.va=!1}}class X2{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new gs(l=>d_(l),Tu),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(Q.comparator),this.Na=new Map,this.La=new xf,this.Ba={},this.ka=new Map,this.qa=is.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function J2(t,e,n=!0){const r=Z_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Q_(r,e,n,!0),i}async function Z2(t,e){const n=Z_(t);await Q_(n,e,!0,!1)}async function Q_(t,e,n,r){const i=await x2(t.localStore,Rn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await eA(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&O_(t.remoteStore,i),l}async function eA(t,e,n,r,i){t.Ka=(g,y,S)=>async function(C,R,x,E){let A=R.view.ma(x);A.ns&&(A=await Dg(C.localStore,R.query,!1).then(({documents:w})=>R.view.ma(w,A)));const V=E&&E.targetChanges.get(R.targetId),O=E&&E.targetMismatches.get(R.targetId)!=null,M=R.view.applyChanges(A,C.isPrimaryClient,V,O);return Ug(C,R.targetId,M.wa),M.snapshot}(t,g,y,S);const s=await Dg(t.localStore,e,!0),o=new Q2(e,s.Ts),l=o.ma(s.documents),u=Xo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);Ug(t,n,d.wa);const p=new G2(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function tA(t,e,n){const r=te(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Tu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sf(r.remoteStore,i.targetId),Gd(r,i.targetId)}).catch(Qo)):(Gd(r,i.targetId),await Kd(r.localStore,i.targetId,!0))}async function nA(t,e){const n=te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sf(n.remoteStore,r.targetId))}async function rA(t,e,n){const r=cA(t);try{const i=await function(o,l){const u=te(o),d=Ee.now(),p=l.reduce((S,b)=>S.add(b.key),ie());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let b=Yn(),C=ie();return u.cs.getEntries(S,p).next(R=>{b=R,b.forEach((x,E)=>{E.isValidDocument()||(C=C.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,b)).next(R=>{g=R;const x=[];for(const E of l){const A=IC(E,g.get(E.key).overlayedDocument);A!=null&&x.push(new Dr(E.key,A,r_(A.value.mapValue),mn.exists(!0)))}return u.mutationQueue.addMutationBatch(S,d,x,l)}).next(R=>{y=R;const x=R.applyToLocalDocumentSet(g,C);return u.documentOverlayCache.saveOverlays(S,R.batchId,x)})}).then(()=>({batchId:y.batchId,changes:p_(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Re(de)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await Zo(r,i.changes),await bu(r.remoteStore)}catch(i){const s=Rf(i,"Failed to persist write");n.reject(s)}}async function G_(t,e){const n=te(t);try{const r=await v2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?me(o.va):i.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await Zo(n,r,e)}catch(r){await Qo(r)}}function zg(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let d=!1;u.queries.forEach((p,g)=>{for(const y of g.j_)y.Z_(l)&&(d=!0)}),d&&bf(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iA(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Re(Q.comparator);o=o.insert(s,xt.newNoDocument(s,ee.min()));const l=ie().add(s),u=new Au(ee.min(),new Map,new Re(de),o,l);await G_(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),kf(r)}else await Kd(r.localStore,e,!1).then(()=>Gd(r,e,n)).catch(Qo)}async function sA(t,e){const n=te(t),r=e.batch.batchId;try{const i=await y2(n.localStore,e);X_(n,r,null),Y_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zo(n,i)}catch(i){await Qo(i)}}async function oA(t,e,n){const r=te(t);try{const i=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(g=>(me(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);X_(r,e,n),Y_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zo(r,i)}catch(i){await Qo(i)}}function Y_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function X_(t,e,n){const r=te(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Gd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||J_(t,r)})}function J_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),kf(t))}function Ug(t,e,n){for(const r of n)r instanceof W_?(t.La.addReference(r.key,e),aA(t,r)):r instanceof K_?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||J_(t,r.key)):Y()}function aA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),kf(t))}function kf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Te.fromString(e)),r=t.qa.next();t.Na.set(r,new Y2(n)),t.Oa=t.Oa.insert(n,r),O_(t.remoteStore,new hr(Rn(mf(n.path)),r,"TargetPurposeLimboResolution",uf.oe))}}async function Zo(t,e,n){const r=te(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);const g=Tf.Wi(u.targetId,d);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const p=te(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(d,y=>z.forEach(y.$i,S=>p.persistence.referenceDelegate.addReference(g,y.targetId,S)).next(()=>z.forEach(y.Ui,S=>p.persistence.referenceDelegate.removeReference(g,y.targetId,S)))))}catch(g){if(!Go(g))throw g;W("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const y=g.targetId;if(!g.fromCache){const S=p.os.get(y),b=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(y,C)}}}(r.localStore,s))}async function lA(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await D_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(L.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zo(n,r.hs)}}function uA(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function Z_(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iA.bind(null,e),e.Ca.d_=W2.bind(null,e.eventManager),e.Ca.$a=K2.bind(null,e.eventManager),e}function cA(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oA.bind(null,e),e}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return g2(this.persistence,new p2,e.initialUser,this.serializer)}Ga(e){return new d2(Ef.Zr,this.serializer)}Wa(e){return new T2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class Yd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lA.bind(null,this.syncEngine),await $2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new H2}()}createDatastore(e){const n=Nu(e.databaseInfo.databaseId),r=function(s){return new A2(s)}(e.databaseInfo);return function(s,o,l,u){return new b2(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new P2(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>zg(this.syncEngine,n,0),function(){return jg.D()?new jg:new S2}())}createSyncEngine(e,n){return function(i,s,o,l,u,d,p){const g=new X2(i,s,o,l,u,d);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Jo(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yd.provider={build:()=>new Yd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=e_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kc(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await D_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Bg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hA(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Mg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Mg(e.remoteStore,i)),t._onlineComponents=e}async function hA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await kc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;es("Error using user provided cache. Falling back to memory cache: "+n),await kc(t,new tu)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await kc(t,new tu);return t._offlineComponents}async function tw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Bg(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Bg(t,new Yd))),t._onlineComponents}function fA(t){return tw(t).then(e=>e.syncEngine)}async function Xd(t){const e=await tw(t),n=e.eventManager;return n.onListen=J2.bind(null,e.syncEngine),n.onUnlisten=tA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Z2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nA.bind(null,e.syncEngine),n}function pA(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,d){const p=new ew({next:y=>{p.Za(),o.enqueueAndForget(()=>q_(s,g)),y.fromCache&&u.source==="server"?d.reject(new H(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),g=new H_(l,p,{includeMetadataChanges:!0,_a:!0});return $_(s,g)}(await Xd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e,n){if(!n)throw new H(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mA(t,e,n,r){if(e===!0&&r===!0)throw new H(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qg(t){if(!Q.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hg(t){if(Q.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ku(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ku(t);throw new H(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VI;switch(r.type){case"firstParty":return new LI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$g.get(n);r&&(W("ComponentProvider","Removing Datastore"),$g.delete(n),r.terminate())}(this),Promise.resolve()}}function gA(t,e,n,r={}){var i;const s=(t=kn(t,Pu))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=_t.MOCK_USER;else{l=mS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _t(d)}t._authCredentials=new jI(new Z0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vr(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class Sr extends Vr{constructor(e,n,r){super(e,n,mf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Q(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function Yt(t,e,...n){if(t=Dn(t),rw("collection","path",e),t instanceof Pu){const r=Te.fromString(e,...n);return Hg(r),new Sr(t,null,r)}{if(!(t instanceof Ot||t instanceof Sr))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Hg(r),new Sr(t.firestore,null,r)}}function Sn(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=e_.newId()),rw("doc","path",e),t instanceof Pu){const r=Te.fromString(e,...n);return qg(r),new Ot(t,null,new Q(r))}{if(!(t instanceof Ot||t instanceof Sr))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return qg(r),new Ot(t.firestore,t instanceof Sr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new j_(this,"async_queue_retry"),this.Vu=()=>{const r=bc();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=bc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Go(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Gn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Nf.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Qg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class li extends Pu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Kg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kg(e),this._firestoreClient=void 0,await e}}}function yA(t,e){const n=typeof t=="object"?t:SI(),r=typeof t=="string"?t:"(default)",i=wI(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=fS("firestore");s&&gA(i,...s)}return i}function Pf(t){if(t._terminated)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vA(t),t._firestoreClient}function vA(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,d,p){return new XI(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,nw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new dA(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new os(ct.fromBase64String(e))}catch(n){throw new H(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new os(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=/^__.*__$/;class wA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yo(e,this.data,n,this.fieldTransforms)}}class iw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Mf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Mf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sw(this.Cu)&&_A.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nu(e)}Qu(e,n,r,i=!1){return new Mf({Cu:e,methodName:n,qu:r,path:ot.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Of(t){const e=t._freezeSettings(),n=Nu(t._databaseId);return new xA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EA(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Lf("Data must be an object, but it was:",o,r);const l=ow(r,o);let u,d;if(s.merge)u=new $t(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const y=Jd(e,g,n);if(!o.contains(y))throw new H(L.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);lw(p,y)||p.push(y)}u=new $t(p),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new wA(new Pt(l),u,d)}class Vu extends Df{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vu}}function TA(t,e,n,r){const i=t.Qu(1,e,n);Lf("Data must be an object, but it was:",i,r);const s=[],o=Pt.empty();di(r,(u,d)=>{const p=Ff(e,u,n);d=Dn(d);const g=i.Nu(p);if(d instanceof Vu)s.push(p);else{const y=ea(d,g);y!=null&&(s.push(p),o.set(p,y))}});const l=new $t(s);return new iw(o,l,i.fieldTransforms)}function SA(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[Jd(e,r,n)],u=[i];if(s.length%2!=0)throw new H(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(Jd(e,s[y])),u.push(s[y+1]);const d=[],p=Pt.empty();for(let y=l.length-1;y>=0;--y)if(!lw(d,l[y])){const S=l[y];let b=u[y];b=Dn(b);const C=o.Nu(S);if(b instanceof Vu)d.push(S);else{const R=ea(b,C);R!=null&&(d.push(S),p.set(S,R))}}const g=new $t(d);return new iw(p,g,o.fieldTransforms)}function IA(t,e,n,r=!1){return ea(n,t.Qu(r?4:3,e))}function ea(t,e){if(aw(t=Dn(t)))return Lf("Unsupported field value:",e,t),ow(t,e);if(t instanceof Df)return function(r,i){if(!sw(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=ea(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _C(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ee.fromDate(r);return{timestampValue:Zl(i.serializer,s)}}if(r instanceof Ee){const s=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zl(i.serializer,s)}}if(r instanceof Vf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof os)return{bytesValue:C_(i.serializer,r._byteString)};if(r instanceof Ot){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return gf(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ku(r)}`)}(t,e)}function ow(t,e){const n={};return t_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(t,(r,i)=>{const s=ea(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function aw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof Vf||t instanceof os||t instanceof Ot||t instanceof Df||t instanceof jf)}function Lf(t,e,n){if(!aw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ku(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Jd(t,e,n){if((e=Dn(e))instanceof Du)return e._internalPath;if(typeof e=="string")return Ff(t,e);throw nu("Field path arguments must be of type string or ",t,!1,void 0,n)}const CA=new RegExp("[~\\*/\\[\\]]");function Ff(t,e,n){if(e.search(CA)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Du(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(L.INVALID_ARGUMENT,l+t+u)}function lw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AA extends uw{data(){return super.data()}}function zf(t,e){return typeof e=="string"?Ff(t,e):e instanceof Du?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class dw extends Uf{}function ir(t,e,...n){let r=[];e instanceof Uf&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof $f).length,l=s.filter(u=>u instanceof Bf).length;if(o>1||o>0&&l>0)throw new H(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Bf extends dw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){const n=this._parse(e);return hw(e._query,n),new Vr(e.firestore,e.converter,Ud(e._query,n))}_parse(e){const n=Of(e.firestore);return function(s,o,l,u,d,p,g){let y;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new H(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Yg(g,p);const S=[];for(const b of g)S.push(Gg(u,s,b));y={arrayValue:{values:S}}}else y=Gg(u,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Yg(g,p),y=IA(l,o,g,p==="in"||p==="not-in");return Be.create(d,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class $f extends Uf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $f(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)hw(o,u),o=Ud(o,u)}(e._query,n),new Vr(e.firestore,e.converter,Ud(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qf extends dw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qf(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oo(s,o)}(e._query,this._field,this._direction);return new Vr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ms(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Ka(t,e="asc"){const n=e,r=zf("orderBy",t);return qf._create(r,n)}function Gg(t,e,n){if(typeof(n=Dn(n))=="string"){if(n==="")throw new H(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c_(e)&&n.indexOf("/")!==-1)throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Q.isDocumentKey(r))throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gg(t,new Q(r))}if(n instanceof Ot)return gg(t,n._key);throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ku(n)}.`)}function Yg(t,e){if(!Array.isArray(t)||t.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hw(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NA{convertValue(e,n="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return di(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Me(o.doubleValue));return new jf(s)}convertGeoPoint(e){return new Vf(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);me(P_(r));const i=new jo(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||Gn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fw extends uw{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ml extends fw{data(e={}){return super.data(e)}}class pw{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ml(this._firestore,this._userDataWriter,r.key,r,new Ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new ml(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ws(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ml(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ws(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:bA(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class Hf extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Qa(t){t=kn(t,Vr);const e=kn(t.firestore,li),n=Pf(e),r=new Hf(e);return cw(t._query),pA(n,t._query).then(i=>new pw(e,r,t,i))}function Ls(t,e,n,...r){t=kn(t,Ot);const i=kn(t.firestore,li),s=Of(i);let o;return o=typeof(e=Dn(e))=="string"||e instanceof Du?SA(s,"updateDoc",t._key,e,n,r):TA(s,"updateDoc",t._key,e),Wf(i,[o.toMutation(t._key,mn.exists(!0))])}function Ga(t){return Wf(kn(t.firestore,li),[new yf(t._key,mn.none())])}function Ya(t,e){const n=kn(t.firestore,li),r=Sn(t),i=RA(t.converter,e);return Wf(n,[EA(Of(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,mn.exists(!1))]).then(()=>r)}function Xa(t,...e){var n,r,i;t=Dn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Qg(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Qg(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,p;if(t instanceof Ot)d=kn(t.firestore,li),p=mf(t._key.path),u={next:g=>{e[o]&&e[o](kA(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=kn(t,Vr);d=kn(g.firestore,li),p=g._query;const y=new Hf(d);u={next:S=>{e[o]&&e[o](new pw(d,y,g,S))},error:e[o+1],complete:e[o+2]},cw(t._query)}return function(y,S,b,C){const R=new ew(C),x=new H_(S,R,b);return y.asyncQueue.enqueueAndForget(async()=>$_(await Xd(y),x)),()=>{R.Za(),y.asyncQueue.enqueueAndForget(async()=>q_(await Xd(y),x))}}(Pf(d),p,l,u)}function Wf(t,e){return function(r,i){const s=new Tr;return r.asyncQueue.enqueueAndForget(async()=>rA(await fA(r),i,s)),s.promise}(Pf(t),e)}function kA(t,e,n){const r=n.docs.get(e._key),i=new Hf(t);return new fw(t,i,e._key,r,new Ws(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ps=i})(TI),Ql(new ko("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new li(new MI(r.getProvider("auth-internal")),new zI(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(d.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Hi(dg,"4.7.3",e),Hi(dg,"4.7.3","esm2017")})();var PA="firebase",DA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hi(PA,DA,"app");const VA={apiKey:"AIzaSyCkgUUr8CADydWb62Qdb8p8MHZ_TUkrCzE",authDomain:"sportsbox-result.firebaseapp.com",projectId:"sportsbox-result",storageBucket:"sportsbox-result.appspot.com",messagingSenderId:"1098188923070",appId:"1:1098188923070:web:b021c52a64965bf79dbeef",measurementId:"G-DR5V9BNFZ2"},jA=q0(VA),je=yA(jA),it={async getDemands(){try{const t=ir(Yt(je,"demands"),Ka("createdAt","desc"));return(await Qa(t)).docs.map(n=>{var r,i;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((i=n.data().updatedAt)==null?void 0:i.toDate())||new Date}})}catch(t){throw console.error("수요처 데이터 로드 실패:",t),t}},async addDemand(t){try{const e=Ee.now(),n={...t,email:t.email||"",createdAt:e,updatedAt:e};return{id:(await Ya(Yt(je,"demands"),n)).id,...t,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("수요처 추가 실패:",e),e}},async updateDemand(t,e){try{const n=Sn(je,"demands",t);await Ls(n,{...e,updatedAt:Ee.now()})}catch(n){throw console.error("수요처 수정 실패:",n),n}},async deleteDemand(t){try{await Ga(Sn(je,"demands",t))}catch(e){throw console.error("수요처 삭제 실패:",e),e}},async getPerformances(){try{const t=ir(Yt(je,"performances"),Ka("date","desc"));return(await Qa(t)).docs.map(n=>{var r,i,s;return{id:n.id,...n.data(),date:((r=n.data().date)==null?void 0:r.toDate())||new Date,createdAt:((i=n.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("실적 데이터 로드 실패:",t),t}},async addPerformance(t){try{const e=Ee.now(),n=t.notes!==void 0&&t.notes!==null?t.notes.toString().trim():"";return{id:(await Ya(Yt(je,"performances"),{...t,notes:n,date:Ee.fromDate(t.date),createdAt:e,updatedAt:e})).id,...t,notes:n,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("실적 추가 실패:",e),e}},async updatePerformance(t,e){try{const n=Sn(je,"performances",t),r=e.notes!==void 0&&e.notes!==null?e.notes.toString().trim():void 0,i={...e,updatedAt:Ee.now()};r!==void 0&&(i.notes=r),e.date&&(i.date=Ee.fromDate(e.date)),await Ls(n,i)}catch(n){throw console.error("실적 수정 실패:",n),n}},async deletePerformance(t){try{await Ga(Sn(je,"performances",t))}catch(e){throw console.error("실적 삭제 실패:",e),e}},subscribeToDemands(t){const e=ir(Yt(je,"demands"),Ka("createdAt","desc"));return Xa(e,n=>{const r=n.docs.map(i=>{var s,o;return{id:i.id,...i.data(),createdAt:((s=i.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((o=i.data().updatedAt)==null?void 0:o.toDate())||new Date}});t(r)})},subscribeToPerformances(t){const e=ir(Yt(je,"performances"),Ka("date","desc"));return Xa(e,n=>{const r=n.docs.map(i=>{var s,o,l;return{id:i.id,...i.data(),date:((s=i.data().date)==null?void 0:s.toDate())||new Date,createdAt:((o=i.data().createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((l=i.data().updatedAt)==null?void 0:l.toDate())||new Date}});t(r)})},async getBudgets(){try{const t=ir(Yt(je,"budgets"));return(await Qa(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 항목 데이터 로드 실패:",t),t}},async addBudget(t){try{return{id:(await Ya(Yt(je,"budgets"),t)).id,...t}}catch(e){throw console.error("예산 항목 추가 실패:",e),e}},async updateBudget(t,e){try{const n=Sn(je,"budgets",t);await Ls(n,e)}catch(n){throw console.error("예산 항목 수정 실패:",n),n}},async deleteBudget(t){try{await Ga(Sn(je,"budgets",t))}catch(e){throw console.error("예산 항목 삭제 실패:",e),e}},async updateBudgetOrder(t){const e=[];for(const n of t){const r=Sn(je,"budgets",n.id);e.push(Ls(r,{order:n.order??0}))}await Promise.all(e)},subscribeToBudgets(t){const e=ir(Yt(je,"budgets"));return Xa(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)})},async getBudgetUsages(){try{const t=ir(Yt(je,"budgetUsages"));return(await Qa(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 사용 내역 데이터 로드 실패:",t),t}},async addBudgetUsage(t){try{return{id:(await Ya(Yt(je,"budgetUsages"),t)).id,...t}}catch(e){throw console.error("예산 사용 내역 추가 실패:",e),e}},async updateBudgetUsage(t,e){try{const n=Sn(je,"budgetUsages",t);await Ls(n,e)}catch(n){throw console.error("예산 사용 내역 수정 실패:",n),n}},async deleteBudgetUsage(t){try{await Ga(Sn(je,"budgetUsages",t))}catch(e){throw console.error("예산 사용 내역 삭제 실패:",e),e}},subscribeToBudgetUsages(t){const e=ir(Yt(je,"budgetUsages"));return Xa(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)})}},vs=()=>{const[t,e]=P.useState([]),[n,r]=P.useState([]),[i,s]=P.useState(!0),[o,l]=P.useState(null);return P.useEffect(()=>{let u=null,d=null;return(async()=>{try{s(!0),l(null),u=it.subscribeToDemands(g=>{e(g)}),d=it.subscribeToPerformances(g=>{r(g)}),s(!1)}catch(g){console.error("Firebase 데이터 초기화 실패:",g),l("데이터를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요."),s(!1)}})(),()=>{u&&u(),d&&d()}},[]),{demands:t,performances:n,loading:i,error:o,addDemand:it.addDemand,updateDemand:it.updateDemand,deleteDemand:it.deleteDemand,addPerformance:it.addPerformance,updatePerformance:it.updatePerformance,deletePerformance:it.deletePerformance}},MA=(t,e=[])=>{if(t.length===0)return{totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]};const n=t.reduce((C,R)=>C+(R.maleCount||0),0),r=t.reduce((C,R)=>C+(R.femaleCount||0),0),i=n+r,s=t.reduce((C,R)=>C+(R.promotionCount||0),0),l=new Set(t.map(C=>C.organizationName)).size,u=new Date,d=[];for(let C=11;C>=0;C--){const R=new Date(u.getFullYear(),u.getMonth()-C,1),x=R.toLocaleDateString("ko-KR",{month:"short",year:"2-digit"}),E=t.filter(M=>{if(!M.date)return!1;const w=new Date(M.date);return w.getMonth()===R.getMonth()&&w.getFullYear()===R.getFullYear()}),A=E.reduce((M,w)=>M+(w.maleCount||0),0),V=E.reduce((M,w)=>M+(w.femaleCount||0),0),O=E.reduce((M,w)=>M+(w.promotionCount||0),0);d.push({month:x,male:A,female:V,total:A+V,promotions:O})}const p=new Map;t.forEach(C=>{const R=p.get(C.organizationName)||{total:0,count:0,city:""},x=e.find(E=>E.organizationName===C.organizationName);p.set(C.organizationName,{total:R.total+(C.maleCount||0)+(C.femaleCount||0),count:R.count+1,city:(x==null?void 0:x.city)||R.city||""})});const g=Array.from(p.entries()).map(([C,R])=>({name:C,total:R.total,count:R.count,city:R.city})).sort((C,R)=>R.total-C.total),y=new Map;["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"].forEach(C=>{y.set(C,{total:0,count:0})}),t.forEach(C=>{const R=e.find(x=>x.organizationName===C.organizationName);if(R&&y.has(R.city)){const x=y.get(R.city);y.set(R.city,{total:x.total+(C.maleCount||0)+(C.femaleCount||0),count:x.count+1})}});const b=Array.from(y.entries()).map(([C,R])=>({name:C,total:R.total,count:R.count})).sort((C,R)=>R.total-C.total);return{totalMale:n,totalFemale:r,totalPeople:i,totalPromotions:s,totalOrganizations:l,monthlyData:d,organizationData:g,cityData:b}},Xg=()=>{const{demands:t,performances:e}=vs(),[n,r]=P.useState({totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]}),[i,s]=P.useState([]),[o,l]=P.useState([]),[u,d]=P.useState(null),[p,g]=P.useState(""),[y,S]=P.useState(0),b=["과천시","광명시","광주시","군포시","김포시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","여주시","오산시","용인시","의왕시","이천시","평택시","하남시","화성시","양평군"],C=["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"],[R,x]=P.useState("전체"),[E,A]=P.useState(null),[V,O]=P.useState(!1);P.useEffect(()=>{const F=it.subscribeToBudgets(s),ne=it.subscribeToBudgetUsages(l);return()=>{F(),ne()}},[]);const M=F=>{d(F.id),g(F.name),S(F.amount)},w=async F=>{await it.updateBudget(F,{name:p,amount:y}),d(null)},m=async()=>{await it.addBudget({name:"",amount:0})},_=async()=>{i[0]&&await it.addBudgetUsage({budgetItemId:i[0].id,description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},T=async(F,ne,J)=>{const Z=o.find(Le=>Le.id===F);Z&&await it.updateBudgetUsage(F,{...Z,[ne]:J})},N=async F=>{await it.deleteBudgetUsage(F)},[k,I]=P.useState({}),ge=PE(kE(rf)),$e=async F=>{const{active:ne,over:J}=F;if(ne.id!==J.id){const Z=i.findIndex(Ze=>Ze.id===ne.id),Le=i.findIndex(Ze=>Ze.id===J.id),Qt=sf(i,Z,Le).map((Ze,se)=>({...Ze,order:se}));await it.updateBudgetOrder(Qt)}},Ke=o.filter(F=>!(k.startDate&&new Date(F.date)<k.startDate||k.endDate&&new Date(F.date)>k.endDate)),_e=F=>Ke.filter(ne=>ne.budgetItemId===F).reduce((ne,J)=>ne+(Number(J.amount)||0),0),$=async F=>{await it.deleteBudget(F)};P.useEffect(()=>{const F=MA(e,t);r({...F,totalOrganizations:t.length})},[t,e]);const K=({title:F,value:ne,icon:J,color:Z})=>f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:F}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:ne})]}),f.jsx("div",{className:`p-3 rounded-lg ${Z}`,children:f.jsx(J,{className:"w-6 h-6 text-white"})})]})}),G=({data:F,onBarClick:ne})=>{const J=Math.max(...F.map(Z=>Z.total),1);return f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"시/군별 참여 현황"}),f.jsx("div",{className:"flex gap-2 mb-4",children:["전체","남부","북부"].map(Z=>f.jsx("button",{className:`px-4 py-2 rounded-full border font-semibold transition-colors duration-200 ${R===Z?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>x(Z),children:Z},Z))}),F.length>0?f.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-96 overflow-y-auto",children:F.map((Z,Le)=>f.jsxs("div",{className:`flex items-center space-x-4 p-3 bg-gray-50 rounded-lg transition cursor-pointer hover:shadow-md ${ne?"hover:bg-blue-100":""}`,onClick:ne?()=>ne(Z.name):void 0,children:[f.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[70px] text-center",children:Z.name}),f.jsx("div",{className:"flex-1",children:f.jsx("div",{className:"bg-gray-200 rounded-full h-6 relative",children:f.jsx("div",{className:"bg-blue-500 h-6 rounded-full transition-all duration-500 ease-out flex items-center justify-end pr-2",style:{width:`${Math.max(Z.total/J*100,8)}%`},title:`${Z.count}회, ${Z.total.toLocaleString()}명`,children:f.jsxs("span",{className:"text-xs text-white font-medium",children:[Z.total.toLocaleString(),"명"]})})})}),f.jsxs("div",{className:"text-sm text-gray-600 font-mono min-w-[50px] text-right",children:[Z.count,"회"]})]},Le))}):f.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"데이터가 없습니다"})]})},fe=n.cityData.filter(F=>R==="전체"?!0:R==="남부"?b.includes(F.name):R==="북부"?C.includes(F.name):!0),X=n.organizationData.filter(F=>F.city===E);return f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"대시보드"}),f.jsx("p",{className:"text-gray-600",children:"수요처 및 실적 현황 개요"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsx(K,{title:"등록 단체수",value:n.totalOrganizations.toString(),icon:uE,color:"bg-blue-500"}),f.jsx(K,{title:"총 횟수",value:e.length.toString(),icon:zl,color:"bg-green-500"}),f.jsx(K,{title:"총 참여 인원",value:n.totalPeople.toLocaleString()+"명",icon:Ao,color:"bg-purple-500"}),f.jsx(K,{title:"평균 참여 인원",value:e.length>0?Math.round(n.totalPeople/e.length).toLocaleString()+"명":"0명",icon:h0,color:"bg-orange-500"})]}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"시작 날짜"}),f.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:k.startDate?k.startDate.toISOString().split("T")[0]:"",onChange:F=>I(ne=>({...ne,startDate:F.target.value?new Date(F.target.value):void 0}))}),f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"종료 날짜"}),f.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:k.endDate?k.endDate.toISOString().split("T")[0]:"",onChange:F=>I(ne=>({...ne,endDate:F.target.value?new Date(F.target.value):void 0}))}),f.jsx("button",{className:"ml-2 px-3 py-1 bg-gray-100 rounded hover:bg-gray-200 text-sm",onClick:()=>I({}),children:"전체 초기화"})]})}),f.jsx(MT,{sensors:ge,collisionDetection:OE,onDragEnd:$e,children:f.jsx(GT,{items:i.map(F=>F.id),strategy:KT,children:f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 현황"}),f.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:m,children:"+ 예산 항목 추가"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-2 py-2 text-center"}),f.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"예산액"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"사용액"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"잔액"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"집행율(%)"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"수정"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"삭제"})]})}),f.jsx("tbody",{children:i.sort((F,ne)=>(F.order??0)-(ne.order??0)).map(F=>f.jsx(OA,{item:F,editingBudgetId:u,editingBudgetName:p,editingBudgetAmount:y,setEditingBudgetName:g,setEditingBudgetAmount:S,setEditingBudgetId:d,handleEditBudget:M,handleSaveBudget:w,handleDeleteBudget:$,used:_e(F.id),isDragging:!1},F.id))})]})})]})})}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 내역"}),f.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:_,children:"+ 내역 추가"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),f.jsx("th",{className:"px-2 py-2 text-left",children:"적요"}),f.jsx("th",{className:"px-2 py-2 text-left",children:"채주"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"집행액"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"회계일자"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"결제방법"}),f.jsx("th",{className:"px-2 py-2 text-left",children:"비고"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"삭제"})]})}),f.jsx("tbody",{children:o.map((F,ne)=>f.jsxs("tr",{className:"hover:bg-blue-50",children:[f.jsx("td",{className:"px-2 py-2",children:f.jsx("select",{className:"border rounded px-2 py-1 w-32",value:F.budgetItemId,onChange:J=>T(F.id,"budgetItemId",J.target.value),children:i.map(J=>f.jsx("option",{value:J.id,children:J.name},J.id))})}),f.jsx("td",{className:"px-2 py-2",children:f.jsx("input",{className:"border rounded px-2 py-1 w-32",value:F.description,onChange:J=>T(F.id,"description",J.target.value)})}),f.jsx("td",{className:"px-2 py-2",children:f.jsx("input",{className:"border rounded px-2 py-1 w-24",value:F.vendor,onChange:J=>T(F.id,"vendor",J.target.value)})}),f.jsx("td",{className:"px-2 py-2 text-right",children:f.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-20 text-right",value:F.amount,onChange:J=>T(F.id,"amount",Number(J.target.value))})}),f.jsx("td",{className:"px-2 py-2 text-center",children:f.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-32",value:F.date,onChange:J=>T(F.id,"date",J.target.value)})}),f.jsx("td",{className:"px-2 py-2 text-center",children:f.jsx("input",{className:"border rounded px-2 py-1 w-20",value:F.paymentMethod,onChange:J=>T(F.id,"paymentMethod",J.target.value)})}),f.jsx("td",{className:"px-2 py-2",children:f.jsx("input",{className:"border rounded px-2 py-1 w-32",value:F.note||"",onChange:J=>T(F.id,"note",J.target.value)})}),f.jsx("td",{className:"px-2 py-2 text-center",children:f.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>N(F.id),children:"삭제"})})]},F.id))})]})})]}),f.jsx("div",{className:"mb-8",children:f.jsx(G,{data:fe,onBarClick:F=>{A(F),O(!0)}})}),V&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 relative animate-fadeIn",children:[f.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>O(!1),children:"×"}),f.jsxs("h3",{className:"text-2xl font-bold mb-4 text-blue-700",children:[E," 수요처별 참여 현황"]}),X.length>0?f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-gray-50",children:[f.jsx("th",{className:"px-2 py-2 text-left",children:"수요처명"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"횟수"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"총 참여인원"})]})}),f.jsx("tbody",{children:X.map((F,ne)=>f.jsxs("tr",{className:"hover:bg-blue-50",children:[f.jsx("td",{className:"px-2 py-2 font-medium text-gray-900",children:F.name}),f.jsxs("td",{className:"px-2 py-2 text-right",children:[F.count,"회"]}),f.jsxs("td",{className:"px-2 py-2 text-right",children:[F.total.toLocaleString(),"명"]})]},ne))})]}):f.jsx("div",{className:"text-gray-500 text-center py-8",children:"데이터가 없습니다"})]})})]})};function OA({item:t,editingBudgetId:e,editingBudgetName:n,editingBudgetAmount:r,setEditingBudgetName:i,setEditingBudgetAmount:s,setEditingBudgetId:o,handleEditBudget:l,handleSaveBudget:u,handleDeleteBudget:d,used:p,isDragging:g}){const{attributes:y,listeners:S,setNodeRef:b,transform:C,transition:R,isDragging:x}=nS({id:t.id}),E={transform:Ro.Transform.toString(C),transition:R,background:x?"#e0f2fe":void 0},A=t.amount-p,V=t.amount>0?p/t.amount*100:0;return f.jsxs("tr",{ref:b,style:E,...y,children:[f.jsx("td",{className:"px-2 py-2 text-center cursor-grab",...S,children:f.jsx(hE,{className:"w-4 h-4 text-gray-400"})}),f.jsx("td",{className:"px-2 py-2",children:e===t.id?f.jsx("input",{className:"border rounded px-2 py-1 w-32",value:n,onChange:O=>i(O.target.value)}):f.jsx("span",{children:t.name})}),f.jsx("td",{className:"px-2 py-2 text-right",children:e===t.id?f.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:r,onChange:O=>s(Number(O.target.value))}):t.amount.toLocaleString()}),f.jsx("td",{className:"px-2 py-2 text-right",children:p.toLocaleString()}),f.jsx("td",{className:"px-2 py-2 text-right",children:A.toLocaleString()}),f.jsx("td",{className:"px-2 py-2 text-right",children:V.toFixed(2)}),f.jsx("td",{className:"px-2 py-2 text-center",children:e===t.id?f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"px-2 py-1 text-green-600 hover:underline",onClick:()=>u(t.id),children:"저장"}),f.jsx("button",{className:"px-2 py-1 text-gray-500 hover:underline",onClick:()=>o(null),children:"취소"})]}):f.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>l(t),children:"수정"})}),f.jsx("td",{className:"px-2 py-2 text-center",children:f.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>d(t.id),children:f.jsx(Qh,{className:"inline w-4 h-4"})})})]})}const LA=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const i=e[r].trim();if(!i)continue;const s=i.split(",").map(o=>o.trim().replace(/"/g,""));s.length>=4&&n.push({city:s[0]||"",organizationName:s[1]||"",contactPerson:s[2]||"",phoneNumber:s[3]||"",email:s[4]||""})}return n},FA=()=>{const t=`\uFEFF시/군,단체명,담당자명,연락처,이메일
수원시,예시 단체,홍길동,010-1234-5678,hong@example.com
성남시,샘플 그룹,김철수,010-9876-5432,kim@sample.org`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="수요처_등록_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},ta=()=>{const[t,e]=P.useState([]),n=P.useCallback(i=>{const s=crypto.randomUUID(),o={...i,id:s,duration:i.duration||5e3};e(l=>[...l,o]),setTimeout(()=>{e(l=>l.filter(u=>u.id!==s))},o.duration)},[]),r=P.useCallback(i=>{e(s=>s.filter(o=>o.id!==i))},[]);return{toasts:t,addToast:n,removeToast:r}},zA=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],UA=()=>{const{addToast:t}=ta(),{addDemand:e}=vs(),n=P.useRef(null),[r,i]=P.useState("manual"),[s,o]=P.useState(!1),[l,u]=P.useState(!1),[d,p]=P.useState(!1),[g,y]=P.useState(!1),[S,b]=P.useState({success:0,error:0}),[C,R]=P.useState({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""}),x=m=>{const{name:_,value:T}=m.target;R(N=>({...N,[_]:T}))},E=async m=>{if(m.preventDefault(),!C.city||!C.organizationName||!C.contactPerson||!C.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await e({city:C.city,organizationName:C.organizationName,contactPerson:C.contactPerson,phoneNumber:C.phoneNumber,email:C.email||""}),u(!0),R({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""})}catch{t({type:"error",title:"등록 실패",message:"수요처 등록 중 오류가 발생했습니다"})}},A=async m=>{const _=new FileReader;_.onload=async T=>{var N;try{const k=(N=T.target)==null?void 0:N.result,I=LA(k);if(I.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let ge=0,$e=0;for(const Ke of I)try{Ke.city&&Ke.organizationName&&Ke.contactPerson&&Ke.phoneNumber?(await e(Ke),ge++):$e++}catch{$e++}b({success:ge,error:$e}),y(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}},_.readAsText(m,"UTF-8")},V=m=>{m.preventDefault(),o(!1);const _=Array.from(m.dataTransfer.files);_.length>0&&A(_[0])},O=m=>{m.preventDefault(),o(!0)},M=m=>{m.preventDefault(),o(!1)},w=m=>{const _=m.target.files;_&&_.length>0&&A(_[0]),m.target.value=""};return f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 등록"}),f.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 수요처를 등록하세요"})]}),f.jsx("div",{className:"border-b border-gray-200 mb-8",children:f.jsxs("nav",{className:"-mb-px flex space-x-8",children:[f.jsxs("button",{onClick:()=>i("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(pE,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),f.jsxs("button",{onClick:()=>i("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(Sd,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),r==="manual"&&f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:f.jsxs("form",{onSubmit:E,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"시/군 *"}),f.jsxs("select",{id:"city",name:"city",value:C.city,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[f.jsx("option",{value:"",children:"시/군을 선택하세요"}),zA.map(m=>f.jsx("option",{value:m,children:m},m))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),f.jsx("input",{type:"text",id:"organizationName",name:"organizationName",value:C.organizationName,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"단체명을 입력하세요",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-gray-700 mb-2",children:"담당자명 *"}),f.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:C.contactPerson,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"담당자명을 입력하세요",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"연락처 *"}),f.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:C.phoneNumber,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"연락처를 입력하세요",required:!0})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일 (선택사항)"}),f.jsx("input",{type:"email",id:"email",name:"email",value:C.email,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"이메일 주소를 입력하세요"})]})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"수요처 등록"})})]})}),r==="bulk"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(f0,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),f.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 시/군, 단체명, 담당자명, 연락처, 이메일(선택)"}),f.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[f.jsxs("button",{onClick:FA,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[f.jsx(cE,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),f.jsxs("button",{onClick:()=>p(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[f.jsx(d0,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:f.jsxs("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${s?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:V,onDragOver:O,onDragLeave:M,children:[f.jsx(Sd,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),f.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),f.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),f.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),f.jsx("input",{ref:n,type:"file",accept:".csv,.txt",onChange:w,className:"hidden"}),f.jsx("button",{onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})]}),l&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Ul,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"등록 완료!"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"수요처가 성공적으로 등록되었습니다."}),f.jsx("button",{onClick:()=>u(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),g&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Ul,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"업로드 완료!"}),f.jsxs("div",{className:"text-gray-600 mb-6",children:[f.jsx("p",{className:"mb-2",children:"파일 업로드가 완료되었습니다."}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{children:"성공:"}),f.jsxs("span",{className:"font-semibold text-green-600",children:[S.success,"건"]})]}),S.error>0&&f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{children:"실패:"}),f.jsxs("span",{className:"font-semibold text-red-600",children:[S.error,"건"]})]})]})]}),f.jsx("button",{onClick:()=>y(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),d&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"CSV 파일 저장 방법"}),f.jsx("p",{className:"text-gray-600",children:"한글이 깨지지 않게 저장하는 방법을 안내합니다."})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 Microsoft Excel 사용시"}),f.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[f.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),f.jsxs("li",{children:["데이터 입력 완료 후 ",f.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),f.jsxs("li",{children:["파일 형식에서 ",f.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),f.jsx("li",{children:"파일명 입력 후 저장"}),f.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),f.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:f.jsxs("p",{className:"text-sm text-yellow-800",children:[f.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',f.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),f.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 Google Sheets 사용시"}),f.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[f.jsx("li",{children:"구글 시트에서 데이터 입력"}),f.jsxs("li",{children:[f.jsx("strong",{children:"파일 → 다운로드 → 쉼표로 구분된 값(.csv, 현재 시트)"})," 선택"]}),f.jsx("li",{children:"다운로드된 파일을 업로드"})]}),f.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:f.jsx("p",{className:"text-sm text-green-800",children:"구글 시트는 자동으로 UTF-8로 저장되어 한글 문제가 없습니다."})})]})]}),f.jsx("div",{className:"flex justify-end mt-6",children:f.jsx("button",{onClick:()=>p(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},BA=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],$A=()=>{const{addToast:t}=ta(),{demands:e,updateDemand:n,deleteDemand:r}=vs(),[i,s]=P.useState(null),[o,l]=P.useState(""),[u,d]=P.useState({}),p=e.filter(R=>R.organizationName.toLowerCase().includes(o.toLowerCase())||R.city.toLowerCase().includes(o.toLowerCase())||R.contactPerson.toLowerCase().includes(o.toLowerCase())),g=R=>{s(R.id),d(R)},y=async()=>{if(!i||!u.city||!u.organizationName||!u.contactPerson||!u.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await n(i,u),s(null),d({}),t({type:"success",title:"수정 완료",message:"수요처 정보가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"수요처 정보 수정 중 오류가 발생했습니다"})}},S=()=>{s(null),d({})},b=async(R,x)=>{if(window.confirm(`"${x}"의 수요처 정보를 삭제하시겠습니까?`))try{await r(R),t({type:"success",title:"삭제 완료",message:"수요처 정보가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"수요처 정보 삭제 중 오류가 발생했습니다"})}},C=(R,x)=>{d(E=>({...E,[R]:x}))};return f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 관리"}),f.jsx("p",{className:"text-gray-600",children:"등록된 수요처 정보를 조회, 수정, 삭제할 수 있습니다"})]}),f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"relative max-w-md",children:[f.jsx(g0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"수요처 검색...",value:o,onChange:R=>l(R.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"시/군"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"담당자"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"연락처"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"이메일"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"등록일"}),f.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(R=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsxs("select",{value:u.city||"",onChange:x=>C("city",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"시/군 선택"}),BA.map(x=>f.jsx("option",{value:x,children:x},x))]}):f.jsx("span",{className:"text-sm text-gray-900",children:R.city})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"text",value:u.organizationName||"",onChange:x=>C("organizationName",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm font-medium text-gray-900",children:R.organizationName})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"text",value:u.contactPerson||"",onChange:x=>C("contactPerson",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-900",children:R.contactPerson})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"tel",value:u.phoneNumber||"",onChange:x=>C("phoneNumber",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-900",children:R.phoneNumber})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"email",value:u.email||"",onChange:x=>C("email",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-500",children:R.email||"-"})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:"text-sm text-gray-500",children:R.createdAt.toLocaleDateString("ko-KR")})}),f.jsx("td",{className:"px-6 py-4 text-right",children:i===R.id?f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:y,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:f.jsx(Kh,{className:"w-4 h-4"})}),f.jsx("button",{onClick:S,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:f.jsx(Gh,{className:"w-4 h-4"})})]}):f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:()=>g(R),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:f.jsx(m0,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>b(R.id,R.organizationName),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:f.jsx(Qh,{className:"w-4 h-4"})})]})})]},R.id))})]})}),p.length===0&&f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-gray-500",children:"검색 결과가 없습니다"})})]}),f.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",p.length,"건 표시"]})]})},qA=()=>{const{addToast:t}=ta(),{demands:e,addPerformance:n}=vs(),[r,i]=P.useState(!1),[s,o]=P.useState({date:new Date().toISOString().split("T")[0],organizationName:"",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),l=Array.from(new Set(e.map(g=>g.organizationName))).sort(),u=g=>{const{name:y,value:S}=g.target;o(b=>({...b,[y]:S}))},d=()=>{const g=parseInt(s.maleCount)||0,y=parseInt(s.femaleCount)||0;return g+y},p=async g=>{if(g.preventDefault(),!s.date||!s.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const y=parseInt(s.maleCount)||0,S=parseInt(s.femaleCount)||0,b=parseInt(s.promotionCount)||0;if(y<0||S<0||b<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await n({date:new Date(s.date),organizationName:s.organizationName,maleCount:y,femaleCount:S,promotionCount:b,notes:s.notes?s.notes.trim():""}),i(!0),o({date:new Date().toISOString().split("T")[0],organizationName:"",maleCount:"",femaleCount:"",promotionCount:"",notes:""})}catch{t({type:"error",title:"저장 실패",message:"실적 데이터 저장 중 오류가 발생했습니다"})}};return f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 입력"}),f.jsx("p",{className:"text-gray-600",children:"단체별 실적 데이터를 기록하세요"})]}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:f.jsxs("form",{onSubmit:p,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),f.jsxs("div",{className:"relative",children:[f.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"date",id:"date",name:"date",value:s.date,onChange:u,className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),f.jsxs("select",{id:"organizationName",name:"organizationName",value:s.organizationName,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[f.jsx("option",{value:"",children:"단체를 선택하세요"}),l.map(g=>f.jsx("option",{value:g,children:g},g))]}),l.length===0&&f.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"등록된 단체가 없습니다. 먼저 수요처를 등록해주세요."})]})]}),f.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[f.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[f.jsx(Ao,{className:"w-5 h-5 mr-2 text-blue-600"}),"참여 인원"]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"maleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"남성 인원"}),f.jsx("input",{type:"number",id:"maleCount",name:"maleCount",value:s.maleCount,onChange:u,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"femaleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"여성 인원"}),f.jsx("input",{type:"number",id:"femaleCount",name:"femaleCount",value:s.femaleCount,onChange:u,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"총 인원"}),f.jsxs("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:[d().toLocaleString(),"명"]})]})]})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"promotionCount",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[f.jsx(p0,{className:"w-4 h-4 mr-2 text-orange-500"}),"홍보 횟수"]}),f.jsx("input",{type:"number",id:"promotionCount",name:"promotionCount",value:s.promotionCount,onChange:u,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"홍보 횟수를 입력하세요"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"메모 (선택사항)"}),f.jsx("textarea",{id:"notes",name:"notes",value:s.notes,onChange:u,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"추가 메모를 입력하세요..."})]}),f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[f.jsx(Kh,{className:"w-4 h-4 mr-2"}),"실적 저장"]})})]})}),r&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Ul,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"저장 완료!"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"실적 데이터가 성공적으로 저장되었습니다."}),f.jsx("button",{onClick:()=>i(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})})]})},HA=()=>{const{addToast:t}=ta(),{performances:e,demands:n,updatePerformance:r,deletePerformance:i}=vs(),[s,o]=P.useState([]),[l,u]=P.useState(null),[d,p]=P.useState({}),[g,y]=P.useState({}),[S,b]=P.useState(""),C=Array.from(new Set(n.map(m=>m.organizationName))).sort();P.useEffect(()=>{R()},[e,g,S]);const R=()=>{let m=[...e];g.startDate&&(m=m.filter(_=>_.date&&_.date>=g.startDate)),g.endDate&&(m=m.filter(_=>_.date&&_.date<=g.endDate)),g.organizationName&&(m=m.filter(_=>_.organizationName===g.organizationName)),S&&(m=m.filter(_=>_.organizationName.toLowerCase().includes(S.toLowerCase())||_.notes&&_.notes.toLowerCase().includes(S.toLowerCase()))),m.sort((_,T)=>!_.date&&!T.date?0:_.date?T.date?T.date.getTime()-_.date.getTime():-1:1),o(m)},x=(m,_)=>{y(T=>({...T,[m]:_}))},E=()=>{y({}),b("")},A=m=>{u(m.id),p({...m,date:m.date})},V=async()=>{if(!l||!d.date||!d.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const m=d.maleCount||0,_=d.femaleCount||0,T=d.promotionCount||0;if(m<0||_<0||T<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await r(l,{...d,notes:d.notes?d.notes.trim():""}),u(null),p({}),t({type:"success",title:"수정 완료",message:"실적 데이터가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"실적 데이터 수정 중 오류가 발생했습니다"})}},O=()=>{u(null),p({})},M=async(m,_,T)=>{const N=T?T.toLocaleDateString("ko-KR"):"날짜 없음";if(window.confirm(`"${_}"의 ${N} 실적 데이터를 삭제하시겠습니까?`))try{await i(m),t({type:"success",title:"삭제 완료",message:"실적 데이터가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"실적 데이터 삭제 중 오류가 발생했습니다"})}},w=(m,_)=>{p(T=>({...T,[m]:_}))};return f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 조회"}),f.jsx("p",{className:"text-gray-600",children:"등록된 실적 데이터를 조회하고 관리하세요"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[f.jsx(dE,{className:"w-5 h-5 mr-2"}),"필터"]}),f.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"전체 초기화"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검색"}),f.jsxs("div",{className:"relative",children:[f.jsx(g0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),f.jsx("input",{type:"text",placeholder:"검색어 입력...",value:S,onChange:m=>b(m.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 날짜"}),f.jsxs("div",{className:"relative",children:[f.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),f.jsx("input",{type:"date",value:g.startDate?g.startDate.toISOString().split("T")[0]:"",onChange:m=>x("startDate",m.target.value?new Date(m.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 날짜"}),f.jsxs("div",{className:"relative",children:[f.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),f.jsx("input",{type:"date",value:g.endDate?g.endDate.toISOString().split("T")[0]:"",onChange:m=>x("endDate",m.target.value?new Date(m.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명"}),f.jsxs("select",{value:g.organizationName||"",onChange:m=>x("organizationName",m.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"전체 단체"}),C.map(m=>f.jsx("option",{value:m,children:m},m))]})]})]})]}),f.jsxs("div",{className:"mb-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",s.length,"건 표시"]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"날짜"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"남성"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"여성"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"총 인원"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"홍보횟수"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"메모"}),f.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(m=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4",children:l===m.id?f.jsx("input",{type:"date",value:d.date?new Date(d.date).toISOString().split("T")[0]:"",onChange:_=>w("date",new Date(_.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-900",children:m.date?m.date.toLocaleDateString("ko-KR"):"날짜 없음"})}),f.jsx("td",{className:"px-6 py-4",children:l===m.id?f.jsxs("select",{value:d.organizationName||"",onChange:_=>w("organizationName",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"단체 선택"}),C.map(_=>f.jsx("option",{value:_,children:_},_))]}):f.jsx("span",{className:"text-sm font-medium text-gray-900",children:m.organizationName})}),f.jsx("td",{className:"px-6 py-4",children:l===m.id?f.jsx("input",{type:"number",value:d.maleCount||"",onChange:_=>w("maleCount",parseInt(_.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsxs("span",{className:"text-sm text-blue-600 font-mono flex items-center",children:[f.jsx(Ao,{className:"w-4 h-4 mr-1"}),(m.maleCount||0).toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4",children:l===m.id?f.jsx("input",{type:"number",value:d.femaleCount||"",onChange:_=>w("femaleCount",parseInt(_.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsxs("span",{className:"text-sm text-pink-600 font-mono flex items-center",children:[f.jsx(Ao,{className:"w-4 h-4 mr-1"}),(m.femaleCount||0).toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("span",{className:"text-sm text-gray-900 font-bold",children:[((m.maleCount||0)+(m.femaleCount||0)).toLocaleString(),"명"]})}),f.jsx("td",{className:"px-6 py-4",children:l===m.id?f.jsx("input",{type:"number",value:d.promotionCount||"",onChange:_=>w("promotionCount",parseInt(_.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsxs("span",{className:"text-sm text-orange-600 font-mono flex items-center",children:[f.jsx(p0,{className:"w-4 h-4 mr-1"}),(m.promotionCount||0).toLocaleString(),"회"]})}),f.jsx("td",{className:"px-6 py-4",children:l===m.id?f.jsx("textarea",{value:d.notes||"",onChange:_=>w("notes",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}):f.jsx("span",{className:"text-sm text-gray-500",children:m.notes||"-"})}),f.jsx("td",{className:"px-6 py-4 text-right",children:l===m.id?f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:V,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:f.jsx(Kh,{className:"w-4 h-4"})}),f.jsx("button",{onClick:O,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:f.jsx(Gh,{className:"w-4 h-4"})})]}):f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:()=>A(m),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:f.jsx(m0,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>M(m.id,m.organizationName,m.date),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:f.jsx(Qh,{className:"w-4 h-4"})})]})})]},m.id))})]})}),s.length===0&&f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-gray-500",children:e.length===0?"실적 데이터가 없습니다":"검색 조건에 맞는 데이터가 없습니다"})})]})]})},WA=({toast:t,onRemove:e})=>{const{type:n,title:r,message:i,duration:s=5e3}=t;P.useEffect(()=>{const u=setTimeout(()=>{e(t.id)},s);return()=>clearTimeout(u)},[t.id,s,e]);const o=()=>{switch(n){case"success":return f.jsx(Ul,{className:"w-5 h-5 text-green-500"});case"error":return f.jsx(d0,{className:"w-5 h-5 text-red-500"});case"warning":return f.jsx(lE,{className:"w-5 h-5 text-orange-500"});case"info":return f.jsx(Um,{className:"w-5 h-5 text-blue-500"});default:return f.jsx(Um,{className:"w-5 h-5 text-blue-500"})}},l=()=>{switch(n){case"success":return"border-l-green-500";case"error":return"border-l-red-500";case"warning":return"border-l-orange-500";case"info":return"border-l-blue-500";default:return"border-l-blue-500"}};return f.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 ${l()} p-4 mb-3 max-w-md animate-slide-in`,children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:o()}),f.jsxs("div",{className:"ml-3 flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),f.jsx("p",{className:"text-sm text-gray-500",children:i})]}),f.jsx("button",{onClick:()=>e(t.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx(Gh,{className:"w-4 h-4"})})]})})},KA=({toasts:t,onRemove:e})=>f.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.map(n=>f.jsx(WA,{toast:n,onRemove:e},n.id))});function QA(){const[t,e]=P.useState("dashboard"),{toasts:n,addToast:r,removeToast:i}=ta(),{loading:s,error:o}=vs(),l=()=>{if(s)return f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsxs("div",{className:"text-center",children:[f.jsx(fE,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(o)return f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-red-800 font-medium mb-2",children:"연결 오류"}),f.jsx("p",{className:"text-red-600 text-sm",children:o}),f.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"다시 시도"})]})});switch(t){case"dashboard":return f.jsx(Xg,{});case"demand-register":return f.jsx(UA,{});case"demand-list":return f.jsx($A,{});case"performance-input":return f.jsx(qA,{});case"performance-list":return f.jsx(HA,{});default:return f.jsx(Xg,{})}};return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(gE,{currentPage:t,onPageChange:e,children:l()}),f.jsx(KA,{toasts:n,onRemove:i})]})}c0(document.getElementById("root")).render(f.jsx(P.StrictMode,{children:f.jsx(QA,{})}));
