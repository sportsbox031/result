(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Lw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ry={exports:{}},ou={},sy={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),Ow=Symbol.for("react.portal"),Fw=Symbol.for("react.fragment"),zw=Symbol.for("react.strict_mode"),Uw=Symbol.for("react.profiler"),Bw=Symbol.for("react.provider"),$w=Symbol.for("react.context"),qw=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Ww=Symbol.for("react.memo"),Kw=Symbol.for("react.lazy"),Mp=Symbol.iterator;function Qw(t){return t===null||typeof t!="object"?null:(t=Mp&&t[Mp]||t["@@iterator"],typeof t=="function"?t:null)}var iy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oy=Object.assign,ay={};function ai(t,e,n){this.props=t,this.context=e,this.refs=ay,this.updater=n||iy}ai.prototype.isReactComponent={};ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ly(){}ly.prototype=ai.prototype;function nh(t,e,n){this.props=t,this.context=e,this.refs=ay,this.updater=n||iy}var rh=nh.prototype=new ly;rh.constructor=nh;oy(rh,ai.prototype);rh.isPureReactComponent=!0;var Lp=Array.isArray,uy=Object.prototype.hasOwnProperty,sh={current:null},cy={key:!0,ref:!0,__self:!0,__source:!0};function dy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)uy.call(e,r)&&!cy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Uo,type:t,key:i,ref:o,props:s,_owner:sh.current}}function Gw(t,e){return{$$typeof:Uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uo}function Yw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Op=/\/+/g;function Ju(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yw(""+t.key):e.toString(36)}function Za(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uo:case Ow:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ju(o,0):r,Lp(s)?(n="",t!=null&&(n=t.replace(Op,"$&/")+"/"),Za(s,e,n,"",function(d){return d})):s!=null&&(ih(s)&&(s=Gw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Op,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Lp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Ju(i,l);o+=Za(i,e,n,u,s)}else if(u=Qw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Ju(i,l++),o+=Za(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ia(t,e,n){if(t==null)return t;var r=[],s=0;return Za(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Xw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},el={transition:null},Jw={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:el,ReactCurrentOwner:sh};function hy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Ia,forEach:function(t,e,n){Ia(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ia(t,function(){e++}),e},toArray:function(t){return Ia(t,function(e){return e})||[]},only:function(t){if(!ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=ai;te.Fragment=Fw;te.Profiler=Uw;te.PureComponent=nh;te.StrictMode=zw;te.Suspense=Hw;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jw;te.act=hy;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)uy.call(e,u)&&!cy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Uo,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:$w,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bw,_context:t},t.Consumer=t};te.createElement=dy;te.createFactory=function(t){var e=dy.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:qw,render:t}};te.isValidElement=ih;te.lazy=function(t){return{$$typeof:Kw,_payload:{_status:-1,_result:t},_init:Xw}};te.memo=function(t,e){return{$$typeof:Ww,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=el.transition;el.transition={};try{t()}finally{el.transition=e}};te.unstable_act=hy;te.useCallback=function(t,e){return Ct.current.useCallback(t,e)};te.useContext=function(t){return Ct.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};te.useEffect=function(t,e){return Ct.current.useEffect(t,e)};te.useId=function(){return Ct.current.useId()};te.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Ct.current.useMemo(t,e)};te.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};te.useRef=function(t){return Ct.current.useRef(t)};te.useState=function(t){return Ct.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Ct.current.useTransition()};te.version="18.3.1";sy.exports=te;var k=sy.exports;const At=Lw(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw=k,ex=Symbol.for("react.element"),tx=Symbol.for("react.fragment"),nx=Object.prototype.hasOwnProperty,rx=Zw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sx={key:!0,ref:!0,__self:!0,__source:!0};function fy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nx.call(e,r)&&!sx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ex,type:t,key:i,ref:o,props:s,_owner:rx.current}}ou.Fragment=tx;ou.jsx=fy;ou.jsxs=fy;ry.exports=ou;var h=ry.exports,py={exports:{}},Ht={},my={exports:{}},gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,q){var z=O.length;O.push(q);e:for(;0<z;){var Q=z-1>>>1,G=O[Q];if(0<s(G,q))O[Q]=q,O[z]=G,z=Q;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var q=O[0],z=O.pop();if(z!==q){O[0]=z;e:for(var Q=0,G=O.length,X=G>>>1;Q<X;){var Te=2*(Q+1)-1,je=O[Te],le=Te+1,ut=O[le];if(0>s(je,z))le<G&&0>s(ut,je)?(O[Q]=ut,O[le]=z,Q=le):(O[Q]=je,O[Te]=z,Q=Te);else if(le<G&&0>s(ut,z))O[Q]=ut,O[le]=z,Q=le;else break e}}return q}function s(O,q){var z=O.sortIndex-q.sortIndex;return z!==0?z:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,v=3,I=!1,R=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=O)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(d)}}function D(O){if(b=!1,C(O),!R)if(n(u)!==null)R=!0,Ie(L);else{var q=n(d);q!==null&&me(D,q.startTime-O)}}function L(O,q){R=!1,b&&(b=!1,w(g),g=-1),I=!0;var z=v;try{for(C(q),m=n(u);m!==null&&(!(m.expirationTime>q)||O&&!A());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,v=m.priorityLevel;var G=Q(m.expirationTime<=q);q=t.unstable_now(),typeof G=="function"?m.callback=G:m===n(u)&&r(u),C(q)}else r(u);m=n(u)}if(m!==null)var X=!0;else{var Te=n(d);Te!==null&&me(D,Te.startTime-q),X=!1}return X}finally{m=null,v=z,I=!1}}var j=!1,E=null,g=-1,y=5,x=-1;function A(){return!(t.unstable_now()-x<y)}function P(){if(E!==null){var O=t.unstable_now();x=O;var q=!0;try{q=E(!0,O)}finally{q?N():(j=!1,E=null)}}else j=!1}var N;if(typeof T=="function")N=function(){T(P)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ve=he.port2;he.port1.onmessage=P,N=function(){Ve.postMessage(null)}}else N=function(){S(P,0)};function Ie(O){E=O,j||(j=!0,N())}function me(O,q){g=S(function(){O(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){R||I||(R=!0,Ie(L))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var z=v;v=q;try{return O()}finally{v=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=v;v=O;try{return q()}finally{v=z}},t.unstable_scheduleCallback=function(O,q,z){var Q=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,O){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=z+G,O={id:p++,callback:q,priorityLevel:O,startTime:z,expirationTime:G,sortIndex:-1},z>Q?(O.sortIndex=z,e(d,O),n(u)===null&&O===n(d)&&(b?(w(g),g=-1):b=!0,me(D,z-Q))):(O.sortIndex=G,e(u,O),R||I||(R=!0,Ie(L))),O},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(O){var q=v;return function(){var z=v;v=q;try{return O.apply(this,arguments)}finally{v=z}}}})(gy);my.exports=gy;var ix=my.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox=k,qt=ix;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yy=new Set,uo={};function us(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(uo[t]=e,t=0;t<e.length;t++)yy.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mc=Object.prototype.hasOwnProperty,ax=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fp={},zp={};function lx(t){return Mc.call(zp,t)?!0:Mc.call(Fp,t)?!1:ax.test(t)?zp[t]=!0:(Fp[t]=!0,!1)}function ux(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cx(t,e,n,r){if(e===null||typeof e>"u"||ux(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var oh=/[\-:]([a-z])/g;function ah(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oh,ah);at[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oh,ah);at[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oh,ah);at[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function lh(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cx(e,n,s,r)&&(n=null),r||s===null?lx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=ox.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),uh=Symbol.for("react.strict_mode"),Lc=Symbol.for("react.profiler"),vy=Symbol.for("react.provider"),_y=Symbol.for("react.context"),ch=Symbol.for("react.forward_ref"),Oc=Symbol.for("react.suspense"),Fc=Symbol.for("react.suspense_list"),dh=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),wy=Symbol.for("react.offscreen"),Up=Symbol.iterator;function Ai(t){return t===null||typeof t!="object"?null:(t=Up&&t[Up]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,Zu;function Fi(t){if(Zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zu=e&&e[1]||""}return`
`+Zu+t}var ec=!1;function tc(t,e){if(!t||ec)return"";ec=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{ec=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fi(t):""}function dx(t){switch(t.tag){case 5:return Fi(t.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 2:case 15:return t=tc(t.type,!1),t;case 11:return t=tc(t.type.render,!1),t;case 1:return t=tc(t.type,!0),t;default:return""}}function zc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case Is:return"Portal";case Lc:return"Profiler";case uh:return"StrictMode";case Oc:return"Suspense";case Fc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _y:return(t.displayName||"Context")+".Consumer";case vy:return(t._context.displayName||"Context")+".Provider";case ch:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dh:return e=t.displayName||null,e!==null?e:zc(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return zc(t(e))}catch{}}return null}function hx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zc(e);case 8:return e===uh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fx(t){var e=xy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=fx(t))}function Ey(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uc(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ty(t,e){e=e.checked,e!=null&&lh(t,"checked",e,!1)}function Bc(t,e){Ty(t,e);var n=Ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$c(t,e.type,n):e.hasOwnProperty("defaultValue")&&$c(t,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $p(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $c(t,e,n){(e!=="number"||yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zi=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(zi(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ir(n)}}function Sy(t,e){var n=Ir(e.value),r=Ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Iy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Iy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ba,Cy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ba=ba||document.createElement("div"),ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},px=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(t){px.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ki[e]=Ki[t]})});function Ny(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ki.hasOwnProperty(t)&&Ki[t]?(""+e).trim():e+"px"}function by(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ny(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var mx=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wc(t,e){if(e){if(mx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Kc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qc=null;function hh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gc=null,Fs=null,zs=null;function Wp(t){if(t=qo(t)){if(typeof Gc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=du(e),Gc(t.stateNode,t.type,e))}}function Ay(t){Fs?zs?zs.push(t):zs=[t]:Fs=t}function Ry(){if(Fs){var t=Fs,e=zs;if(zs=Fs=null,Wp(t),e)for(t=0;t<e.length;t++)Wp(e[t])}}function ky(t,e){return t(e)}function Py(){}var nc=!1;function Dy(t,e,n){if(nc)return t(e,n);nc=!0;try{return ky(t,e,n)}finally{nc=!1,(Fs!==null||zs!==null)&&(Py(),Ry())}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var r=du(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Yc=!1;if(qn)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){Yc=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{Yc=!1}function gx(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Qi=!1,vl=null,_l=!1,Xc=null,yx={onError:function(t){Qi=!0,vl=t}};function vx(t,e,n,r,s,i,o,l,u){Qi=!1,vl=null,gx.apply(yx,arguments)}function _x(t,e,n,r,s,i,o,l,u){if(vx.apply(this,arguments),Qi){if(Qi){var d=vl;Qi=!1,vl=null}else throw Error(B(198));_l||(_l=!0,Xc=d)}}function cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kp(t){if(cs(t)!==t)throw Error(B(188))}function wx(t){var e=t.alternate;if(!e){if(e=cs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kp(s),t;if(i===r)return Kp(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function jy(t){return t=wx(t),t!==null?My(t):null}function My(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=My(t);if(e!==null)return e;t=t.sibling}return null}var Ly=qt.unstable_scheduleCallback,Qp=qt.unstable_cancelCallback,xx=qt.unstable_shouldYield,Ex=qt.unstable_requestPaint,Fe=qt.unstable_now,Tx=qt.unstable_getCurrentPriorityLevel,fh=qt.unstable_ImmediatePriority,Oy=qt.unstable_UserBlockingPriority,wl=qt.unstable_NormalPriority,Sx=qt.unstable_LowPriority,Fy=qt.unstable_IdlePriority,au=null,Nn=null;function Ix(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(au,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:bx,Cx=Math.log,Nx=Math.LN2;function bx(t){return t>>>=0,t===0?32:31-(Cx(t)/Nx|0)|0}var Aa=64,Ra=4194304;function Ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ui(l):(i&=o,i!==0&&(r=Ui(i)))}else o=n&~s,o!==0?r=Ui(o):i!==0&&(r=Ui(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),s=1<<n,r|=t[n],e&=~s;return r}function Ax(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-hn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Ax(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Jc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zy(){var t=Aa;return Aa<<=1,!(Aa&4194240)&&(Aa=64),t}function rc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function kx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ph(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function Uy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var By,mh,$y,qy,Hy,Zc=!1,ka=[],fr=null,pr=null,mr=null,fo=new Map,po=new Map,lr=[],Px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gp(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":fo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(e.pointerId)}}function ki(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qo(e),e!==null&&mh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Dx(t,e,n,r,s){switch(e){case"focusin":return fr=ki(fr,t,e,n,r,s),!0;case"dragenter":return pr=ki(pr,t,e,n,r,s),!0;case"mouseover":return mr=ki(mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fo.set(i,ki(fo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,po.set(i,ki(po.get(i)||null,t,e,n,r,s)),!0}return!1}function Wy(t){var e=Kr(t.target);if(e!==null){var n=cs(e);if(n!==null){if(e=n.tag,e===13){if(e=Vy(n),e!==null){t.blockedOn=e,Hy(t.priority,function(){$y(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ed(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qc=r,n.target.dispatchEvent(r),Qc=null}else return e=qo(n),e!==null&&mh(e),t.blockedOn=n,!1;e.shift()}return!0}function Yp(t,e,n){tl(t)&&n.delete(e)}function Vx(){Zc=!1,fr!==null&&tl(fr)&&(fr=null),pr!==null&&tl(pr)&&(pr=null),mr!==null&&tl(mr)&&(mr=null),fo.forEach(Yp),po.forEach(Yp)}function Pi(t,e){t.blockedOn===e&&(t.blockedOn=null,Zc||(Zc=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,Vx)))}function mo(t){function e(s){return Pi(s,t)}if(0<ka.length){Pi(ka[0],t);for(var n=1;n<ka.length;n++){var r=ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&Pi(fr,t),pr!==null&&Pi(pr,t),mr!==null&&Pi(mr,t),fo.forEach(e),po.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)Wy(n),n.blockedOn===null&&lr.shift()}var Us=Xn.ReactCurrentBatchConfig,El=!0;function jx(t,e,n,r){var s=fe,i=Us.transition;Us.transition=null;try{fe=1,gh(t,e,n,r)}finally{fe=s,Us.transition=i}}function Mx(t,e,n,r){var s=fe,i=Us.transition;Us.transition=null;try{fe=4,gh(t,e,n,r)}finally{fe=s,Us.transition=i}}function gh(t,e,n,r){if(El){var s=ed(t,e,n,r);if(s===null)fc(t,e,r,Tl,n),Gp(t,r);else if(Dx(s,t,e,n,r))r.stopPropagation();else if(Gp(t,r),e&4&&-1<Px.indexOf(t)){for(;s!==null;){var i=qo(s);if(i!==null&&By(i),i=ed(t,e,n,r),i===null&&fc(t,e,r,Tl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fc(t,e,r,null,n)}}var Tl=null;function ed(t,e,n,r){if(Tl=null,t=hh(r),t=Kr(t),t!==null)if(e=cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tl=t,null}function Ky(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tx()){case fh:return 1;case Oy:return 4;case wl:case Sx:return 16;case Fy:return 536870912;default:return 16}default:return 16}}var cr=null,yh=null,nl=null;function Qy(){if(nl)return nl;var t,e=yh,n=e.length,r,s="value"in cr?cr.value:cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nl=s.slice(t,1<r?1-r:void 0)}function rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pa(){return!0}function Xp(){return!1}function Wt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pa:Xp,this.isPropagationStopped=Xp,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),e}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=Wt(li),$o=be({},li,{view:0,detail:0}),Lx=Wt($o),sc,ic,Di,lu=be({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_h,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Di&&(Di&&t.type==="mousemove"?(sc=t.screenX-Di.screenX,ic=t.screenY-Di.screenY):ic=sc=0,Di=t),sc)},movementY:function(t){return"movementY"in t?t.movementY:ic}}),Jp=Wt(lu),Ox=be({},lu,{dataTransfer:0}),Fx=Wt(Ox),zx=be({},$o,{relatedTarget:0}),oc=Wt(zx),Ux=be({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),Bx=Wt(Ux),$x=be({},li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qx=Wt($x),Hx=be({},li,{data:0}),Zp=Wt(Hx),Wx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Qx[t])?!!e[t]:!1}function _h(){return Gx}var Yx=be({},$o,{key:function(t){if(t.key){var e=Wx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_h,charCode:function(t){return t.type==="keypress"?rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xx=Wt(Yx),Jx=be({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),em=Wt(Jx),Zx=be({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_h}),e1=Wt(Zx),t1=be({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),n1=Wt(t1),r1=be({},lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s1=Wt(r1),i1=[9,13,27,32],wh=qn&&"CompositionEvent"in window,Gi=null;qn&&"documentMode"in document&&(Gi=document.documentMode);var o1=qn&&"TextEvent"in window&&!Gi,Gy=qn&&(!wh||Gi&&8<Gi&&11>=Gi),tm=" ",nm=!1;function Yy(t,e){switch(t){case"keyup":return i1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function a1(t,e){switch(t){case"compositionend":return Xy(e);case"keypress":return e.which!==32?null:(nm=!0,tm);case"textInput":return t=e.data,t===tm&&nm?null:t;default:return null}}function l1(t,e){if(Ns)return t==="compositionend"||!wh&&Yy(t,e)?(t=Qy(),nl=yh=cr=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gy&&e.locale!=="ko"?null:e.data;default:return null}}var u1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u1[t.type]:e==="textarea"}function Jy(t,e,n,r){Ay(r),e=Sl(e,"onChange"),0<e.length&&(n=new vh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yi=null,go=null;function c1(t){uv(t,0)}function uu(t){var e=Rs(t);if(Ey(e))return t}function d1(t,e){if(t==="change")return e}var Zy=!1;if(qn){var ac;if(qn){var lc="oninput"in document;if(!lc){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),lc=typeof sm.oninput=="function"}ac=lc}else ac=!1;Zy=ac&&(!document.documentMode||9<document.documentMode)}function im(){Yi&&(Yi.detachEvent("onpropertychange",ev),go=Yi=null)}function ev(t){if(t.propertyName==="value"&&uu(go)){var e=[];Jy(e,go,t,hh(t)),Dy(c1,e)}}function h1(t,e,n){t==="focusin"?(im(),Yi=e,go=n,Yi.attachEvent("onpropertychange",ev)):t==="focusout"&&im()}function f1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uu(go)}function p1(t,e){if(t==="click")return uu(e)}function m1(t,e){if(t==="input"||t==="change")return uu(e)}function g1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:g1;function yo(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Mc.call(e,s)||!mn(t[s],e[s]))return!1}return!0}function om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function am(t,e){var n=om(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=om(n)}}function tv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nv(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yl(t.document)}return e}function xh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y1(t){var e=nv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tv(n.ownerDocument.documentElement,n)){if(r!==null&&xh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=am(n,i);var o=am(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var v1=qn&&"documentMode"in document&&11>=document.documentMode,bs=null,td=null,Xi=null,nd=!1;function lm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nd||bs==null||bs!==yl(r)||(r=bs,"selectionStart"in r&&xh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xi&&yo(Xi,r)||(Xi=r,r=Sl(td,"onSelect"),0<r.length&&(e=new vh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bs)))}function Da(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionend:Da("Transition","TransitionEnd")},uc={},rv={};qn&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function cu(t){if(uc[t])return uc[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rv)return uc[t]=e[n];return t}var sv=cu("animationend"),iv=cu("animationiteration"),ov=cu("animationstart"),av=cu("transitionend"),lv=new Map,um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){lv.set(t,e),us(e,[t])}for(var cc=0;cc<um.length;cc++){var dc=um[cc],_1=dc.toLowerCase(),w1=dc[0].toUpperCase()+dc.slice(1);Rr(_1,"on"+w1)}Rr(sv,"onAnimationEnd");Rr(iv,"onAnimationIteration");Rr(ov,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(av,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function cm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_x(r,e,void 0,t),t.currentTarget=null}function uv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;cm(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;cm(s,l,d),i=u}}}if(_l)throw t=Xc,_l=!1,Xc=null,t}function _e(t,e){var n=e[ad];n===void 0&&(n=e[ad]=new Set);var r=t+"__bubble";n.has(r)||(cv(e,t,2,!1),n.add(r))}function hc(t,e,n){var r=0;e&&(r|=4),cv(n,t,r,e)}var Va="_reactListening"+Math.random().toString(36).slice(2);function vo(t){if(!t[Va]){t[Va]=!0,yy.forEach(function(n){n!=="selectionchange"&&(x1.has(n)||hc(n,!1,t),hc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Va]||(e[Va]=!0,hc("selectionchange",!1,e))}}function cv(t,e,n,r){switch(Ky(e)){case 1:var s=jx;break;case 4:s=Mx;break;default:s=gh}n=s.bind(null,e,n,t),s=void 0,!Yc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function fc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Kr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Dy(function(){var d=i,p=hh(n),m=[];e:{var v=lv.get(t);if(v!==void 0){var I=vh,R=t;switch(t){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":I=Xx;break;case"focusin":R="focus",I=oc;break;case"focusout":R="blur",I=oc;break;case"beforeblur":case"afterblur":I=oc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Jp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=e1;break;case sv:case iv:case ov:I=Bx;break;case av:I=n1;break;case"scroll":I=Lx;break;case"wheel":I=s1;break;case"copy":case"cut":case"paste":I=qx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=em}var b=(e&4)!==0,S=!b&&t==="scroll",w=b?v!==null?v+"Capture":null:v;b=[];for(var T=d,C;T!==null;){C=T;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,w!==null&&(D=ho(T,w),D!=null&&b.push(_o(T,D,C)))),S)break;T=T.return}0<b.length&&(v=new I(v,R,null,n,p),m.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",v&&n!==Qc&&(R=n.relatedTarget||n.fromElement)&&(Kr(R)||R[Hn]))break e;if((I||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,I?(R=n.relatedTarget||n.toElement,I=d,R=R?Kr(R):null,R!==null&&(S=cs(R),R!==S||R.tag!==5&&R.tag!==6)&&(R=null)):(I=null,R=d),I!==R)){if(b=Jp,D="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(b=em,D="onPointerLeave",w="onPointerEnter",T="pointer"),S=I==null?v:Rs(I),C=R==null?v:Rs(R),v=new b(D,T+"leave",I,n,p),v.target=S,v.relatedTarget=C,D=null,Kr(p)===d&&(b=new b(w,T+"enter",R,n,p),b.target=C,b.relatedTarget=S,D=b),S=D,I&&R)t:{for(b=I,w=R,T=0,C=b;C;C=xs(C))T++;for(C=0,D=w;D;D=xs(D))C++;for(;0<T-C;)b=xs(b),T--;for(;0<C-T;)w=xs(w),C--;for(;T--;){if(b===w||w!==null&&b===w.alternate)break t;b=xs(b),w=xs(w)}b=null}else b=null;I!==null&&dm(m,v,I,b,!1),R!==null&&S!==null&&dm(m,S,R,b,!0)}}e:{if(v=d?Rs(d):window,I=v.nodeName&&v.nodeName.toLowerCase(),I==="select"||I==="input"&&v.type==="file")var L=d1;else if(rm(v))if(Zy)L=m1;else{L=f1;var j=h1}else(I=v.nodeName)&&I.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(L=p1);if(L&&(L=L(t,d))){Jy(m,L,n,p);break e}j&&j(t,v,d),t==="focusout"&&(j=v._wrapperState)&&j.controlled&&v.type==="number"&&$c(v,"number",v.value)}switch(j=d?Rs(d):window,t){case"focusin":(rm(j)||j.contentEditable==="true")&&(bs=j,td=d,Xi=null);break;case"focusout":Xi=td=bs=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,lm(m,n,p);break;case"selectionchange":if(v1)break;case"keydown":case"keyup":lm(m,n,p)}var E;if(wh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ns?Yy(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Gy&&n.locale!=="ko"&&(Ns||g!=="onCompositionStart"?g==="onCompositionEnd"&&Ns&&(E=Qy()):(cr=p,yh="value"in cr?cr.value:cr.textContent,Ns=!0)),j=Sl(d,g),0<j.length&&(g=new Zp(g,t,null,n,p),m.push({event:g,listeners:j}),E?g.data=E:(E=Xy(n),E!==null&&(g.data=E)))),(E=o1?a1(t,n):l1(t,n))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(p=new Zp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=E))}uv(m,e)})}function _o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ho(t,n),i!=null&&r.unshift(_o(t,i,s)),i=ho(t,e),i!=null&&r.push(_o(t,i,s))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ho(n,i),u!=null&&o.unshift(_o(n,u,l))):s||(u=ho(n,i),u!=null&&o.push(_o(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var E1=/\r\n?/g,T1=/\u0000|\uFFFD/g;function hm(t){return(typeof t=="string"?t:""+t).replace(E1,`
`).replace(T1,"")}function ja(t,e,n){if(e=hm(e),hm(t)!==e&&n)throw Error(B(425))}function Il(){}var rd=null,sd=null;function id(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var od=typeof setTimeout=="function"?setTimeout:void 0,S1=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,I1=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(t){return fm.resolve(null).then(t).catch(C1)}:od;function C1(t){setTimeout(function(){throw t})}function pc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mo(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ui=Math.random().toString(36).slice(2),Cn="__reactFiber$"+ui,wo="__reactProps$"+ui,Hn="__reactContainer$"+ui,ad="__reactEvents$"+ui,N1="__reactListeners$"+ui,b1="__reactHandles$"+ui;function Kr(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pm(t);t!==null;){if(n=t[Cn])return n;t=pm(t)}return e}t=n,n=t.parentNode}return null}function qo(t){return t=t[Cn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function du(t){return t[wo]||null}var ld=[],ks=-1;function kr(t){return{current:t}}function Ee(t){0>ks||(t.current=ld[ks],ld[ks]=null,ks--)}function ye(t,e){ks++,ld[ks]=t.current,t.current=e}var Cr={},xt=kr(Cr),Dt=kr(!1),es=Cr;function Qs(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(t){return t=t.childContextTypes,t!=null}function Cl(){Ee(Dt),Ee(xt)}function mm(t,e,n){if(xt.current!==Cr)throw Error(B(168));ye(xt,e),ye(Dt,n)}function dv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,hx(t)||"Unknown",s));return be({},n,r)}function Nl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,es=xt.current,ye(xt,t),ye(Dt,Dt.current),!0}function gm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=dv(t,e,es),r.__reactInternalMemoizedMergedChildContext=t,Ee(Dt),Ee(xt),ye(xt,t)):Ee(Dt),ye(Dt,n)}var zn=null,hu=!1,mc=!1;function hv(t){zn===null?zn=[t]:zn.push(t)}function A1(t){hu=!0,hv(t)}function Pr(){if(!mc&&zn!==null){mc=!0;var t=0,e=fe;try{var n=zn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,hu=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Ly(fh,Pr),s}finally{fe=e,mc=!1}}return null}var Ps=[],Ds=0,bl=null,Al=0,Yt=[],Xt=0,ts=null,Un=1,Bn="";function qr(t,e){Ps[Ds++]=Al,Ps[Ds++]=bl,bl=t,Al=e}function fv(t,e,n){Yt[Xt++]=Un,Yt[Xt++]=Bn,Yt[Xt++]=ts,ts=t;var r=Un;t=Bn;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Un=1<<32-hn(e)+s|n<<s|r,Bn=i+t}else Un=1<<i|n<<s|r,Bn=t}function Eh(t){t.return!==null&&(qr(t,1),fv(t,1,0))}function Th(t){for(;t===bl;)bl=Ps[--Ds],Ps[Ds]=null,Al=Ps[--Ds],Ps[Ds]=null;for(;t===ts;)ts=Yt[--Xt],Yt[Xt]=null,Bn=Yt[--Xt],Yt[Xt]=null,Un=Yt[--Xt],Yt[Xt]=null}var $t=null,Ut=null,Se=!1,dn=null;function pv(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ym(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Ut=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ts!==null?{id:Un,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Ut=null,!0):!1;default:return!1}}function ud(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cd(t){if(Se){var e=Ut;if(e){var n=e;if(!ym(t,e)){if(ud(t))throw Error(B(418));e=gr(n.nextSibling);var r=$t;e&&ym(t,e)?pv(r,n):(t.flags=t.flags&-4097|2,Se=!1,$t=t)}}else{if(ud(t))throw Error(B(418));t.flags=t.flags&-4097|2,Se=!1,$t=t}}}function vm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Ma(t){if(t!==$t)return!1;if(!Se)return vm(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!id(t.type,t.memoizedProps)),e&&(e=Ut)){if(ud(t))throw mv(),Error(B(418));for(;e;)pv(t,e),e=gr(e.nextSibling)}if(vm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=$t?gr(t.stateNode.nextSibling):null;return!0}function mv(){for(var t=Ut;t;)t=gr(t.nextSibling)}function Gs(){Ut=$t=null,Se=!1}function Sh(t){dn===null?dn=[t]:dn.push(t)}var R1=Xn.ReactCurrentBatchConfig;function Vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function La(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _m(t){var e=t._init;return e(t._payload)}function gv(t){function e(w,T){if(t){var C=w.deletions;C===null?(w.deletions=[T],w.flags|=16):C.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function r(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function s(w,T){return w=wr(w,T),w.index=0,w.sibling=null,w}function i(w,T,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<T?(w.flags|=2,T):C):(w.flags|=2,T)):(w.flags|=1048576,T)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,T,C,D){return T===null||T.tag!==6?(T=Ec(C,w.mode,D),T.return=w,T):(T=s(T,C),T.return=w,T)}function u(w,T,C,D){var L=C.type;return L===Cs?p(w,T,C.props.children,D,C.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ir&&_m(L)===T.type)?(D=s(T,C.props),D.ref=Vi(w,T,C),D.return=w,D):(D=cl(C.type,C.key,C.props,null,w.mode,D),D.ref=Vi(w,T,C),D.return=w,D)}function d(w,T,C,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=Tc(C,w.mode,D),T.return=w,T):(T=s(T,C.children||[]),T.return=w,T)}function p(w,T,C,D,L){return T===null||T.tag!==7?(T=Jr(C,w.mode,D,L),T.return=w,T):(T=s(T,C),T.return=w,T)}function m(w,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Ec(""+T,w.mode,C),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ca:return C=cl(T.type,T.key,T.props,null,w.mode,C),C.ref=Vi(w,null,T),C.return=w,C;case Is:return T=Tc(T,w.mode,C),T.return=w,T;case ir:var D=T._init;return m(w,D(T._payload),C)}if(zi(T)||Ai(T))return T=Jr(T,w.mode,C,null),T.return=w,T;La(w,T)}return null}function v(w,T,C,D){var L=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(w,T,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ca:return C.key===L?u(w,T,C,D):null;case Is:return C.key===L?d(w,T,C,D):null;case ir:return L=C._init,v(w,T,L(C._payload),D)}if(zi(C)||Ai(C))return L!==null?null:p(w,T,C,D,null);La(w,C)}return null}function I(w,T,C,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(C)||null,l(T,w,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ca:return w=w.get(D.key===null?C:D.key)||null,u(T,w,D,L);case Is:return w=w.get(D.key===null?C:D.key)||null,d(T,w,D,L);case ir:var j=D._init;return I(w,T,C,j(D._payload),L)}if(zi(D)||Ai(D))return w=w.get(C)||null,p(T,w,D,L,null);La(T,D)}return null}function R(w,T,C,D){for(var L=null,j=null,E=T,g=T=0,y=null;E!==null&&g<C.length;g++){E.index>g?(y=E,E=null):y=E.sibling;var x=v(w,E,C[g],D);if(x===null){E===null&&(E=y);break}t&&E&&x.alternate===null&&e(w,E),T=i(x,T,g),j===null?L=x:j.sibling=x,j=x,E=y}if(g===C.length)return n(w,E),Se&&qr(w,g),L;if(E===null){for(;g<C.length;g++)E=m(w,C[g],D),E!==null&&(T=i(E,T,g),j===null?L=E:j.sibling=E,j=E);return Se&&qr(w,g),L}for(E=r(w,E);g<C.length;g++)y=I(E,w,g,C[g],D),y!==null&&(t&&y.alternate!==null&&E.delete(y.key===null?g:y.key),T=i(y,T,g),j===null?L=y:j.sibling=y,j=y);return t&&E.forEach(function(A){return e(w,A)}),Se&&qr(w,g),L}function b(w,T,C,D){var L=Ai(C);if(typeof L!="function")throw Error(B(150));if(C=L.call(C),C==null)throw Error(B(151));for(var j=L=null,E=T,g=T=0,y=null,x=C.next();E!==null&&!x.done;g++,x=C.next()){E.index>g?(y=E,E=null):y=E.sibling;var A=v(w,E,x.value,D);if(A===null){E===null&&(E=y);break}t&&E&&A.alternate===null&&e(w,E),T=i(A,T,g),j===null?L=A:j.sibling=A,j=A,E=y}if(x.done)return n(w,E),Se&&qr(w,g),L;if(E===null){for(;!x.done;g++,x=C.next())x=m(w,x.value,D),x!==null&&(T=i(x,T,g),j===null?L=x:j.sibling=x,j=x);return Se&&qr(w,g),L}for(E=r(w,E);!x.done;g++,x=C.next())x=I(E,w,g,x.value,D),x!==null&&(t&&x.alternate!==null&&E.delete(x.key===null?g:x.key),T=i(x,T,g),j===null?L=x:j.sibling=x,j=x);return t&&E.forEach(function(P){return e(w,P)}),Se&&qr(w,g),L}function S(w,T,C,D){if(typeof C=="object"&&C!==null&&C.type===Cs&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ca:e:{for(var L=C.key,j=T;j!==null;){if(j.key===L){if(L=C.type,L===Cs){if(j.tag===7){n(w,j.sibling),T=s(j,C.props.children),T.return=w,w=T;break e}}else if(j.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ir&&_m(L)===j.type){n(w,j.sibling),T=s(j,C.props),T.ref=Vi(w,j,C),T.return=w,w=T;break e}n(w,j);break}else e(w,j);j=j.sibling}C.type===Cs?(T=Jr(C.props.children,w.mode,D,C.key),T.return=w,w=T):(D=cl(C.type,C.key,C.props,null,w.mode,D),D.ref=Vi(w,T,C),D.return=w,w=D)}return o(w);case Is:e:{for(j=C.key;T!==null;){if(T.key===j)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(w,T.sibling),T=s(T,C.children||[]),T.return=w,w=T;break e}else{n(w,T);break}else e(w,T);T=T.sibling}T=Tc(C,w.mode,D),T.return=w,w=T}return o(w);case ir:return j=C._init,S(w,T,j(C._payload),D)}if(zi(C))return R(w,T,C,D);if(Ai(C))return b(w,T,C,D);La(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(w,T.sibling),T=s(T,C),T.return=w,w=T):(n(w,T),T=Ec(C,w.mode,D),T.return=w,w=T),o(w)):n(w,T)}return S}var Ys=gv(!0),yv=gv(!1),Rl=kr(null),kl=null,Vs=null,Ih=null;function Ch(){Ih=Vs=kl=null}function Nh(t){var e=Rl.current;Ee(Rl),t._currentValue=e}function dd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){kl=t,Ih=Vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(Ih!==t)if(t={context:t,memoizedValue:e,next:null},Vs===null){if(kl===null)throw Error(B(308));Vs=t,kl.dependencies={lanes:0,firstContext:t}}else Vs=Vs.next=t;return e}var Qr=null;function bh(t){Qr===null?Qr=[t]:Qr.push(t)}function vv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Ah(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _v(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wn(t,n)}return s=r.interleaved,s===null?(e.next=e,bh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wn(t,n)}function sl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}function wm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pl(t,e,n,r){var s=t.updateQueue;or=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,l=i;do{var v=l.lane,I=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,b=l;switch(v=e,I=n,b.tag){case 1:if(R=b.payload,typeof R=="function"){m=R.call(I,m,v);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=b.payload,v=typeof R=="function"?R.call(I,m,v):R,v==null)break e;m=be({},m,v);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else I={eventTime:I,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=I,u=m):p=p.next=I,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rs|=o,t.lanes=o,t.memoizedState=m}}function xm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Ho={},bn=kr(Ho),xo=kr(Ho),Eo=kr(Ho);function Gr(t){if(t===Ho)throw Error(B(174));return t}function Rh(t,e){switch(ye(Eo,e),ye(xo,t),ye(bn,Ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hc(e,t)}Ee(bn),ye(bn,e)}function Xs(){Ee(bn),Ee(xo),Ee(Eo)}function wv(t){Gr(Eo.current);var e=Gr(bn.current),n=Hc(e,t.type);e!==n&&(ye(xo,t),ye(bn,n))}function kh(t){xo.current===t&&(Ee(bn),Ee(xo))}var Ce=kr(0);function Dl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gc=[];function Ph(){for(var t=0;t<gc.length;t++)gc[t]._workInProgressVersionPrimary=null;gc.length=0}var il=Xn.ReactCurrentDispatcher,yc=Xn.ReactCurrentBatchConfig,ns=0,Ne=null,qe=null,Ye=null,Vl=!1,Ji=!1,To=0,k1=0;function mt(){throw Error(B(321))}function Dh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function Vh(t,e,n,r,s,i){if(ns=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,il.current=t===null||t.memoizedState===null?j1:M1,t=n(r,s),Ji){i=0;do{if(Ji=!1,To=0,25<=i)throw Error(B(301));i+=1,Ye=qe=null,e.updateQueue=null,il.current=L1,t=n(r,s)}while(Ji)}if(il.current=jl,e=qe!==null&&qe.next!==null,ns=0,Ye=qe=Ne=null,Vl=!1,e)throw Error(B(300));return t}function jh(){var t=To!==0;return To=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ne.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function tn(){if(qe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ye===null?Ne.memoizedState:Ye.next;if(e!==null)Ye=e,qe=t;else{if(t===null)throw Error(B(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ye===null?Ne.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function So(t,e){return typeof e=="function"?e(t):e}function vc(t){var e=tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var p=d.lane;if((ns&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ne.lanes|=p,rs|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,mn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,rs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _c(t){var e=tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function xv(){}function Ev(t,e){var n=Ne,r=tn(),s=e(),i=!mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,Mh(Iv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Io(9,Sv.bind(null,n,r,s,e),void 0,null),Je===null)throw Error(B(349));ns&30||Tv(n,e,s)}return s}function Tv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sv(t,e,n,r){e.value=n,e.getSnapshot=r,Cv(e)&&Nv(t)}function Iv(t,e,n){return n(function(){Cv(e)&&Nv(t)})}function Cv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function Nv(t){var e=Wn(t,1);e!==null&&fn(e,t,1,-1)}function Em(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:t},e.queue=t,t=t.dispatch=V1.bind(null,Ne,t),[e.memoizedState,t]}function Io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bv(){return tn().memoizedState}function ol(t,e,n,r){var s=In();Ne.flags|=t,s.memoizedState=Io(1|e,n,void 0,r===void 0?null:r)}function fu(t,e,n,r){var s=tn();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Dh(r,o.deps)){s.memoizedState=Io(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=Io(1|e,n,i,r)}function Tm(t,e){return ol(8390656,8,t,e)}function Mh(t,e){return fu(2048,8,t,e)}function Av(t,e){return fu(4,2,t,e)}function Rv(t,e){return fu(4,4,t,e)}function kv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pv(t,e,n){return n=n!=null?n.concat([t]):null,fu(4,4,kv.bind(null,e,t),n)}function Lh(){}function Dv(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vv(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jv(t,e,n){return ns&21?(mn(n,e)||(n=zy(),Ne.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function P1(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=yc.transition;yc.transition={};try{t(!1),e()}finally{fe=n,yc.transition=r}}function Mv(){return tn().memoizedState}function D1(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lv(t))Ov(e,n);else if(n=vv(t,e,n,r),n!==null){var s=It();fn(n,t,r,s),Fv(n,e,r)}}function V1(t,e,n){var r=_r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lv(t))Ov(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,mn(l,o)){var u=e.interleaved;u===null?(s.next=s,bh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=vv(t,e,s,r),n!==null&&(s=It(),fn(n,t,r,s),Fv(n,e,r))}}function Lv(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Ov(t,e){Ji=Vl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ph(t,n)}}var jl={readContext:en,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},j1={readContext:en,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:Tm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ol(4194308,4,kv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return ol(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=D1.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:Em,useDebugValue:Lh,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=Em(!1),e=t[0];return t=P1.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=In();if(Se){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Je===null)throw Error(B(349));ns&30||Tv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Tm(Iv.bind(null,r,i,t),[t]),r.flags|=2048,Io(9,Sv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=Je.identifierPrefix;if(Se){var n=Bn,r=Un;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=To++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},M1={readContext:en,useCallback:Dv,useContext:en,useEffect:Mh,useImperativeHandle:Pv,useInsertionEffect:Av,useLayoutEffect:Rv,useMemo:Vv,useReducer:vc,useRef:bv,useState:function(){return vc(So)},useDebugValue:Lh,useDeferredValue:function(t){var e=tn();return jv(e,qe.memoizedState,t)},useTransition:function(){var t=vc(So)[0],e=tn().memoizedState;return[t,e]},useMutableSource:xv,useSyncExternalStore:Ev,useId:Mv,unstable_isNewReconciler:!1},L1={readContext:en,useCallback:Dv,useContext:en,useEffect:Mh,useImperativeHandle:Pv,useInsertionEffect:Av,useLayoutEffect:Rv,useMemo:Vv,useReducer:_c,useRef:bv,useState:function(){return _c(So)},useDebugValue:Lh,useDeferredValue:function(t){var e=tn();return qe===null?e.memoizedState=t:jv(e,qe.memoizedState,t)},useTransition:function(){var t=_c(So)[0],e=tn().memoizedState;return[t,e]},useMutableSource:xv,useSyncExternalStore:Ev,useId:Mv,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pu={isMounted:function(t){return(t=t._reactInternals)?cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),s=_r(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(fn(e,t,s,r),sl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),s=_r(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(fn(e,t,s,r),sl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=_r(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(fn(e,t,r,n),sl(e,t,r))}};function Sm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yo(n,r)||!yo(s,i):!0}function zv(t,e,n){var r=!1,s=Cr,i=e.contextType;return typeof i=="object"&&i!==null?i=en(i):(s=Vt(e)?es:xt.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):Cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Im(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pu.enqueueReplaceState(e,e.state,null)}function fd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ah(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=en(i):(i=Vt(e)?es:xt.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(hd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pu.enqueueReplaceState(s,s.state,null),Pl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=dx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function wc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var O1=typeof WeakMap=="function"?WeakMap:Map;function Uv(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ll||(Ll=!0,Sd=r),pd(t,e)},n}function Bv(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){pd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){pd(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Cm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new O1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=J1.bind(null,t,e,n),e.then(t,t))}function Nm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var F1=Xn.ReactCurrentOwner,Pt=!1;function St(t,e,n,r){e.child=t===null?yv(e,null,n,r):Ys(e,t.child,n,r)}function Am(t,e,n,r,s){n=n.render;var i=e.ref;return Bs(e,s),r=Vh(t,e,n,r,i,s),n=jh(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Se&&n&&Eh(e),e.flags|=1,St(t,e,r,s),e.child)}function Rm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$v(t,e,i,r,s)):(t=cl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(o,r)&&t.ref===e.ref)return Kn(t,e,s)}return e.flags|=1,t=wr(i,r),t.ref=e.ref,t.return=e,e.child=t}function $v(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yo(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Kn(t,e,s)}return md(t,e,n,r,s)}function qv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Ms,zt),zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Ms,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Ms,zt),zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Ms,zt),zt|=r;return St(t,e,s,n),e.child}function Hv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function md(t,e,n,r,s){var i=Vt(n)?es:xt.current;return i=Qs(e,i),Bs(e,s),n=Vh(t,e,n,r,i,s),r=jh(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Se&&r&&Eh(e),e.flags|=1,St(t,e,n,s),e.child)}function km(t,e,n,r,s){if(Vt(n)){var i=!0;Nl(e)}else i=!1;if(Bs(e,s),e.stateNode===null)al(t,e),zv(e,n,r),fd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=en(d):(d=Vt(n)?es:xt.current,d=Qs(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Im(e,o,r,d),or=!1;var v=e.memoizedState;o.state=v,Pl(e,r,o,s),u=e.memoizedState,l!==r||v!==u||Dt.current||or?(typeof p=="function"&&(hd(e,n,p,r),u=e.memoizedState),(l=or||Sm(e,n,l,r,v,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_v(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:un(e.type,l),o.props=d,m=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=en(u):(u=Vt(n)?es:xt.current,u=Qs(e,u));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==u)&&Im(e,o,r,u),or=!1,v=e.memoizedState,o.state=v,Pl(e,r,o,s);var R=e.memoizedState;l!==m||v!==R||Dt.current||or?(typeof I=="function"&&(hd(e,n,I,r),R=e.memoizedState),(d=or||Sm(e,n,d,r,v,R,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return gd(t,e,n,r,i,s)}function gd(t,e,n,r,s,i){Hv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&gm(e,n,!1),Kn(t,e,i);r=e.stateNode,F1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,l,i)):St(t,e,l,i),e.memoizedState=r.state,s&&gm(e,n,!0),e.child}function Wv(t){var e=t.stateNode;e.pendingContext?mm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mm(t,e.context,!1),Rh(t,e.containerInfo)}function Pm(t,e,n,r,s){return Gs(),Sh(s),e.flags|=256,St(t,e,n,r),e.child}var yd={dehydrated:null,treeContext:null,retryLane:0};function vd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kv(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ce,s&1),t===null)return cd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yu(o,r,0,null),t=Jr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=vd(n),e.memoizedState=yd,t):Oh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return z1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=wr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=wr(l,i):(i=Jr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?vd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=yd,r}return i=t.child,t=i.sibling,r=wr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Oh(t,e){return e=yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oa(t,e,n,r){return r!==null&&Sh(r),Ys(e,t.child,null,n),t=Oh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function z1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=wc(Error(B(422))),Oa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=yu({mode:"visible",children:r.children},s,0,null),i=Jr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=vd(o),e.memoizedState=yd,i);if(!(e.mode&1))return Oa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=wc(i,r,void 0),Oa(t,e,o,r)}if(l=(o&t.childLanes)!==0,Pt||l){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wn(t,s),fn(r,t,s,-1))}return qh(),r=wc(Error(B(421))),Oa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Z1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ut=gr(s.nextSibling),$t=e,Se=!0,dn=null,t!==null&&(Yt[Xt++]=Un,Yt[Xt++]=Bn,Yt[Xt++]=ts,Un=t.id,Bn=t.overflow,ts=e),e=Oh(e,r.children),e.flags|=4096,e)}function Dm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dd(t.return,e,n)}function xc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dm(t,n,e);else if(t.tag===19)Dm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Dl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),xc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Dl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}xc(e,!0,n,null,i);break;case"together":xc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U1(t,e,n){switch(e.tag){case 3:Wv(e),Gs();break;case 5:wv(e);break;case 1:Vt(e.type)&&Nl(e);break;case 4:Rh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(Rl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?Kv(t,e,n):(ye(Ce,Ce.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);ye(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,qv(t,e,n)}return Kn(t,e,n)}var Gv,_d,Yv,Xv;Gv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_d=function(){};Yv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(bn.current);var i=null;switch(n){case"input":s=Uc(t,s),r=Uc(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=qc(t,s),r=qc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Il)}Wc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(uo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(uo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&_e("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Xv=function(t,e,n,r){n!==r&&(e.flags|=4)};function ji(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function B1(t,e,n){var r=e.pendingProps;switch(Th(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Vt(e.type)&&Cl(),gt(e),null;case 3:return r=e.stateNode,Xs(),Ee(Dt),Ee(xt),Ph(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ma(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(Nd(dn),dn=null))),_d(t,e),gt(e),null;case 5:kh(e);var s=Gr(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Yv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return gt(e),null}if(t=Gr(bn.current),Ma(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[wo]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Bi.length;s++)_e(Bi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Bp(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":qp(r,i),_e("invalid",r)}Wc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,l,t),s=["children",""+l]):uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Na(r),$p(r,i,!0);break;case"textarea":Na(r),Hp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Il)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Iy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[wo]=r,Gv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kc(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bi.length;s++)_e(Bi[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Bp(t,r),s=Uc(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),_e("invalid",t);break;case"textarea":qp(t,r),s=qc(t,r),_e("invalid",t);break;default:s=r}Wc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?by(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Cy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&co(t,u):typeof u=="number"&&co(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&lh(t,i,u,o))}switch(n){case"input":Na(t),$p(t,r,!1);break;case"textarea":Na(t),Hp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ir(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Os(t,!!r.multiple,i,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Il)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)Xv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Gr(Eo.current),Gr(bn.current),Ma(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:ja(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return gt(e),null;case 13:if(Ee(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Ut!==null&&e.mode&1&&!(e.flags&128))mv(),Gs(),e.flags|=98560,i=!1;else if(i=Ma(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Cn]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),i=!1}else dn!==null&&(Nd(dn),dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?Ke===0&&(Ke=3):qh())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return Xs(),_d(t,e),t===null&&vo(e.stateNode.containerInfo),gt(e),null;case 10:return Nh(e.type._context),gt(e),null;case 17:return Vt(e.type)&&Cl(),gt(e),null;case 19:if(Ee(Ce),i=e.memoizedState,i===null)return gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ji(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dl(t),o!==null){for(e.flags|=128,ji(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Zs&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304)}else{if(!r)if(t=Dl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Se)return gt(e),null}else 2*Fe()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Ce.current,ye(Ce,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return $h(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function $1(t,e){switch(Th(e),e.tag){case 1:return Vt(e.type)&&Cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),Ee(Dt),Ee(xt),Ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kh(e),null;case 13:if(Ee(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ce),null;case 4:return Xs(),null;case 10:return Nh(e.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var Fa=!1,_t=!1,q1=typeof WeakSet=="function"?WeakSet:Set,H=null;function js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function wd(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Vm=!1;function H1(t,e){if(rd=El,t=nv(),xh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,p=0,m=t,v=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)v=m,m=I;for(;;){if(m===t)break t;if(v===n&&++d===s&&(l=o),v===i&&++p===r&&(u=o),(I=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=I}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(sd={focusedElem:t,selectionRange:n},El=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var b=R.memoizedProps,S=R.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:un(e.type,b),S);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){Pe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return R=Vm,Vm=!1,R}function Zi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&wd(e,n,i)}s=s.next}while(s!==r)}}function mu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jv(t){var e=t.alternate;e!==null&&(t.alternate=null,Jv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[wo],delete e[ad],delete e[N1],delete e[b1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zv(t){return t.tag===5||t.tag===3||t.tag===4}function jm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ed(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Il));else if(r!==4&&(t=t.child,t!==null))for(Ed(t,e,n),t=t.sibling;t!==null;)Ed(t,e,n),t=t.sibling}function Td(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Td(t,e,n),t=t.sibling;t!==null;)Td(t,e,n),t=t.sibling}var nt=null,cn=!1;function rr(t,e,n){for(n=n.child;n!==null;)e0(t,e,n),n=n.sibling}function e0(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(au,n)}catch{}switch(n.tag){case 5:_t||js(n,e);case 6:var r=nt,s=cn;nt=null,rr(t,e,n),nt=r,cn=s,nt!==null&&(cn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(cn?(t=nt,n=n.stateNode,t.nodeType===8?pc(t.parentNode,n):t.nodeType===1&&pc(t,n),mo(t)):pc(nt,n.stateNode));break;case 4:r=nt,s=cn,nt=n.stateNode.containerInfo,cn=!0,rr(t,e,n),nt=r,cn=s;break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wd(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!_t&&(js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,rr(t,e,n),_t=r):rr(t,e,n);break;default:rr(t,e,n)}}function Mm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new q1),e.forEach(function(r){var s=eE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:nt=l.stateNode,cn=!1;break e;case 3:nt=l.stateNode.containerInfo,cn=!0;break e;case 4:nt=l.stateNode.containerInfo,cn=!0;break e}l=l.return}if(nt===null)throw Error(B(160));e0(i,o,s),nt=null,cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Pe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t0(e,t),e=e.sibling}function t0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),Tn(t),r&4){try{Zi(3,t,t.return),mu(3,t)}catch(b){Pe(t,t.return,b)}try{Zi(5,t,t.return)}catch(b){Pe(t,t.return,b)}}break;case 1:ln(e,t),Tn(t),r&512&&n!==null&&js(n,n.return);break;case 5:if(ln(e,t),Tn(t),r&512&&n!==null&&js(n,n.return),t.flags&32){var s=t.stateNode;try{co(s,"")}catch(b){Pe(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ty(s,i),Kc(l,o);var d=Kc(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?by(s,m):p==="dangerouslySetInnerHTML"?Cy(s,m):p==="children"?co(s,m):lh(s,p,m,d)}switch(l){case"input":Bc(s,i);break;case"textarea":Sy(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Os(s,!!i.multiple,I,!1):v!==!!i.multiple&&(i.defaultValue!=null?Os(s,!!i.multiple,i.defaultValue,!0):Os(s,!!i.multiple,i.multiple?[]:"",!1))}s[wo]=i}catch(b){Pe(t,t.return,b)}}break;case 6:if(ln(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Pe(t,t.return,b)}}break;case 3:if(ln(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(b){Pe(t,t.return,b)}break;case 4:ln(e,t),Tn(t);break;case 13:ln(e,t),Tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Uh=Fe())),r&4&&Mm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(d=_t)||p,ln(e,t),_t=d):ln(e,t),Tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(m=H=p;H!==null;){switch(v=H,I=v.child,v.tag){case 0:case 11:case 14:case 15:Zi(4,v,v.return);break;case 1:js(v,v.return);var R=v.stateNode;if(typeof R.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(b){Pe(r,n,b)}}break;case 5:js(v,v.return);break;case 22:if(v.memoizedState!==null){Om(m);continue}}I!==null?(I.return=v,H=I):Om(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ny("display",o))}catch(b){Pe(t,t.return,b)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){Pe(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ln(e,t),Tn(t),r&4&&Mm(t);break;case 21:break;default:ln(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(co(s,""),r.flags&=-33);var i=jm(t);Td(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=jm(t);Ed(t,l,o);break;default:throw Error(B(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function W1(t,e,n){H=t,n0(t)}function n0(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||_t;l=Fa;var d=_t;if(Fa=o,(_t=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Fm(s):u!==null?(u.return=o,H=u):Fm(s);for(;i!==null;)H=i,n0(i),i=i.sibling;H=s,Fa=l,_t=d}Lm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Lm(t)}}function Lm(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||mu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&mo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}_t||e.flags&512&&xd(e)}catch(v){Pe(e,e.return,v)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Om(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Fm(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mu(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Pe(e,s,u)}}var i=e.return;try{xd(e)}catch(u){Pe(e,i,u)}break;case 5:var o=e.return;try{xd(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var K1=Math.ceil,Ml=Xn.ReactCurrentDispatcher,Fh=Xn.ReactCurrentOwner,Zt=Xn.ReactCurrentBatchConfig,ae=0,Je=null,Be=null,it=0,zt=0,Ms=kr(0),Ke=0,Co=null,rs=0,gu=0,zh=0,eo=null,Rt=null,Uh=0,Zs=1/0,Fn=null,Ll=!1,Sd=null,vr=null,za=!1,dr=null,Ol=0,to=0,Id=null,ll=-1,ul=0;function It(){return ae&6?Fe():ll!==-1?ll:ll=Fe()}function _r(t){return t.mode&1?ae&2&&it!==0?it&-it:R1.transition!==null?(ul===0&&(ul=zy()),ul):(t=fe,t!==0||(t=window.event,t=t===void 0?16:Ky(t.type)),t):1}function fn(t,e,n,r){if(50<to)throw to=0,Id=null,Error(B(185));Bo(t,n,r),(!(ae&2)||t!==Je)&&(t===Je&&(!(ae&2)&&(gu|=n),Ke===4&&ur(t,it)),jt(t,r),n===1&&ae===0&&!(e.mode&1)&&(Zs=Fe()+500,hu&&Pr()))}function jt(t,e){var n=t.callbackNode;Rx(t,e);var r=xl(t,t===Je?it:0);if(r===0)n!==null&&Qp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qp(n),e===1)t.tag===0?A1(zm.bind(null,t)):hv(zm.bind(null,t)),I1(function(){!(ae&6)&&Pr()}),n=null;else{switch(Uy(r)){case 1:n=fh;break;case 4:n=Oy;break;case 16:n=wl;break;case 536870912:n=Fy;break;default:n=wl}n=c0(n,r0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r0(t,e){if(ll=-1,ul=0,ae&6)throw Error(B(327));var n=t.callbackNode;if($s()&&t.callbackNode!==n)return null;var r=xl(t,t===Je?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fl(t,r);else{e=r;var s=ae;ae|=2;var i=i0();(Je!==t||it!==e)&&(Fn=null,Zs=Fe()+500,Xr(t,e));do try{Y1();break}catch(l){s0(t,l)}while(!0);Ch(),Ml.current=i,ae=s,Be!==null?e=0:(Je=null,it=0,e=Ke)}if(e!==0){if(e===2&&(s=Jc(t),s!==0&&(r=s,e=Cd(t,s))),e===1)throw n=Co,Xr(t,0),ur(t,r),jt(t,Fe()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!Q1(s)&&(e=Fl(t,r),e===2&&(i=Jc(t),i!==0&&(r=i,e=Cd(t,i))),e===1))throw n=Co,Xr(t,0),ur(t,r),jt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Hr(t,Rt,Fn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=Uh+500-Fe(),10<e)){if(xl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=od(Hr.bind(null,t,Rt,Fn),e);break}Hr(t,Rt,Fn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-hn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*K1(r/1960))-r,10<r){t.timeoutHandle=od(Hr.bind(null,t,Rt,Fn),r);break}Hr(t,Rt,Fn);break;case 5:Hr(t,Rt,Fn);break;default:throw Error(B(329))}}}return jt(t,Fe()),t.callbackNode===n?r0.bind(null,t):null}function Cd(t,e){var n=eo;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=Fl(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&Nd(e)),t}function Nd(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function Q1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~zh,e&=~gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function zm(t){if(ae&6)throw Error(B(327));$s();var e=xl(t,0);if(!(e&1))return jt(t,Fe()),null;var n=Fl(t,e);if(t.tag!==0&&n===2){var r=Jc(t);r!==0&&(e=r,n=Cd(t,r))}if(n===1)throw n=Co,Xr(t,0),ur(t,e),jt(t,Fe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,Rt,Fn),jt(t,Fe()),null}function Bh(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Zs=Fe()+500,hu&&Pr())}}function ss(t){dr!==null&&dr.tag===0&&!(ae&6)&&$s();var e=ae;ae|=1;var n=Zt.transition,r=fe;try{if(Zt.transition=null,fe=1,t)return t()}finally{fe=r,Zt.transition=n,ae=e,!(ae&6)&&Pr()}}function $h(){zt=Ms.current,Ee(Ms)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S1(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Th(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cl();break;case 3:Xs(),Ee(Dt),Ee(xt),Ph();break;case 5:kh(r);break;case 4:Xs();break;case 13:Ee(Ce);break;case 19:Ee(Ce);break;case 10:Nh(r.type._context);break;case 22:case 23:$h()}n=n.return}if(Je=t,Be=t=wr(t.current,null),it=zt=e,Ke=0,Co=null,zh=gu=rs=0,Rt=eo=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qr=null}return t}function s0(t,e){do{var n=Be;try{if(Ch(),il.current=jl,Vl){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vl=!1}if(ns=0,Ye=qe=Ne=null,Ji=!1,To=0,Fh.current=null,n===null||n.return===null){Ke=1,Co=e,Be=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=Nm(o);if(I!==null){I.flags&=-257,bm(I,o,l,i,e),I.mode&1&&Cm(i,d,e),e=I,u=d;var R=e.updateQueue;if(R===null){var b=new Set;b.add(u),e.updateQueue=b}else R.add(u);break e}else{if(!(e&1)){Cm(i,d,e),qh();break e}u=Error(B(426))}}else if(Se&&l.mode&1){var S=Nm(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),bm(S,o,l,i,e),Sh(Js(u,l));break e}}i=u=Js(u,l),Ke!==4&&(Ke=2),eo===null?eo=[i]:eo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Uv(i,u,e);wm(i,w);break e;case 1:l=u;var T=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(vr===null||!vr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Bv(i,l,e);wm(i,D);break e}}i=i.return}while(i!==null)}a0(n)}catch(L){e=L,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function i0(){var t=Ml.current;return Ml.current=jl,t===null?jl:t}function qh(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Je===null||!(rs&268435455)&&!(gu&268435455)||ur(Je,it)}function Fl(t,e){var n=ae;ae|=2;var r=i0();(Je!==t||it!==e)&&(Fn=null,Xr(t,e));do try{G1();break}catch(s){s0(t,s)}while(!0);if(Ch(),ae=n,Ml.current=r,Be!==null)throw Error(B(261));return Je=null,it=0,Ke}function G1(){for(;Be!==null;)o0(Be)}function Y1(){for(;Be!==null&&!xx();)o0(Be)}function o0(t){var e=u0(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?a0(t):Be=e,Fh.current=null}function a0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$1(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Be=null;return}}else if(n=B1(n,e,zt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ke===0&&(Ke=5)}function Hr(t,e,n){var r=fe,s=Zt.transition;try{Zt.transition=null,fe=1,X1(t,e,n,r)}finally{Zt.transition=s,fe=r}return null}function X1(t,e,n,r){do $s();while(dr!==null);if(ae&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(kx(t,i),t===Je&&(Be=Je=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||za||(za=!0,c0(wl,function(){return $s(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=fe;fe=1;var l=ae;ae|=4,Fh.current=null,H1(t,n),t0(n,t),y1(sd),El=!!rd,sd=rd=null,t.current=n,W1(n),Ex(),ae=l,fe=o,Zt.transition=i}else t.current=n;if(za&&(za=!1,dr=t,Ol=s),i=t.pendingLanes,i===0&&(vr=null),Ix(n.stateNode),jt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ll)throw Ll=!1,t=Sd,Sd=null,t;return Ol&1&&t.tag!==0&&$s(),i=t.pendingLanes,i&1?t===Id?to++:(to=0,Id=t):to=0,Pr(),null}function $s(){if(dr!==null){var t=Uy(Ol),e=Zt.transition,n=fe;try{if(Zt.transition=null,fe=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,Ol=0,ae&6)throw Error(B(331));var s=ae;for(ae|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(H=d;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:Zi(8,p,i)}var m=p.child;if(m!==null)m.return=p,H=m;else for(;H!==null;){p=H;var v=p.sibling,I=p.return;if(Jv(p),p===d){H=null;break}if(v!==null){v.return=I,H=v;break}H=I}}}var R=i.alternate;if(R!==null){var b=R.child;if(b!==null){R.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zi(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var T=t.current;for(H=T;H!==null;){o=H;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,H=C;else e:for(o=T;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mu(9,l)}}catch(L){Pe(l,l.return,L)}if(l===o){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(ae=s,Pr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(au,t)}catch{}r=!0}return r}finally{fe=n,Zt.transition=e}}return!1}function Um(t,e,n){e=Js(n,e),e=Uv(t,e,1),t=yr(t,e,1),e=It(),t!==null&&(Bo(t,1,e),jt(t,e))}function Pe(t,e,n){if(t.tag===3)Um(t,t,n);else for(;e!==null;){if(e.tag===3){Um(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=Js(n,t),t=Bv(e,t,1),e=yr(e,t,1),t=It(),e!==null&&(Bo(e,1,t),jt(e,t));break}}e=e.return}}function J1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(it&n)===n&&(Ke===4||Ke===3&&(it&130023424)===it&&500>Fe()-Uh?Xr(t,0):zh|=n),jt(t,e)}function l0(t,e){e===0&&(t.mode&1?(e=Ra,Ra<<=1,!(Ra&130023424)&&(Ra=4194304)):e=1);var n=It();t=Wn(t,e),t!==null&&(Bo(t,e,n),jt(t,n))}function Z1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),l0(t,n)}function eE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),l0(t,n)}var u0;u0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,U1(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,Se&&e.flags&1048576&&fv(e,Al,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;al(t,e),t=e.pendingProps;var s=Qs(e,xt.current);Bs(e,n),s=Vh(null,e,r,t,s,n);var i=jh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(i=!0,Nl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ah(e),s.updater=pu,e.stateNode=s,s._reactInternals=e,fd(e,r,t,n),e=gd(null,e,r,!0,i,n)):(e.tag=0,Se&&i&&Eh(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(al(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=nE(r),t=un(r,t),s){case 0:e=md(null,e,r,t,n);break e;case 1:e=km(null,e,r,t,n);break e;case 11:e=Am(null,e,r,t,n);break e;case 14:e=Rm(null,e,r,un(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),md(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),km(t,e,r,s,n);case 3:e:{if(Wv(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,_v(t,e),Pl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error(B(423)),e),e=Pm(t,e,r,n,s);break e}else if(r!==s){s=Js(Error(B(424)),e),e=Pm(t,e,r,n,s);break e}else for(Ut=gr(e.stateNode.containerInfo.firstChild),$t=e,Se=!0,dn=null,n=yv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),r===s){e=Kn(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return wv(e),t===null&&cd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,id(r,s)?o=null:i!==null&&id(r,i)&&(e.flags|=32),Hv(t,e),St(t,e,o,n),e.child;case 6:return t===null&&cd(e),null;case 13:return Kv(t,e,n);case 4:return Rh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Am(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(Rl,r._currentValue),r._currentValue=o,i!==null)if(mn(i.value,o)){if(i.children===s.children&&!Dt.current){e=Kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=$n(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),dd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),dd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bs(e,n),s=en(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=un(r,e.pendingProps),s=un(r.type,s),Rm(t,e,r,s,n);case 15:return $v(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),al(t,e),e.tag=1,Vt(r)?(t=!0,Nl(e)):t=!1,Bs(e,n),zv(e,r,s),fd(e,r,s,n),gd(null,e,r,!0,t,n);case 19:return Qv(t,e,n);case 22:return qv(t,e,n)}throw Error(B(156,e.tag))};function c0(t,e){return Ly(t,e)}function tE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new tE(t,e,n,r)}function Hh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nE(t){if(typeof t=="function")return Hh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ch)return 11;if(t===dh)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return Jr(n.children,s,i,e);case uh:o=8,s|=8;break;case Lc:return t=Jt(12,n,e,s|2),t.elementType=Lc,t.lanes=i,t;case Oc:return t=Jt(13,n,e,s),t.elementType=Oc,t.lanes=i,t;case Fc:return t=Jt(19,n,e,s),t.elementType=Fc,t.lanes=i,t;case wy:return yu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vy:o=10;break e;case _y:o=9;break e;case ch:o=11;break e;case dh:o=14;break e;case ir:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jr(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function yu(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=wy,t.lanes=n,t.stateNode={isHidden:!1},t}function Ec(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function Tc(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rc(0),this.expirationTimes=rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wh(t,e,n,r,s,i,o,l,u){return t=new rE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ah(i),t}function sE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function d0(t){if(!t)return Cr;t=t._reactInternals;e:{if(cs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Vt(n))return dv(t,n,e)}return e}function h0(t,e,n,r,s,i,o,l,u){return t=Wh(n,r,!0,t,s,i,o,l,u),t.context=d0(null),n=t.current,r=It(),s=_r(n),i=$n(r,s),i.callback=e??null,yr(n,i,s),t.current.lanes=s,Bo(t,s,r),jt(t,r),t}function vu(t,e,n,r){var s=e.current,i=It(),o=_r(s);return n=d0(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(fn(t,s,o,i),sl(t,s,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kh(t,e){Bm(t,e),(t=t.alternate)&&Bm(t,e)}function iE(){return null}var f0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qh(t){this._internalRoot=t}_u.prototype.render=Qh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));vu(t,e,null,null)};_u.prototype.unmount=Qh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){vu(null,t,null,null)}),e[Hn]=null}};function _u(t){this._internalRoot=t}_u.prototype.unstable_scheduleHydration=function(t){if(t){var e=qy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&Wy(t)}};function Gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $m(){}function oE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=zl(o);i.call(d)}}var o=h0(e,r,t,0,null,!1,!1,"",$m);return t._reactRootContainer=o,t[Hn]=o.current,vo(t.nodeType===8?t.parentNode:t),ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=zl(u);l.call(d)}}var u=Wh(t,0,!1,null,null,!1,!1,"",$m);return t._reactRootContainer=u,t[Hn]=u.current,vo(t.nodeType===8?t.parentNode:t),ss(function(){vu(e,u,n,r)}),u}function xu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=zl(o);l.call(u)}}vu(e,o,t,s)}else o=oE(n,e,t,s,r);return zl(o)}By=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ui(e.pendingLanes);n!==0&&(ph(e,n|1),jt(e,Fe()),!(ae&6)&&(Zs=Fe()+500,Pr()))}break;case 13:ss(function(){var r=Wn(t,1);if(r!==null){var s=It();fn(r,t,1,s)}}),Kh(t,1)}};mh=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=It();fn(e,t,134217728,n)}Kh(t,134217728)}};$y=function(t){if(t.tag===13){var e=_r(t),n=Wn(t,e);if(n!==null){var r=It();fn(n,t,e,r)}Kh(t,e)}};qy=function(){return fe};Hy=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Gc=function(t,e,n){switch(e){case"input":if(Bc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=du(r);if(!s)throw Error(B(90));Ey(r),Bc(r,s)}}}break;case"textarea":Sy(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};ky=Bh;Py=ss;var aE={usingClientEntryPoint:!1,Events:[qo,Rs,du,Ay,Ry,Bh]},Mi={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jy(t),t===null?null:t.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||iE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ua.isDisabled&&Ua.supportsFiber)try{au=Ua.inject(lE),Nn=Ua}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gh(e))throw Error(B(200));return sE(t,e,null,n)};Ht.createRoot=function(t,e){if(!Gh(t))throw Error(B(299));var n=!1,r="",s=f0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wh(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,vo(t.nodeType===8?t.parentNode:t),new Qh(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=jy(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return ss(t)};Ht.hydrate=function(t,e,n){if(!wu(e))throw Error(B(200));return xu(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!Gh(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=f0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=h0(e,null,t,1,n??null,s,!1,i,o),t[Hn]=e.current,vo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _u(e)};Ht.render=function(t,e,n){if(!wu(e))throw Error(B(200));return xu(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!wu(t))throw Error(B(40));return t._reactRootContainer?(ss(function(){xu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Ht.unstable_batchedUpdates=Bh;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return xu(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function p0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p0)}catch(t){console.error(t)}}p0(),py.exports=Ht;var Ls=py.exports,m0,qm=Ls;m0=qm.createRoot,qm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),De=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},p)=>k.createElement("svg",{ref:p,...uE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${cE(t)}`,l].join(" "),...d},[...e.map(([m,v])=>k.createElement(m,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=De("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=De("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=De("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=De("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=De("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=De("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=De("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=De("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=De("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=De("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yE=({children:t,currentPage:e,onPageChange:n})=>{const r=[{id:"dashboard",name:"대시보드",icon:g0},{id:"demand-register",name:"수요처 등록",icon:No},{id:"demand-list",name:"수요처 관리",icon:$l},{id:"performance-input",name:"실적 입력",icon:gE},{id:"performance-list",name:"실적 조회",icon:bo},{id:"budget-usage",name:"예산 사용 내역",icon:$l}];return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[h.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:h.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"관리자 대시보드"})}),h.jsx("nav",{className:"mt-8",children:h.jsx("div",{className:"space-y-1 px-4",children:r.map(s=>{const i=s.icon;return h.jsxs("button",{onClick:()=>n(s.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${e===s.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[h.jsx(i,{className:"mr-3 h-5 w-5"}),s.name]},s.id)})})})]}),h.jsx("div",{className:"pl-64",children:h.jsx("main",{className:"p-8",children:t})})]})};function vE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return k.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Tu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ci(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function ef(t){return"nodeType"in t}function Lt(t){var e,n;return t?ci(t)?t:ef(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function tf(t){const{Document:e}=Lt(t);return t instanceof e}function Wo(t){return ci(t)?!1:t instanceof Lt(t).HTMLElement}function w0(t){return t instanceof Lt(t).SVGElement}function di(t){return t?ci(t)?t.document:ef(t)?tf(t)?t:Wo(t)||w0(t)?t.ownerDocument:document:document:document}const Pn=Tu?k.useLayoutEffect:k.useEffect;function nf(t){const e=k.useRef(t);return Pn(()=>{e.current=t}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function _E(){const t=k.useRef(null),e=k.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=k.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Ao(t,e){e===void 0&&(e=[t]);const n=k.useRef(t);return Pn(()=>{n.current!==t&&(n.current=t)},e),n}function Ko(t,e){const n=k.useRef();return k.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Hl(t){const e=nf(t),n=k.useRef(null),r=k.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function bd(t){const e=k.useRef();return k.useEffect(()=>{e.current=t},[t]),e.current}let Sc={};function Qo(t,e){return k.useMemo(()=>{if(e)return e;const n=Sc[t]==null?0:Sc[t]+1;return Sc[t]=n,t+"-"+n},[t,e])}function x0(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[u,d]of l){const p=i[u];p!=null&&(i[u]=p+t*d)}return i},{...e})}}const qs=x0(1),Wl=x0(-1);function wE(t){return"clientX"in t&&"clientY"in t}function rf(t){if(!t)return!1;const{KeyboardEvent:e}=Lt(t.target);return e&&t instanceof e}function xE(t){if(!t)return!1;const{TouchEvent:e}=Lt(t.target);return e&&t instanceof e}function Ad(t){if(xE(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return wE(t)?{x:t.clientX,y:t.clientY}:null}const Ro=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ro.Translate.toString(t),Ro.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Wm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function EE(t){return t.matches(Wm)?t:t.querySelector(Wm)}const TE={display:"none"};function SE(t){let{id:e,value:n}=t;return At.createElement("div",{id:e,style:TE},n)}function IE(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return At.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function CE(){const[t,e]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const E0=k.createContext(null);function NE(t){const e=k.useContext(E0);k.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function bE(){const[t]=k.useState(()=>new Set),e=k.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[k.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const AE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},RE={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function kE(t){let{announcements:e=RE,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=AE}=t;const{announce:i,announcement:o}=CE(),l=Qo("DndLiveRegion"),[u,d]=k.useState(!1);if(k.useEffect(()=>{d(!0)},[]),NE(k.useMemo(()=>({onDragStart(m){let{active:v}=m;i(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:I}=m;e.onDragMove&&i(e.onDragMove({active:v,over:I}))},onDragOver(m){let{active:v,over:I}=m;i(e.onDragOver({active:v,over:I}))},onDragEnd(m){let{active:v,over:I}=m;i(e.onDragEnd({active:v,over:I}))},onDragCancel(m){let{active:v,over:I}=m;i(e.onDragCancel({active:v,over:I}))}}),[i,e])),!u)return null;const p=At.createElement(At.Fragment,null,At.createElement(SE,{id:r,value:s.draggable}),At.createElement(IE,{id:l,announcement:o}));return n?Ls.createPortal(p,n):p}var We;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(We||(We={}));function Kl(){}function PE(t,e){return k.useMemo(()=>({sensor:t,options:{}}),[t,e])}function DE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return k.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const gn=Object.freeze({x:0,y:0});function VE(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jE(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function ME(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function LE(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Km(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const OE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Km(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=VE(Km(u),s);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(jE)};function FE(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const u=e.width*e.height,d=t.width*t.height,p=o*l,m=p/(u+d-p);return Number(m.toFixed(4))}return 0}const zE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const u=FE(l,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(ME)};function UE(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function T0(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:gn}function BE(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const $E=BE(1);function qE(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function HE(t,e,n){const r=qE(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,u=t.left-o-(1-s)*parseFloat(n),d=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?t.width/s:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:d,right:u+p,bottom:d+m,left:u}}const WE={ignoreTransform:!1};function hi(t,e){e===void 0&&(e=WE);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=Lt(t).getComputedStyle(t);d&&(n=HE(n,d,p))}const{top:r,left:s,width:i,height:o,bottom:l,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:u}}function Qm(t){return hi(t,{ignoreTransform:!0})}function KE(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function QE(t,e){return e===void 0&&(e=Lt(t).getComputedStyle(t)),e.position==="fixed"}function GE(t,e){e===void 0&&(e=Lt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function sf(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(tf(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Wo(s)||w0(s)||n.includes(s))return n;const i=Lt(t).getComputedStyle(s);return s!==t&&GE(s,i)&&n.push(s),QE(s,i)?n:r(s.parentNode)}return t?r(t):n}function S0(t){const[e]=sf(t,1);return e??null}function Ic(t){return!Tu||!t?null:ci(t)?t:ef(t)?tf(t)||t===di(t).scrollingElement?window:Wo(t)?t:null:null}function I0(t){return ci(t)?t.scrollX:t.scrollLeft}function C0(t){return ci(t)?t.scrollY:t.scrollTop}function Rd(t){return{x:I0(t),y:C0(t)}}var Xe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Xe||(Xe={}));function N0(t){return!Tu||!t?!1:t===document.scrollingElement}function b0(t){const e={x:0,y:0},n=N0(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const YE={x:.2,y:.2};function XE(t,e,n,r,s){let{top:i,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=YE);const{isTop:d,isBottom:p,isLeft:m,isRight:v}=b0(t),I={x:0,y:0},R={x:0,y:0},b={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+b.height?(I.y=Xe.Backward,R.y=r*Math.abs((e.top+b.height-i)/b.height)):!p&&u>=e.bottom-b.height&&(I.y=Xe.Forward,R.y=r*Math.abs((e.bottom-b.height-u)/b.height)),!v&&l>=e.right-b.width?(I.x=Xe.Forward,R.x=r*Math.abs((e.right-b.width-l)/b.width)):!m&&o<=e.left+b.width&&(I.x=Xe.Backward,R.x=r*Math.abs((e.left+b.width-o)/b.width)),{direction:I,speed:R}}function JE(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function A0(t){return t.reduce((e,n)=>qs(e,Rd(n)),gn)}function ZE(t){return t.reduce((e,n)=>e+I0(n),0)}function eT(t){return t.reduce((e,n)=>e+C0(n),0)}function tT(t,e){if(e===void 0&&(e=hi),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);S0(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const nT=[["x",["left","right"],ZE],["y",["top","bottom"],eT]];class of{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sf(n),s=A0(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of nT)for(const u of o)Object.defineProperty(this,u,{get:()=>{const d=l(r),p=s[i]-d;return this.rect[u]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class no{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function rT(t){const{EventTarget:e}=Lt(t);return t instanceof e?t:di(t)}function Cc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Gt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Gt||(Gt={}));function Gm(t){t.preventDefault()}function sT(t){t.stopPropagation()}var de;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(de||(de={}));const R0={start:[de.Space,de.Enter],cancel:[de.Esc],end:[de.Space,de.Enter,de.Tab]},iT=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case de.Right:return{...n,x:n.x+25};case de.Left:return{...n,x:n.x-25};case de.Down:return{...n,y:n.y+25};case de.Up:return{...n,y:n.y-25}}};class k0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new no(di(n)),this.windowListeners=new no(Lt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Gt.Resize,this.handleCancel),this.windowListeners.add(Gt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Gt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&tT(r),n(gn)}handleKeyDown(e){if(rf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=R0,coordinateGetter:o=iT,scrollBehavior:l="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:gn;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:n,context:r.current,currentCoordinates:p});if(m){const v=Wl(m,p),I={x:0,y:0},{scrollableAncestors:R}=r.current;for(const b of R){const S=e.code,{isTop:w,isRight:T,isLeft:C,isBottom:D,maxScroll:L,minScroll:j}=b0(b),E=JE(b),g={x:Math.min(S===de.Right?E.right-E.width/2:E.right,Math.max(S===de.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(S===de.Down?E.bottom-E.height/2:E.bottom,Math.max(S===de.Down?E.top:E.top+E.height/2,m.y))},y=S===de.Right&&!T||S===de.Left&&!C,x=S===de.Down&&!D||S===de.Up&&!w;if(y&&g.x!==m.x){const A=b.scrollLeft+v.x,P=S===de.Right&&A<=L.x||S===de.Left&&A>=j.x;if(P&&!v.y){b.scrollTo({left:A,behavior:l});return}P?I.x=b.scrollLeft-A:I.x=S===de.Right?b.scrollLeft-L.x:b.scrollLeft-j.x,I.x&&b.scrollBy({left:-I.x,behavior:l});break}else if(x&&g.y!==m.y){const A=b.scrollTop+v.y,P=S===de.Down&&A<=L.y||S===de.Up&&A>=j.y;if(P&&!v.x){b.scrollTo({top:A,behavior:l});return}P?I.y=b.scrollTop-A:I.y=S===de.Down?b.scrollTop-L.y:b.scrollTop-j.y,I.y&&b.scrollBy({top:-I.y,behavior:l});break}}this.handleMove(e,qs(Wl(m,this.referenceCoordinates),I))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}k0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=R0,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Ym(t){return!!(t&&"distance"in t)}function Xm(t){return!!(t&&"delay"in t)}class af{constructor(e,n,r){var s;r===void 0&&(r=rT(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=di(o),this.documentListeners=new no(this.document),this.listeners=new no(r),this.windowListeners=new no(Lt(o)),this.initialCoordinates=(s=Ad(i))!=null?s:gn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Gt.Resize,this.handleCancel),this.windowListeners.add(Gt.DragStart,Gm),this.windowListeners.add(Gt.VisibilityChange,this.handleCancel),this.windowListeners.add(Gt.ContextMenu,Gm),this.documentListeners.add(Gt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Xm(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ym(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Gt.Click,sT,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Gt.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const u=(n=Ad(e))!=null?n:gn,d=Wl(s,u);if(!r&&l){if(Ym(l)){if(l.tolerance!=null&&Cc(d,l.tolerance))return this.handleCancel();if(Cc(d,l.distance))return this.handleStart()}if(Xm(l)&&Cc(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===de.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const oT={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lf extends af{constructor(e){const{event:n}=e,r=di(n.target);super(e,oT,r)}}lf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const aT={move:{name:"mousemove"},end:{name:"mouseup"}};var kd;(function(t){t[t.RightClick=2]="RightClick"})(kd||(kd={}));class lT extends af{constructor(e){super(e,aT,di(e.event.target))}}lT.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===kd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Nc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class uT extends af{constructor(e){super(e,Nc)}static setup(){return window.addEventListener(Nc.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Nc.move.name,e)};function e(){}}}uT.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var ro;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ro||(ro={}));var Ql;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ql||(Ql={}));function cT(t){let{acceleration:e,activator:n=ro.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=Ql.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:p,delta:m,threshold:v}=t;const I=hT({delta:m,disabled:!i}),[R,b]=_E(),S=k.useRef({x:0,y:0}),w=k.useRef({x:0,y:0}),T=k.useMemo(()=>{switch(n){case ro.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case ro.DraggableRect:return s}},[n,s,u]),C=k.useRef(null),D=k.useCallback(()=>{const j=C.current;if(!j)return;const E=S.current.x*w.current.x,g=S.current.y*w.current.y;j.scrollBy(E,g)},[]),L=k.useMemo(()=>l===Ql.TreeOrder?[...d].reverse():d,[l,d]);k.useEffect(()=>{if(!i||!d.length||!T){b();return}for(const j of L){if((r==null?void 0:r(j))===!1)continue;const E=d.indexOf(j),g=p[E];if(!g)continue;const{direction:y,speed:x}=XE(j,g,T,e,v);for(const A of["x","y"])I[A][y[A]]||(x[A]=0,y[A]=0);if(x.x>0||x.y>0){b(),C.current=j,R(D,o),S.current=x,w.current=y;return}}S.current={x:0,y:0},w.current={x:0,y:0},b()},[e,D,r,b,i,o,JSON.stringify(T),JSON.stringify(I),R,d,L,p,JSON.stringify(v)])}const dT={x:{[Xe.Backward]:!1,[Xe.Forward]:!1},y:{[Xe.Backward]:!1,[Xe.Forward]:!1}};function hT(t){let{delta:e,disabled:n}=t;const r=bd(e);return Ko(s=>{if(n||!r||!s)return dT;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Xe.Backward]:s.x[Xe.Backward]||i.x===-1,[Xe.Forward]:s.x[Xe.Forward]||i.x===1},y:{[Xe.Backward]:s.y[Xe.Backward]||i.y===-1,[Xe.Forward]:s.y[Xe.Forward]||i.y===1}}},[n,e,r])}function fT(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Ko(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function pT(t,e){return k.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var ko;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ko||(ko={}));var Pd;(function(t){t.Optimized="optimized"})(Pd||(Pd={}));const Jm=new Map;function mT(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=k.useState(null),{frequency:l,measure:u,strategy:d}=s,p=k.useRef(t),m=S(),v=Ao(m),I=k.useCallback(function(w){w===void 0&&(w=[]),!v.current&&o(T=>T===null?w:T.concat(w.filter(C=>!T.includes(C))))},[v]),R=k.useRef(null),b=Ko(w=>{if(m&&!n)return Jm;if(!w||w===Jm||p.current!==t||i!=null){const T=new Map;for(let C of t){if(!C)continue;if(i&&i.length>0&&!i.includes(C.id)&&C.rect.current){T.set(C.id,C.rect.current);continue}const D=C.node.current,L=D?new of(u(D),D):null;C.rect.current=L,L&&T.set(C.id,L)}return T}return w},[t,i,n,m,u]);return k.useEffect(()=>{p.current=t},[t]),k.useEffect(()=>{m||I()},[n,m]),k.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),k.useEffect(()=>{m||typeof l!="number"||R.current!==null||(R.current=setTimeout(()=>{I(),R.current=null},l))},[l,m,I,...r]),{droppableRects:b,measureDroppableContainers:I,measuringScheduled:i!=null};function S(){switch(d){case ko.Always:return!1;case ko.BeforeDragging:return n;default:return!n}}}function P0(t,e){return Ko(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function gT(t,e){return P0(t,e)}function yT(t){let{callback:e,disabled:n}=t;const r=nf(e),s=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return k.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Su(t){let{callback:e,disabled:n}=t;const r=nf(e),s=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return k.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function vT(t){return new of(hi(t),t)}function Zm(t,e,n){e===void 0&&(e=vT);const[r,s]=k.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=u??n)!=null?d:null}const p=e(t);return JSON.stringify(u)===JSON.stringify(p)?u:p})}const o=yT({callback(u){if(t)for(const d of u){const{type:p,target:m}=d;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),l=Su({callback:i});return Pn(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function _T(t){const e=P0(t);return T0(t,e)}const eg=[];function wT(t){const e=k.useRef(t),n=Ko(r=>t?r&&r!==eg&&t&&e.current&&t.parentNode===e.current.parentNode?r:sf(t):eg,[t]);return k.useEffect(()=>{e.current=t},[t]),n}function xT(t){const[e,n]=k.useState(null),r=k.useRef(t),s=k.useCallback(i=>{const o=Ic(i.target);o&&n(l=>l?(l.set(o,Rd(o)),new Map(l)):null)},[]);return k.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(u=>{const d=Ic(u);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Rd(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(u=>{const d=Ic(u);d==null||d.removeEventListener("scroll",s)})}},[s,t]),k.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>qs(i,o),gn):A0(t):gn,[t,e])}function tg(t,e){e===void 0&&(e=[]);const n=k.useRef(null);return k.useEffect(()=>{n.current=null},e),k.useEffect(()=>{const r=t!==gn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Wl(t,n.current):gn}function ET(t){k.useEffect(()=>{if(!Tu)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function TT(t,e){return k.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function D0(t){return k.useMemo(()=>t?KE(t):null,[t])}const ng=[];function ST(t,e){e===void 0&&(e=hi);const[n]=t,r=D0(n?Lt(n):null),[s,i]=k.useState(ng);function o(){i(()=>t.length?t.map(u=>N0(u)?r:new of(e(u),u)):ng)}const l=Su({callback:o});return Pn(()=>{l==null||l.disconnect(),o(),t.forEach(u=>l==null?void 0:l.observe(u))},[t]),s}function IT(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Wo(e)?e:t}function CT(t){let{measure:e}=t;const[n,r]=k.useState(null),s=k.useCallback(d=>{for(const{target:p}of d)if(Wo(p)){r(m=>{const v=e(p);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),i=Su({callback:s}),o=k.useCallback(d=>{const p=IT(d);i==null||i.disconnect(),p&&(i==null||i.observe(p)),r(p?e(p):null)},[e,i]),[l,u]=Hl(o);return k.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const NT=[{sensor:lf,options:{}},{sensor:k0,options:{}}],bT={current:{}},dl={draggable:{measure:Qm},droppable:{measure:Qm,strategy:ko.WhileDragging,frequency:Pd.Optimized},dragOverlay:{measure:hi}};class so extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const AT={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new so,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dl,measureDroppableContainers:Kl,windowRect:null,measuringScheduled:!1},RT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kl,draggableNodes:new Map,over:null,measureDroppableContainers:Kl},Iu=k.createContext(RT),V0=k.createContext(AT);function kT(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new so}}}function PT(t,e){switch(e.type){case We.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case We.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case We.DragEnd:case We.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case We.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new so(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case We.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new so(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case We.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new so(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function DT(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=k.useContext(Iu),i=bd(r),o=bd(n==null?void 0:n.id);return k.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!rf(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[u.current,d.current]){if(!p)continue;const m=EE(p);if(m){m.focus();break}}})}},[r,e,s,o,i]),null}function VT(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function jT(t){return k.useMemo(()=>({draggable:{...dl.draggable,...t==null?void 0:t.draggable},droppable:{...dl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...dl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function MT(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=k.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Pn(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=n(d),m=T0(p,r);if(o||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=S0(d);v&&v.scrollBy({top:m.y,left:m.x})}},[e,o,l,r,n])}const j0=k.createContext({...gn,scaleX:1,scaleY:1});var ar;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ar||(ar={}));const LT=k.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:u=!0,children:d,sensors:p=NT,collisionDetection:m=zE,measuring:v,modifiers:I,...R}=e;const b=k.useReducer(PT,void 0,kT),[S,w]=b,[T,C]=bE(),[D,L]=k.useState(ar.Uninitialized),j=D===ar.Initialized,{draggable:{active:E,nodes:g,translate:y},droppable:{containers:x}}=S,A=E!=null?g.get(E):null,P=k.useRef({initial:null,translated:null}),N=k.useMemo(()=>{var ze;return E!=null?{id:E,data:(ze=A==null?void 0:A.data)!=null?ze:bT,rect:P}:null},[E,A]),he=k.useRef(null),[Ve,Ie]=k.useState(null),[me,O]=k.useState(null),q=Ao(R,Object.values(R)),z=Qo("DndDescribedBy",o),Q=k.useMemo(()=>x.getEnabled(),[x]),G=jT(v),{droppableRects:X,measureDroppableContainers:Te,measuringScheduled:je}=mT(Q,{dragging:j,dependencies:[y.x,y.y],config:G.droppable}),le=fT(g,E),ut=k.useMemo(()=>me?Ad(me):null,[me]),vn=Lr(),nn=gT(le,G.draggable.measure);MT({activeNode:E!=null?g.get(E):null,config:vn.layoutShiftCompensation,initialRect:nn,measure:G.draggable.measure});const se=Zm(le,G.draggable.measure,nn),_n=Zm(le?le.parentElement:null),bt=k.useRef({activatorEvent:null,active:null,activeNode:le,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:g,draggingNode:null,draggingNodeRect:null,droppableContainers:x,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),wn=x.getNodeFor((n=bt.current.over)==null?void 0:n.id),Ot=CT({measure:G.dragOverlay.measure}),xn=(r=Ot.nodeRef.current)!=null?r:le,jn=j?(s=Ot.rect)!=null?s:se:null,ra=!!(Ot.nodeRef.current&&Ot.rect),sa=_T(ra?null:se),fs=D0(xn?Lt(xn):null),Kt=wT(j?wn??le:null),jr=ST(Kt),ps=VT(I,{transform:{x:y.x-sa.x,y:y.y-sa.y,scaleX:1,scaleY:1},activatorEvent:me,active:N,activeNodeRect:se,containerNodeRect:_n,draggingNodeRect:jn,over:bt.current.over,overlayNodeRect:Ot.rect,scrollableAncestors:Kt,scrollableAncestorRects:jr,windowRect:fs}),ms=ut?qs(ut,y):null,gs=xT(Kt),ia=tg(gs),Qe=tg(gs,[se]),Re=qs(ps,ia),rn=jn?$E(jn,ps):null,Jn=N&&rn?m({active:N,collisionRect:rn,droppableRects:X,droppableContainers:Q,pointerCoordinates:ms}):null,_i=LE(Jn,"id"),[En,Zn]=k.useState(null),oa=ra?ps:qs(ps,Qe),aa=UE(oa,(i=En==null?void 0:En.rect)!=null?i:null,se),Mr=k.useRef(null),la=k.useCallback((ze,Ze)=>{let{sensor:Me,options:sn}=Ze;if(he.current==null)return;const et=g.get(he.current);if(!et)return;const ct=ze.nativeEvent,dt=new Me({active:he.current,activeNode:et,event:ct,options:sn,context:bt,onAbort(ie){if(!g.get(ie))return;const{onDragAbort:ht}=q.current,Et={id:ie};ht==null||ht(Et),T({type:"onDragAbort",event:Et})},onPending(ie,on,ht,Et){if(!g.get(ie))return;const{onDragPending:Fr}=q.current,Tt={id:ie,constraint:on,initialCoordinates:ht,offset:Et};Fr==null||Fr(Tt),T({type:"onDragPending",event:Tt})},onStart(ie){const on=he.current;if(on==null)return;const ht=g.get(on);if(!ht)return;const{onDragStart:Et}=q.current,Or={activatorEvent:ct,active:{id:on,data:ht.data,rect:P}};Ls.unstable_batchedUpdates(()=>{Et==null||Et(Or),L(ar.Initializing),w({type:We.DragStart,initialCoordinates:ie,active:on}),T({type:"onDragStart",event:Or}),Ie(Mr.current),O(ct)})},onMove(ie){w({type:We.DragMove,coordinates:ie})},onEnd:Mn(We.DragEnd),onCancel:Mn(We.DragCancel)});Mr.current=dt;function Mn(ie){return async function(){const{active:ht,collisions:Et,over:Or,scrollAdjustedTranslate:Fr}=bt.current;let Tt=null;if(ht&&Fr){const{cancelDrop:zr}=q.current;Tt={activatorEvent:ct,active:ht,collisions:Et,delta:Fr,over:Or},ie===We.DragEnd&&typeof zr=="function"&&await Promise.resolve(zr(Tt))&&(ie=We.DragCancel)}he.current=null,Ls.unstable_batchedUpdates(()=>{w({type:ie}),L(ar.Uninitialized),Zn(null),Ie(null),O(null),Mr.current=null;const zr=ie===We.DragEnd?"onDragEnd":"onDragCancel";if(Tt){const wi=q.current[zr];wi==null||wi(Tt),T({type:zr,event:Tt})}})}}},[g]),Fu=k.useCallback((ze,Ze)=>(Me,sn)=>{const et=Me.nativeEvent,ct=g.get(sn);if(he.current!==null||!ct||et.dndKit||et.defaultPrevented)return;const dt={active:ct};ze(Me,Ze.options,dt)===!0&&(et.dndKit={capturedBy:Ze.sensor},he.current=sn,la(Me,Ze))},[g,la]),ys=pT(p,Fu);ET(p),Pn(()=>{se&&D===ar.Initializing&&L(ar.Initialized)},[se,D]),k.useEffect(()=>{const{onDragMove:ze}=q.current,{active:Ze,activatorEvent:Me,collisions:sn,over:et}=bt.current;if(!Ze||!Me)return;const ct={active:Ze,activatorEvent:Me,collisions:sn,delta:{x:Re.x,y:Re.y},over:et};Ls.unstable_batchedUpdates(()=>{ze==null||ze(ct),T({type:"onDragMove",event:ct})})},[Re.x,Re.y]),k.useEffect(()=>{const{active:ze,activatorEvent:Ze,collisions:Me,droppableContainers:sn,scrollAdjustedTranslate:et}=bt.current;if(!ze||he.current==null||!Ze||!et)return;const{onDragOver:ct}=q.current,dt=sn.get(_i),Mn=dt&&dt.rect.current?{id:dt.id,rect:dt.rect.current,data:dt.data,disabled:dt.disabled}:null,ie={active:ze,activatorEvent:Ze,collisions:Me,delta:{x:et.x,y:et.y},over:Mn};Ls.unstable_batchedUpdates(()=>{Zn(Mn),ct==null||ct(ie),T({type:"onDragOver",event:ie})})},[_i]),Pn(()=>{bt.current={activatorEvent:me,active:N,activeNode:le,collisionRect:rn,collisions:Jn,droppableRects:X,draggableNodes:g,draggingNode:xn,draggingNodeRect:jn,droppableContainers:x,over:En,scrollableAncestors:Kt,scrollAdjustedTranslate:Re},P.current={initial:jn,translated:rn}},[N,le,Jn,rn,g,xn,jn,X,x,En,Kt,Re]),cT({...vn,delta:y,draggingRect:rn,pointerCoordinates:ms,scrollableAncestors:Kt,scrollableAncestorRects:jr});const ua=k.useMemo(()=>({active:N,activeNode:le,activeNodeRect:se,activatorEvent:me,collisions:Jn,containerNodeRect:_n,dragOverlay:Ot,draggableNodes:g,droppableContainers:x,droppableRects:X,over:En,measureDroppableContainers:Te,scrollableAncestors:Kt,scrollableAncestorRects:jr,measuringConfiguration:G,measuringScheduled:je,windowRect:fs}),[N,le,se,me,Jn,_n,Ot,g,x,X,En,Te,Kt,jr,G,je,fs]),ca=k.useMemo(()=>({activatorEvent:me,activators:ys,active:N,activeNodeRect:se,ariaDescribedById:{draggable:z},dispatch:w,draggableNodes:g,over:En,measureDroppableContainers:Te}),[me,ys,N,se,w,z,g,En,Te]);return At.createElement(E0.Provider,{value:C},At.createElement(Iu.Provider,{value:ca},At.createElement(V0.Provider,{value:ua},At.createElement(j0.Provider,{value:aa},d)),At.createElement(DT,{disabled:(l==null?void 0:l.restoreFocus)===!1})),At.createElement(kE,{...l,hiddenTextDescribedById:z}));function Lr(){const ze=(Ve==null?void 0:Ve.autoScrollEnabled)===!1,Ze=typeof u=="object"?u.enabled===!1:u===!1,Me=j&&!ze&&!Ze;return typeof u=="object"?{...u,enabled:Me}:{enabled:Me}}}),OT=k.createContext(null),rg="button",FT="Draggable";function zT(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Qo(FT),{activators:o,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:p,draggableNodes:m,over:v}=k.useContext(Iu),{role:I=rg,roleDescription:R="draggable",tabIndex:b=0}=s??{},S=(u==null?void 0:u.id)===e,w=k.useContext(S?j0:OT),[T,C]=Hl(),[D,L]=Hl(),j=TT(o,e),E=Ao(n);Pn(()=>(m.set(e,{id:e,key:i,node:T,activatorNode:D,data:E}),()=>{const y=m.get(e);y&&y.key===i&&m.delete(e)}),[m,e]);const g=k.useMemo(()=>({role:I,tabIndex:b,"aria-disabled":r,"aria-pressed":S&&I===rg?!0:void 0,"aria-roledescription":R,"aria-describedby":p.draggable}),[r,I,b,S,R,p.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:g,isDragging:S,listeners:r?void 0:j,node:T,over:v,setNodeRef:C,setActivatorNodeRef:L,transform:w}}function UT(){return k.useContext(V0)}const BT="Droppable",$T={timeout:25};function qT(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Qo(BT),{active:o,dispatch:l,over:u,measureDroppableContainers:d}=k.useContext(Iu),p=k.useRef({disabled:n}),m=k.useRef(!1),v=k.useRef(null),I=k.useRef(null),{disabled:R,updateMeasurementsFor:b,timeout:S}={...$T,...s},w=Ao(b??r),T=k.useCallback(()=>{if(!m.current){m.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{d(Array.isArray(w.current)?w.current:[w.current]),I.current=null},S)},[S]),C=Su({callback:T,disabled:R||!o}),D=k.useCallback((g,y)=>{C&&(y&&(C.unobserve(y),m.current=!1),g&&C.observe(g))},[C]),[L,j]=Hl(D),E=Ao(e);return k.useEffect(()=>{!C||!L.current||(C.disconnect(),m.current=!1,C.observe(L.current))},[L,C]),k.useEffect(()=>(l({type:We.RegisterDroppable,element:{id:r,key:i,disabled:n,node:L,rect:v,data:E}}),()=>l({type:We.UnregisterDroppable,key:i,id:r})),[r]),k.useEffect(()=>{n!==p.current.disabled&&(l({type:We.SetDroppableDisabled,id:r,key:i,disabled:n}),p.current.disabled=n)},[r,i,n,l]),{active:o,rect:v,isOver:(u==null?void 0:u.id)===r,node:L,over:u,setNodeRef:j}}function uf(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function HT(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ba(t){return t!==null&&t>=0}function WT(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function KT(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const M0=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=uf(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},$a={scaleX:1,scaleY:1},QT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(l.top+l.height):d.top-l.top,...$a}:null}const u=GT(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-u,...$a}:s<n&&s>=o?{x:0,y:l.height+u,...$a}:{x:0,y:0,...$a}};function GT(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const L0="Sortable",O0=At.createContext({activeIndex:-1,containerId:L0,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:M0,disabled:{draggable:!1,droppable:!1}});function YT(t){let{children:e,id:n,items:r,strategy:s=M0,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:p}=UT(),m=Qo(L0,n),v=l.rect!==null,I=k.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),R=o!=null,b=o?I.indexOf(o.id):-1,S=d?I.indexOf(d.id):-1,w=k.useRef(I),T=!WT(I,w.current),C=S!==-1&&b===-1||T,D=KT(i);Pn(()=>{T&&R&&p(I)},[T,I,R,p]),k.useEffect(()=>{w.current=I},[I]);const L=k.useMemo(()=>({activeIndex:b,containerId:m,disabled:D,disableTransforms:C,items:I,overIndex:S,useDragOverlay:v,sortedRects:HT(I,u),strategy:s}),[b,m,D.draggable,D.droppable,C,I,S,u,v,s]);return At.createElement(O0.Provider,{value:L},e)}const XT=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return uf(n,r,s).indexOf(e)},JT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:u,transition:d}=t;return!d||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===u},ZT={duration:200,easing:"ease"},F0="transform",eS=Ro.Transition.toString({property:F0,duration:0,easing:"linear"}),tS={roleDescription:"sortable"};function nS(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=k.useState(null),l=k.useRef(n);return Pn(()=>{if(!e&&n!==l.current&&r.current){const u=s.current;if(u){const d=hi(r.current,{ignoreTransform:!0}),p={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(p.x||p.y)&&o(p)}}n!==l.current&&(l.current=n)},[e,n,r,s]),k.useEffect(()=>{i&&o(null)},[i]),i}function rS(t){let{animateLayoutChanges:e=JT,attributes:n,disabled:r,data:s,getNewIndex:i=XT,id:o,strategy:l,resizeObserverConfig:u,transition:d=ZT}=t;const{items:p,containerId:m,activeIndex:v,disabled:I,disableTransforms:R,sortedRects:b,overIndex:S,useDragOverlay:w,strategy:T}=k.useContext(O0),C=sS(r,I),D=p.indexOf(o),L=k.useMemo(()=>({sortable:{containerId:m,index:D,items:p},...s}),[m,s,D,p]),j=k.useMemo(()=>p.slice(p.indexOf(o)),[p,o]),{rect:E,node:g,isOver:y,setNodeRef:x}=qT({id:o,data:L,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...u}}),{active:A,activatorEvent:P,activeNodeRect:N,attributes:he,setNodeRef:Ve,listeners:Ie,isDragging:me,over:O,setActivatorNodeRef:q,transform:z}=zT({id:o,data:L,attributes:{...tS,...n},disabled:C.draggable}),Q=vE(x,Ve),G=!!A,X=G&&!R&&Ba(v)&&Ba(S),Te=!w&&me,je=Te&&X?z:null,ut=X?je??(l??T)({rects:b,activeNodeRect:N,activeIndex:v,overIndex:S,index:D}):null,vn=Ba(v)&&Ba(S)?i({id:o,items:p,activeIndex:v,overIndex:S}):D,nn=A==null?void 0:A.id,se=k.useRef({activeId:nn,items:p,newIndex:vn,containerId:m}),_n=p!==se.current.items,bt=e({active:A,containerId:m,isDragging:me,isSorting:G,id:o,index:D,items:p,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),wn=nS({disabled:!bt,index:D,node:g,rect:E});return k.useEffect(()=>{G&&se.current.newIndex!==vn&&(se.current.newIndex=vn),m!==se.current.containerId&&(se.current.containerId=m),p!==se.current.items&&(se.current.items=p)},[G,vn,m,p]),k.useEffect(()=>{if(nn===se.current.activeId)return;if(nn!=null&&se.current.activeId==null){se.current.activeId=nn;return}const xn=setTimeout(()=>{se.current.activeId=nn},50);return()=>clearTimeout(xn)},[nn]),{active:A,activeIndex:v,attributes:he,data:L,rect:E,index:D,newIndex:vn,items:p,isOver:y,isSorting:G,isDragging:me,listeners:Ie,node:g,overIndex:S,over:O,setNodeRef:Q,setActivatorNodeRef:q,setDroppableNodeRef:x,setDraggableNodeRef:Ve,transform:wn??ut,transition:Ot()};function Ot(){if(wn||_n&&se.current.newIndex===D)return eS;if(!(Te&&!rf(P)||!d)&&(G||bt))return Ro.Transition.toString({...d,property:F0})}}function sS(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}de.Down,de.Right,de.Up,de.Left;var sg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},U0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|d>>6,I=d&63;u||(I=64,o||(v=64)),r.push(n[p],n[m],n[v],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new oS;const v=i<<2|l>>4;if(r.push(v),d!==64){const I=l<<4&240|d>>2;if(r.push(I),m!==64){const R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aS=function(t){const e=z0(t);return U0.encodeByteArray(e,!0)},Gl=function(t){return aS(t).replace(/\./g,"")},lS=function(t){try{return U0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=()=>uS().__FIREBASE_DEFAULTS__,dS=()=>{if(typeof process>"u"||typeof sg>"u")return;const t=sg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lS(t[1]);return e&&JSON.parse(e)},cf=()=>{try{return cS()||dS()||hS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fS=t=>{var e,n;return(n=(e=cf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pS=t=>{const e=fS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B0=()=>{var t;return(t=cf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gl(JSON.stringify(n)),Gl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vS(){var t;const e=(t=cf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _S(){return!vS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wS(){try{return typeof indexedDB=="object"}catch{return!1}}function xS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="FirebaseError";class fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ES,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$0.prototype.create)}}class $0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?TS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new fi(s,l,r)}}function TS(t,e){return t.replace(SS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SS=/\{\$([^}]+)}/g;function Dd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ig(i)&&ig(o)){if(!Dd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ig(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class Po{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NS(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(t){return t===Wr?void 0:t}function NS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const AS={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},RS=oe.INFO,kS={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},PS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q0{constructor(e){this.name=e,this._logLevel=RS,this._logHandler=PS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const DS=(t,e)=>e.some(n=>t instanceof n);let og,ag;function VS(){return og||(og=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jS(){return ag||(ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H0=new WeakMap,Vd=new WeakMap,W0=new WeakMap,bc=new WeakMap,df=new WeakMap;function MS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&H0.set(n,t)}).catch(()=>{}),df.set(e,t),e}function LS(t){if(Vd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vd.set(t,e)}let jd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||W0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OS(t){jd=t(jd)}function FS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ac(this),e,...n);return W0.set(r,e.sort?e.sort():[e]),xr(r)}:jS().includes(t)?function(...e){return t.apply(Ac(this),e),xr(H0.get(this))}:function(...e){return xr(t.apply(Ac(this),e))}}function zS(t){return typeof t=="function"?FS(t):(t instanceof IDBTransaction&&LS(t),DS(t,VS())?new Proxy(t,jd):t)}function xr(t){if(t instanceof IDBRequest)return MS(t);if(bc.has(t))return bc.get(t);const e=zS(t);return e!==t&&(bc.set(t,e),df.set(e,t)),e}const Ac=t=>df.get(t);function US(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=xr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xr(o.result),u.oldVersion,u.newVersion,xr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const BS=["get","getKey","getAll","getAllKeys","count"],$S=["put","add","delete","clear"],Rc=new Map;function lg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rc.get(e))return Rc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$S.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Rc.set(e,i),i}OS(t=>({...t,get:(e,n,r)=>lg(e,n)||t.get(e,n,r),has:(e,n)=>!!lg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Md="@firebase/app",ug="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new q0("@firebase/app"),WS="@firebase/app-compat",KS="@firebase/analytics-compat",QS="@firebase/analytics",GS="@firebase/app-check-compat",YS="@firebase/app-check",XS="@firebase/auth",JS="@firebase/auth-compat",ZS="@firebase/database",eI="@firebase/data-connect",tI="@firebase/database-compat",nI="@firebase/functions",rI="@firebase/functions-compat",sI="@firebase/installations",iI="@firebase/installations-compat",oI="@firebase/messaging",aI="@firebase/messaging-compat",lI="@firebase/performance",uI="@firebase/performance-compat",cI="@firebase/remote-config",dI="@firebase/remote-config-compat",hI="@firebase/storage",fI="@firebase/storage-compat",pI="@firebase/firestore",mI="@firebase/vertexai-preview",gI="@firebase/firestore-compat",yI="firebase",vI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="[DEFAULT]",_I={[Md]:"fire-core",[WS]:"fire-core-compat",[QS]:"fire-analytics",[KS]:"fire-analytics-compat",[YS]:"fire-app-check",[GS]:"fire-app-check-compat",[XS]:"fire-auth",[JS]:"fire-auth-compat",[ZS]:"fire-rtdb",[eI]:"fire-data-connect",[tI]:"fire-rtdb-compat",[nI]:"fire-fn",[rI]:"fire-fn-compat",[sI]:"fire-iid",[iI]:"fire-iid-compat",[oI]:"fire-fcm",[aI]:"fire-fcm-compat",[lI]:"fire-perf",[uI]:"fire-perf-compat",[cI]:"fire-rc",[dI]:"fire-rc-compat",[hI]:"fire-gcs",[fI]:"fire-gcs-compat",[pI]:"fire-fst",[gI]:"fire-fst-compat",[mI]:"fire-vertex","fire-js":"fire-js",[yI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Map,wI=new Map,Od=new Map;function cg(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xl(t){const e=t.name;if(Od.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Od.set(e,t);for(const n of Yl.values())cg(n,t);for(const n of wI.values())cg(n,t);return!0}function xI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new $0("app","Firebase",EI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=vI;function K0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ld,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=B0()),!n)throw Er.create("no-options");const i=Yl.get(s);if(i){if(Dd(n,i.options)&&Dd(r,i.config))return i;throw Er.create("duplicate-app",{appName:s})}const o=new bS(s);for(const u of Od.values())o.addComponent(u);const l=new TI(n,r,o);return Yl.set(s,l),l}function II(t=Ld){const e=Yl.get(t);if(!e&&t===Ld&&B0())return K0();if(!e)throw Er.create("no-app",{appName:t});return e}function Hs(t,e,n){var r;let s=(r=_I[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(l.join(" "));return}Xl(new Po(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebase-heartbeat-database",NI=1,Do="firebase-heartbeat-store";let kc=null;function Q0(){return kc||(kc=US(CI,NI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Do)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),kc}async function bI(t){try{const n=(await Q0()).transaction(Do),r=await n.objectStore(Do).get(G0(t));return await n.done,r}catch(e){if(e instanceof fi)Qn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function dg(t,e){try{const r=(await Q0()).transaction(Do,"readwrite");await r.objectStore(Do).put(e,G0(t)),await r.done}catch(n){if(n instanceof fi)Qn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function G0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=1024,RI=30*24*60*60*1e3;class kI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=hg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=RI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hg(),{heartbeatsToSend:r,unsentEntries:s}=PI(this._heartbeatsCache.heartbeats),i=Gl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function hg(){return new Date().toISOString().substring(0,10)}function PI(t,e=AI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),fg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),fg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wS()?xS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return dg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return dg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fg(t){return Gl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){Xl(new Po("platform-logger",e=>new qS(e),"PRIVATE")),Xl(new Po("heartbeat",e=>new kI(e),"PRIVATE")),Hs(Md,ug,t),Hs(Md,ug,"esm2017"),Hs("fire-js","")}VI("");var pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,Y0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function y(){}y.prototype=g.prototype,E.D=g.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(x,A,P){for(var N=Array(arguments.length-2),he=2;he<arguments.length;he++)N[he-2]=arguments[he];return g.prototype[A].apply(x,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,g,y){y||(y=0);var x=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)x[A]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(A=0;16>A;++A)x[A]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=E.g[0],y=E.g[1],A=E.g[2];var P=E.g[3],N=g+(P^y&(A^P))+x[0]+3614090360&4294967295;g=y+(N<<7&4294967295|N>>>25),N=P+(A^g&(y^A))+x[1]+3905402710&4294967295,P=g+(N<<12&4294967295|N>>>20),N=A+(y^P&(g^y))+x[2]+606105819&4294967295,A=P+(N<<17&4294967295|N>>>15),N=y+(g^A&(P^g))+x[3]+3250441966&4294967295,y=A+(N<<22&4294967295|N>>>10),N=g+(P^y&(A^P))+x[4]+4118548399&4294967295,g=y+(N<<7&4294967295|N>>>25),N=P+(A^g&(y^A))+x[5]+1200080426&4294967295,P=g+(N<<12&4294967295|N>>>20),N=A+(y^P&(g^y))+x[6]+2821735955&4294967295,A=P+(N<<17&4294967295|N>>>15),N=y+(g^A&(P^g))+x[7]+4249261313&4294967295,y=A+(N<<22&4294967295|N>>>10),N=g+(P^y&(A^P))+x[8]+1770035416&4294967295,g=y+(N<<7&4294967295|N>>>25),N=P+(A^g&(y^A))+x[9]+2336552879&4294967295,P=g+(N<<12&4294967295|N>>>20),N=A+(y^P&(g^y))+x[10]+4294925233&4294967295,A=P+(N<<17&4294967295|N>>>15),N=y+(g^A&(P^g))+x[11]+2304563134&4294967295,y=A+(N<<22&4294967295|N>>>10),N=g+(P^y&(A^P))+x[12]+1804603682&4294967295,g=y+(N<<7&4294967295|N>>>25),N=P+(A^g&(y^A))+x[13]+4254626195&4294967295,P=g+(N<<12&4294967295|N>>>20),N=A+(y^P&(g^y))+x[14]+2792965006&4294967295,A=P+(N<<17&4294967295|N>>>15),N=y+(g^A&(P^g))+x[15]+1236535329&4294967295,y=A+(N<<22&4294967295|N>>>10),N=g+(A^P&(y^A))+x[1]+4129170786&4294967295,g=y+(N<<5&4294967295|N>>>27),N=P+(y^A&(g^y))+x[6]+3225465664&4294967295,P=g+(N<<9&4294967295|N>>>23),N=A+(g^y&(P^g))+x[11]+643717713&4294967295,A=P+(N<<14&4294967295|N>>>18),N=y+(P^g&(A^P))+x[0]+3921069994&4294967295,y=A+(N<<20&4294967295|N>>>12),N=g+(A^P&(y^A))+x[5]+3593408605&4294967295,g=y+(N<<5&4294967295|N>>>27),N=P+(y^A&(g^y))+x[10]+38016083&4294967295,P=g+(N<<9&4294967295|N>>>23),N=A+(g^y&(P^g))+x[15]+3634488961&4294967295,A=P+(N<<14&4294967295|N>>>18),N=y+(P^g&(A^P))+x[4]+3889429448&4294967295,y=A+(N<<20&4294967295|N>>>12),N=g+(A^P&(y^A))+x[9]+568446438&4294967295,g=y+(N<<5&4294967295|N>>>27),N=P+(y^A&(g^y))+x[14]+3275163606&4294967295,P=g+(N<<9&4294967295|N>>>23),N=A+(g^y&(P^g))+x[3]+4107603335&4294967295,A=P+(N<<14&4294967295|N>>>18),N=y+(P^g&(A^P))+x[8]+1163531501&4294967295,y=A+(N<<20&4294967295|N>>>12),N=g+(A^P&(y^A))+x[13]+2850285829&4294967295,g=y+(N<<5&4294967295|N>>>27),N=P+(y^A&(g^y))+x[2]+4243563512&4294967295,P=g+(N<<9&4294967295|N>>>23),N=A+(g^y&(P^g))+x[7]+1735328473&4294967295,A=P+(N<<14&4294967295|N>>>18),N=y+(P^g&(A^P))+x[12]+2368359562&4294967295,y=A+(N<<20&4294967295|N>>>12),N=g+(y^A^P)+x[5]+4294588738&4294967295,g=y+(N<<4&4294967295|N>>>28),N=P+(g^y^A)+x[8]+2272392833&4294967295,P=g+(N<<11&4294967295|N>>>21),N=A+(P^g^y)+x[11]+1839030562&4294967295,A=P+(N<<16&4294967295|N>>>16),N=y+(A^P^g)+x[14]+4259657740&4294967295,y=A+(N<<23&4294967295|N>>>9),N=g+(y^A^P)+x[1]+2763975236&4294967295,g=y+(N<<4&4294967295|N>>>28),N=P+(g^y^A)+x[4]+1272893353&4294967295,P=g+(N<<11&4294967295|N>>>21),N=A+(P^g^y)+x[7]+4139469664&4294967295,A=P+(N<<16&4294967295|N>>>16),N=y+(A^P^g)+x[10]+3200236656&4294967295,y=A+(N<<23&4294967295|N>>>9),N=g+(y^A^P)+x[13]+681279174&4294967295,g=y+(N<<4&4294967295|N>>>28),N=P+(g^y^A)+x[0]+3936430074&4294967295,P=g+(N<<11&4294967295|N>>>21),N=A+(P^g^y)+x[3]+3572445317&4294967295,A=P+(N<<16&4294967295|N>>>16),N=y+(A^P^g)+x[6]+76029189&4294967295,y=A+(N<<23&4294967295|N>>>9),N=g+(y^A^P)+x[9]+3654602809&4294967295,g=y+(N<<4&4294967295|N>>>28),N=P+(g^y^A)+x[12]+3873151461&4294967295,P=g+(N<<11&4294967295|N>>>21),N=A+(P^g^y)+x[15]+530742520&4294967295,A=P+(N<<16&4294967295|N>>>16),N=y+(A^P^g)+x[2]+3299628645&4294967295,y=A+(N<<23&4294967295|N>>>9),N=g+(A^(y|~P))+x[0]+4096336452&4294967295,g=y+(N<<6&4294967295|N>>>26),N=P+(y^(g|~A))+x[7]+1126891415&4294967295,P=g+(N<<10&4294967295|N>>>22),N=A+(g^(P|~y))+x[14]+2878612391&4294967295,A=P+(N<<15&4294967295|N>>>17),N=y+(P^(A|~g))+x[5]+4237533241&4294967295,y=A+(N<<21&4294967295|N>>>11),N=g+(A^(y|~P))+x[12]+1700485571&4294967295,g=y+(N<<6&4294967295|N>>>26),N=P+(y^(g|~A))+x[3]+2399980690&4294967295,P=g+(N<<10&4294967295|N>>>22),N=A+(g^(P|~y))+x[10]+4293915773&4294967295,A=P+(N<<15&4294967295|N>>>17),N=y+(P^(A|~g))+x[1]+2240044497&4294967295,y=A+(N<<21&4294967295|N>>>11),N=g+(A^(y|~P))+x[8]+1873313359&4294967295,g=y+(N<<6&4294967295|N>>>26),N=P+(y^(g|~A))+x[15]+4264355552&4294967295,P=g+(N<<10&4294967295|N>>>22),N=A+(g^(P|~y))+x[6]+2734768916&4294967295,A=P+(N<<15&4294967295|N>>>17),N=y+(P^(A|~g))+x[13]+1309151649&4294967295,y=A+(N<<21&4294967295|N>>>11),N=g+(A^(y|~P))+x[4]+4149444226&4294967295,g=y+(N<<6&4294967295|N>>>26),N=P+(y^(g|~A))+x[11]+3174756917&4294967295,P=g+(N<<10&4294967295|N>>>22),N=A+(g^(P|~y))+x[2]+718787259&4294967295,A=P+(N<<15&4294967295|N>>>17),N=y+(P^(A|~g))+x[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(A+(N<<21&4294967295|N>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var y=g-this.blockSize,x=this.B,A=this.h,P=0;P<g;){if(A==0)for(;P<=y;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<g;)if(x[A++]=E.charCodeAt(P++),A==this.blockSize){s(this,x),A=0;break}}else for(;P<g;)if(x[A++]=E[P++],A==this.blockSize){s(this,x),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var y=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=y&255,y/=256;for(this.u(E),E=Array(16),g=y=0;4>g;++g)for(var x=0;32>x;x+=8)E[y++]=this.g[g]>>>x&255;return E};function i(E,g){var y=l;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=g(E)}function o(E,g){this.h=g;for(var y=[],x=!0,A=E.length-1;0<=A;A--){var P=E[A]|0;x&&P==g||(y[A]=P,x=!1)}this.g=y}var l={};function u(E){return-128<=E&&128>E?i(E,function(g){return new o([g|0],0>g?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return S(d(-E));for(var g=[],y=1,x=0;E>=y;x++)g[x]=E/y|0,y*=4294967296;return new o(g,0)}function p(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return S(p(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(g,8)),x=m,A=0;A<E.length;A+=8){var P=Math.min(8,E.length-A),N=parseInt(E.substring(A,A+P),g);8>P?(P=d(Math.pow(g,P)),x=x.j(P).add(d(N))):(x=x.j(y),x=x.add(d(N)))}return x}var m=u(0),v=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-S(this).m();for(var E=0,g=1,y=0;y<this.g.length;y++){var x=this.i(y);E+=(0<=x?x:4294967296+x)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(b(this))return"-"+S(this).toString(E);for(var g=d(Math.pow(E,6)),y=this,x="";;){var A=D(y,g).g;y=w(y,A.j(g));var P=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=A,R(y))return P+x;for(;6>P.length;)P="0"+P;x=P+x}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function b(E){return E.h==-1}t.l=function(E){return E=w(this,E),b(E)?-1:R(E)?0:1};function S(E){for(var g=E.g.length,y=[],x=0;x<g;x++)y[x]=~E.g[x];return new o(y,~E.h).add(v)}t.abs=function(){return b(this)?S(this):this},t.add=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],x=0,A=0;A<=g;A++){var P=x+(this.i(A)&65535)+(E.i(A)&65535),N=(P>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);x=N>>>16,P&=65535,N&=65535,y[A]=N<<16|P}return new o(y,y[y.length-1]&-2147483648?-1:0)};function w(E,g){return E.add(S(g))}t.j=function(E){if(R(this)||R(E))return m;if(b(this))return b(E)?S(this).j(S(E)):S(S(this).j(E));if(b(E))return S(this.j(S(E)));if(0>this.l(I)&&0>E.l(I))return d(this.m()*E.m());for(var g=this.g.length+E.g.length,y=[],x=0;x<2*g;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(var A=0;A<E.g.length;A++){var P=this.i(x)>>>16,N=this.i(x)&65535,he=E.i(A)>>>16,Ve=E.i(A)&65535;y[2*x+2*A]+=N*Ve,T(y,2*x+2*A),y[2*x+2*A+1]+=P*Ve,T(y,2*x+2*A+1),y[2*x+2*A+1]+=N*he,T(y,2*x+2*A+1),y[2*x+2*A+2]+=P*he,T(y,2*x+2*A+2)}for(x=0;x<g;x++)y[x]=y[2*x+1]<<16|y[2*x];for(x=g;x<2*g;x++)y[x]=0;return new o(y,0)};function T(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function C(E,g){this.g=E,this.h=g}function D(E,g){if(R(g))throw Error("division by zero");if(R(E))return new C(m,m);if(b(E))return g=D(S(E),g),new C(S(g.g),S(g.h));if(b(g))return g=D(E,S(g)),new C(S(g.g),g.h);if(30<E.g.length){if(b(E)||b(g))throw Error("slowDivide_ only works with positive integers.");for(var y=v,x=g;0>=x.l(E);)y=L(y),x=L(x);var A=j(y,1),P=j(x,1);for(x=j(x,2),y=j(y,2);!R(x);){var N=P.add(x);0>=N.l(E)&&(A=A.add(y),P=N),x=j(x,1),y=j(y,1)}return g=w(E,A.j(g)),new C(A,g)}for(A=m;0<=E.l(g);){for(y=Math.max(1,Math.floor(E.m()/g.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),P=d(y),N=P.j(g);b(N)||0<N.l(E);)y-=x,P=d(y),N=P.j(g);R(P)&&(P=v),A=A.add(P),E=w(E,N)}return new C(A,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],x=0;x<g;x++)y[x]=this.i(x)&E.i(x);return new o(y,this.h&E.h)},t.or=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],x=0;x<g;x++)y[x]=this.i(x)|E.i(x);return new o(y,this.h|E.h)},t.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],x=0;x<g;x++)y[x]=this.i(x)^E.i(x);return new o(y,this.h^E.h)};function L(E){for(var g=E.g.length+1,y=[],x=0;x<g;x++)y[x]=E.i(x)<<1|E.i(x-1)>>>31;return new o(y,E.h)}function j(E,g){var y=g>>5;g%=32;for(var x=E.g.length-y,A=[],P=0;P<x;P++)A[P]=0<g?E.i(P+y)>>>g|E.i(P+y+1)<<32-g:E.i(P+y);return new o(A,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Y0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Zr=o}).apply(typeof pg<"u"?pg:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,$i,J0,hl,Fd,Z0,e_,t_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,f){return a==Array.prototype||a==Object.prototype||(a[c]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,c){if(c)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var V=a[_];if(!(V in f))break e;f=f[V]}a=a[a.length-1],_=f[a],c=c(_),c!=_&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}function i(a,c){a instanceof String&&(a+="");var f=0,_=!1,V={next:function(){if(!_&&f<a.length){var M=f++;return{value:c(M,a[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(a){return a||function(){return i(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function p(a,c,f){return a.call.apply(a.bind,arguments)}function m(a,c,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),a.apply(c,V)}}return function(){return a.apply(c,arguments)}}function v(a,c,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function I(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function R(a,c){function f(){}f.prototype=c.prototype,a.aa=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,V,M){for(var $=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)$[ge-2]=arguments[ge];return c.prototype[V].apply(_,$)}}function b(a){const c=a.length;if(0<c){const f=Array(c);for(let _=0;_<c;_++)f[_]=a[_];return f}return[]}function S(a,c){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const V=a.length||0,M=_.length||0;a.length=V+M;for(let $=0;$<M;$++)a[V+$]=_[$]}else a.push(_)}}class w{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function T(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function j(a,c,f){for(const _ in a)c.call(f,a[_],_,a)}function E(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function g(a){const c={};for(const f in a)c[f]=a[f];return c}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,c){let f,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(f in _)a[f]=_[f];for(let M=0;M<y.length;M++)f=y[M],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function A(a){var c=1;a=a.split(":");const f=[];for(;0<c&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function P(a){l.setTimeout(()=>{throw a},0)}function N(){var a=q;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class he{constructor(){this.h=this.g=null}add(c,f){const _=Ve.get();_.set(c,f),this.h?this.h.next=_:this.g=_,this.h=_}}var Ve=new w(()=>new Ie,a=>a.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let me,O=!1,q=new he,z=()=>{const a=l.Promise.resolve(void 0);me=()=>{a.then(Q)}};var Q=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(f){P(f)}var c=Ve;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}O=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return a}();function je(a,c){if(X.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(L){e:{try{D(c.nodeName);var V=!0;break e}catch{}V=!1}V||(c=null)}}else f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement);this.relatedTarget=c,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:le[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&je.aa.h.call(this)}}R(je,X);var le={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),vn=0;function nn(a,c,f,_,V){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!_,this.ha=V,this.key=++vn,this.da=this.fa=!1}function se(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _n(a){this.src=a,this.g={},this.h=0}_n.prototype.add=function(a,c,f,_,V){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var $=wn(a,c,_,V);return-1<$?(c=a[$],f||(c.fa=!1)):(c=new nn(c,this.src,M,!!_,V),c.fa=f,a.push(c)),c};function bt(a,c){var f=c.type;if(f in a.g){var _=a.g[f],V=Array.prototype.indexOf.call(_,c,void 0),M;(M=0<=V)&&Array.prototype.splice.call(_,V,1),M&&(se(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function wn(a,c,f,_){for(var V=0;V<a.length;++V){var M=a[V];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==_)return V}return-1}var Ot="closure_lm_"+(1e6*Math.random()|0),xn={};function jn(a,c,f,_,V){if(Array.isArray(c)){for(var M=0;M<c.length;M++)jn(a,c[M],f,_,V);return null}return f=ia(f),a&&a[ut]?a.K(c,f,d(_)?!!_.capture:!!_,V):ra(a,c,f,!1,_,V)}function ra(a,c,f,_,V,M){if(!c)throw Error("Invalid event type");var $=d(V)?!!V.capture:!!V,ge=ms(a);if(ge||(a[Ot]=ge=new _n(a)),f=ge.add(c,f,_,$,M),f.proxy)return f;if(_=sa(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)Te||(V=$),V===void 0&&(V=!1),a.addEventListener(c.toString(),_,V);else if(a.attachEvent)a.attachEvent(jr(c.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function sa(){function a(f){return c.call(a.src,a.listener,f)}const c=ps;return a}function fs(a,c,f,_,V){if(Array.isArray(c))for(var M=0;M<c.length;M++)fs(a,c[M],f,_,V);else _=d(_)?!!_.capture:!!_,f=ia(f),a&&a[ut]?(a=a.i,c=String(c).toString(),c in a.g&&(M=a.g[c],f=wn(M,f,_,V),-1<f&&(se(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete a.g[c],a.h--)))):a&&(a=ms(a))&&(c=a.g[c.toString()],a=-1,c&&(a=wn(c,f,_,V)),(f=-1<a?c[a]:null)&&Kt(f))}function Kt(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[ut])bt(c.i,a);else{var f=a.type,_=a.proxy;c.removeEventListener?c.removeEventListener(f,_,a.capture):c.detachEvent?c.detachEvent(jr(f),_):c.addListener&&c.removeListener&&c.removeListener(_),(f=ms(c))?(bt(f,a),f.h==0&&(f.src=null,c[Ot]=null)):se(a)}}}function jr(a){return a in xn?xn[a]:xn[a]="on"+a}function ps(a,c){if(a.da)a=!0;else{c=new je(c,this);var f=a.listener,_=a.ha||a.src;a.fa&&Kt(a),a=f.call(_,c)}return a}function ms(a){return a=a[Ot],a instanceof _n?a:null}var gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ia(a){return typeof a=="function"?a:(a[gs]||(a[gs]=function(c){return a.handleEvent(c)}),a[gs])}function Qe(){G.call(this),this.i=new _n(this),this.M=this,this.F=null}R(Qe,G),Qe.prototype[ut]=!0,Qe.prototype.removeEventListener=function(a,c,f,_){fs(this,a,c,f,_)};function Re(a,c){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=c.type||c,typeof c=="string")c=new X(c,a);else if(c instanceof X)c.target=c.target||a;else{var V=c;c=new X(_,a),x(c,V)}if(V=!0,f)for(var M=f.length-1;0<=M;M--){var $=c.g=f[M];V=rn($,_,!0,c)&&V}if($=c.g=a,V=rn($,_,!0,c)&&V,V=rn($,_,!1,c)&&V,f)for(M=0;M<f.length;M++)$=c.g=f[M],V=rn($,_,!1,c)&&V}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var f=a.g[c],_=0;_<f.length;_++)se(f[_]);delete a.g[c],a.h--}}this.F=null},Qe.prototype.K=function(a,c,f,_){return this.i.add(String(a),c,!1,f,_)},Qe.prototype.L=function(a,c,f,_){return this.i.add(String(a),c,!0,f,_)};function rn(a,c,f,_){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var V=!0,M=0;M<c.length;++M){var $=c[M];if($&&!$.da&&$.capture==f){var ge=$.listener,tt=$.ha||$.src;$.fa&&bt(a.i,$),V=ge.call(tt,_)!==!1&&V}}return V&&!_.defaultPrevented}function Jn(a,c,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function _i(a){a.g=Jn(()=>{a.g=null,a.i&&(a.i=!1,_i(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class En extends G{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:_i(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(a){G.call(this),this.h=a,this.g={}}R(Zn,G);var oa=[];function aa(a){j(a.g,function(c,f){this.g.hasOwnProperty(f)&&Kt(c)},a),a.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),aa(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mr=l.JSON.stringify,la=l.JSON.parse,Fu=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ys(){}ys.prototype.h=null;function ua(a){return a.h||(a.h=a.i())}function ca(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ze(){X.call(this,"d")}R(ze,X);function Ze(){X.call(this,"c")}R(Ze,X);var Me={},sn=null;function et(){return sn=sn||new Qe}Me.La="serverreachability";function ct(a){X.call(this,Me.La,a)}R(ct,X);function dt(a){const c=et();Re(c,new ct(c))}Me.STAT_EVENT="statevent";function Mn(a,c){X.call(this,Me.STAT_EVENT,a),this.stat=c}R(Mn,X);function ie(a){const c=et();Re(c,new Mn(c,a))}Me.Ma="timingevent";function on(a,c){X.call(this,Me.Ma,a),this.size=c}R(on,X);function ht(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Et(){this.g=!0}Et.prototype.xa=function(){this.g=!1};function Or(a,c,f,_,V,M){a.info(function(){if(a.g)if(M)for(var $="",ge=M.split("&"),tt=0;tt<ge.length;tt++){var ue=ge[tt].split("=");if(1<ue.length){var ft=ue[0];ue=ue[1];var pt=ft.split("_");$=2<=pt.length&&pt[1]=="type"?$+(ft+"="+ue+"&"):$+(ft+"=redacted&")}}else $=null;else $=M;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+c+`
`+f+`
`+$})}function Fr(a,c,f,_,V,M,$){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+c+`
`+f+`
`+M+" "+$})}function Tt(a,c,f,_){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+wi(a,f)+(_?" "+_:"")})}function zr(a,c){a.info(function(){return"TIMEOUT: "+c})}Et.prototype.info=function(){};function wi(a,c){if(!a.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var M=V[0];if(M!="noop"&&M!="stop"&&M!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return Mr(f)}catch{return c}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zu;function ha(){}R(ha,ys),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},zu=new ha;function er(a,c,f,_){this.j=a,this.i=c,this.l=f,this.R=_||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jf}function Jf(){this.i=null,this.g="",this.h=!1}var Zf={},Uu={};function Bu(a,c,f){a.L=1,a.v=ga(Ln(c)),a.m=f,a.P=!0,ep(a,null)}function ep(a,c){a.F=Date.now(),fa(a),a.A=Ln(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),pp(f.i,"t",_),a.C=0,f=a.j.J,a.h=new Jf,a.g=Pp(a.j,f?c:null,!a.m),0<a.O&&(a.M=new En(v(a.Y,a,a.g),a.O)),c=a.U,f=a.g,_=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(oa[0]=V.toString()),V=oa);for(var M=0;M<V.length;M++){var $=jn(f,V[M],_||c.handleEvent,!1,c.h||c);if(!$)break;c.g[$.key]=$}c=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),dt(),Or(a.i,a.u,a.A,a.l,a.R,a.m)}er.prototype.ca=function(a){a=a.target;const c=this.M;c&&On(a)==3?c.j():this.Y(a)},er.prototype.Y=function(a){try{if(a==this.g)e:{const pt=On(this.g);var c=this.g.Ba();const ws=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||xp(this.g)))){this.J||pt!=4||c==7||(c==8||0>=ws?dt(3):dt(2)),$u(this);var f=this.g.Z();this.X=f;t:if(tp(this)){var _=xp(this.g);a="";var V=_.length,M=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),xi(this);var $="";break t}this.h.i=new l.TextDecoder}for(c=0;c<V;c++)this.h.h=!0,a+=this.h.i.decode(_[c],{stream:!(M&&c==V-1)});_.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,Fr(this.i,this.u,this.A,this.l,this.R,pt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,tt=this.g;if((ge=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ge)){var ue=ge;break t}}ue=null}if(f=ue)Tt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qu(this,f);else{this.o=!1,this.s=3,ie(12),Ur(this),xi(this);break e}}if(this.P){f=!0;let an;for(;!this.J&&this.C<$.length;)if(an=vw(this,$),an==Uu){pt==4&&(this.s=4,ie(14),f=!1),Tt(this.i,this.l,null,"[Incomplete Response]");break}else if(an==Zf){this.s=4,ie(15),Tt(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Tt(this.i,this.l,an,null),qu(this,an);if(tp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||$.length!=0||this.h.h||(this.s=1,ie(16),f=!1),this.o=this.o&&f,!f)Tt(this.i,this.l,$,"[Invalid Chunked Response]"),Ur(this),xi(this);else if(0<$.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Yu(ft),ft.M=!0,ie(11))}}else Tt(this.i,this.l,$,null),qu(this,$);pt==4&&Ur(this),this.o&&!this.J&&(pt==4?bp(this.j,this):(this.o=!1,fa(this)))}else jw(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),Ur(this),xi(this)}}}catch{}finally{}};function tp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function vw(a,c){var f=a.C,_=c.indexOf(`
`,f);return _==-1?Uu:(f=Number(c.substring(f,_)),isNaN(f)?Zf:(_+=1,_+f>c.length?Uu:(c=c.slice(_,_+f),a.C=_+f,c)))}er.prototype.cancel=function(){this.J=!0,Ur(this)};function fa(a){a.S=Date.now()+a.I,np(a,a.I)}function np(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ht(v(a.ba,a),c)}function $u(a){a.B&&(l.clearTimeout(a.B),a.B=null)}er.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(zr(this.i,this.A),this.L!=2&&(dt(),ie(17)),Ur(this),this.s=2,xi(this)):np(this,this.S-a)};function xi(a){a.j.G==0||a.J||bp(a.j,a)}function Ur(a){$u(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,aa(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function qu(a,c){try{var f=a.j;if(f.G!=0&&(f.g==a||Hu(f.h,a))){if(!a.K&&Hu(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(c)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Ea(f),wa(f);else break e;Gu(f),ie(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=ht(v(f.Za,f),6e3));if(1>=ip(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else $r(f,11)}else if((a.K||f.g==a)&&Ea(f),!T(c))for(V=f.Da.g.parse(c),c=0;c<V.length;c++){let ue=V[c];if(f.T=ue[0],ue=ue[1],f.G==2)if(ue[0]=="c"){f.K=ue[1],f.ia=ue[2];const ft=ue[3];ft!=null&&(f.la=ft,f.j.info("VER="+f.la));const pt=ue[4];pt!=null&&(f.Aa=pt,f.j.info("SVER="+f.Aa));const ws=ue[5];ws!=null&&typeof ws=="number"&&0<ws&&(_=1.5*ws,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const an=a.g;if(an){const Sa=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var M=_.h;M.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Wu(M,M.h),M.h=null))}if(_.D){const Xu=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;Xu&&(_.ya=Xu,ve(_.I,_.D,Xu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var $=a;if(_.qa=kp(_,_.J?_.ia:null,_.W),$.K){op(_.h,$);var ge=$,tt=_.L;tt&&(ge.I=tt),ge.B&&($u(ge),fa(ge)),_.g=$}else Cp(_);0<f.i.length&&xa(f)}else ue[0]!="stop"&&ue[0]!="close"||$r(f,7);else f.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?$r(f,7):Qu(f):ue[0]!="noop"&&f.l&&f.l.ta(ue),f.v=0)}}dt(4)}catch{}}var _w=class{constructor(a,c){this.g=a,this.map=c}};function rp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ip(a){return a.h?1:a.g?a.g.size:0}function Hu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Wu(a,c){a.g?a.g.add(c):a.h=c}function op(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}rp.prototype.cancel=function(){if(this.i=ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ap(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.D);return c}return b(a.i)}function ww(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],f=a.length,_=0;_<f;_++)c.push(a[_]);return c}c=[],f=0;for(_ in a)c[f++]=a[_];return c}function xw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var f=0;f<a;f++)c.push(f);return c}c=[],f=0;for(const _ in a)c[f++]=_;return c}}}function lp(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var f=xw(a),_=ww(a),V=_.length,M=0;M<V;M++)c.call(void 0,_[M],f&&f[M],a)}var up=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ew(a,c){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),V=null;if(0<=_){var M=a[f].substring(0,_);V=a[f].substring(_+1)}else M=a[f];c(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Br){this.h=a.h,pa(this,a.j),this.o=a.o,this.g=a.g,ma(this,a.s),this.l=a.l;var c=a.i,f=new Si;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),cp(this,f),this.m=a.m}else a&&(c=String(a).match(up))?(this.h=!1,pa(this,c[1]||"",!0),this.o=Ei(c[2]||""),this.g=Ei(c[3]||"",!0),ma(this,c[4]),this.l=Ei(c[5]||"",!0),cp(this,c[6]||"",!0),this.m=Ei(c[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}Br.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Ti(c,dp,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Ti(c,dp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ti(f,f.charAt(0)=="/"?Iw:Sw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ti(f,Nw)),a.join("")};function Ln(a){return new Br(a)}function pa(a,c,f){a.j=f?Ei(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ma(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function cp(a,c,f){c instanceof Si?(a.i=c,bw(a.i,a.h)):(f||(c=Ti(c,Cw)),a.i=new Si(c,a.h))}function ve(a,c,f){a.i.set(c,f)}function ga(a){return ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ei(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ti(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,Tw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Tw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dp=/[#\/\?@]/g,Sw=/[#\?:]/g,Iw=/[#\?]/g,Cw=/[#\?@]/g,Nw=/#/g;function Si(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function tr(a){a.g||(a.g=new Map,a.h=0,a.i&&Ew(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Si.prototype,t.add=function(a,c){tr(this),this.i=null,a=vs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function hp(a,c){tr(a),c=vs(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function fp(a,c){return tr(a),c=vs(a,c),a.g.has(c)}t.forEach=function(a,c){tr(this),this.g.forEach(function(f,_){f.forEach(function(V){a.call(c,V,_,this)},this)},this)},t.na=function(){tr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let _=0;_<c.length;_++){const V=a[_];for(let M=0;M<V.length;M++)f.push(c[_])}return f},t.V=function(a){tr(this);let c=[];if(typeof a=="string")fp(this,a)&&(c=c.concat(this.g.get(vs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)c=c.concat(a[f])}return c},t.set=function(a,c){return tr(this),this.i=null,a=vs(this,a),fp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function pp(a,c,f){hp(a,c),0<f.length&&(a.i=null,a.g.set(vs(a,c),b(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var _=c[f];const M=encodeURIComponent(String(_)),$=this.V(_);for(_=0;_<$.length;_++){var V=M;$[_]!==""&&(V+="="+encodeURIComponent(String($[_]))),a.push(V)}}return this.i=a.join("&")};function vs(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function bw(a,c){c&&!a.j&&(tr(a),a.i=null,a.g.forEach(function(f,_){var V=_.toLowerCase();_!=V&&(hp(this,_),pp(this,V,f))},a)),a.j=c}function Aw(a,c){const f=new Et;if(l.Image){const _=new Image;_.onload=I(nr,f,"TestLoadImage: loaded",!0,c,_),_.onerror=I(nr,f,"TestLoadImage: error",!1,c,_),_.onabort=I(nr,f,"TestLoadImage: abort",!1,c,_),_.ontimeout=I(nr,f,"TestLoadImage: timeout",!1,c,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else c(!1)}function Rw(a,c){const f=new Et,_=new AbortController,V=setTimeout(()=>{_.abort(),nr(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:_.signal}).then(M=>{clearTimeout(V),M.ok?nr(f,"TestPingServer: ok",!0,c):nr(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),nr(f,"TestPingServer: error",!1,c)})}function nr(a,c,f,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(f)}catch{}}function kw(){this.g=new Fu}function Pw(a,c,f){const _=f||"";try{lp(a,function(V,M){let $=V;d(V)&&($=Mr(V)),c.push(_+M+"="+encodeURIComponent($))})}catch(V){throw c.push(_+"type="+encodeURIComponent("_badmap")),V}}function ya(a){this.l=a.Ub||null,this.j=a.eb||!1}R(ya,ys),ya.prototype.g=function(){return new va(this.l,this.j)},ya.prototype.i=function(a){return function(){return a}}({});function va(a,c){Qe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(va,Qe),t=va.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function mp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Ii(this):Ci(this),this.readyState==3&&mp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ii(this))},t.Qa=function(a){this.g&&(this.response=a,Ii(this))},t.ga=function(){this.g&&Ii(this)};function Ii(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ci(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function Ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function gp(a){let c="";return j(a,function(f,_){c+=_,c+=":",c+=f,c+=`\r
`}),c}function Ku(a,c,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=gp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ve(a,c,f))}function ke(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ke,Qe);var Dw=/^https?$/i,Vw=["POST","PUT"];t=ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zu.g(),this.v=this.o?ua(this.o):ua(zu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(M){yp(this,M);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)f.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())f.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Vw,c,void 0))||_||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,$]of f)this.g.setRequestHeader(M,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wp(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){yp(this,M)}};function yp(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,vp(a),_a(a)}function vp(a){a.A||(a.A=!0,Re(a,"complete"),Re(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Re(this,"complete"),Re(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_p(this):this.bb())},t.bb=function(){_p(this)};function _p(a){if(a.h&&typeof o<"u"&&(!a.v[1]||On(a)!=4||a.Z()!=2)){if(a.u&&On(a)==4)Jn(a.Ea,0,a);else if(Re(a,"readystatechange"),On(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var _;if(_=$===0){var V=String(a.D).match(up)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),_=!Dw.test(V?V.toLowerCase():"")}f=_}if(f)Re(a,"complete"),Re(a,"success");else{a.m=6;try{var M=2<On(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",vp(a)}}finally{_a(a)}}}}function _a(a,c){if(a.g){wp(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||Re(a,"ready");try{f.onreadystatechange=_}catch{}}}function wp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),la(c)}};function xp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function jw(a){const c={};a=(a.g&&2<=On(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(T(a[_]))continue;var f=A(a[_]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[V]||[];c[V]=M,M.push(f)}E(c,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Ep(a){this.Aa=0,this.i=[],this.j=new Et,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ni("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ni("baseRetryDelayMs",5e3,a),this.cb=Ni("retryDelaySeedMs",1e4,a),this.Wa=Ni("forwardChannelMaxRetries",2,a),this.wa=Ni("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new rp(a&&a.concurrentRequestLimit),this.Da=new kw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ep.prototype,t.la=8,t.G=1,t.connect=function(a,c,f,_){ie(0),this.W=a,this.H=c||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=kp(this,null,this.W),xa(this)};function Qu(a){if(Tp(a),a.G==3){var c=a.U++,f=Ln(a.I);if(ve(f,"SID",a.K),ve(f,"RID",c),ve(f,"TYPE","terminate"),bi(a,f),c=new er(a,a.j,c),c.L=2,c.v=ga(Ln(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=Pp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),fa(c)}Rp(a)}function wa(a){a.g&&(Yu(a),a.g.cancel(),a.g=null)}function Tp(a){wa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ea(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function xa(a){if(!sp(a.h)&&!a.s){a.s=!0;var c=a.Ga;me||z(),O||(me(),O=!0),q.add(c,a),a.B=0}}function Mw(a,c){return ip(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ht(v(a.Ga,a,c),Ap(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new er(this,this.j,a);let M=this.o;if(this.S&&(M?(M=g(M),x(M,this.S)):M=this.S),this.m!==null||this.O||(V.H=M,M=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(c+=_,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Ip(this,V,c),f=Ln(this.I),ve(f,"RID",a),ve(f,"CVER",22),this.D&&ve(f,"X-HTTP-Session-Id",this.D),bi(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(gp(M)))+"&"+c:this.m&&Ku(f,this.m,M)),Wu(this.h,V),this.Ua&&ve(f,"TYPE","init"),this.P?(ve(f,"$req",c),ve(f,"SID","null"),V.T=!0,Bu(V,f,null)):Bu(V,f,c),this.G=2}}else this.G==3&&(a?Sp(this,a):this.i.length==0||sp(this.h)||Sp(this))};function Sp(a,c){var f;c?f=c.l:f=a.U++;const _=Ln(a.I);ve(_,"SID",a.K),ve(_,"RID",f),ve(_,"AID",a.T),bi(a,_),a.m&&a.o&&Ku(_,a.m,a.o),f=new er(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Ip(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Wu(a.h,f),Bu(f,_,c)}function bi(a,c){a.H&&j(a.H,function(f,_){ve(c,_,f)}),a.l&&lp({},function(f,_){ve(c,_,f)})}function Ip(a,c,f){f=Math.min(a.i.length,f);var _=a.l?v(a.l.Na,a.l,a):null;e:{var V=a.i;let M=-1;for(;;){const $=["count="+f];M==-1?0<f?(M=V[0].g,$.push("ofs="+M)):M=0:$.push("ofs="+M);let ge=!0;for(let tt=0;tt<f;tt++){let ue=V[tt].g;const ft=V[tt].map;if(ue-=M,0>ue)M=Math.max(0,V[tt].g-100),ge=!1;else try{Pw(ft,$,"req"+ue+"_")}catch{_&&_(ft)}}if(ge){_=$.join("&");break e}}}return a=a.i.splice(0,f),c.D=a,_}function Cp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;me||z(),O||(me(),O=!0),q.add(c,a),a.v=0}}function Gu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ht(v(a.Fa,a),Ap(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Np(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ht(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),wa(this),Np(this))};function Yu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Np(a){a.g=new er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Ln(a.qa);ve(c,"RID","rpc"),ve(c,"SID",a.K),ve(c,"AID",a.T),ve(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&ve(c,"TO",a.ja),ve(c,"TYPE","xmlhttp"),bi(a,c),a.m&&a.o&&Ku(c,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ga(Ln(c)),f.m=null,f.P=!0,ep(f,a)}t.Za=function(){this.C!=null&&(this.C=null,wa(this),Gu(this),ie(19))};function Ea(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function bp(a,c){var f=null;if(a.g==c){Ea(a),Yu(a),a.g=null;var _=2}else if(Hu(a.h,c))f=c.D,op(a.h,c),_=1;else return;if(a.G!=0){if(c.o)if(_==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var V=a.B;_=et(),Re(_,new on(_,f)),xa(a)}else Cp(a);else if(V=c.s,V==3||V==0&&0<c.X||!(_==1&&Mw(a,c)||_==2&&Gu(a)))switch(f&&0<f.length&&(c=a.h,c.i=c.i.concat(f)),V){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Ap(a,c){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*c}function $r(a,c){if(a.j.info("Error code "+c),c==2){var f=v(a.fb,a),_=a.Xa;const V=!_;_=new Br(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||pa(_,"https"),ga(_),V?Aw(_.toString(),f):Rw(_.toString(),f)}else ie(2);a.G=0,a.l&&a.l.sa(c),Rp(a),Tp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function Rp(a){if(a.G=0,a.ka=[],a.l){const c=ap(a.h);(c.length!=0||a.i.length!=0)&&(S(a.ka,c),S(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function kp(a,c,f){var _=f instanceof Br?Ln(f):new Br(f);if(_.g!="")c&&(_.g=c+"."+_.g),ma(_,_.s);else{var V=l.location;_=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;var M=new Br(null);_&&pa(M,_),c&&(M.g=c),V&&ma(M,V),f&&(M.l=f),_=M}return f=a.D,c=a.ya,f&&c&&ve(_,f,c),ve(_,"VER",a.la),bi(a,_),_}function Pp(a,c,f){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new ke(new ya({eb:f})):new ke(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dp(){}t=Dp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ta(){}Ta.prototype.g=function(a,c){return new Ft(a,c)};function Ft(a,c){Qe.call(this),this.g=new Ep(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!T(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new _s(this)}R(Ft,Qe),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Qu(this.g)},Ft.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Mr(a),a=f);c.i.push(new _w(c.Ya++,a)),c.G==3&&xa(c)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Qu(this.g),delete this.g,Ft.aa.N.call(this)};function Vp(a){ze.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}R(Vp,ze);function jp(){Ze.call(this),this.status=1}R(jp,Ze);function _s(a){this.g=a}R(_s,Dp),_s.prototype.ua=function(){Re(this.g,"a")},_s.prototype.ta=function(a){Re(this.g,new Vp(a))},_s.prototype.sa=function(a){Re(this.g,new jp)},_s.prototype.ra=function(){Re(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,t_=function(){return new Ta},e_=function(){return et()},Z0=Me,Fd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,hl=da,Xf.COMPLETE="complete",J0=Xf,ca.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,$i=ca,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,X0=ke}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});const mg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new q0("@firebase/firestore");function Li(){return is.logLevel}function K(t,...e){if(is.logLevel<=oe.DEBUG){const n=e.map(hf);is.debug(`Firestore (${pi}): ${t}`,...n)}}function Gn(t,...e){if(is.logLevel<=oe.ERROR){const n=e.map(hf);is.error(`Firestore (${pi}): ${t}`,...n)}}function ei(t,...e){if(is.logLevel<=oe.WARN){const n=e.map(hf);is.warn(`Firestore (${pi}): ${t}`,...n)}}function hf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${pi}) INTERNAL ASSERTION FAILED: `+t;throw Gn(e),new Error(e)}function pe(t,e){t||J()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class MI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LI{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new n_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new vt(e)}}class OI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new zI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function ti(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return we.fromMillis(Date.now())}static fromDate(e){return we.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new we(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new we(0,0))}static max(){return new Z(new we(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends Vo{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const $I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Vo{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return $I.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(xe.fromString(e))}static fromName(e){return new Y(xe.fromString(e).popFirst(5))}static empty(){return new Y(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new xe(e.slice()))}}function qI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new we(n+1,0):new we(n,r));return new Nr(s,Y.empty(),e)}function HI(t){return new Nr(t.readTime,t.key,-1)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(Z.min(),Y.empty(),-1)}static max(){return new Nr(Z.max(),Y.empty(),-1)}}function WI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==KI)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function GI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ff.oe=-1;function Cu(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function YI(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function s_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}}class Ha{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yg(this.data.getIterator())}getIteratorFrom(e){return new yg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class yg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new ot(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new i_("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const XI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(pe(!!t),typeof t=="string"){let e=0;const n=XI.exec(t);if(pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mf(t){const e=t.mapValue.fields.__previous_value__;return pf(e)?mf(e):e}function jo(t){const e=br(t.mapValue.fields.__local_write_time__.timestampValue);return new we(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Mo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pf(t)?4:eC(t)?9007199254740991:ZI(t)?10:11:J()}function Vn(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jo(t).isEqual(jo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=br(s.timestampValue),l=br(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return os(s.bytesValue).isEqual(os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),l=Oe(i.doubleValue);return o===l?Jl(o)===Jl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ti(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(gg(o)!==gg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Vn(o[u],l[u])))return!1;return!0}(t,e);default:return J()}}function Lo(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function ni(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Oe(i.integerValue||i.doubleValue),u=Oe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return vg(t.timestampValue,e.timestampValue);case 4:return vg(jo(t),jo(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const l=os(i),u=os(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=ce(l[d],u[d]);if(p!==0)return p}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ce(Oe(i.latitude),Oe(o.latitude));return l!==0?l:ce(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _g(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,p;const m=i.fields||{},v=o.fields||{},I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,R=(u=v.value)===null||u===void 0?void 0:u.arrayValue,b=ce(((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0,((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:_g(I,R)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wa.mapValue&&o===Wa.mapValue)return 0;if(i===Wa.mapValue)return 1;if(o===Wa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const v=ce(u[m],p[m]);if(v!==0)return v;const I=ni(l[u[m]],d[p[m]]);if(I!==0)return I}return ce(u.length,p.length)}(t.mapValue,e.mapValue);default:throw J()}}function vg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=br(t),r=br(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function _g(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ni(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function ri(t){return zd(t)}function zd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=zd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${zd(n.fields[o])}`;return s+"}"}(t.mapValue):J()}function wg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ud(t){return!!t&&"integerValue"in t}function gf(t){return!!t&&"arrayValue"in t}function xg(t){return!!t&&"nullValue"in t}function Eg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fl(t){return!!t&&"mapValue"in t}function ZI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=io(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=io(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());fl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(io(this.value))}}function o_(t){const e=[];return ds(t.fields,(n,r)=>{const s=new st([n]);if(fl(r)){const i=o_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,Z.min(),Z.min(),Z.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new wt(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new wt(e,2,n,Z.min(),Z.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,Z.min(),Z.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.position=e,this.inclusive=n}}function Tg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ni(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n="asc"){this.field=e,this.dir=n}}function tC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{}class $e extends a_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rC(e,n,r):n==="array-contains"?new oC(e,r):n==="in"?new aC(e,r):n==="not-in"?new lC(e,r):n==="array-contains-any"?new uC(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sC(e,r):new iC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ni(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(ni(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends a_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yn(e,n)}matches(e){return l_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function l_(t){return t.op==="and"}function u_(t){return nC(t)&&l_(t)}function nC(t){for(const e of t.filters)if(e instanceof yn)return!1;return!0}function Bd(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+ri(t.value);if(u_(t))return t.filters.map(e=>Bd(e)).join(",");{const e=t.filters.map(n=>Bd(n)).join(",");return`${t.op}(${e})`}}function c_(t,e){return t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.field.isEqual(s.field)&&Vn(r.value,s.value)}(t,e):t instanceof yn?function(r,s){return s instanceof yn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&c_(o,s.filters[l]),!0):!1}(t,e):void J()}function d_(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${ri(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(d_).join(" ,")+"}"}(t):"Filter"}class rC extends $e{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class sC extends $e{constructor(e,n){super(e,"in",n),this.keys=h_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iC extends $e{constructor(e,n){super(e,"not-in",n),this.keys=h_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function h_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class oC extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gf(n)&&Lo(n.arrayValue,this.value)}}class aC extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lo(this.value.arrayValue,n)}}class lC extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lo(this.value.arrayValue,n)}}class uC extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Ig(t,e=null,n=[],r=[],s=null,i=null,o=null){return new cC(t,e,n,r,s,i,o)}function yf(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Cu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ri(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ri(r)).join(",")),e.ue=n}return e.ue}function vf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!c_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sg(t.startAt,e.startAt)&&Sg(t.endAt,e.endAt)}function $d(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dC(t,e,n,r,s,i,o,l){return new mi(t,e,n,r,s,i,o,l)}function _f(t){return new mi(t)}function Cg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f_(t){return t.collectionGroup!==null}function oo(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ot(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Oo(i,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new Oo(st.keyField(),r))}return e.ce}function An(t){const e=ee(t);return e.le||(e.le=hC(e,oo(t))),e.le}function hC(t,e){if(t.limitType==="F")return Ig(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Oo(s.field,i)});const n=t.endAt?new Zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zl(t.startAt.position,t.startAt.inclusive):null;return Ig(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qd(t,e){const n=t.filters.concat([e]);return new mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hd(t,e,n){return new mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nu(t,e){return vf(An(t),An(e))&&t.limitType===e.limitType}function p_(t){return`${yf(An(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>d_(s)).join(", ")}]`),Cu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ri(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ri(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function bu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Tg(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,oo(r),s)||r.endAt&&!function(o,l,u){const d=Tg(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,oo(r),s))}(t,e)}function fC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m_(t){return(e,n)=>{let r=!1;for(const s of oo(t)){const i=pC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function pC(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?ni(u,d):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return s_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Ae(Y.comparator);function Yn(){return mC}const g_=new Ae(Y.comparator);function qi(...t){let e=g_;for(const n of t)e=e.insert(n.key,n);return e}function y_(t){let e=g_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return ao()}function v_(){return ao()}function ao(){return new gi(t=>t.toString(),(t,e)=>t.isEqual(e))}const gC=new Ae(Y.comparator),yC=new ot(Y.comparator);function ne(...t){let e=yC;for(const n of t)e=e.add(n);return e}const vC=new ot(ce);function _C(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function __(t){return{integerValue:""+t}}function wC(t,e){return YI(e)?__(e):wf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(){this._=void 0}}function xC(t,e,n){return t instanceof eu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&pf(i)&&(i=mf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Fo?x_(t,e):t instanceof zo?E_(t,e):function(s,i){const o=w_(s,i),l=Ng(o)+Ng(s.Pe);return Ud(o)&&Ud(s.Pe)?__(l):wf(s.serializer,l)}(t,e)}function EC(t,e,n){return t instanceof Fo?x_(t,e):t instanceof zo?E_(t,e):n}function w_(t,e){return t instanceof tu?function(r){return Ud(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class eu extends Au{}class Fo extends Au{constructor(e){super(),this.elements=e}}function x_(t,e){const n=T_(e);for(const r of t.elements)n.some(s=>Vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class zo extends Au{constructor(e){super(),this.elements=e}}function E_(t,e){let n=T_(e);for(const r of t.elements)n=n.filter(s=>!Vn(s,r));return{arrayValue:{values:n}}}class tu extends Au{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ng(t){return Oe(t.integerValue||t.doubleValue)}function T_(t){return gf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function TC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Fo&&s instanceof Fo||r instanceof zo&&s instanceof zo?ti(r.elements,s.elements,Vn):r instanceof tu&&s instanceof tu?Vn(r.Pe,s.Pe):r instanceof eu&&s instanceof eu}(t.transform,e.transform)}class SC{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ru{}function S_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xf(t.key,pn.none()):new Xo(t.key,t.data,pn.none());{const n=t.data,r=kt.empty();let s=new ot(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Dr(t.key,r,new Bt(s.toArray()),pn.none())}}function IC(t,e,n){t instanceof Xo?function(s,i,o){const l=s.value.clone(),u=Ag(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(s,i,o){if(!pl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ag(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(I_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lo(t,e,n,r){return t instanceof Xo?function(i,o,l,u){if(!pl(i.precondition,o))return l;const d=i.value.clone(),p=Rg(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(i,o,l,u){if(!pl(i.precondition,o))return l;const d=Rg(i.fieldTransforms,u,o),p=o.data;return p.setAll(I_(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return pl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function CC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=w_(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function bg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ti(r,s,(i,o)=>TC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xo extends Ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dr extends Ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function I_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ag(t,e,n){const r=new Map;pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,EC(o,l,n[s]))}return r}function Rg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,xC(i,o,e))}return r}class xf extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NC extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&IC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=v_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=S_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ti(this.mutations,e.mutations,(n,r)=>bg(n,r))&&ti(this.baseMutations,e.baseMutations,(n,r)=>bg(n,r))}}class Ef{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length);let s=function(){return gC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ef(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,re;function kC(t){switch(t){default:return J();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function C_(t){if(t===void 0)return Gn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ue.OK:return F.OK;case Ue.CANCELLED:return F.CANCELLED;case Ue.UNKNOWN:return F.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return F.INTERNAL;case Ue.UNAVAILABLE:return F.UNAVAILABLE;case Ue.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ue.NOT_FOUND:return F.NOT_FOUND;case Ue.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ue.ABORTED:return F.ABORTED;case Ue.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ue.DATA_LOSS:return F.DATA_LOSS;default:return J()}}(re=Ue||(Ue={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Zr([4294967295,4294967295],0);function kg(t){const e=PC().encode(t),n=new Y0;return n.update(e),new Uint8Array(n.digest())}function Pg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([s,i],0)]}class Tf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hi(`Invalid padding: ${n}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Zr.fromNumber(r)));return s.compare(DC)===1&&(s=new Zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=kg(e),[r,s]=Pg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=kg(e),[r,s]=Pg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Jo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ku(Z.min(),s,new Ae(ce),Yn(),ne())}}class Jo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jo(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class N_{constructor(e,n){this.targetId=e,this.me=n}}class b_{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dg{constructor(){this.fe=0,this.ge=jg(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J()}}),new Jo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=jg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=Vg(),this.Qe=new Ae(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if($d(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,wt.newNoDocument(o,Z.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=os(r).toUint8Array()}catch(u){if(u instanceof i_)return ei("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tf(o,s,i)}catch(u){return ei(u instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&$d(l.target)){const u=new Y(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,wt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ku(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=Vg(),this.Qe=new Ae(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Dg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ot(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Dg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Vg(){return new Ae(Y.comparator)}function jg(){return new Ae(Y.comparator)}const jC={asc:"ASCENDING",desc:"DESCENDING"},MC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LC={and:"AND",or:"OR"};class OC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wd(t,e){return t.useProto3Json||Cu(e)?e:{value:e}}function nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FC(t,e){return nu(t,e.toTimestamp())}function Rn(t){return pe(!!t),Z.fromTimestamp(function(n){const r=br(n);return new we(r.seconds,r.nanos)}(t))}function Sf(t,e){return Kd(t,e).canonicalString()}function Kd(t,e){const n=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function R_(t){const e=xe.fromString(t);return pe(j_(e)),e}function Qd(t,e){return Sf(t.databaseId,e.path)}function Pc(t,e){const n=R_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(P_(n))}function k_(t,e){return Sf(t.databaseId,e)}function zC(t){const e=R_(t);return e.length===4?xe.emptyPath():P_(e)}function Gd(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function P_(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mg(t,e,n){return{name:Qd(t,e),fields:n.value.mapValue.fields}}function UC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(pe(p===void 0||typeof p=="string"),lt.fromBase64String(p||"")):(pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),lt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?F.UNKNOWN:C_(d.code);return new W(p,d.message||"")}(o);n=new b_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Pc(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):Z.min(),l=new kt({mapValue:{fields:r.document.fields}}),u=wt.newFoundDocument(s,i,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new ml(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Pc(t,r.document),i=r.readTime?Rn(r.readTime):Z.min(),o=wt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ml([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Pc(t,r.document),i=r.removedTargetIds||[];n=new ml([],i,s,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new RC(s,i),l=r.targetId;n=new N_(l,o)}}return n}function BC(t,e){let n;if(e instanceof Xo)n={update:Mg(t,e.key,e.value)};else if(e instanceof xf)n={delete:Qd(t,e.key)};else if(e instanceof Dr)n={update:Mg(t,e.key,e.data),updateMask:XC(e.fieldMask)};else{if(!(e instanceof NC))return J();n={verify:Qd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof eu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof tu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:FC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J()}(t,e.precondition)),n}function $C(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(Z.min())&&(o=Rn(i)),new SC(o,s.transformResults||[])}(n,e))):[]}function qC(t,e){return{documents:[k_(t,e.path)]}}function HC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=k_(t,s);const i=function(d){if(d.length!==0)return V_(yn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:Ts(v.field),direction:QC(v.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Wd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function WC(t){let e=zC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const v=D_(m);return v instanceof yn&&u_(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(R){return new Oo(Ss(R.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,Cu(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,I=m.values||[];return new Zl(I,v)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const v=!m.before,I=m.values||[];return new Zl(I,v)}(n.endAt)),dC(e,s,o,i,l,"F",u,d)}function KC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return $e.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>D_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function QC(t){return jC[t]}function GC(t){return MC[t]}function YC(t){return LC[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function Ss(t){return st.fromServerFormat(t.fieldPath)}function V_(t){return t instanceof $e?function(n){if(n.op==="=="){if(Eg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(xg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Eg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(xg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:GC(n.op),value:n.value}}}(t):t instanceof yn?function(n){const r=n.getFilters().map(s=>V_(s));return r.length===1?r[0]:{compositeFilter:{op:YC(n.op),filters:r}}}(t):J()}function XC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function j_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,s,i=Z.min(),o=Z.min(),l=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.ct=e}}function ZC(t){const e=WC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.un=new t2}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Nr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class t2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ot(xe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ot(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new si(0)}static kn(){return new si(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.changes=new gi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lo(r.mutation,s,Bt.empty(),we.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Yn();const o=ao(),l=function(){return ao()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Dr)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),lo(p.mutation,d,p.mutation.getFieldMask(),we.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return l.set(d,new r2(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ao();let s=new Ae((o,l)=>o-l),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Bt.empty();p=l.applyToLocalView(d,p),r.set(u,p);const m=(s.get(l.batchId)||ne()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,m=v_();p.forEach(v=>{if(!i.has(v)){const I=S_(n.get(v),r.get(v));I!==null&&m.set(v,I),i=i.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):f_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Yr());let l=-1,u=i;return o.next(d=>U.forEach(d,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ne())).next(p=>({batchId:l,changes:y_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=qi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qi();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const d=function(m,v){return new mi(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,wt.newInvalidDocument(p)))});let l=qi();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&lo(p.mutation,d,Bt.empty(),we.now()),bu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ZC(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.overlays=new Ae(Y.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Yr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Yr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new AC(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.Tr=new ot(Ge.Er),this.dr=new ot(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ge(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new xe([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new xe([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ot(Ge.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(ce);return n.forEach(s=>{const i=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ge(new Y(i),0);let l=new ot(ce);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ge(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.Mr=e,this.docs=function(){return new Ae(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,l=new Y(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||WI(HI(p),r)<=0||(s.has(p.key)||bu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new c2(this)}getSize(e){return U.resolve(this.size)}}class c2 extends n2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.persistence=e,this.Nr=new gi(n=>yf(n),vf),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new If,this.targetCount=0,this.kr=si.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new si(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ff(0),this.Kr=!1,this.Kr=!0,this.$r=new a2,this.referenceDelegate=e(this),this.Ur=new d2(this),this.indexManager=new e2,this.remoteDocumentCache=function(s){return new u2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JC(n),this.Gr=new i2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new l2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new f2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class f2 extends QI{constructor(e){super(),this.currentSequenceNumber=e}}class Cf{constructor(e){this.persistence=e,this.Jr=new If,this.Yr=null}static Zr(e){return new Cf(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Nf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _S()?8:GI(yS())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new p2;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Li()<=oe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Li()<=oe.DEBUG&&K("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Li()<=oe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):U.resolve())}Yi(e,n){if(Cg(n))return U.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Hd(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Hd(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Cg(n)||s.isEqual(Z.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Li()<=oe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Es(n)),this.rs(e,o,n,qI(s,-1)).next(l=>l))})}ts(e,n){let r=new ot(m_(e));return n.forEach((s,i)=>{bu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Li()<=oe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Ji.getDocumentsMatchingQuery(e,n,Nr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ae(ce),this._s=new gi(i=>yf(i),vf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function y2(t,e,n,r){return new g2(t,e,n,r)}async function M_(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ne();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function v2(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const m=d.batch,v=m.keys();let I=U.resolve();return v.forEach(R=>{I=I.next(()=>p.getEntry(u,R)).next(b=>{const S=d.docVersions.get(R);pe(S!==null),b.version.compareTo(S)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),p.addEntry(b)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function L_(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _2(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const v=s.get(m);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let I=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(lt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(m,I),function(b,S,w){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(v,I,p)&&l.push(n.Ur.updateTargetData(i,I))});let u=Yn(),d=ne();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(w2(i,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(Z.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function w2(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function x2(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function E2(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Yd(t,e,n){const r=ee(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yo(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Lg(t,e,n){const r=ee(t);let s=Z.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=ee(u),v=m._s.get(p);return v!==void 0?U.resolve(m.os.get(v)):m.Ur.getTargetData(d,p)}(r,o,An(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:ne())).next(l=>(T2(r,fC(e),l),{documents:l,Ts:i})))}function T2(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Og{constructor(){this.activeTargetIds=_C()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S2{constructor(){this.so=new Og,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Og,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka=null;function Dc(){return Ka===null?Ka=function(){return 268435456+Math.round(2147483648*Math.random())}():Ka++,"0x"+Ka.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class b2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Dc(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(p=>(K("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ei("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=C2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Dc();return new Promise((o,l)=>{const u=new X0;u.setWithCredentials(!0),u.listenOnce(J0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hl.NO_ERROR:const p=u.getResponseJson();K(yt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case hl.TIMEOUT:K(yt,`RPC '${e}' ${i} timed out`),l(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case hl.HTTP_ERROR:const m=u.getStatus();if(K(yt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const R=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(I.status);l(new W(R,I.message))}else l(new W(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(F.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{K(yt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);K(yt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Dc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t_(),l=e_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");K(yt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let v=!1,I=!1;const R=new N2({Io:S=>{I?K(yt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(v||(K(yt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),K(yt,`RPC '${e}' stream ${s} sending:`,S),m.send(S))},To:()=>m.close()}),b=(S,w,T)=>{S.listen(w,C=>{try{T(C)}catch(D){setTimeout(()=>{throw D},0)}})};return b(m,$i.EventType.OPEN,()=>{I||(K(yt,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),b(m,$i.EventType.CLOSE,()=>{I||(I=!0,K(yt,`RPC '${e}' stream ${s} transport closed`),R.So())}),b(m,$i.EventType.ERROR,S=>{I||(I=!0,ei(yt,`RPC '${e}' stream ${s} transport errored:`,S),R.So(new W(F.UNAVAILABLE,"The operation could not be completed")))}),b(m,$i.EventType.MESSAGE,S=>{var w;if(!I){const T=S.data[0];pe(!!T);const C=T,D=C.error||((w=C[0])===null||w===void 0?void 0:w.error);if(D){K(yt,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let j=function(y){const x=Ue[y];if(x!==void 0)return C_(x)}(L),E=D.message;j===void 0&&(j=F.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),I=!0,R.So(new W(j,E)),m.close()}else K(yt,`RPC '${e}' stream ${s} received:`,T),R.bo(T)}}),b(l,Z0.STAT_EVENT,S=>{S.stat===Fd.PROXY?K(yt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Fd.NOPROXY&&K(yt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Vc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t){return new OC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new O_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class A2 extends F_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=UC(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Rn(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Gd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=$d(u)?{documents:qC(i,u)}:{query:HC(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=A_(i,o.resumeToken);const d=Wd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=nu(i,o.snapshotVersion.toTimestamp());const d=Wd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=KC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Gd(this.serializer),n.removeTarget=e,this.a_(n)}}class R2 extends F_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$C(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Gd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>BC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Kd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Kd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class P2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{hs(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ee(u);d.L_.add(4),await Zo(d),d.q_.set("Unknown"),d.L_.delete(4),await Du(d)}(this))})}),this.q_=new P2(r,s)}}async function Du(t){if(hs(t))for(const e of t.B_)await e(!0)}async function Zo(t){for(const e of t.B_)await e(!1)}function z_(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),kf(n)?Rf(n):yi(n).r_()&&Af(n,e))}function bf(t,e){const n=ee(t),r=yi(n);n.N_.delete(e),r.r_()&&U_(n,e),n.N_.size===0&&(r.r_()?r.o_():hs(n)&&n.q_.set("Unknown"))}function Af(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yi(t).A_(e)}function U_(t,e){t.Q_.xe(e),yi(t).R_(e)}function Rf(t){t.Q_=new VC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yi(t).start(),t.q_.v_()}function kf(t){return hs(t)&&!yi(t).n_()&&t.N_.size>0}function hs(t){return ee(t).L_.size===0}function B_(t){t.Q_=void 0}async function V2(t){t.q_.set("Online")}async function j2(t){t.N_.forEach((e,n)=>{Af(t,e)})}async function M2(t,e){B_(t),kf(t)?(t.q_.M_(e),Rf(t)):t.q_.set("Unknown")}async function L2(t,e,n){if(t.q_.set("Online"),e instanceof b_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ru(t,r)}else if(e instanceof ml?t.Q_.Ke(e):e instanceof N_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await L_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(lt.EMPTY_BYTE_STRING,p.snapshotVersion)),U_(i,u);const m=new hr(p.target,u,d,p.sequenceNumber);Af(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await ru(t,r)}}async function ru(t,e,n){if(!Yo(e))throw e;t.L_.add(1),await Zo(t),t.q_.set("Offline"),n||(n=()=>L_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Du(t)})}function $_(t,e){return e().catch(n=>ru(t,n,e))}async function Vu(t){const e=ee(t),n=Ar(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;O2(e);)try{const s=await x2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,F2(e,s)}catch(s){await ru(e,s)}q_(e)&&H_(e)}function O2(t){return hs(t)&&t.O_.length<10}function F2(t,e){t.O_.push(e);const n=Ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function q_(t){return hs(t)&&!Ar(t).n_()&&t.O_.length>0}function H_(t){Ar(t).start()}async function z2(t){Ar(t).p_()}async function U2(t){const e=Ar(t);for(const n of t.O_)e.m_(n.mutations)}async function B2(t,e,n){const r=t.O_.shift(),s=Ef.from(r,e,n);await $_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Vu(t)}async function $2(t,e){e&&Ar(t).V_&&await async function(r,s){if(function(o){return kC(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Ar(r).s_(),await $_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Vu(r)}}(t,e),q_(t)&&H_(t)}async function zg(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=hs(n);n.L_.add(3),await Zo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Du(n)}async function q2(t,e){const n=ee(t);e?(n.L_.delete(2),await Du(n)):e||(n.L_.add(2),await Zo(n),n.q_.set("Unknown"))}function yi(t){return t.K_||(t.K_=function(n,r,s){const i=ee(n);return i.w_(),new A2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:V2.bind(null,t),Ro:j2.bind(null,t),mo:M2.bind(null,t),d_:L2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),kf(t)?Rf(t):t.q_.set("Unknown")):(await t.K_.stop(),B_(t))})),t.K_}function Ar(t){return t.U_||(t.U_=function(n,r,s){const i=ee(n);return i.w_(),new R2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:z2.bind(null,t),mo:$2.bind(null,t),f_:U2.bind(null,t),g_:B2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Pf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Df(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Yo(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=qi(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.W_=new Ae(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ii{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ii(e,n,Ws.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class W2{constructor(){this.queries=Bg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=Bg(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function Bg(){return new gi(t=>p_(t),Nu)}async function W_(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new H2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Df(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Vf(n)}async function K_(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function K2(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Vf(n)}function Q2(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Vf(t){t.Y_.forEach(e=>{e.next()})}var Xd,$g;($g=Xd||(Xd={})).ea="default",$g.Cache="cache";class Q_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.key=e}}class Y_{constructor(e){this.key=e}}class G2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=m_(e),this.Ra=new Ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ug,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const v=s.get(p),I=bu(this.query,m)?m:null,R=!!v&&this.mutatedKeys.has(v.key),b=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let S=!1;v&&I?v.data.isEqual(I.data)?R!==b&&(r.track({type:3,doc:I}),S=!0):this.ga(v,I)||(r.track({type:2,doc:I}),S=!0,(u&&this.Aa(I,u)>0||d&&this.Aa(I,d)<0)&&(l=!0)):!v&&I?(r.track({type:0,doc:I}),S=!0):v&&!I&&(r.track({type:1,doc:v}),S=!0,(u||d)&&(l=!0)),S&&(I?(o=o.add(I),i=b?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,R){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return b(I)-b(R)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ii(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ug,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Y_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new G_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ii.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Y2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class X2{constructor(e){this.key=e,this.va=!1}}class J2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new gi(l=>p_(l),Nu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(Y.comparator),this.Na=new Map,this.La=new If,this.Ba={},this.ka=new Map,this.qa=si.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Z2(t,e,n=!0){const r=nw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await X_(r,e,n,!0),s}async function eN(t,e){const n=nw(t);await X_(n,e,!0,!1)}async function X_(t,e,n,r){const s=await E2(t.localStore,An(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await tN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&z_(t.remoteStore,s),l}async function tN(t,e,n,r,s){t.Ka=(m,v,I)=>async function(b,S,w,T){let C=S.view.ma(w);C.ns&&(C=await Lg(b.localStore,S.query,!1).then(({documents:E})=>S.view.ma(E,C)));const D=T&&T.targetChanges.get(S.targetId),L=T&&T.targetMismatches.get(S.targetId)!=null,j=S.view.applyChanges(C,b.isPrimaryClient,D,L);return Hg(b,S.targetId,j.wa),j.snapshot}(t,m,v,I);const i=await Lg(t.localStore,e,!0),o=new G2(e,i.Ts),l=o.ma(i.documents),u=Jo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Hg(t,n,d.wa);const p=new Y2(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function nN(t,e,n){const r=ee(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Nu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&bf(r.remoteStore,s.targetId),Jd(r,s.targetId)}).catch(Go)):(Jd(r,s.targetId),await Yd(r.localStore,s.targetId,!0))}async function rN(t,e){const n=ee(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bf(n.remoteStore,r.targetId))}async function sN(t,e,n){const r=dN(t);try{const s=await function(o,l){const u=ee(o),d=we.now(),p=l.reduce((I,R)=>I.add(R.key),ne());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let R=Yn(),b=ne();return u.cs.getEntries(I,p).next(S=>{R=S,R.forEach((w,T)=>{T.isValidDocument()||(b=b.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,R)).next(S=>{m=S;const w=[];for(const T of l){const C=CC(T,m.get(T.key).overlayedDocument);C!=null&&w.push(new Dr(T.key,C,o_(C.value.mapValue),pn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,w,l)}).next(S=>{v=S;const w=S.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(I,S.batchId,w)})}).then(()=>({batchId:v.batchId,changes:y_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ae(ce)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ea(r,s.changes),await Vu(r.remoteStore)}catch(s){const i=Df(s,"Failed to persist write");n.reject(i)}}async function J_(t,e){const n=ee(t);try{const r=await _2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?pe(o.va):s.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await ea(n,r,e)}catch(r){await Go(r)}}function qg(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ee(o);u.onlineState=l;let d=!1;u.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(d=!0)}),d&&Vf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iN(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ae(Y.comparator);o=o.insert(i,wt.newNoDocument(i,Z.min()));const l=ne().add(i),u=new ku(Z.min(),new Map,new Ae(ce),o,l);await J_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),jf(r)}else await Yd(r.localStore,e,!1).then(()=>Jd(r,e,n)).catch(Go)}async function oN(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await v2(n.localStore,e);ew(n,r,null),Z_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ea(n,s)}catch(s){await Go(s)}}async function aN(t,e,n){const r=ee(t);try{const s=await function(o,l){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(pe(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);ew(r,e,n),Z_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ea(r,s)}catch(s){await Go(s)}}function Z_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ew(t,e,n){const r=ee(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Jd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||tw(t,r)})}function tw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(bf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),jf(t))}function Hg(t,e,n){for(const r of n)r instanceof G_?(t.La.addReference(r.key,e),lN(t,r)):r instanceof Y_?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||tw(t,r.key)):J()}function lN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),jf(t))}function jf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new X2(n)),t.Oa=t.Oa.insert(n,r),z_(t.remoteStore,new hr(An(_f(n.path)),r,"TargetPurposeLimboResolution",ff.oe))}}async function ea(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Nf.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const p=ee(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,v=>U.forEach(v.$i,I=>p.persistence.referenceDelegate.addReference(m,v.targetId,I)).next(()=>U.forEach(v.Ui,I=>p.persistence.referenceDelegate.removeReference(m,v.targetId,I)))))}catch(m){if(!Yo(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const I=p.os.get(v),R=I.snapshotVersion,b=I.withLastLimboFreeSnapshotVersion(R);p.os=p.os.insert(v,b)}}}(r.localStore,i))}async function uN(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await M_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new W(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ea(n,r.hs)}}function cN(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function nw(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=J_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iN.bind(null,e),e.Ca.d_=K2.bind(null,e.eventManager),e.Ca.$a=Q2.bind(null,e.eventManager),e}function dN(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aN.bind(null,e),e}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return y2(this.persistence,new m2,e.initialUser,this.serializer)}Ga(e){return new h2(Cf.Zr,this.serializer)}Wa(e){return new S2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class Zd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uN.bind(null,this.syncEngine),await q2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new W2}()}createDatastore(e){const n=Pu(e.databaseInfo.databaseId),r=function(i){return new b2(i)}(e.databaseInfo);return function(i,o,l,u){return new k2(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new D2(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>qg(this.syncEngine,n,0),function(){return Fg.D()?new Fg:new I2}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,p){const m=new J2(s,i,o,l,u,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Zo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zd.provider={build:()=>new Zd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=r_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Df(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jc(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await M_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fN(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>zg(e.remoteStore,s)),t._onlineComponents=e}async function fN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await jc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ei("Error using user provided cache. Falling back to memory cache: "+n),await jc(t,new su)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await jc(t,new su);return t._offlineComponents}async function sw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Wg(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Wg(t,new Zd))),t._onlineComponents}function pN(t){return sw(t).then(e=>e.syncEngine)}async function eh(t){const e=await sw(t),n=e.eventManager;return n.onListen=Z2.bind(null,e.syncEngine),n.onUnlisten=nN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rN.bind(null,e.syncEngine),n}function mN(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const p=new rw({next:v=>{p.Za(),o.enqueueAndForget(()=>K_(i,m)),v.fromCache&&u.source==="server"?d.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Q_(l,p,{includeMetadataChanges:!0,_a:!0});return W_(i,m)}(await eh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gN(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Qg(t){if(!Y.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gg(t){if(Y.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ju(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ju(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jI;switch(r.type){case"firstParty":return new FI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kg.get(n);r&&(K("ComponentProvider","Removing Datastore"),Kg.delete(n),r.terminate())}(this),Promise.resolve()}}function yN(t,e,n,r={}){var s;const i=(t=kn(t,Mu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=vt.MOCK_USER;else{l=gS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new vt(d)}t._authCredentials=new MI(new n_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vr(this.firestore,e,this._query)}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}}class Sr extends Vr{constructor(e,n,r){super(e,n,_f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Y(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function Qt(t,e,...n){if(t=Dn(t),ow("collection","path",e),t instanceof Mu){const r=xe.fromString(e,...n);return Gg(r),new Sr(t,null,r)}{if(!(t instanceof Mt||t instanceof Sr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return Gg(r),new Sr(t.firestore,null,r)}}function Sn(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=r_.newId()),ow("doc","path",e),t instanceof Mu){const r=xe.fromString(e,...n);return Qg(r),new Mt(t,null,new Y(r))}{if(!(t instanceof Mt||t instanceof Sr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return Qg(r),new Mt(t.firestore,t instanceof Sr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new O_(this,"async_queue_retry"),this.Vu=()=>{const r=Vc();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Vc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Vc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yo(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Pf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Jg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ls extends Mu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xg(e),this._firestoreClient=void 0,await e}}}function vN(t,e){const n=typeof t=="object"?t:II(),r=typeof t=="string"?t:"(default)",s=xI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=pS("firestore");i&&yN(s,...i)}return s}function Mf(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_N(t),t._firestoreClient}function _N(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new JI(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,iw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new hN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(lt.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oi(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=/^__.*__$/;class xN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xo(e,this.data,n,this.fieldTransforms)}}class aw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class zf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return iu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lw(this.Cu)&&wN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class EN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pu(e)}Qu(e,n,r,s=!1){return new zf({Cu:e,methodName:n,qu:r,path:st.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uf(t){const e=t._freezeSettings(),n=Pu(t._databaseId);return new EN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TN(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Bf("Data must be an object, but it was:",o,r);const l=uw(r,o);let u,d;if(i.merge)u=new Bt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const v=th(e,m,n);if(!o.contains(v))throw new W(F.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);dw(p,v)||p.push(v)}u=new Bt(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new xN(new kt(l),u,d)}class Ou extends Lf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ou}}function SN(t,e,n,r){const s=t.Qu(1,e,n);Bf("Data must be an object, but it was:",s,r);const i=[],o=kt.empty();ds(r,(u,d)=>{const p=$f(e,u,n);d=Dn(d);const m=s.Nu(p);if(d instanceof Ou)i.push(p);else{const v=ta(d,m);v!=null&&(i.push(p),o.set(p,v))}});const l=new Bt(i);return new aw(o,l,s.fieldTransforms)}function IN(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[th(e,r,n)],u=[s];if(i.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(th(e,i[v])),u.push(i[v+1]);const d=[],p=kt.empty();for(let v=l.length-1;v>=0;--v)if(!dw(d,l[v])){const I=l[v];let R=u[v];R=Dn(R);const b=o.Nu(I);if(R instanceof Ou)d.push(I);else{const S=ta(R,b);S!=null&&(d.push(I),p.set(I,S))}}const m=new Bt(d);return new aw(p,m,o.fieldTransforms)}function CN(t,e,n,r=!1){return ta(n,t.Qu(r?4:3,e))}function ta(t,e){if(cw(t=Dn(t)))return Bf("Unsupported field value:",e,t),uw(t,e);if(t instanceof Lf)return function(r,s){if(!lw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=ta(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=we.fromDate(r);return{timestampValue:nu(s.serializer,i)}}if(r instanceof we){const i=new we(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nu(s.serializer,i)}}if(r instanceof Of)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oi)return{bytesValue:A_(s.serializer,r._byteString)};if(r instanceof Mt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ff)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return wf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ju(r)}`)}(t,e)}function uw(t,e){const n={};return s_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,s)=>{const i=ta(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function cw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof we||t instanceof Of||t instanceof oi||t instanceof Mt||t instanceof Lf||t instanceof Ff)}function Bf(t,e,n){if(!cw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ju(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function th(t,e,n){if((e=Dn(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return $f(t,e);throw iu("Field path arguments must be of type string or ",t,!1,void 0,n)}const NN=new RegExp("[~\\*/\\[\\]]");function $f(t,e,n){if(e.search(NN)>=0)throw iu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lu(...e.split("."))._internalPath}catch{throw iu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function iu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(F.INVALID_ARGUMENT,l+t+u)}function dw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bN extends hw{data(){return super.data()}}function qf(t,e){return typeof e=="string"?$f(t,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hf{}class pw extends Hf{}function sr(t,e,...n){let r=[];e instanceof Hf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Kf).length,l=i.filter(u=>u instanceof Wf).length;if(o>1||o>0&&l>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wf extends pw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wf(e,n,r)}_apply(e){const n=this._parse(e);return mw(e._query,n),new Vr(e.firestore,e.converter,qd(e._query,n))}_parse(e){const n=Uf(e.firestore);return function(i,o,l,u,d,p,m){let v;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ey(m,p);const I=[];for(const R of m)I.push(Zg(u,i,R));v={arrayValue:{values:I}}}else v=Zg(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ey(m,p),v=CN(l,o,m,p==="in"||p==="not-in");return $e.create(d,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Kf extends Hf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)mw(o,u),o=qd(o,u)}(e._query,n),new Vr(e.firestore,e.converter,qd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qf extends pw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oo(i,o)}(e._query,this._field,this._direction);return new Vr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new mi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Qa(t,e="asc"){const n=e,r=qf("orderBy",t);return Qf._create(r,n)}function Zg(t,e,n){if(typeof(n=Dn(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f_(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!Y.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wg(t,new Y(r))}if(n instanceof Mt)return wg(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ju(n)}.`)}function ey(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AN{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ds(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new Ff(i)}convertGeoPoint(e){return new Of(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jo(e));default:return null}}convertTimestamp(e){const n=br(e);return new we(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);pe(j_(r));const s=new Mo(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gw extends hw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gl extends gw{data(e={}){return super.data(e)}}class yw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gl(this._firestore,this._userDataWriter,r.key,r,new Wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new gl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Wi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new gl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Wi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:kN(l.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}class Gf extends AN{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Ga(t){t=kn(t,Vr);const e=kn(t.firestore,ls),n=Mf(e),r=new Gf(e);return fw(t._query),mN(n,t._query).then(s=>new yw(e,r,t,s))}function Oi(t,e,n,...r){t=kn(t,Mt);const s=kn(t.firestore,ls),i=Uf(s);let o;return o=typeof(e=Dn(e))=="string"||e instanceof Lu?IN(i,"updateDoc",t._key,e,n,r):SN(i,"updateDoc",t._key,e),Yf(s,[o.toMutation(t._key,pn.exists(!0))])}function Ya(t){return Yf(kn(t.firestore,ls),[new xf(t._key,pn.none())])}function Xa(t,e){const n=kn(t.firestore,ls),r=Sn(t),s=RN(t.converter,e);return Yf(n,[TN(Uf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,pn.exists(!1))]).then(()=>r)}function Ja(t,...e){var n,r,s;t=Dn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Jg(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Jg(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,p;if(t instanceof Mt)d=kn(t.firestore,ls),p=_f(t._key.path),u={next:m=>{e[o]&&e[o](PN(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=kn(t,Vr);d=kn(m.firestore,ls),p=m._query;const v=new Gf(d);u={next:I=>{e[o]&&e[o](new yw(d,v,m,I))},error:e[o+1],complete:e[o+2]},fw(t._query)}return function(v,I,R,b){const S=new rw(b),w=new Q_(I,S,R);return v.asyncQueue.enqueueAndForget(async()=>W_(await eh(v),w)),()=>{S.Za(),v.asyncQueue.enqueueAndForget(async()=>K_(await eh(v),w))}}(Mf(d),p,l,u)}function Yf(t,e){return function(r,s){const i=new Tr;return r.asyncQueue.enqueueAndForget(async()=>sN(await pN(r),s,i)),i.promise}(Mf(t),e)}function PN(t,e,n){const r=n.docs.get(e._key),s=new Gf(t);return new gw(t,s,e._key,r,new Wi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){pi=s})(SI),Xl(new Po("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ls(new LI(r.getProvider("auth-internal")),new UI(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Hs(mg,"4.7.3",e),Hs(mg,"4.7.3","esm2017")})();var DN="firebase",VN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(DN,VN,"app");const jN={apiKey:"AIzaSyCkgUUr8CADydWb62Qdb8p8MHZ_TUkrCzE",authDomain:"sportsbox-result.firebaseapp.com",projectId:"sportsbox-result",storageBucket:"sportsbox-result.appspot.com",messagingSenderId:"1098188923070",appId:"1:1098188923070:web:b021c52a64965bf79dbeef",measurementId:"G-DR5V9BNFZ2"},MN=K0(jN),Le=vN(MN),He={async getDemands(){try{const t=sr(Qt(Le,"demands"),Qa("createdAt","desc"));return(await Ga(t)).docs.map(n=>{var r,s;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("수요처 데이터 로드 실패:",t),t}},async addDemand(t){try{const e=we.now(),n={...t,email:t.email||"",createdAt:e,updatedAt:e};return{id:(await Xa(Qt(Le,"demands"),n)).id,...t,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("수요처 추가 실패:",e),e}},async updateDemand(t,e){try{const n=Sn(Le,"demands",t);await Oi(n,{...e,updatedAt:we.now()})}catch(n){throw console.error("수요처 수정 실패:",n),n}},async deleteDemand(t){try{await Ya(Sn(Le,"demands",t))}catch(e){throw console.error("수요처 삭제 실패:",e),e}},async getPerformances(){try{const t=sr(Qt(Le,"performances"),Qa("date","desc"));return(await Ga(t)).docs.map(n=>{var r,s,i;return{id:n.id,...n.data(),date:((r=n.data().date)==null?void 0:r.toDate())||new Date,createdAt:((s=n.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((i=n.data().updatedAt)==null?void 0:i.toDate())||new Date}})}catch(t){throw console.error("실적 데이터 로드 실패:",t),t}},async addPerformance(t){try{const e=we.now(),n=t.notes!==void 0&&t.notes!==null?t.notes.toString().trim():"";return{id:(await Xa(Qt(Le,"performances"),{...t,notes:n,date:we.fromDate(t.date),createdAt:e,updatedAt:e})).id,...t,notes:n,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("실적 추가 실패:",e),e}},async updatePerformance(t,e){try{const n=Sn(Le,"performances",t),r=e.notes!==void 0&&e.notes!==null?e.notes.toString().trim():void 0,s={...e,updatedAt:we.now()};r!==void 0&&(s.notes=r),e.date&&(s.date=we.fromDate(e.date)),await Oi(n,s)}catch(n){throw console.error("실적 수정 실패:",n),n}},async deletePerformance(t){try{await Ya(Sn(Le,"performances",t))}catch(e){throw console.error("실적 삭제 실패:",e),e}},subscribeToDemands(t){const e=sr(Qt(Le,"demands"),Qa("createdAt","desc"));return Ja(e,n=>{const r=n.docs.map(s=>{var i,o;return{id:s.id,...s.data(),createdAt:((i=s.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=s.data().updatedAt)==null?void 0:o.toDate())||new Date}});t(r)})},subscribeToPerformances(t){const e=sr(Qt(Le,"performances"),Qa("date","desc"));return Ja(e,n=>{const r=n.docs.map(s=>{var i,o,l;return{id:s.id,...s.data(),date:((i=s.data().date)==null?void 0:i.toDate())||new Date,createdAt:((o=s.data().createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((l=s.data().updatedAt)==null?void 0:l.toDate())||new Date}});t(r)})},async getBudgets(){try{const t=sr(Qt(Le,"budgets"));return(await Ga(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 항목 데이터 로드 실패:",t),t}},async addBudget(t){try{return{id:(await Xa(Qt(Le,"budgets"),t)).id,...t}}catch(e){throw console.error("예산 항목 추가 실패:",e),e}},async updateBudget(t,e){try{const n=Sn(Le,"budgets",t);await Oi(n,e)}catch(n){throw console.error("예산 항목 수정 실패:",n),n}},async deleteBudget(t){try{await Ya(Sn(Le,"budgets",t))}catch(e){throw console.error("예산 항목 삭제 실패:",e),e}},async updateBudgetOrder(t){const e=[];for(const n of t){const r=Sn(Le,"budgets",n.id);e.push(Oi(r,{order:n.order??0}))}await Promise.all(e)},subscribeToBudgets(t){const e=sr(Qt(Le,"budgets"));return Ja(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async getBudgetUsages(){try{const t=sr(Qt(Le,"budgetUsages"));return(await Ga(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 사용 내역 데이터 로드 실패:",t),t}},async addBudgetUsage(t){try{return{id:(await Xa(Qt(Le,"budgetUsages"),t)).id,...t}}catch(e){throw console.error("예산 사용 내역 추가 실패:",e),e}},async updateBudgetUsage(t,e){try{const n=Sn(Le,"budgetUsages",t);await Oi(n,e)}catch(n){throw console.error("예산 사용 내역 수정 실패:",n),n}},async deleteBudgetUsage(t){try{await Ya(Sn(Le,"budgetUsages",t))}catch(e){throw console.error("예산 사용 내역 삭제 실패:",e),e}},subscribeToBudgetUsages(t){const e=sr(Qt(Le,"budgetUsages"));return Ja(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})}},vi=()=>{const[t,e]=k.useState([]),[n,r]=k.useState([]),[s,i]=k.useState(!0),[o,l]=k.useState(null);return k.useEffect(()=>{let u=null,d=null;return(async()=>{try{i(!0),l(null),u=He.subscribeToDemands(m=>{e(m)}),d=He.subscribeToPerformances(m=>{r(m)}),i(!1)}catch(m){console.error("Firebase 데이터 초기화 실패:",m),l("데이터를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요."),i(!1)}})(),()=>{u&&u(),d&&d()}},[]),{demands:t,performances:n,loading:s,error:o,addDemand:He.addDemand,updateDemand:He.updateDemand,deleteDemand:He.deleteDemand,addPerformance:He.addPerformance,updatePerformance:He.updatePerformance,deletePerformance:He.deletePerformance}},ty=(t,e=[])=>{if(t.length===0)return{totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]};const n=t.reduce((b,S)=>b+(S.maleCount||0),0),r=t.reduce((b,S)=>b+(S.femaleCount||0),0),s=n+r,i=t.reduce((b,S)=>b+(S.promotionCount||0),0),l=new Set(t.map(b=>b.organizationName)).size,u=new Date,d=[];for(let b=11;b>=0;b--){const S=new Date(u.getFullYear(),u.getMonth()-b,1),w=S.toLocaleDateString("ko-KR",{month:"short",year:"2-digit"}),T=t.filter(j=>{if(!j.date)return!1;const E=new Date(j.date);return E.getMonth()===S.getMonth()&&E.getFullYear()===S.getFullYear()}),C=T.reduce((j,E)=>j+(E.maleCount||0),0),D=T.reduce((j,E)=>j+(E.femaleCount||0),0),L=T.reduce((j,E)=>j+(E.promotionCount||0),0);d.push({month:w,male:C,female:D,total:C+D,promotions:L})}const p=new Map;t.forEach(b=>{const S=p.get(b.organizationName)||{total:0,count:0,city:""},w=e.find(T=>T.organizationName===b.organizationName);p.set(b.organizationName,{total:S.total+(b.maleCount||0)+(b.femaleCount||0),count:S.count+1,city:(w==null?void 0:w.city)||S.city||""})});const m=Array.from(p.entries()).map(([b,S])=>({name:b,total:S.total,count:S.count,city:S.city})).sort((b,S)=>S.total-b.total),v=new Map;["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"].forEach(b=>{v.set(b,{total:0,count:0})}),t.forEach(b=>{const S=e.find(w=>w.organizationName===b.organizationName);if(S&&v.has(S.city)){const w=v.get(S.city);v.set(S.city,{total:w.total+(b.maleCount||0)+(b.femaleCount||0),count:w.count+1})}});const R=Array.from(v.entries()).map(([b,S])=>({name:b,total:S.total,count:S.count})).sort((b,S)=>S.total-b.total);return{totalMale:n,totalFemale:r,totalPeople:s,totalPromotions:i,totalOrganizations:l,monthlyData:d,organizationData:m,cityData:R}},ny=()=>{const{demands:t,performances:e}=vi(),[n,r]=k.useState({totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]}),[s,i]=k.useState([]),[o,l]=k.useState([]),[u,d]=k.useState(null),[p,m]=k.useState(""),[v,I]=k.useState(0),R=["과천시","광명시","광주시","군포시","김포시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","여주시","오산시","용인시","의왕시","이천시","평택시","하남시","화성시","양평군"],b=["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"],[S,w]=k.useState("전체"),[T,C]=k.useState(null),[D,L]=k.useState(!1);k.useEffect(()=>{const z=He.subscribeToBudgets(i),Q=He.subscribeToBudgetUsages(l);return()=>{z(),Q()}},[]);const[j,E]=k.useState({});k.useEffect(()=>{const z=e.filter(G=>!(j.startDate&&new Date(G.date)<j.startDate||j.endDate&&new Date(G.date)>j.endDate));o.filter(G=>!(j.startDate&&new Date(G.date)<j.startDate||j.endDate&&new Date(G.date)>j.endDate));const Q=ty(z,t);r({...Q,totalOrganizations:t.length})},[t,e,j.startDate,j.endDate]);const g=z=>{d(z.id),m(z.name),I(z.amount)},y=async z=>{await He.updateBudget(z,{name:p,amount:v}),d(null)},x=async()=>{await He.addBudget({name:"",amount:0})},A=DE(PE(lf)),P=async z=>{const{active:Q,over:G}=z;if(Q.id!==G.id){const X=s.findIndex(le=>le.id===Q.id),Te=s.findIndex(le=>le.id===G.id),je=uf(s,X,Te).map((le,ut)=>({...le,order:ut}));await He.updateBudgetOrder(je)}},N=o.filter(z=>!(j.startDate&&new Date(z.date)<j.startDate||j.endDate&&new Date(z.date)>j.endDate)),he=z=>N.filter(Q=>Q.budgetItemId===z).reduce((Q,G)=>Q+(Number(G.amount)||0),0),Ve=async z=>{await He.deleteBudget(z)};k.useEffect(()=>{const z=ty(e,t);r({...z,totalOrganizations:t.length})},[t,e]);const Ie=({title:z,value:Q,icon:G,color:X})=>h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-600",children:z}),h.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Q})]}),h.jsx("div",{className:`p-3 rounded-lg ${X}`,children:h.jsx(G,{className:"w-6 h-6 text-white"})})]})}),me=({data:z,onBarClick:Q})=>{const G=Math.max(...z.map(X=>X.total),1);return h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"시/군별 참여 현황"}),h.jsx("div",{className:"flex gap-2 mb-4",children:["전체","남부","북부"].map(X=>h.jsx("button",{className:`px-4 py-2 rounded-full border font-semibold transition-colors duration-200 ${S===X?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>w(X),children:X},X))}),z.length>0?h.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-96 overflow-y-auto",children:z.map((X,Te)=>h.jsxs("div",{className:`flex items-center space-x-4 p-3 bg-gray-50 rounded-lg transition cursor-pointer hover:shadow-md ${Q?"hover:bg-blue-100":""}`,onClick:Q?()=>Q(X.name):void 0,children:[h.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[70px] text-center",children:X.name}),h.jsx("div",{className:"flex-1",children:h.jsx("div",{className:"bg-gray-200 rounded-full h-6 relative",children:h.jsx("div",{className:"bg-blue-500 h-6 rounded-full transition-all duration-500 ease-out flex items-center justify-end pr-2",style:{width:`${Math.max(X.total/G*100,8)}%`},title:`${X.count}회, ${X.total.toLocaleString()}명`,children:h.jsxs("span",{className:"text-xs text-white font-medium",children:[X.total.toLocaleString(),"명"]})})})}),h.jsxs("div",{className:"text-sm text-gray-600 font-mono min-w-[50px] text-right",children:[X.count,"회"]})]},Te))}):h.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"데이터가 없습니다"})]})},O=n.cityData.filter(z=>S==="전체"?!0:S==="남부"?R.includes(z.name):S==="북부"?b.includes(z.name):!0),q=n.organizationData.filter(z=>z.city===T);return h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"대시보드"}),h.jsx("p",{className:"text-gray-600",children:"수요처 및 실적 현황 개요"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[h.jsx(Ie,{title:"등록 단체수",value:n.totalOrganizations.toString(),icon:hE,color:"bg-blue-500"}),h.jsx(Ie,{title:"총 횟수",value:e.length.toString(),icon:Ul,color:"bg-green-500"}),h.jsx(Ie,{title:"총 참여 인원",value:n.totalPeople.toLocaleString()+"명",icon:bo,color:"bg-purple-500"}),h.jsx(Ie,{title:"평균 참여 인원",value:e.length>0?Math.round(n.totalPeople/e.length).toLocaleString()+"명":"0명",icon:g0,color:"bg-orange-500"})]}),h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"시작 날짜"}),h.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:j.startDate?j.startDate.toISOString().split("T")[0]:"",onChange:z=>E(Q=>({...Q,startDate:z.target.value?new Date(z.target.value):void 0}))}),h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"종료 날짜"}),h.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:j.endDate?j.endDate.toISOString().split("T")[0]:"",onChange:z=>E(Q=>({...Q,endDate:z.target.value?new Date(z.target.value):void 0}))}),h.jsx("button",{className:"ml-2 px-3 py-1 bg-gray-100 rounded hover:bg-gray-200 text-sm",onClick:()=>E({}),children:"전체 초기화"})]})}),h.jsx("div",{className:"mb-8",children:h.jsx(me,{data:O,onBarClick:z=>{C(z),L(!0)}})}),h.jsx(LT,{sensors:A,collisionDetection:OE,onDragEnd:P,children:h.jsx(YT,{items:s.map(z=>z.id),strategy:QT,children:h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 현황"}),h.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:x,children:"+ 예산 항목 추가"})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-2 py-2 text-center"}),h.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),h.jsx("th",{className:"px-2 py-2 text-right",children:"예산액"}),h.jsx("th",{className:"px-2 py-2 text-right",children:"사용액"}),h.jsx("th",{className:"px-2 py-2 text-right",children:"잔액"}),h.jsx("th",{className:"px-2 py-2 text-right",children:"집행율(%)"}),h.jsx("th",{className:"px-2 py-2 text-center",children:"수정"}),h.jsx("th",{className:"px-2 py-2 text-center",children:"삭제"})]})}),h.jsx("tbody",{children:s.sort((z,Q)=>(z.order??0)-(Q.order??0)).map(z=>h.jsx(LN,{item:z,editingBudgetId:u,editingBudgetName:p,editingBudgetAmount:v,setEditingBudgetName:m,setEditingBudgetAmount:I,setEditingBudgetId:d,handleEditBudget:g,handleSaveBudget:y,handleDeleteBudget:Ve,used:he(z.id),isDragging:!1},z.id))})]})})]})})}),D&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 relative animate-fadeIn",children:[h.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>L(!1),children:"×"}),h.jsxs("h3",{className:"text-2xl font-bold mb-4 text-blue-700",children:[T," 수요처별 참여 현황"]}),q.length>0?h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-50",children:[h.jsx("th",{className:"px-2 py-2 text-left",children:"수요처명"}),h.jsx("th",{className:"px-2 py-2 text-right",children:"횟수"}),h.jsx("th",{className:"px-2 py-2 text-right",children:"총 참여인원"})]})}),h.jsx("tbody",{children:q.map((z,Q)=>h.jsxs("tr",{className:"hover:bg-blue-50",children:[h.jsx("td",{className:"px-2 py-2 font-medium text-gray-900",children:z.name}),h.jsxs("td",{className:"px-2 py-2 text-right",children:[z.count,"회"]}),h.jsxs("td",{className:"px-2 py-2 text-right",children:[z.total.toLocaleString(),"명"]})]},Q))})]}):h.jsx("div",{className:"text-gray-500 text-center py-8",children:"데이터가 없습니다"})]})})]})};function LN({item:t,editingBudgetId:e,editingBudgetName:n,editingBudgetAmount:r,setEditingBudgetName:s,setEditingBudgetAmount:i,setEditingBudgetId:o,handleEditBudget:l,handleSaveBudget:u,handleDeleteBudget:d,used:p,isDragging:m}){const{attributes:v,listeners:I,setNodeRef:R,transform:b,transition:S,isDragging:w}=rS({id:t.id}),T={transform:Ro.Transform.toString(b),transition:S,background:w?"#e0f2fe":void 0},C=t.amount-p,D=t.amount>0?p/t.amount*100:0;return h.jsxs("tr",{ref:R,style:T,...v,children:[h.jsx("td",{className:"px-2 py-2 text-center cursor-grab",...I,children:h.jsx(pE,{className:"w-4 h-4 text-gray-400"})}),h.jsx("td",{className:"px-2 py-2 flex items-center gap-2",children:e===t.id?h.jsx("input",{className:"border rounded px-2 py-1 w-32",value:n,onChange:L=>s(L.target.value)}):h.jsxs(h.Fragment,{children:[h.jsx("span",{children:t.name}),t.region==="남부"&&h.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}),t.region==="북부"&&h.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"})]})}),h.jsx("td",{className:"px-2 py-2 text-right",children:e===t.id?h.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:r,onChange:L=>i(Number(L.target.value))}):t.amount.toLocaleString()}),h.jsx("td",{className:"px-2 py-2 text-right",children:p.toLocaleString()}),h.jsx("td",{className:"px-2 py-2 text-right",children:C.toLocaleString()}),h.jsx("td",{className:"px-2 py-2 text-right",children:D.toFixed(2)}),h.jsx("td",{className:"px-2 py-2 text-center",children:e===t.id?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"px-2 py-1 text-green-600 hover:underline",onClick:()=>u(t.id),children:"저장"}),h.jsx("button",{className:"px-2 py-1 text-gray-500 hover:underline",onClick:()=>o(null),children:"취소"})]}):h.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>l(t),children:"수정"})}),h.jsx("td",{className:"px-2 py-2 text-center",children:h.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>d(t.id),children:h.jsx(Eu,{className:"inline w-4 h-4"})})})]})}const ON=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));i.length>=4&&n.push({city:i[0]||"",organizationName:i[1]||"",contactPerson:i[2]||"",phoneNumber:i[3]||"",email:i[4]||""})}return n},FN=()=>{const t=`\uFEFF시/군,단체명,담당자명,연락처,이메일
수원시,예시 단체,홍길동,010-1234-5678,hong@example.com
성남시,샘플 그룹,김철수,010-9876-5432,kim@sample.org`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="수요처_등록_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},zN=t=>{let e=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,총인원,홍보횟수,메모
`;t.forEach(i=>{const o=(i.maleCount||0)+(i.femaleCount||0),l=i.date?i.date.toLocaleDateString("ko-KR"):"",u=i.notes||"",d=[l,`"${i.organizationName}"`,`"${i.city||""}"`,`"${i.program||"스포츠교실"}"`,i.maleCount||0,i.femaleCount||0,o,i.promotionCount||0,`"${u.replace(/"/g,'""')}"`].join(",");e+=d+`
`});const n=new Blob([e],{type:"text/csv;charset=utf-8"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`실적_데이터_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)},UN=()=>{const t=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,홍보횟수,메모
2024-01-15,예시 단체,수원시,스포츠교실,10,15,5,샘플 메모
2024-01-16,샘플 그룹,성남시,스포츠체험존,8,12,3,테스트 데이터
2024-01-17,테스트 단체,안양시,스포츠이벤트,5,10,2,이벤트 데이터`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="실적_업로드_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},BN=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));if(i.length>=8){const o=i[0];let l;try{o.includes("-")?l=new Date(o):o.includes("/")?l=new Date(o):l=new Date,isNaN(l.getTime())&&(l=new Date)}catch{l=new Date}n.push({date:l,organizationName:i[1]||"",city:i[2]||"",program:i[3]||"스포츠교실",maleCount:parseInt(i[4])||0,femaleCount:parseInt(i[5])||0,promotionCount:parseInt(i[6])||0,notes:i[7]||""})}}return n},na=()=>{const[t,e]=k.useState([]),n=k.useCallback(s=>{const i=crypto.randomUUID(),o={...s,id:i,duration:s.duration||5e3};e(l=>[...l,o]),setTimeout(()=>{e(l=>l.filter(u=>u.id!==i))},o.duration)},[]),r=k.useCallback(s=>{e(i=>i.filter(o=>o.id!==s))},[]);return{toasts:t,addToast:n,removeToast:r}},$N=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],qN=()=>{const{addToast:t}=na(),{addDemand:e}=vi(),n=k.useRef(null),[r,s]=k.useState("manual"),[i,o]=k.useState(!1),[l,u]=k.useState(!1),[d,p]=k.useState(!1),[m,v]=k.useState(!1),[I,R]=k.useState({success:0,error:0}),[b,S]=k.useState({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""}),w=g=>{const{name:y,value:x}=g.target;S(A=>({...A,[y]:x}))},T=async g=>{if(g.preventDefault(),!b.city||!b.organizationName||!b.contactPerson||!b.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await e({city:b.city,organizationName:b.organizationName,contactPerson:b.contactPerson,phoneNumber:b.phoneNumber,email:b.email||""}),u(!0),S({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""})}catch{t({type:"error",title:"등록 실패",message:"수요처 등록 중 오류가 발생했습니다"})}},C=async g=>{const y=new FileReader;y.onload=async x=>{var A;try{const P=(A=x.target)==null?void 0:A.result,N=ON(P);if(N.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let he=0,Ve=0;for(const Ie of N)try{Ie.city&&Ie.organizationName&&Ie.contactPerson&&Ie.phoneNumber?(await e(Ie),he++):Ve++}catch{Ve++}R({success:he,error:Ve}),v(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}},y.readAsText(g,"UTF-8")},D=g=>{g.preventDefault(),o(!1);const y=Array.from(g.dataTransfer.files);y.length>0&&C(y[0])},L=g=>{g.preventDefault(),o(!0)},j=g=>{g.preventDefault(),o(!1)},E=g=>{const y=g.target.files;y&&y.length>0&&C(y[0]),g.target.value=""};return h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 등록"}),h.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 수요처를 등록하세요"})]}),h.jsx("div",{className:"border-b border-gray-200 mb-8",children:h.jsxs("nav",{className:"-mb-px flex space-x-8",children:[h.jsxs("button",{onClick:()=>s("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(v0,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),h.jsxs("button",{onClick:()=>s("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(No,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),r==="manual"&&h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:h.jsxs("form",{onSubmit:T,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"시/군 *"}),h.jsxs("select",{id:"city",name:"city",value:b.city,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[h.jsx("option",{value:"",children:"시/군을 선택하세요"}),$N.map(g=>h.jsx("option",{value:g,children:g},g))]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),h.jsx("input",{type:"text",id:"organizationName",name:"organizationName",value:b.organizationName,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"단체명을 입력하세요",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-gray-700 mb-2",children:"담당자명 *"}),h.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:b.contactPerson,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"담당자명을 입력하세요",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"연락처 *"}),h.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:b.phoneNumber,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"연락처를 입력하세요",required:!0})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일 (선택사항)"}),h.jsx("input",{type:"email",id:"email",name:"email",value:b.email,onChange:w,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"이메일 주소를 입력하세요"})]})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"수요처 등록"})})]})}),r==="bulk"&&h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx($l,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),h.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 시/군, 단체명, 담당자명, 연락처, 이메일(선택)"}),h.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[h.jsxs("button",{onClick:FN,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[h.jsx(Xh,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),h.jsxs("button",{onClick:()=>p(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[h.jsx(Yh,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:h.jsxs("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:D,onDragOver:L,onDragLeave:j,children:[h.jsx(No,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),h.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),h.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),h.jsx("input",{ref:n,type:"file",accept:".csv,.txt",onChange:E,className:"hidden"}),h.jsx("button",{onClick:()=>{var g;return(g=n.current)==null?void 0:g.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})]}),l&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:h.jsxs("div",{className:"text-center",children:[h.jsx(Bl,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),h.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"등록 완료!"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"수요처가 성공적으로 등록되었습니다."}),h.jsx("button",{onClick:()=>u(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),m&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:h.jsxs("div",{className:"text-center",children:[h.jsx(Bl,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),h.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"업로드 완료!"}),h.jsxs("div",{className:"text-gray-600 mb-6",children:[h.jsx("p",{className:"mb-2",children:"파일 업로드가 완료되었습니다."}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("span",{children:"성공:"}),h.jsxs("span",{className:"font-semibold text-green-600",children:[I.success,"건"]})]}),I.error>0&&h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{children:"실패:"}),h.jsxs("span",{className:"font-semibold text-red-600",children:[I.error,"건"]})]})]})]}),h.jsx("button",{onClick:()=>v(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),d&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"CSV 파일 저장 방법"}),h.jsx("p",{className:"text-gray-600",children:"한글이 깨지지 않게 저장하는 방법을 안내합니다."})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 Microsoft Excel 사용시"}),h.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[h.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),h.jsxs("li",{children:["데이터 입력 완료 후 ",h.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),h.jsxs("li",{children:["파일 형식에서 ",h.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),h.jsx("li",{children:"파일명 입력 후 저장"}),h.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),h.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:h.jsxs("p",{className:"text-sm text-yellow-800",children:[h.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',h.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),h.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[h.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 Google Sheets 사용시"}),h.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[h.jsx("li",{children:"구글 시트에서 데이터 입력"}),h.jsxs("li",{children:[h.jsx("strong",{children:"파일 → 다운로드 → 쉼표로 구분된 값(.csv, 현재 시트)"})," 선택"]}),h.jsx("li",{children:"다운로드된 파일을 업로드"})]}),h.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:h.jsx("p",{className:"text-sm text-green-800",children:"구글 시트는 자동으로 UTF-8로 저장되어 한글 문제가 없습니다."})})]})]}),h.jsx("div",{className:"flex justify-end mt-6",children:h.jsx("button",{onClick:()=>p(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},HN=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],WN=()=>{const{addToast:t}=na(),{demands:e,updateDemand:n,deleteDemand:r}=vi(),[s,i]=k.useState(null),[o,l]=k.useState(""),[u,d]=k.useState({}),p=e.filter(S=>S.organizationName.toLowerCase().includes(o.toLowerCase())||S.city.toLowerCase().includes(o.toLowerCase())||S.contactPerson.toLowerCase().includes(o.toLowerCase())),m=S=>{i(S.id),d(S)},v=async()=>{if(!s||!u.city||!u.organizationName||!u.contactPerson||!u.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await n(s,u),i(null),d({}),t({type:"success",title:"수정 완료",message:"수요처 정보가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"수요처 정보 수정 중 오류가 발생했습니다"})}},I=()=>{i(null),d({})},R=async(S,w)=>{if(window.confirm(`"${w}"의 수요처 정보를 삭제하시겠습니까?`))try{await r(S),t({type:"success",title:"삭제 완료",message:"수요처 정보가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"수요처 정보 삭제 중 오류가 발생했습니다"})}},b=(S,w)=>{d(T=>({...T,[S]:w}))};return h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 관리"}),h.jsx("p",{className:"text-gray-600",children:"등록된 수요처 정보를 조회, 수정, 삭제할 수 있습니다"})]}),h.jsx("div",{className:"mb-6",children:h.jsxs("div",{className:"relative max-w-md",children:[h.jsx(_0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),h.jsx("input",{type:"text",placeholder:"수요처 검색...",value:o,onChange:S=>l(S.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"시/군"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"담당자"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"연락처"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"이메일"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"등록일"}),h.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(S=>h.jsxs("tr",{className:"hover:bg-gray-50",children:[h.jsx("td",{className:"px-6 py-4",children:s===S.id?h.jsxs("select",{value:u.city||"",onChange:w=>b("city",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[h.jsx("option",{value:"",children:"시/군 선택"}),HN.map(w=>h.jsx("option",{value:w,children:w},w))]}):h.jsx("span",{className:"text-sm text-gray-900",children:S.city})}),h.jsx("td",{className:"px-6 py-4",children:s===S.id?h.jsx("input",{type:"text",value:u.organizationName||"",onChange:w=>b("organizationName",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsx("span",{className:"text-sm font-medium text-gray-900",children:S.organizationName})}),h.jsx("td",{className:"px-6 py-4",children:s===S.id?h.jsx("input",{type:"text",value:u.contactPerson||"",onChange:w=>b("contactPerson",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsx("span",{className:"text-sm text-gray-900",children:S.contactPerson})}),h.jsx("td",{className:"px-6 py-4",children:s===S.id?h.jsx("input",{type:"tel",value:u.phoneNumber||"",onChange:w=>b("phoneNumber",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsx("span",{className:"text-sm text-gray-900",children:S.phoneNumber})}),h.jsx("td",{className:"px-6 py-4",children:s===S.id?h.jsx("input",{type:"email",value:u.email||"",onChange:w=>b("email",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsx("span",{className:"text-sm text-gray-500",children:S.email||"-"})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"text-sm text-gray-500",children:S.createdAt.toLocaleDateString("ko-KR")})}),h.jsx("td",{className:"px-6 py-4 text-right",children:s===S.id?h.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[h.jsx("button",{onClick:v,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:h.jsx(ql,{className:"w-4 h-4"})}),h.jsx("button",{onClick:I,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:h.jsx(Zh,{className:"w-4 h-4"})})]}):h.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[h.jsx("button",{onClick:()=>m(S),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:h.jsx(Jh,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>R(S.id,S.organizationName),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:h.jsx(Eu,{className:"w-4 h-4"})})]})})]},S.id))})]})}),p.length===0&&h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-500",children:"검색 결과가 없습니다"})})]}),h.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",p.length,"건 표시"]})]})},KN=()=>{const{addToast:t}=na(),{demands:e,addPerformance:n}=vi(),r=k.useRef(null),[s,i]=k.useState("manual"),[o,l]=k.useState(!1),[u,d]=k.useState(!1),[p,m]=k.useState(!1),[v,I]=k.useState(!1),[R,b]=k.useState({success:0,error:0}),[S,w]=k.useState(""),[T,C]=k.useState(!1),[D,L]=k.useState({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),j=Array.from(new Set(e.map(O=>O.organizationName))).sort(),E=j.filter(O=>O.toLowerCase().includes(S.toLowerCase())),g=e.find(O=>O.organizationName===D.organizationName),y=(g==null?void 0:g.city)||"",x=O=>{const{name:q,value:z}=O.target;L(Q=>({...Q,[q]:z}))},A=()=>{const O=parseInt(D.maleCount)||0,q=parseInt(D.femaleCount)||0;return O+q},P=async O=>{if(O.preventDefault(),!D.date||!D.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const q=parseInt(D.maleCount)||0,z=parseInt(D.femaleCount)||0,Q=parseInt(D.promotionCount)||0;if(q<0||z<0||Q<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await n({date:new Date(D.date),organizationName:D.organizationName,city:y,program:D.program,maleCount:q,femaleCount:z,promotionCount:Q,notes:D.notes?D.notes.trim():""}),d(!0),L({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""})}catch{t({type:"error",title:"저장 실패",message:"실적 데이터 저장 중 오류가 발생했습니다"})}},N=async O=>{const q=new FileReader;q.onload=async z=>{var Q;try{const G=(Q=z.target)==null?void 0:Q.result,X=BN(G);if(X.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let Te=0,je=0;for(const le of X)try{le.date&&le.organizationName?(await n(le),Te++):je++}catch{je++}b({success:Te,error:je}),m(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}},q.readAsText(O,"UTF-8")},he=O=>{O.preventDefault(),l(!1);const q=Array.from(O.dataTransfer.files);q.length>0&&N(q[0])},Ve=O=>{O.preventDefault(),l(!0)},Ie=O=>{O.preventDefault(),l(!1)},me=O=>{const q=O.target.files;q&&q.length>0&&N(q[0]),O.target.value=""};return k.useEffect(()=>{const O=q=>{q.target.closest(".organization-dropdown")||C(!1)};return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[]),h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 입력"}),h.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 실적 데이터를 등록하세요"})]}),h.jsx("div",{className:"border-b border-gray-200 mb-8",children:h.jsxs("nav",{className:"-mb-px flex space-x-8",children:[h.jsxs("button",{onClick:()=>i("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(ql,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),h.jsxs("button",{onClick:()=>i("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(No,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),s==="manual"&&h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:h.jsxs("form",{onSubmit:P,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),h.jsx("input",{type:"date",id:"date",name:"date",value:D.date,onChange:x,className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),h.jsxs("div",{className:"relative organization-dropdown",children:[h.jsx("input",{type:"text",placeholder:"단체명을 검색하세요...",value:S,onChange:O=>{w(O.target.value),C(!0)},onFocus:()=>C(!0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),D.organizationName&&h.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:h.jsx("button",{type:"button",onClick:()=>{L(O=>({...O,organizationName:""})),w("")},className:"text-gray-400 hover:text-gray-600",children:"×"})}),T&&h.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:E.length>0?E.map(O=>h.jsx("button",{type:"button",onClick:()=>{L(q=>({...q,organizationName:O})),w(O),C(!1)},className:"w-full px-4 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none",children:O},O)):h.jsx("div",{className:"px-4 py-2 text-gray-500",children:"검색 결과가 없습니다"})})]}),j.length===0&&h.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"등록된 단체가 없습니다. 먼저 수요처를 등록해주세요."})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"program",className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램 *"}),h.jsxs("select",{id:"program",name:"program",value:D.program,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[h.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),h.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),h.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]}),D.organizationName&&h.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:h.jsxs("p",{className:"text-sm text-blue-800",children:[h.jsx("span",{className:"font-medium",children:"선택된 단체:"})," ",D.organizationName,y&&` (${y})`]})}),h.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[h.jsx(bo,{className:"w-5 h-5 mr-2 text-blue-600"}),"참여 인원"]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"maleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"남성 인원"}),h.jsx("input",{type:"number",id:"maleCount",name:"maleCount",value:D.maleCount,onChange:x,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"femaleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"여성 인원"}),h.jsx("input",{type:"number",id:"femaleCount",name:"femaleCount",value:D.femaleCount,onChange:x,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"총 인원"}),h.jsxs("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:[A().toLocaleString(),"명"]})]})]})]}),h.jsxs("div",{children:[h.jsxs("label",{htmlFor:"promotionCount",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[h.jsx(y0,{className:"w-4 h-4 mr-2 text-orange-500"}),"홍보 횟수"]}),h.jsx("input",{type:"number",id:"promotionCount",name:"promotionCount",value:D.promotionCount,onChange:x,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"홍보 횟수를 입력하세요"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"메모 (선택사항)"}),h.jsx("textarea",{id:"notes",name:"notes",value:D.notes,onChange:x,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"추가 메모를 입력하세요..."})]}),h.jsx("div",{className:"flex justify-end",children:h.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[h.jsx(ql,{className:"w-4 h-4 mr-2"}),"실적 저장"]})})]})}),s==="bulk"&&h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx($l,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),h.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 날짜, 단체명, 시군, 프로그램, 남성, 여성, 홍보횟수, 메모"}),h.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:h.jsxs("p",{className:"text-sm text-yellow-800",children:[h.jsx("strong",{children:"중요:"})," 날짜는 YYYY-MM-DD 형식으로 입력하세요 (예: 2024-01-15)"]})}),h.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[h.jsxs("button",{onClick:UN,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[h.jsx(Xh,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),h.jsxs("button",{onClick:()=>I(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[h.jsx(Yh,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:h.jsxs("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:he,onDragOver:Ve,onDragLeave:Ie,children:[h.jsx(No,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),h.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),h.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),h.jsx("input",{ref:r,type:"file",accept:".csv,.txt",onChange:me,className:"hidden"}),h.jsx("button",{onClick:()=>{var O;return(O=r.current)==null?void 0:O.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})]}),u&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:h.jsxs("div",{className:"text-center",children:[h.jsx(Bl,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),h.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"저장 완료!"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"실적 데이터가 성공적으로 저장되었습니다."}),h.jsx("button",{onClick:()=>d(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})})]})},QN=()=>{const{addToast:t}=na(),{performances:e,demands:n,updatePerformance:r,deletePerformance:s}=vi(),[i,o]=k.useState([]),[l,u]=k.useState(null),[d,p]=k.useState({}),[m,v]=k.useState({}),[I,R]=k.useState(""),b=Array.from(new Set(n.map(y=>y.organizationName))).sort();k.useEffect(()=>{S()},[e,m,I]);const S=()=>{let y=[...e];m.startDate&&(y=y.filter(x=>x.date&&x.date>=m.startDate)),m.endDate&&(y=y.filter(x=>x.date&&x.date<=m.endDate)),m.organizationName&&(y=y.filter(x=>x.organizationName===m.organizationName)),m.program&&(y=y.filter(x=>x.program===m.program)),I&&(y=y.filter(x=>x.organizationName.toLowerCase().includes(I.toLowerCase())||x.notes&&x.notes.toLowerCase().includes(I.toLowerCase()))),y.sort((x,A)=>!x.date&&!A.date?0:x.date?A.date?A.date.getTime()-x.date.getTime():-1:1),o(y)},w=(y,x)=>{v(A=>({...A,[y]:x}))},T=()=>{v({}),R("")},C=y=>{u(y.id),p({...y,date:y.date})},D=async()=>{if(!l||!d.date||!d.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const y=d.maleCount||0,x=d.femaleCount||0,A=d.promotionCount||0;if(y<0||x<0||A<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await r(l,{...d,notes:d.notes?d.notes.trim():""}),u(null),p({}),t({type:"success",title:"수정 완료",message:"실적 데이터가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"실적 데이터 수정 중 오류가 발생했습니다"})}},L=()=>{u(null),p({})},j=async(y,x,A)=>{const P=A?A.toLocaleDateString("ko-KR"):"날짜 없음";if(window.confirm(`"${x}"의 ${P} 실적 데이터를 삭제하시겠습니까?`))try{await s(y),t({type:"success",title:"삭제 완료",message:"실적 데이터가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"실적 데이터 삭제 중 오류가 발생했습니다"})}},E=(y,x)=>{p(A=>({...A,[y]:x}))},g=()=>{if(i.length===0){t({type:"warning",title:"다운로드 불가",message:"다운로드할 데이터가 없습니다"});return}try{zN(i),t({type:"success",title:"다운로드 완료",message:"실적 데이터가 성공적으로 다운로드되었습니다"})}catch{t({type:"error",title:"다운로드 실패",message:"엑셀 파일 다운로드 중 오류가 발생했습니다"})}};return h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 조회"}),h.jsx("p",{className:"text-gray-600",children:"등록된 실적 데이터를 조회하고 관리하세요"})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[h.jsx(fE,{className:"w-5 h-5 mr-2"}),"필터"]}),h.jsx("button",{onClick:T,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"전체 초기화"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검색"}),h.jsxs("div",{className:"relative",children:[h.jsx(_0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),h.jsx("input",{type:"text",placeholder:"검색어 입력...",value:I,onChange:y=>R(y.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 날짜"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),h.jsx("input",{type:"date",value:m.startDate?m.startDate.toISOString().split("T")[0]:"",onChange:y=>w("startDate",y.target.value?new Date(y.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 날짜"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),h.jsx("input",{type:"date",value:m.endDate?m.endDate.toISOString().split("T")[0]:"",onChange:y=>w("endDate",y.target.value?new Date(y.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명"}),h.jsxs("select",{value:m.organizationName||"",onChange:y=>w("organizationName",y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[h.jsx("option",{value:"",children:"전체 단체"}),b.map(y=>h.jsx("option",{value:y,children:y},y))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램"}),h.jsxs("select",{value:m.program||"",onChange:y=>w("program",y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[h.jsx("option",{value:"",children:"전체 프로그램"}),h.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),h.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),h.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"text-sm text-gray-500",children:["총 ",e.length,"건 중 ",i.length,"건 표시"]}),h.jsxs("button",{onClick:g,disabled:i.length===0,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[h.jsx(Xh,{className:"w-4 h-4 mr-2"}),"엑셀 다운로드"]})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"날짜"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"시/군"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"프로그램"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"남성"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"여성"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"총 인원"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"홍보횟수"}),h.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"메모"}),h.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(y=>h.jsxs("tr",{className:"hover:bg-gray-50",children:[h.jsx("td",{className:"px-6 py-4",children:l===y.id?h.jsx("input",{type:"date",value:d.date?new Date(d.date).toISOString().split("T")[0]:"",onChange:x=>E("date",new Date(x.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsx("span",{className:"text-sm text-gray-900",children:y.date?y.date.toLocaleDateString("ko-KR"):"날짜 없음"})}),h.jsx("td",{className:"px-6 py-4",children:l===y.id?h.jsxs("select",{value:d.organizationName||"",onChange:x=>E("organizationName",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[h.jsx("option",{value:"",children:"단체 선택"}),b.map(x=>h.jsx("option",{value:x,children:x},x))]}):h.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.organizationName})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"text-sm text-gray-600",children:y.city||"-"})}),h.jsx("td",{className:"px-6 py-4",children:l===y.id?h.jsxs("select",{value:d.program||y.program||"스포츠교실",onChange:x=>E("program",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[h.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),h.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),h.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]}):h.jsx("span",{className:"text-sm text-purple-600 font-medium",children:y.program||"스포츠교실"})}),h.jsx("td",{className:"px-6 py-4",children:l===y.id?h.jsx("input",{type:"number",value:d.maleCount||"",onChange:x=>E("maleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsxs("span",{className:"text-sm text-blue-600 font-mono flex items-center",children:[h.jsx(bo,{className:"w-4 h-4 mr-1"}),(y.maleCount||0).toLocaleString()]})}),h.jsx("td",{className:"px-6 py-4",children:l===y.id?h.jsx("input",{type:"number",value:d.femaleCount||"",onChange:x=>E("femaleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsxs("span",{className:"text-sm text-pink-600 font-mono flex items-center",children:[h.jsx(bo,{className:"w-4 h-4 mr-1"}),(y.femaleCount||0).toLocaleString()]})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("span",{className:"text-sm text-gray-900 font-bold",children:[((y.maleCount||0)+(y.femaleCount||0)).toLocaleString(),"명"]})}),h.jsx("td",{className:"px-6 py-4",children:l===y.id?h.jsx("input",{type:"number",value:d.promotionCount||"",onChange:x=>E("promotionCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):h.jsxs("span",{className:"text-sm text-orange-600 font-mono flex items-center",children:[h.jsx(y0,{className:"w-4 h-4 mr-1"}),(y.promotionCount||0).toLocaleString(),"회"]})}),h.jsx("td",{className:"px-6 py-4",children:l===y.id?h.jsx("textarea",{value:d.notes||"",onChange:x=>E("notes",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}):h.jsx("span",{className:"text-sm text-gray-500",children:y.notes||"-"})}),h.jsx("td",{className:"px-6 py-4 text-right",children:l===y.id?h.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[h.jsx("button",{onClick:D,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:h.jsx(ql,{className:"w-4 h-4"})}),h.jsx("button",{onClick:L,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:h.jsx(Zh,{className:"w-4 h-4"})})]}):h.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[h.jsx("button",{onClick:()=>C(y),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:h.jsx(Jh,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>j(y.id,y.organizationName,y.date),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:h.jsx(Eu,{className:"w-4 h-4"})})]})})]},y.id))})]})}),i.length===0&&h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-500",children:e.length===0?"실적 데이터가 없습니다":"검색 조건에 맞는 데이터가 없습니다"})})]})]})},GN=({toast:t,onRemove:e})=>{const{type:n,title:r,message:s,duration:i=5e3}=t;k.useEffect(()=>{const u=setTimeout(()=>{e(t.id)},i);return()=>clearTimeout(u)},[t.id,i,e]);const o=()=>{switch(n){case"success":return h.jsx(Bl,{className:"w-5 h-5 text-green-500"});case"error":return h.jsx(Yh,{className:"w-5 h-5 text-red-500"});case"warning":return h.jsx(dE,{className:"w-5 h-5 text-orange-500"});case"info":return h.jsx(Hm,{className:"w-5 h-5 text-blue-500"});default:return h.jsx(Hm,{className:"w-5 h-5 text-blue-500"})}},l=()=>{switch(n){case"success":return"border-l-green-500";case"error":return"border-l-red-500";case"warning":return"border-l-orange-500";case"info":return"border-l-blue-500";default:return"border-l-blue-500"}};return h.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 ${l()} p-4 mb-3 max-w-md animate-slide-in`,children:h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0",children:o()}),h.jsxs("div",{className:"ml-3 flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),h.jsx("p",{className:"text-sm text-gray-500",children:s})]}),h.jsx("button",{onClick:()=>e(t.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:h.jsx(Zh,{className:"w-4 h-4"})})]})})},YN=({toasts:t,onRemove:e})=>h.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.map(n=>h.jsx(GN,{toast:n,onRemove:e},n.id))}),XN=({onClose:t,children:e})=>h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",onClick:t,children:h.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-0 relative animate-fadeIn",onClick:n=>n.stopPropagation(),children:e})}),JN=()=>{const[t,e]=k.useState([]),[n,r]=k.useState([]),[s,i]=k.useState(null),[o,l]=k.useState({}),[u,d]=k.useState(!1),[p,m]=k.useState("add");k.useEffect(()=>{const S=He.subscribeToBudgets(e),w=He.subscribeToBudgetUsages(r);return()=>{S(),w()}},[]);const v=async S=>{await He.deleteBudgetUsage(S)},I=()=>{var S;m("add"),l({budgetItemId:(S=t[0])==null?void 0:S.id,description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""}),d(!0)},R=S=>{m("edit"),i(S.id),l({...S}),d(!0)},b=async()=>{let S={...o};!S.budgetItemId&&t[0]&&(S.budgetItemId=t[0].id),p==="add"?await He.addBudgetUsage(S):p==="edit"&&s&&await He.updateBudgetUsage(s,S),d(!1),i(null),l({})};return h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"예산 사용 내역"}),h.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition",onClick:I,children:[h.jsx(v0,{className:"w-4 h-4"})," 내역 추가"]})]}),h.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-blue-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3 text-left",children:"예산명"}),h.jsx("th",{className:"px-4 py-3 text-left",children:"적요"}),h.jsx("th",{className:"px-4 py-3 text-left",children:"채주"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"집행액"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"회계일자"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"결제방법"}),h.jsx("th",{className:"px-4 py-3 text-left",children:"비고"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"관리"})]})}),h.jsx("tbody",{children:n.map(S=>{var w;return h.jsxs("tr",{className:"hover:bg-blue-50 transition",children:[h.jsxs("td",{className:"px-4 py-3 flex items-center gap-2 min-w-[160px]",children:[h.jsx("span",{children:((w=t.find(T=>T.id===S.budgetItemId))==null?void 0:w.name)||"-"}),(()=>{var C;const T=(C=t.find(D=>D.id===S.budgetItemId))==null?void 0:C.region;return T==="남부"?h.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}):T==="북부"?h.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"}):null})()]}),h.jsx("td",{className:"px-4 py-2 truncate max-w-[120px]",children:S.description}),h.jsx("td",{className:"px-4 py-2 truncate max-w-[100px]",children:S.vendor}),h.jsx("td",{className:"px-4 py-2 text-right",children:S.amount.toLocaleString()}),h.jsx("td",{className:"px-4 py-2 text-center",children:S.date}),h.jsx("td",{className:"px-4 py-2 text-center",children:S.paymentMethod}),h.jsx("td",{className:"px-4 py-2 truncate max-w-[120px]",children:S.note}),h.jsxs("td",{className:"px-4 py-2 text-center",children:[h.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>R(S),children:h.jsx(Jh,{className:"inline w-4 h-4"})}),h.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>v(S.id),children:h.jsx(Eu,{className:"inline w-4 h-4"})})]})]},S.id)})})]})}),u&&h.jsx(XN,{onClose:()=>d(!1),children:h.jsxs("div",{className:"p-4 w-[400px]",children:[h.jsx("h2",{className:"text-xl font-bold mb-4",children:p==="add"?"내역 추가":"내역 수정"}),h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"예산명"}),h.jsx("select",{className:"border rounded px-2 py-1 w-full",value:o.budgetItemId,onChange:S=>l(w=>({...w,budgetItemId:S.target.value})),children:t.map(S=>h.jsx("option",{value:S.id,children:S.name},S.id))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"적요"}),h.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.description||"",onChange:S=>l(w=>({...w,description:S.target.value}))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"채주"}),h.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.vendor||"",onChange:S=>l(w=>({...w,vendor:S.target.value}))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"집행액"}),h.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full text-right",value:o.amount!==void 0&&o.amount!==null?Number(o.amount).toLocaleString():"",onChange:S=>{const w=S.target.value.replace(/,/g,"");isNaN(Number(w))||l(T=>({...T,amount:Number(w)}))}})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"회계일자"}),h.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:o.date||"",onChange:S=>l(w=>({...w,date:S.target.value}))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"결제방법"}),h.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.paymentMethod||"",onChange:S=>l(w=>({...w,paymentMethod:S.target.value}))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"비고"}),h.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.note||"",onChange:S=>l(w=>({...w,note:S.target.value}))})]})]}),h.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[h.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:()=>d(!1),children:"취소"}),h.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:b,children:"저장"})]})]})})]})};function ZN(){const[t,e]=k.useState("dashboard"),{toasts:n,addToast:r,removeToast:s}=na(),{loading:i,error:o}=vi(),l=()=>{if(i)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx(mE,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(o)return h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-red-800 font-medium mb-2",children:"연결 오류"}),h.jsx("p",{className:"text-red-600 text-sm",children:o}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"다시 시도"})]})});switch(t){case"dashboard":return h.jsx(ny,{});case"demand-register":return h.jsx(qN,{});case"demand-list":return h.jsx(WN,{});case"performance-input":return h.jsx(KN,{});case"performance-list":return h.jsx(QN,{});case"budget-usage":return h.jsx(JN,{});default:return h.jsx(ny,{})}};return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx(yE,{currentPage:t,onPageChange:e,children:l()}),h.jsx(YN,{toasts:n,onRemove:s})]})}m0(document.getElementById("root")).render(h.jsx(k.StrictMode,{children:h.jsx(ZN,{})}));
