(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Qw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var my={exports:{}},fu={},py={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),Gw=Symbol.for("react.portal"),Yw=Symbol.for("react.fragment"),Xw=Symbol.for("react.strict_mode"),Jw=Symbol.for("react.profiler"),Zw=Symbol.for("react.provider"),e_=Symbol.for("react.context"),t_=Symbol.for("react.forward_ref"),n_=Symbol.for("react.suspense"),r_=Symbol.for("react.memo"),s_=Symbol.for("react.lazy"),Wm=Symbol.iterator;function i_(t){return t===null||typeof t!="object"?null:(t=Wm&&t[Wm]||t["@@iterator"],typeof t=="function"?t:null)}var gy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yy=Object.assign,vy={};function mi(t,e,n){this.props=t,this.context=e,this.refs=vy,this.updater=n||gy}mi.prototype.isReactComponent={};mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xy(){}xy.prototype=mi.prototype;function mh(t,e,n){this.props=t,this.context=e,this.refs=vy,this.updater=n||gy}var ph=mh.prototype=new xy;ph.constructor=mh;yy(ph,mi.prototype);ph.isPureReactComponent=!0;var Km=Array.isArray,wy=Object.prototype.hasOwnProperty,gh={current:null},_y={key:!0,ref:!0,__self:!0,__source:!0};function Ey(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wy.call(e,r)&&!_y.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Yo,type:t,key:i,ref:o,props:s,_owner:gh.current}}function o_(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function a_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qm=/\/+/g;function uc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a_(""+t.key):e.toString(36)}function al(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yo:case Gw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+uc(o,0):r,Km(s)?(n="",t!=null&&(n=t.replace(Qm,"$&/")+"/"),al(s,e,n,"",function(d){return d})):s!=null&&(yh(s)&&(s=o_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Qm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Km(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+uc(i,u);o+=al(i,e,n,c,s)}else if(c=i_(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+uc(i,u++),o+=al(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ka(t,e,n){if(t==null)return t;var r=[],s=0;return al(t,r,"","",function(i){return e.call(n,i,s++)}),r}function l_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},ll={transition:null},u_={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:ll,ReactCurrentOwner:gh};function by(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:ka,forEach:function(t,e,n){ka(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ka(t,function(){e++}),e},toArray:function(t){return ka(t,function(e){return e})||[]},only:function(t){if(!yh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=mi;ie.Fragment=Yw;ie.Profiler=Jw;ie.PureComponent=mh;ie.StrictMode=Xw;ie.Suspense=n_;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u_;ie.act=by;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)wy.call(e,c)&&!_y.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Yo,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:e_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zw,_context:t},t.Consumer=t};ie.createElement=Ey;ie.createFactory=function(t){var e=Ey.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:t_,render:t}};ie.isValidElement=yh;ie.lazy=function(t){return{$$typeof:s_,_payload:{_status:-1,_result:t},_init:l_}};ie.memo=function(t,e){return{$$typeof:r_,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=ll.transition;ll.transition={};try{t()}finally{ll.transition=e}};ie.unstable_act=by;ie.useCallback=function(t,e){return Lt.current.useCallback(t,e)};ie.useContext=function(t){return Lt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Lt.current.useEffect(t,e)};ie.useId=function(){return Lt.current.useId()};ie.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Lt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};ie.useRef=function(t){return Lt.current.useRef(t)};ie.useState=function(t){return Lt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Lt.current.useTransition()};ie.version="18.3.1";py.exports=ie;var j=py.exports;const Ut=Qw(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_=j,d_=Symbol.for("react.element"),h_=Symbol.for("react.fragment"),f_=Object.prototype.hasOwnProperty,m_=c_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p_={key:!0,ref:!0,__self:!0,__source:!0};function Ny(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)f_.call(e,r)&&!p_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:d_,type:t,key:i,ref:o,props:s,_owner:m_.current}}fu.Fragment=h_;fu.jsx=Ny;fu.jsxs=Ny;my.exports=fu;var l=my.exports,Ty={exports:{}},nn={},Sy={exports:{}},Iy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var Y=$.length;$.push(Q);e:for(;0<Y;){var he=Y-1>>>1,B=$[he];if(0<s(B,Q))$[he]=Q,$[Y]=B,Y=he;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],Y=$.pop();if(Y!==Q){$[0]=Y;e:for(var he=0,B=$.length,X=B>>>1;he<X;){var we=2*(he+1)-1,Te=$[we],xe=we+1,Fe=$[xe];if(0>s(Te,Y))xe<B&&0>s(Fe,Te)?($[he]=Fe,$[xe]=Y,he=xe):($[he]=Te,$[we]=Y,he=we);else if(xe<B&&0>s(Fe,Y))$[he]=Fe,$[xe]=Y,he=xe;else break e}}return Q}function s($,Q){var Y=$.sortIndex-Q.sortIndex;return Y!==0?Y:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],m=1,p=null,v=3,N=!1,k=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=$)r(d),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(d)}}function D($){if(C=!1,T($),!k)if(n(c)!==null)k=!0,Ye(M);else{var Q=n(d);Q!==null&&se(D,Q.startTime-$)}}function M($,Q){k=!1,C&&(C=!1,E(y),y=-1),N=!0;var Y=v;try{for(T(Q),p=n(c);p!==null&&(!(p.expirationTime>Q)||$&&!S());){var he=p.callback;if(typeof he=="function"){p.callback=null,v=p.priorityLevel;var B=he(p.expirationTime<=Q);Q=t.unstable_now(),typeof B=="function"?p.callback=B:p===n(c)&&r(c),T(Q)}else r(c);p=n(c)}if(p!==null)var X=!0;else{var we=n(d);we!==null&&se(D,we.startTime-Q),X=!1}return X}finally{p=null,v=Y,N=!1}}var L=!1,_=null,y=-1,g=5,x=-1;function S(){return!(t.unstable_now()-x<g)}function A(){if(_!==null){var $=t.unstable_now();x=$;var Q=!0;try{Q=_(!0,$)}finally{Q?I():(L=!1,_=null)}}else L=!1}var I;if(typeof b=="function")I=function(){b(A)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ne=oe.port2;oe.port1.onmessage=A,I=function(){ne.postMessage(null)}}else I=function(){R(A,0)};function Ye($){_=$,L||(L=!0,I())}function se($,Q){y=R(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||N||(k=!0,Ye(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var Y=v;v=Q;try{return $()}finally{v=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=v;v=$;try{return Q()}finally{v=Y}},t.unstable_scheduleCallback=function($,Q,Y){var he=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?he+Y:he):Y=he,$){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Y+B,$={id:m++,callback:Q,priorityLevel:$,startTime:Y,expirationTime:B,sortIndex:-1},Y>he?($.sortIndex=Y,e(d,$),n(c)===null&&$===n(d)&&(C?(E(y),y=-1):C=!0,se(D,Y-he))):($.sortIndex=B,e(c,$),k||N||(k=!0,Ye(M))),$},t.unstable_shouldYield=S,t.unstable_wrapCallback=function($){var Q=v;return function(){var Y=v;v=Q;try{return $.apply(this,arguments)}finally{v=Y}}}})(Iy);Sy.exports=Iy;var g_=Sy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_=j,tn=g_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cy=new Set,yo={};function gs(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(yo[t]=e,t=0;t<e.length;t++)Cy.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kc=Object.prototype.hasOwnProperty,v_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gm={},Ym={};function x_(t){return Kc.call(Ym,t)?!0:Kc.call(Gm,t)?!1:v_.test(t)?Ym[t]=!0:(Gm[t]=!0,!1)}function w_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function __(t,e,n,r){if(e===null||typeof e>"u"||w_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var vh=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vh,xh);gt[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vh,xh);gt[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vh,xh);gt[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function wh(t,e,n,r){var s=gt.hasOwnProperty(e)?gt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(__(e,n,s,r)&&(n=null),r||s===null?x_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pa=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),_h=Symbol.for("react.strict_mode"),Qc=Symbol.for("react.profiler"),Ay=Symbol.for("react.provider"),Ry=Symbol.for("react.context"),Eh=Symbol.for("react.forward_ref"),Gc=Symbol.for("react.suspense"),Yc=Symbol.for("react.suspense_list"),bh=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),jy=Symbol.for("react.offscreen"),Xm=Symbol.iterator;function Mi(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,cc;function Wi(t){if(cc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cc=e&&e[1]||""}return`
`+cc+t}var dc=!1;function hc(t,e){if(!t||dc)return"";dc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{dc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wi(t):""}function E_(t){switch(t.tag){case 5:return Wi(t.type);case 16:return Wi("Lazy");case 13:return Wi("Suspense");case 19:return Wi("SuspenseList");case 0:case 2:case 15:return t=hc(t.type,!1),t;case 11:return t=hc(t.type.render,!1),t;case 1:return t=hc(t.type,!0),t;default:return""}}function Xc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case js:return"Fragment";case Rs:return"Portal";case Qc:return"Profiler";case _h:return"StrictMode";case Gc:return"Suspense";case Yc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ry:return(t.displayName||"Context")+".Consumer";case Ay:return(t._context.displayName||"Context")+".Provider";case Eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bh:return e=t.displayName||null,e!==null?e:Xc(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return Xc(t(e))}catch{}}return null}function b_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xc(e);case 8:return e===_h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ky(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N_(t){var e=ky(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Da(t){t._valueTracker||(t._valueTracker=N_(t))}function Py(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ky(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jc(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dy(t,e){e=e.checked,e!=null&&wh(t,"checked",e,!1)}function Zc(t,e){Dy(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ed(t,e.type,n):e.hasOwnProperty("defaultValue")&&ed(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ed(t,e,n){(e!=="number"||Tl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ki=Array.isArray;function $s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function td(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ep(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Ki(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Vy(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function My(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?My(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Va,Ly=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Va=Va||document.createElement("div"),Va.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Va.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T_=["Webkit","ms","Moz","O"];Object.keys(eo).forEach(function(t){T_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eo[e]=eo[t]})});function Oy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eo.hasOwnProperty(t)&&eo[t]?(""+e).trim():e+"px"}function Fy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Oy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var S_=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rd(t,e){if(e){if(S_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var id=null;function Nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var od=null,qs=null,Hs=null;function np(t){if(t=Zo(t)){if(typeof od!="function")throw Error(U(280));var e=t.stateNode;e&&(e=vu(e),od(t.stateNode,t.type,e))}}function Uy(t){qs?Hs?Hs.push(t):Hs=[t]:qs=t}function zy(){if(qs){var t=qs,e=Hs;if(Hs=qs=null,np(t),e)for(t=0;t<e.length;t++)np(e[t])}}function By(t,e){return t(e)}function $y(){}var fc=!1;function qy(t,e,n){if(fc)return t(e,n);fc=!0;try{return By(t,e,n)}finally{fc=!1,(qs!==null||Hs!==null)&&($y(),zy())}}function xo(t,e){var n=t.stateNode;if(n===null)return null;var r=vu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ad=!1;if(Yn)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){ad=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{ad=!1}function I_(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var to=!1,Sl=null,Il=!1,ld=null,C_={onError:function(t){to=!0,Sl=t}};function A_(t,e,n,r,s,i,o,u,c){to=!1,Sl=null,I_.apply(C_,arguments)}function R_(t,e,n,r,s,i,o,u,c){if(A_.apply(this,arguments),to){if(to){var d=Sl;to=!1,Sl=null}else throw Error(U(198));Il||(Il=!0,ld=d)}}function ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rp(t){if(ys(t)!==t)throw Error(U(188))}function j_(t){var e=t.alternate;if(!e){if(e=ys(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rp(s),t;if(i===r)return rp(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Wy(t){return t=j_(t),t!==null?Ky(t):null}function Ky(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ky(t);if(e!==null)return e;t=t.sibling}return null}var Qy=tn.unstable_scheduleCallback,sp=tn.unstable_cancelCallback,k_=tn.unstable_shouldYield,P_=tn.unstable_requestPaint,He=tn.unstable_now,D_=tn.unstable_getCurrentPriorityLevel,Th=tn.unstable_ImmediatePriority,Gy=tn.unstable_UserBlockingPriority,Cl=tn.unstable_NormalPriority,V_=tn.unstable_LowPriority,Yy=tn.unstable_IdlePriority,mu=null,Dn=null;function M_(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(mu,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:F_,L_=Math.log,O_=Math.LN2;function F_(t){return t>>>=0,t===0?32:31-(L_(t)/O_|0)|0}var Ma=64,La=4194304;function Qi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Qi(u):(i&=o,i!==0&&(r=Qi(i)))}else o=n&~s,o!==0?r=Qi(o):i!==0&&(r=Qi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),s=1<<n,r|=t[n],e&=~s;return r}function U_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Nn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=U_(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function ud(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xy(){var t=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),t}function mc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function B_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function Jy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zy,Ih,e0,t0,n0,cd=!1,Oa=[],_r=null,Er=null,br=null,wo=new Map,_o=new Map,gr=[],$_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ip(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":wo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(e.pointerId)}}function Oi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Zo(e),e!==null&&Ih(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function q_(t,e,n,r,s){switch(e){case"focusin":return _r=Oi(_r,t,e,n,r,s),!0;case"dragenter":return Er=Oi(Er,t,e,n,r,s),!0;case"mouseover":return br=Oi(br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wo.set(i,Oi(wo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_o.set(i,Oi(_o.get(i)||null,t,e,n,r,s)),!0}return!1}function r0(t){var e=es(t.target);if(e!==null){var n=ys(e);if(n!==null){if(e=n.tag,e===13){if(e=Hy(n),e!==null){t.blockedOn=e,n0(t.priority,function(){e0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);id=r,n.target.dispatchEvent(r),id=null}else return e=Zo(n),e!==null&&Ih(e),t.blockedOn=n,!1;e.shift()}return!0}function op(t,e,n){ul(t)&&n.delete(e)}function H_(){cd=!1,_r!==null&&ul(_r)&&(_r=null),Er!==null&&ul(Er)&&(Er=null),br!==null&&ul(br)&&(br=null),wo.forEach(op),_o.forEach(op)}function Fi(t,e){t.blockedOn===e&&(t.blockedOn=null,cd||(cd=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,H_)))}function Eo(t){function e(s){return Fi(s,t)}if(0<Oa.length){Fi(Oa[0],t);for(var n=1;n<Oa.length;n++){var r=Oa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_r!==null&&Fi(_r,t),Er!==null&&Fi(Er,t),br!==null&&Fi(br,t),wo.forEach(e),_o.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)r0(n),n.blockedOn===null&&gr.shift()}var Ws=sr.ReactCurrentBatchConfig,Rl=!0;function W_(t,e,n,r){var s=ye,i=Ws.transition;Ws.transition=null;try{ye=1,Ch(t,e,n,r)}finally{ye=s,Ws.transition=i}}function K_(t,e,n,r){var s=ye,i=Ws.transition;Ws.transition=null;try{ye=4,Ch(t,e,n,r)}finally{ye=s,Ws.transition=i}}function Ch(t,e,n,r){if(Rl){var s=dd(t,e,n,r);if(s===null)Nc(t,e,r,jl,n),ip(t,r);else if(q_(s,t,e,n,r))r.stopPropagation();else if(ip(t,r),e&4&&-1<$_.indexOf(t)){for(;s!==null;){var i=Zo(s);if(i!==null&&Zy(i),i=dd(t,e,n,r),i===null&&Nc(t,e,r,jl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Nc(t,e,r,null,n)}}var jl=null;function dd(t,e,n,r){if(jl=null,t=Nh(r),t=es(t),t!==null)if(e=ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function s0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D_()){case Th:return 1;case Gy:return 4;case Cl:case V_:return 16;case Yy:return 536870912;default:return 16}default:return 16}}var vr=null,Ah=null,cl=null;function i0(){if(cl)return cl;var t,e=Ah,n=e.length,r,s="value"in vr?vr.value:vr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cl=s.slice(t,1<r?1-r:void 0)}function dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fa(){return!0}function ap(){return!1}function rn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fa:ap,this.isPropagationStopped=ap,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),e}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rh=rn(pi),Jo=Le({},pi,{view:0,detail:0}),Q_=rn(Jo),pc,gc,Ui,pu=Le({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ui&&(Ui&&t.type==="mousemove"?(pc=t.screenX-Ui.screenX,gc=t.screenY-Ui.screenY):gc=pc=0,Ui=t),pc)},movementY:function(t){return"movementY"in t?t.movementY:gc}}),lp=rn(pu),G_=Le({},pu,{dataTransfer:0}),Y_=rn(G_),X_=Le({},Jo,{relatedTarget:0}),yc=rn(X_),J_=Le({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Z_=rn(J_),e1=Le({},pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t1=rn(e1),n1=Le({},pi,{data:0}),up=rn(n1),r1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=i1[t])?!!e[t]:!1}function jh(){return o1}var a1=Le({},Jo,{key:function(t){if(t.key){var e=r1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(t){return t.type==="keypress"?dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l1=rn(a1),u1=Le({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cp=rn(u1),c1=Le({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),d1=rn(c1),h1=Le({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),f1=rn(h1),m1=Le({},pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),p1=rn(m1),g1=[9,13,27,32],kh=Yn&&"CompositionEvent"in window,no=null;Yn&&"documentMode"in document&&(no=document.documentMode);var y1=Yn&&"TextEvent"in window&&!no,o0=Yn&&(!kh||no&&8<no&&11>=no),dp=" ",hp=!1;function a0(t,e){switch(t){case"keyup":return g1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function v1(t,e){switch(t){case"compositionend":return l0(e);case"keypress":return e.which!==32?null:(hp=!0,dp);case"textInput":return t=e.data,t===dp&&hp?null:t;default:return null}}function x1(t,e){if(ks)return t==="compositionend"||!kh&&a0(t,e)?(t=i0(),cl=Ah=vr=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o0&&e.locale!=="ko"?null:e.data;default:return null}}var w1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w1[t.type]:e==="textarea"}function u0(t,e,n,r){Uy(r),e=kl(e,"onChange"),0<e.length&&(n=new Rh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ro=null,bo=null;function _1(t){w0(t,0)}function gu(t){var e=Vs(t);if(Py(e))return t}function E1(t,e){if(t==="change")return e}var c0=!1;if(Yn){var vc;if(Yn){var xc="oninput"in document;if(!xc){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),xc=typeof mp.oninput=="function"}vc=xc}else vc=!1;c0=vc&&(!document.documentMode||9<document.documentMode)}function pp(){ro&&(ro.detachEvent("onpropertychange",d0),bo=ro=null)}function d0(t){if(t.propertyName==="value"&&gu(bo)){var e=[];u0(e,bo,t,Nh(t)),qy(_1,e)}}function b1(t,e,n){t==="focusin"?(pp(),ro=e,bo=n,ro.attachEvent("onpropertychange",d0)):t==="focusout"&&pp()}function N1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(bo)}function T1(t,e){if(t==="click")return gu(e)}function S1(t,e){if(t==="input"||t==="change")return gu(e)}function I1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:I1;function No(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kc.call(e,s)||!Sn(t[s],e[s]))return!1}return!0}function gp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yp(t,e){var n=gp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gp(n)}}function h0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f0(){for(var t=window,e=Tl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tl(t.document)}return e}function Ph(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function C1(t){var e=f0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&h0(n.ownerDocument.documentElement,n)){if(r!==null&&Ph(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yp(n,i);var o=yp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var A1=Yn&&"documentMode"in document&&11>=document.documentMode,Ps=null,hd=null,so=null,fd=!1;function vp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fd||Ps==null||Ps!==Tl(r)||(r=Ps,"selectionStart"in r&&Ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),so&&No(so,r)||(so=r,r=kl(hd,"onSelect"),0<r.length&&(e=new Rh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function Ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ds={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},wc={},m0={};Yn&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function yu(t){if(wc[t])return wc[t];if(!Ds[t])return t;var e=Ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in m0)return wc[t]=e[n];return t}var p0=yu("animationend"),g0=yu("animationiteration"),y0=yu("animationstart"),v0=yu("transitionend"),x0=new Map,xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){x0.set(t,e),gs(e,[t])}for(var _c=0;_c<xp.length;_c++){var Ec=xp[_c],R1=Ec.toLowerCase(),j1=Ec[0].toUpperCase()+Ec.slice(1);Or(R1,"on"+j1)}Or(p0,"onAnimationEnd");Or(g0,"onAnimationIteration");Or(y0,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(v0,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function wp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,R_(r,e,void 0,t),t.currentTarget=null}function w0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;wp(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;wp(s,u,d),i=c}}}if(Il)throw t=ld,Il=!1,ld=null,t}function Ie(t,e){var n=e[vd];n===void 0&&(n=e[vd]=new Set);var r=t+"__bubble";n.has(r)||(_0(e,t,2,!1),n.add(r))}function bc(t,e,n){var r=0;e&&(r|=4),_0(n,t,r,e)}var za="_reactListening"+Math.random().toString(36).slice(2);function To(t){if(!t[za]){t[za]=!0,Cy.forEach(function(n){n!=="selectionchange"&&(k1.has(n)||bc(n,!1,t),bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[za]||(e[za]=!0,bc("selectionchange",!1,e))}}function _0(t,e,n,r){switch(s0(e)){case 1:var s=W_;break;case 4:s=K_;break;default:s=Ch}n=s.bind(null,e,n,t),s=void 0,!ad||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=es(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}qy(function(){var d=i,m=Nh(n),p=[];e:{var v=x0.get(t);if(v!==void 0){var N=Rh,k=t;switch(t){case"keypress":if(dl(n)===0)break e;case"keydown":case"keyup":N=l1;break;case"focusin":k="focus",N=yc;break;case"focusout":k="blur",N=yc;break;case"beforeblur":case"afterblur":N=yc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=d1;break;case p0:case g0:case y0:N=Z_;break;case v0:N=f1;break;case"scroll":N=Q_;break;case"wheel":N=p1;break;case"copy":case"cut":case"paste":N=t1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=cp}var C=(e&4)!==0,R=!C&&t==="scroll",E=C?v!==null?v+"Capture":null:v;C=[];for(var b=d,T;b!==null;){T=b;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,E!==null&&(D=xo(b,E),D!=null&&C.push(So(b,D,T)))),R)break;b=b.return}0<C.length&&(v=new N(v,k,null,n,m),p.push({event:v,listeners:C}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",v&&n!==id&&(k=n.relatedTarget||n.fromElement)&&(es(k)||k[Xn]))break e;if((N||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,N?(k=n.relatedTarget||n.toElement,N=d,k=k?es(k):null,k!==null&&(R=ys(k),k!==R||k.tag!==5&&k.tag!==6)&&(k=null)):(N=null,k=d),N!==k)){if(C=lp,D="onMouseLeave",E="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(C=cp,D="onPointerLeave",E="onPointerEnter",b="pointer"),R=N==null?v:Vs(N),T=k==null?v:Vs(k),v=new C(D,b+"leave",N,n,m),v.target=R,v.relatedTarget=T,D=null,es(m)===d&&(C=new C(E,b+"enter",k,n,m),C.target=T,C.relatedTarget=R,D=C),R=D,N&&k)t:{for(C=N,E=k,b=0,T=C;T;T=Ss(T))b++;for(T=0,D=E;D;D=Ss(D))T++;for(;0<b-T;)C=Ss(C),b--;for(;0<T-b;)E=Ss(E),T--;for(;b--;){if(C===E||E!==null&&C===E.alternate)break t;C=Ss(C),E=Ss(E)}C=null}else C=null;N!==null&&_p(p,v,N,C,!1),k!==null&&R!==null&&_p(p,R,k,C,!0)}}e:{if(v=d?Vs(d):window,N=v.nodeName&&v.nodeName.toLowerCase(),N==="select"||N==="input"&&v.type==="file")var M=E1;else if(fp(v))if(c0)M=S1;else{M=N1;var L=b1}else(N=v.nodeName)&&N.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=T1);if(M&&(M=M(t,d))){u0(p,M,n,m);break e}L&&L(t,v,d),t==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&ed(v,"number",v.value)}switch(L=d?Vs(d):window,t){case"focusin":(fp(L)||L.contentEditable==="true")&&(Ps=L,hd=d,so=null);break;case"focusout":so=hd=Ps=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,vp(p,n,m);break;case"selectionchange":if(A1)break;case"keydown":case"keyup":vp(p,n,m)}var _;if(kh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ks?a0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(o0&&n.locale!=="ko"&&(ks||y!=="onCompositionStart"?y==="onCompositionEnd"&&ks&&(_=i0()):(vr=m,Ah="value"in vr?vr.value:vr.textContent,ks=!0)),L=kl(d,y),0<L.length&&(y=new up(y,t,null,n,m),p.push({event:y,listeners:L}),_?y.data=_:(_=l0(n),_!==null&&(y.data=_)))),(_=y1?v1(t,n):x1(t,n))&&(d=kl(d,"onBeforeInput"),0<d.length&&(m=new up("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=_))}w0(p,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xo(t,n),i!=null&&r.unshift(So(t,i,s)),i=xo(t,e),i!=null&&r.push(So(t,i,s))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _p(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=xo(n,i),c!=null&&o.unshift(So(n,c,u))):s||(c=xo(n,i),c!=null&&o.push(So(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var P1=/\r\n?/g,D1=/\u0000|\uFFFD/g;function Ep(t){return(typeof t=="string"?t:""+t).replace(P1,`
`).replace(D1,"")}function Ba(t,e,n){if(e=Ep(e),Ep(t)!==e&&n)throw Error(U(425))}function Pl(){}var md=null,pd=null;function gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yd=typeof setTimeout=="function"?setTimeout:void 0,V1=typeof clearTimeout=="function"?clearTimeout:void 0,bp=typeof Promise=="function"?Promise:void 0,M1=typeof queueMicrotask=="function"?queueMicrotask:typeof bp<"u"?function(t){return bp.resolve(null).then(t).catch(L1)}:yd;function L1(t){setTimeout(function(){throw t})}function Tc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Eo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Eo(e)}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Np(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gi=Math.random().toString(36).slice(2),Pn="__reactFiber$"+gi,Io="__reactProps$"+gi,Xn="__reactContainer$"+gi,vd="__reactEvents$"+gi,O1="__reactListeners$"+gi,F1="__reactHandles$"+gi;function es(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Np(t);t!==null;){if(n=t[Pn])return n;t=Np(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[Pn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function vu(t){return t[Io]||null}var xd=[],Ms=-1;function Fr(t){return{current:t}}function Re(t){0>Ms||(t.current=xd[Ms],xd[Ms]=null,Ms--)}function Ne(t,e){Ms++,xd[Ms]=t.current,t.current=e}var Pr={},kt=Fr(Pr),qt=Fr(!1),ls=Pr;function ei(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ht(t){return t=t.childContextTypes,t!=null}function Dl(){Re(qt),Re(kt)}function Tp(t,e,n){if(kt.current!==Pr)throw Error(U(168));Ne(kt,e),Ne(qt,n)}function E0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,b_(t)||"Unknown",s));return Le({},n,r)}function Vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,ls=kt.current,Ne(kt,t),Ne(qt,qt.current),!0}function Sp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=E0(t,e,ls),r.__reactInternalMemoizedMergedChildContext=t,Re(qt),Re(kt),Ne(kt,t)):Re(qt),Ne(qt,n)}var Hn=null,xu=!1,Sc=!1;function b0(t){Hn===null?Hn=[t]:Hn.push(t)}function U1(t){xu=!0,b0(t)}function Ur(){if(!Sc&&Hn!==null){Sc=!0;var t=0,e=ye;try{var n=Hn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,xu=!1}catch(s){throw Hn!==null&&(Hn=Hn.slice(t+1)),Qy(Th,Ur),s}finally{ye=e,Sc=!1}}return null}var Ls=[],Os=0,Ml=null,Ll=0,un=[],cn=0,us=null,Wn=1,Kn="";function Xr(t,e){Ls[Os++]=Ll,Ls[Os++]=Ml,Ml=t,Ll=e}function N0(t,e,n){un[cn++]=Wn,un[cn++]=Kn,un[cn++]=us,us=t;var r=Wn;t=Kn;var s=32-Nn(r)-1;r&=~(1<<s),n+=1;var i=32-Nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wn=1<<32-Nn(e)+s|n<<s|r,Kn=i+t}else Wn=1<<i|n<<s|r,Kn=t}function Dh(t){t.return!==null&&(Xr(t,1),N0(t,1,0))}function Vh(t){for(;t===Ml;)Ml=Ls[--Os],Ls[Os]=null,Ll=Ls[--Os],Ls[Os]=null;for(;t===us;)us=un[--cn],un[cn]=null,Kn=un[--cn],un[cn]=null,Wn=un[--cn],un[cn]=null}var en=null,Jt=null,Pe=!1,bn=null;function T0(t,e){var n=dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ip(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,en=t,Jt=Nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,en=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:Wn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,en=t,Jt=null,!0):!1;default:return!1}}function wd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _d(t){if(Pe){var e=Jt;if(e){var n=e;if(!Ip(t,e)){if(wd(t))throw Error(U(418));e=Nr(n.nextSibling);var r=en;e&&Ip(t,e)?T0(r,n):(t.flags=t.flags&-4097|2,Pe=!1,en=t)}}else{if(wd(t))throw Error(U(418));t.flags=t.flags&-4097|2,Pe=!1,en=t}}}function Cp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;en=t}function $a(t){if(t!==en)return!1;if(!Pe)return Cp(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gd(t.type,t.memoizedProps)),e&&(e=Jt)){if(wd(t))throw S0(),Error(U(418));for(;e;)T0(t,e),e=Nr(e.nextSibling)}if(Cp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=en?Nr(t.stateNode.nextSibling):null;return!0}function S0(){for(var t=Jt;t;)t=Nr(t.nextSibling)}function ti(){Jt=en=null,Pe=!1}function Mh(t){bn===null?bn=[t]:bn.push(t)}var z1=sr.ReactCurrentBatchConfig;function zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function qa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ap(t){var e=t._init;return e(t._payload)}function I0(t){function e(E,b){if(t){var T=E.deletions;T===null?(E.deletions=[b],E.flags|=16):T.push(b)}}function n(E,b){if(!t)return null;for(;b!==null;)e(E,b),b=b.sibling;return null}function r(E,b){for(E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function s(E,b){return E=Cr(E,b),E.index=0,E.sibling=null,E}function i(E,b,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<b?(E.flags|=2,b):T):(E.flags|=2,b)):(E.flags|=1048576,b)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function u(E,b,T,D){return b===null||b.tag!==6?(b=Pc(T,E.mode,D),b.return=E,b):(b=s(b,T),b.return=E,b)}function c(E,b,T,D){var M=T.type;return M===js?m(E,b,T.props.children,D,T.key):b!==null&&(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fr&&Ap(M)===b.type)?(D=s(b,T.props),D.ref=zi(E,b,T),D.return=E,D):(D=vl(T.type,T.key,T.props,null,E.mode,D),D.ref=zi(E,b,T),D.return=E,D)}function d(E,b,T,D){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=Dc(T,E.mode,D),b.return=E,b):(b=s(b,T.children||[]),b.return=E,b)}function m(E,b,T,D,M){return b===null||b.tag!==7?(b=is(T,E.mode,D,M),b.return=E,b):(b=s(b,T),b.return=E,b)}function p(E,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Pc(""+b,E.mode,T),b.return=E,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pa:return T=vl(b.type,b.key,b.props,null,E.mode,T),T.ref=zi(E,null,b),T.return=E,T;case Rs:return b=Dc(b,E.mode,T),b.return=E,b;case fr:var D=b._init;return p(E,D(b._payload),T)}if(Ki(b)||Mi(b))return b=is(b,E.mode,T,null),b.return=E,b;qa(E,b)}return null}function v(E,b,T,D){var M=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return M!==null?null:u(E,b,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Pa:return T.key===M?c(E,b,T,D):null;case Rs:return T.key===M?d(E,b,T,D):null;case fr:return M=T._init,v(E,b,M(T._payload),D)}if(Ki(T)||Mi(T))return M!==null?null:m(E,b,T,D,null);qa(E,T)}return null}function N(E,b,T,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(T)||null,u(b,E,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Pa:return E=E.get(D.key===null?T:D.key)||null,c(b,E,D,M);case Rs:return E=E.get(D.key===null?T:D.key)||null,d(b,E,D,M);case fr:var L=D._init;return N(E,b,T,L(D._payload),M)}if(Ki(D)||Mi(D))return E=E.get(T)||null,m(b,E,D,M,null);qa(b,D)}return null}function k(E,b,T,D){for(var M=null,L=null,_=b,y=b=0,g=null;_!==null&&y<T.length;y++){_.index>y?(g=_,_=null):g=_.sibling;var x=v(E,_,T[y],D);if(x===null){_===null&&(_=g);break}t&&_&&x.alternate===null&&e(E,_),b=i(x,b,y),L===null?M=x:L.sibling=x,L=x,_=g}if(y===T.length)return n(E,_),Pe&&Xr(E,y),M;if(_===null){for(;y<T.length;y++)_=p(E,T[y],D),_!==null&&(b=i(_,b,y),L===null?M=_:L.sibling=_,L=_);return Pe&&Xr(E,y),M}for(_=r(E,_);y<T.length;y++)g=N(_,E,y,T[y],D),g!==null&&(t&&g.alternate!==null&&_.delete(g.key===null?y:g.key),b=i(g,b,y),L===null?M=g:L.sibling=g,L=g);return t&&_.forEach(function(S){return e(E,S)}),Pe&&Xr(E,y),M}function C(E,b,T,D){var M=Mi(T);if(typeof M!="function")throw Error(U(150));if(T=M.call(T),T==null)throw Error(U(151));for(var L=M=null,_=b,y=b=0,g=null,x=T.next();_!==null&&!x.done;y++,x=T.next()){_.index>y?(g=_,_=null):g=_.sibling;var S=v(E,_,x.value,D);if(S===null){_===null&&(_=g);break}t&&_&&S.alternate===null&&e(E,_),b=i(S,b,y),L===null?M=S:L.sibling=S,L=S,_=g}if(x.done)return n(E,_),Pe&&Xr(E,y),M;if(_===null){for(;!x.done;y++,x=T.next())x=p(E,x.value,D),x!==null&&(b=i(x,b,y),L===null?M=x:L.sibling=x,L=x);return Pe&&Xr(E,y),M}for(_=r(E,_);!x.done;y++,x=T.next())x=N(_,E,y,x.value,D),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?y:x.key),b=i(x,b,y),L===null?M=x:L.sibling=x,L=x);return t&&_.forEach(function(A){return e(E,A)}),Pe&&Xr(E,y),M}function R(E,b,T,D){if(typeof T=="object"&&T!==null&&T.type===js&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Pa:e:{for(var M=T.key,L=b;L!==null;){if(L.key===M){if(M=T.type,M===js){if(L.tag===7){n(E,L.sibling),b=s(L,T.props.children),b.return=E,E=b;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fr&&Ap(M)===L.type){n(E,L.sibling),b=s(L,T.props),b.ref=zi(E,L,T),b.return=E,E=b;break e}n(E,L);break}else e(E,L);L=L.sibling}T.type===js?(b=is(T.props.children,E.mode,D,T.key),b.return=E,E=b):(D=vl(T.type,T.key,T.props,null,E.mode,D),D.ref=zi(E,b,T),D.return=E,E=D)}return o(E);case Rs:e:{for(L=T.key;b!==null;){if(b.key===L)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){n(E,b.sibling),b=s(b,T.children||[]),b.return=E,E=b;break e}else{n(E,b);break}else e(E,b);b=b.sibling}b=Dc(T,E.mode,D),b.return=E,E=b}return o(E);case fr:return L=T._init,R(E,b,L(T._payload),D)}if(Ki(T))return k(E,b,T,D);if(Mi(T))return C(E,b,T,D);qa(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(n(E,b.sibling),b=s(b,T),b.return=E,E=b):(n(E,b),b=Pc(T,E.mode,D),b.return=E,E=b),o(E)):n(E,b)}return R}var ni=I0(!0),C0=I0(!1),Ol=Fr(null),Fl=null,Fs=null,Lh=null;function Oh(){Lh=Fs=Fl=null}function Fh(t){var e=Ol.current;Re(Ol),t._currentValue=e}function Ed(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){Fl=t,Lh=Fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function mn(t){var e=t._currentValue;if(Lh!==t)if(t={context:t,memoizedValue:e,next:null},Fs===null){if(Fl===null)throw Error(U(308));Fs=t,Fl.dependencies={lanes:0,firstContext:t}}else Fs=Fs.next=t;return e}var ts=null;function Uh(t){ts===null?ts=[t]:ts.push(t)}function A0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Uh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Jn(t,n)}return s=r.interleaved,s===null?(e.next=e,Uh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Jn(t,n)}function hl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sh(t,n)}}function Rp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ul(t,e,n,r){var s=t.updateQueue;mr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=d=c=null,u=i;do{var v=u.lane,N=u.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:N,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,C=u;switch(v=e,N=n,C.tag){case 1:if(k=C.payload,typeof k=="function"){p=k.call(N,p,v);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,v=typeof k=="function"?k.call(N,p,v):k,v==null)break e;p=Le({},p,v);break e;case 2:mr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[u]:v.push(u))}else N={eventTime:N,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=N,c=p):m=m.next=N,o|=v;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;v=u,u=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=p}}function jp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ea={},Vn=Fr(ea),Co=Fr(ea),Ao=Fr(ea);function ns(t){if(t===ea)throw Error(U(174));return t}function Bh(t,e){switch(Ne(Ao,e),Ne(Co,t),Ne(Vn,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nd(e,t)}Re(Vn),Ne(Vn,e)}function ri(){Re(Vn),Re(Co),Re(Ao)}function j0(t){ns(Ao.current);var e=ns(Vn.current),n=nd(e,t.type);e!==n&&(Ne(Co,t),Ne(Vn,n))}function $h(t){Co.current===t&&(Re(Vn),Re(Co))}var Ve=Fr(0);function zl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ic=[];function qh(){for(var t=0;t<Ic.length;t++)Ic[t]._workInProgressVersionPrimary=null;Ic.length=0}var fl=sr.ReactCurrentDispatcher,Cc=sr.ReactCurrentBatchConfig,cs=0,Me=null,Je=null,rt=null,Bl=!1,io=!1,Ro=0,B1=0;function Tt(){throw Error(U(321))}function Hh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function Wh(t,e,n,r,s,i){if(cs=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fl.current=t===null||t.memoizedState===null?W1:K1,t=n(r,s),io){i=0;do{if(io=!1,Ro=0,25<=i)throw Error(U(301));i+=1,rt=Je=null,e.updateQueue=null,fl.current=Q1,t=n(r,s)}while(io)}if(fl.current=$l,e=Je!==null&&Je.next!==null,cs=0,rt=Je=Me=null,Bl=!1,e)throw Error(U(300));return t}function Kh(){var t=Ro!==0;return Ro=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Me.memoizedState=rt=t:rt=rt.next=t,rt}function pn(){if(Je===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=rt===null?Me.memoizedState:rt.next;if(e!==null)rt=e,Je=t;else{if(t===null)throw Error(U(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},rt===null?Me.memoizedState=rt=t:rt=rt.next=t}return rt}function jo(t,e){return typeof e=="function"?e(t):e}function Ac(t){var e=pn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var m=d.lane;if((cs&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Me.lanes|=m,ds|=m}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,Sn(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,ds|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rc(t){var e=pn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Sn(i,e.memoizedState)||($t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function k0(){}function P0(t,e){var n=Me,r=pn(),s=e(),i=!Sn(r.memoizedState,s);if(i&&(r.memoizedState=s,$t=!0),r=r.queue,Qh(M0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,ko(9,V0.bind(null,n,r,s,e),void 0,null),it===null)throw Error(U(349));cs&30||D0(n,e,s)}return s}function D0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V0(t,e,n,r){e.value=n,e.getSnapshot=r,L0(e)&&O0(t)}function M0(t,e,n){return n(function(){L0(e)&&O0(t)})}function L0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function O0(t){var e=Jn(t,1);e!==null&&Tn(e,t,1,-1)}function kp(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jo,lastRenderedState:t},e.queue=t,t=t.dispatch=H1.bind(null,Me,t),[e.memoizedState,t]}function ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function F0(){return pn().memoizedState}function ml(t,e,n,r){var s=kn();Me.flags|=t,s.memoizedState=ko(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&Hh(r,o.deps)){s.memoizedState=ko(e,n,i,r);return}}Me.flags|=t,s.memoizedState=ko(1|e,n,i,r)}function Pp(t,e){return ml(8390656,8,t,e)}function Qh(t,e){return wu(2048,8,t,e)}function U0(t,e){return wu(4,2,t,e)}function z0(t,e){return wu(4,4,t,e)}function B0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $0(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,B0.bind(null,e,t),n)}function Gh(){}function q0(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function H0(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function W0(t,e,n){return cs&21?(Sn(n,e)||(n=Xy(),Me.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function $1(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Cc.transition;Cc.transition={};try{t(!1),e()}finally{ye=n,Cc.transition=r}}function K0(){return pn().memoizedState}function q1(t,e,n){var r=Ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Q0(t))G0(e,n);else if(n=A0(t,e,n,r),n!==null){var s=Mt();Tn(n,t,r,s),Y0(n,e,r)}}function H1(t,e,n){var r=Ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q0(t))G0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Sn(u,o)){var c=e.interleaved;c===null?(s.next=s,Uh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=A0(t,e,s,r),n!==null&&(s=Mt(),Tn(n,t,r,s),Y0(n,e,r))}}function Q0(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function G0(t,e){io=Bl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Y0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sh(t,n)}}var $l={readContext:mn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},W1={readContext:mn,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:mn,useEffect:Pp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ml(4194308,4,B0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ml(4194308,4,t,e)},useInsertionEffect:function(t,e){return ml(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=q1.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:kp,useDebugValue:Gh,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=kp(!1),e=t[0];return t=$1.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=kn();if(Pe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),it===null)throw Error(U(349));cs&30||D0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Pp(M0.bind(null,r,i,t),[t]),r.flags|=2048,ko(9,V0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=kn(),e=it.identifierPrefix;if(Pe){var n=Kn,r=Wn;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K1={readContext:mn,useCallback:q0,useContext:mn,useEffect:Qh,useImperativeHandle:$0,useInsertionEffect:U0,useLayoutEffect:z0,useMemo:H0,useReducer:Ac,useRef:F0,useState:function(){return Ac(jo)},useDebugValue:Gh,useDeferredValue:function(t){var e=pn();return W0(e,Je.memoizedState,t)},useTransition:function(){var t=Ac(jo)[0],e=pn().memoizedState;return[t,e]},useMutableSource:k0,useSyncExternalStore:P0,useId:K0,unstable_isNewReconciler:!1},Q1={readContext:mn,useCallback:q0,useContext:mn,useEffect:Qh,useImperativeHandle:$0,useInsertionEffect:U0,useLayoutEffect:z0,useMemo:H0,useReducer:Rc,useRef:F0,useState:function(){return Rc(jo)},useDebugValue:Gh,useDeferredValue:function(t){var e=pn();return Je===null?e.memoizedState=t:W0(e,Je.memoizedState,t)},useTransition:function(){var t=Rc(jo)[0],e=pn().memoizedState;return[t,e]},useMutableSource:k0,useSyncExternalStore:P0,useId:K0,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _u={isMounted:function(t){return(t=t._reactInternals)?ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mt(),s=Ir(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Tr(t,i,s),e!==null&&(Tn(e,t,s,r),hl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mt(),s=Ir(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Tr(t,i,s),e!==null&&(Tn(e,t,s,r),hl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mt(),r=Ir(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Tr(t,s,r),e!==null&&(Tn(e,t,r,n),hl(e,t,r))}};function Dp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!No(n,r)||!No(s,i):!0}function X0(t,e,n){var r=!1,s=Pr,i=e.contextType;return typeof i=="object"&&i!==null?i=mn(i):(s=Ht(e)?ls:kt.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):Pr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_u,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Vp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_u.enqueueReplaceState(e,e.state,null)}function Nd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=mn(i):(i=Ht(e)?ls:kt.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(bd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_u.enqueueReplaceState(s,s.state,null),Ul(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=E_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Td(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var G1=typeof WeakMap=="function"?WeakMap:Map;function J0(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,Vd=r),Td(t,e)},n}function Z0(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Td(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Td(t,e),typeof r!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new G1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uE.bind(null,t,e,n),e.then(t,t))}function Lp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Op(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Tr(n,e,1))),n.lanes|=1),t)}var Y1=sr.ReactCurrentOwner,$t=!1;function Vt(t,e,n,r){e.child=t===null?C0(e,null,n,r):ni(e,t.child,n,r)}function Fp(t,e,n,r,s){n=n.render;var i=e.ref;return Ks(e,s),r=Wh(t,e,n,r,i,s),n=Kh(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(Pe&&n&&Dh(e),e.flags|=1,Vt(t,e,r,s),e.child)}function Up(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ev(t,e,i,r,s)):(t=vl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:No,n(o,r)&&t.ref===e.ref)return Zn(t,e,s)}return e.flags|=1,t=Cr(i,r),t.ref=e.ref,t.return=e,e.child=t}function ev(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(No(i,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,Zn(t,e,s)}return Sd(t,e,n,r,s)}function tv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(zs,Xt),Xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(zs,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(zs,Xt),Xt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ne(zs,Xt),Xt|=r;return Vt(t,e,s,n),e.child}function nv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sd(t,e,n,r,s){var i=Ht(n)?ls:kt.current;return i=ei(e,i),Ks(e,s),n=Wh(t,e,n,r,i,s),r=Kh(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(Pe&&r&&Dh(e),e.flags|=1,Vt(t,e,n,s),e.child)}function zp(t,e,n,r,s){if(Ht(n)){var i=!0;Vl(e)}else i=!1;if(Ks(e,s),e.stateNode===null)pl(t,e),X0(e,n,r),Nd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=mn(d):(d=Ht(n)?ls:kt.current,d=ei(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Vp(e,o,r,d),mr=!1;var v=e.memoizedState;o.state=v,Ul(e,r,o,s),c=e.memoizedState,u!==r||v!==c||qt.current||mr?(typeof m=="function"&&(bd(e,n,m,r),c=e.memoizedState),(u=mr||Dp(e,n,u,r,v,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,R0(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:_n(e.type,u),o.props=d,p=e.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mn(c):(c=Ht(n)?ls:kt.current,c=ei(e,c));var N=n.getDerivedStateFromProps;(m=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||v!==c)&&Vp(e,o,r,c),mr=!1,v=e.memoizedState,o.state=v,Ul(e,r,o,s);var k=e.memoizedState;u!==p||v!==k||qt.current||mr?(typeof N=="function"&&(bd(e,n,N,r),k=e.memoizedState),(d=mr||Dp(e,n,d,r,v,k,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return Id(t,e,n,r,i,s)}function Id(t,e,n,r,s,i){nv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Sp(e,n,!1),Zn(t,e,i);r=e.stateNode,Y1.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,u,i)):Vt(t,e,u,i),e.memoizedState=r.state,s&&Sp(e,n,!0),e.child}function rv(t){var e=t.stateNode;e.pendingContext?Tp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tp(t,e.context,!1),Bh(t,e.containerInfo)}function Bp(t,e,n,r,s){return ti(),Mh(s),e.flags|=256,Vt(t,e,n,r),e.child}var Cd={dehydrated:null,treeContext:null,retryLane:0};function Ad(t){return{baseLanes:t,cachePool:null,transitions:null}}function sv(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ne(Ve,s&1),t===null)return _d(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nu(o,r,0,null),t=is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ad(n),e.memoizedState=Cd,t):Yh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return X1(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Cr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Cr(u,i):(i=is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ad(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cd,r}return i=t.child,t=i.sibling,r=Cr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yh(t,e){return e=Nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ha(t,e,n,r){return r!==null&&Mh(r),ni(e,t.child,null,n),t=Yh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function X1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jc(Error(U(422))),Ha(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nu({mode:"visible",children:r.children},s,0,null),i=is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=Ad(o),e.memoizedState=Cd,i);if(!(e.mode&1))return Ha(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(U(419)),r=jc(i,r,void 0),Ha(t,e,o,r)}if(u=(o&t.childLanes)!==0,$t||u){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jn(t,s),Tn(r,t,s,-1))}return nf(),r=jc(Error(U(421))),Ha(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Jt=Nr(s.nextSibling),en=e,Pe=!0,bn=null,t!==null&&(un[cn++]=Wn,un[cn++]=Kn,un[cn++]=us,Wn=t.id,Kn=t.overflow,us=e),e=Yh(e,r.children),e.flags|=4096,e)}function $p(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ed(t.return,e,n)}function kc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function iv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$p(t,n,e);else if(t.tag===19)$p(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),kc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}kc(e,!0,n,null,i);break;case"together":kc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J1(t,e,n){switch(e.tag){case 3:rv(e),ti();break;case 5:j0(e);break;case 1:Ht(e.type)&&Vl(e);break;case 4:Bh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ne(Ol,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?sv(t,e,n):(Ne(Ve,Ve.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);Ne(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,tv(t,e,n)}return Zn(t,e,n)}var ov,Rd,av,lv;ov=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rd=function(){};av=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ns(Vn.current);var i=null;switch(n){case"input":s=Jc(t,s),r=Jc(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=td(t,s),r=td(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pl)}rd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ie("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};lv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bi(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z1(t,e,n){var r=e.pendingProps;switch(Vh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Ht(e.type)&&Dl(),St(e),null;case 3:return r=e.stateNode,ri(),Re(qt),Re(kt),qh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(Od(bn),bn=null))),Rd(t,e),St(e),null;case 5:$h(e);var s=ns(Ao.current);if(n=e.type,t!==null&&e.stateNode!=null)av(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return St(e),null}if(t=ns(Vn.current),$a(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pn]=e,r[Io]=i,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(s=0;s<Gi.length;s++)Ie(Gi[s],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Jm(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":ep(r,i),Ie("invalid",r)}rd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,u,t),s=["children",""+u]):yo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Da(r),Zm(r,i,!0);break;case"textarea":Da(r),tp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=My(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[Io]=r,ov(t,e,!1,!1),e.stateNode=t;e:{switch(o=sd(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),s=r;break;case"iframe":case"object":case"embed":Ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<Gi.length;s++)Ie(Gi[s],t);s=r;break;case"source":Ie("error",t),s=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),s=r;break;case"details":Ie("toggle",t),s=r;break;case"input":Jm(t,r),s=Jc(t,r),Ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":ep(t,r),s=td(t,r),Ie("invalid",t);break;default:s=r}rd(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Fy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ly(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vo(t,c):typeof c=="number"&&vo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ie("scroll",t):c!=null&&wh(t,i,c,o))}switch(n){case"input":Da(t),Zm(t,r,!1);break;case"textarea":Da(t),tp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$s(t,!!r.multiple,i,!1):r.defaultValue!=null&&$s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)lv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ns(Ao.current),ns(Vn.current),$a(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(i=r.nodeValue!==n)&&(t=en,t!==null))switch(t.tag){case 3:Ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return St(e),null;case 13:if(Re(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Jt!==null&&e.mode&1&&!(e.flags&128))S0(),ti(),e.flags|=98560,i=!1;else if(i=$a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Pn]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),i=!1}else bn!==null&&(Od(bn),bn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?et===0&&(et=3):nf())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return ri(),Rd(t,e),t===null&&To(e.stateNode.containerInfo),St(e),null;case 10:return Fh(e.type._context),St(e),null;case 17:return Ht(e.type)&&Dl(),St(e),null;case 19:if(Re(Ve),i=e.memoizedState,i===null)return St(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Bi(i,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zl(t),o!==null){for(e.flags|=128,Bi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&He()>ii&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304)}else{if(!r)if(t=zl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return St(e),null}else 2*He()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=He(),e.sibling=null,n=Ve.current,Ne(Ve,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return tf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function eE(t,e){switch(Vh(e),e.tag){case 1:return Ht(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),Re(qt),Re(kt),qh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $h(e),null;case 13:if(Re(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Ve),null;case 4:return ri(),null;case 10:return Fh(e.type._context),null;case 22:case 23:return tf(),null;case 24:return null;default:return null}}var Wa=!1,At=!1,tE=typeof WeakSet=="function"?WeakSet:Set,K=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function jd(t,e,n){try{n()}catch(r){Be(t,e,r)}}var qp=!1;function nE(t,e){if(md=Rl,t=f0(),Ph(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,m=0,p=t,v=null;t:for(;;){for(var N;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(N=p.firstChild)!==null;)v=p,p=N;for(;;){if(p===t)break t;if(v===n&&++d===s&&(u=o),v===i&&++m===r&&(c=o),(N=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=N}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:t,selectionRange:n},Rl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,R=k.memoizedState,E=e.stateNode,b=E.getSnapshotBeforeUpdate(e.elementType===e.type?C:_n(e.type,C),R);E.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Be(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return k=qp,qp=!1,k}function oo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&jd(e,n,i)}s=s.next}while(s!==r)}}function Eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uv(t){var e=t.alternate;e!==null&&(t.alternate=null,uv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Io],delete e[vd],delete e[O1],delete e[F1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cv(t){return t.tag===5||t.tag===3||t.tag===4}function Hp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pl));else if(r!==4&&(t=t.child,t!==null))for(Pd(t,e,n),t=t.sibling;t!==null;)Pd(t,e,n),t=t.sibling}function Dd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dd(t,e,n),t=t.sibling;t!==null;)Dd(t,e,n),t=t.sibling}var dt=null,En=!1;function dr(t,e,n){for(n=n.child;n!==null;)dv(t,e,n),n=n.sibling}function dv(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(mu,n)}catch{}switch(n.tag){case 5:At||Us(n,e);case 6:var r=dt,s=En;dt=null,dr(t,e,n),dt=r,En=s,dt!==null&&(En?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(En?(t=dt,n=n.stateNode,t.nodeType===8?Tc(t.parentNode,n):t.nodeType===1&&Tc(t,n),Eo(t)):Tc(dt,n.stateNode));break;case 4:r=dt,s=En,dt=n.stateNode.containerInfo,En=!0,dr(t,e,n),dt=r,En=s;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jd(n,e,o),s=s.next}while(s!==r)}dr(t,e,n);break;case 1:if(!At&&(Us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Be(n,e,u)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,dr(t,e,n),At=r):dr(t,e,n);break;default:dr(t,e,n)}}function Wp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tE),e.forEach(function(r){var s=dE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:dt=u.stateNode,En=!1;break e;case 3:dt=u.stateNode.containerInfo,En=!0;break e;case 4:dt=u.stateNode.containerInfo,En=!0;break e}u=u.return}if(dt===null)throw Error(U(160));dv(i,o,s),dt=null,En=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Be(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hv(e,t),e=e.sibling}function hv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wn(e,t),jn(t),r&4){try{oo(3,t,t.return),Eu(3,t)}catch(C){Be(t,t.return,C)}try{oo(5,t,t.return)}catch(C){Be(t,t.return,C)}}break;case 1:wn(e,t),jn(t),r&512&&n!==null&&Us(n,n.return);break;case 5:if(wn(e,t),jn(t),r&512&&n!==null&&Us(n,n.return),t.flags&32){var s=t.stateNode;try{vo(s,"")}catch(C){Be(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Dy(s,i),sd(u,o);var d=sd(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?Fy(s,p):m==="dangerouslySetInnerHTML"?Ly(s,p):m==="children"?vo(s,p):wh(s,m,p,d)}switch(u){case"input":Zc(s,i);break;case"textarea":Vy(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?$s(s,!!i.multiple,N,!1):v!==!!i.multiple&&(i.defaultValue!=null?$s(s,!!i.multiple,i.defaultValue,!0):$s(s,!!i.multiple,i.multiple?[]:"",!1))}s[Io]=i}catch(C){Be(t,t.return,C)}}break;case 6:if(wn(e,t),jn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Be(t,t.return,C)}}break;case 3:if(wn(e,t),jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Eo(e.containerInfo)}catch(C){Be(t,t.return,C)}break;case 4:wn(e,t),jn(t);break;case 13:wn(e,t),jn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zh=He())),r&4&&Wp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(At=(d=At)||m,wn(e,t),At=d):wn(e,t),jn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(K=t,m=t.child;m!==null;){for(p=K=m;K!==null;){switch(v=K,N=v.child,v.tag){case 0:case 11:case 14:case 15:oo(4,v,v.return);break;case 1:Us(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(C){Be(r,n,C)}}break;case 5:Us(v,v.return);break;case 22:if(v.memoizedState!==null){Qp(p);continue}}N!==null?(N.return=v,K=N):Qp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Oy("display",o))}catch(C){Be(t,t.return,C)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(C){Be(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:wn(e,t),jn(t),r&4&&Wp(t);break;case 21:break;default:wn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vo(s,""),r.flags&=-33);var i=Hp(t);Dd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Hp(t);Pd(t,u,o);break;default:throw Error(U(161))}}catch(c){Be(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rE(t,e,n){K=t,fv(t)}function fv(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wa;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||At;u=Wa;var d=At;if(Wa=o,(At=c)&&!d)for(K=s;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?Gp(s):c!==null?(c.return=o,K=c):Gp(s);for(;i!==null;)K=i,fv(i),i=i.sibling;K=s,Wa=u,At=d}Kp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Kp(t)}}function Kp(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jp(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&Eo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}At||e.flags&512&&kd(e)}catch(v){Be(e,e.return,v)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Qp(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Gp(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eu(4,e)}catch(c){Be(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Be(e,s,c)}}var i=e.return;try{kd(e)}catch(c){Be(e,i,c)}break;case 5:var o=e.return;try{kd(e)}catch(c){Be(e,o,c)}}}catch(c){Be(e,e.return,c)}if(e===t){K=null;break}var u=e.sibling;if(u!==null){u.return=e.return,K=u;break}K=e.return}}var sE=Math.ceil,ql=sr.ReactCurrentDispatcher,Xh=sr.ReactCurrentOwner,hn=sr.ReactCurrentBatchConfig,de=0,it=null,Qe=null,mt=0,Xt=0,zs=Fr(0),et=0,Po=null,ds=0,bu=0,Jh=0,ao=null,zt=null,Zh=0,ii=1/0,qn=null,Hl=!1,Vd=null,Sr=null,Ka=!1,xr=null,Wl=0,lo=0,Md=null,gl=-1,yl=0;function Mt(){return de&6?He():gl!==-1?gl:gl=He()}function Ir(t){return t.mode&1?de&2&&mt!==0?mt&-mt:z1.transition!==null?(yl===0&&(yl=Xy()),yl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:s0(t.type)),t):1}function Tn(t,e,n,r){if(50<lo)throw lo=0,Md=null,Error(U(185));Xo(t,n,r),(!(de&2)||t!==it)&&(t===it&&(!(de&2)&&(bu|=n),et===4&&yr(t,mt)),Wt(t,r),n===1&&de===0&&!(e.mode&1)&&(ii=He()+500,xu&&Ur()))}function Wt(t,e){var n=t.callbackNode;z_(t,e);var r=Al(t,t===it?mt:0);if(r===0)n!==null&&sp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sp(n),e===1)t.tag===0?U1(Yp.bind(null,t)):b0(Yp.bind(null,t)),M1(function(){!(de&6)&&Ur()}),n=null;else{switch(Jy(r)){case 1:n=Th;break;case 4:n=Gy;break;case 16:n=Cl;break;case 536870912:n=Yy;break;default:n=Cl}n=_v(n,mv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mv(t,e){if(gl=-1,yl=0,de&6)throw Error(U(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=Al(t,t===it?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kl(t,r);else{e=r;var s=de;de|=2;var i=gv();(it!==t||mt!==e)&&(qn=null,ii=He()+500,ss(t,e));do try{aE();break}catch(u){pv(t,u)}while(!0);Oh(),ql.current=i,de=s,Qe!==null?e=0:(it=null,mt=0,e=et)}if(e!==0){if(e===2&&(s=ud(t),s!==0&&(r=s,e=Ld(t,s))),e===1)throw n=Po,ss(t,0),yr(t,r),Wt(t,He()),n;if(e===6)yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!iE(s)&&(e=Kl(t,r),e===2&&(i=ud(t),i!==0&&(r=i,e=Ld(t,i))),e===1))throw n=Po,ss(t,0),yr(t,r),Wt(t,He()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Jr(t,zt,qn);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=Zh+500-He(),10<e)){if(Al(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yd(Jr.bind(null,t,zt,qn),e);break}Jr(t,zt,qn);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sE(r/1960))-r,10<r){t.timeoutHandle=yd(Jr.bind(null,t,zt,qn),r);break}Jr(t,zt,qn);break;case 5:Jr(t,zt,qn);break;default:throw Error(U(329))}}}return Wt(t,He()),t.callbackNode===n?mv.bind(null,t):null}function Ld(t,e){var n=ao;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=Kl(t,e),t!==2&&(e=zt,zt=n,e!==null&&Od(e)),t}function Od(t){zt===null?zt=t:zt.push.apply(zt,t)}function iE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Jh,e&=~bu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function Yp(t){if(de&6)throw Error(U(327));Qs();var e=Al(t,0);if(!(e&1))return Wt(t,He()),null;var n=Kl(t,e);if(t.tag!==0&&n===2){var r=ud(t);r!==0&&(e=r,n=Ld(t,r))}if(n===1)throw n=Po,ss(t,0),yr(t,e),Wt(t,He()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,zt,qn),Wt(t,He()),null}function ef(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(ii=He()+500,xu&&Ur())}}function hs(t){xr!==null&&xr.tag===0&&!(de&6)&&Qs();var e=de;de|=1;var n=hn.transition,r=ye;try{if(hn.transition=null,ye=1,t)return t()}finally{ye=r,hn.transition=n,de=e,!(de&6)&&Ur()}}function tf(){Xt=zs.current,Re(zs)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,V1(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Vh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:ri(),Re(qt),Re(kt),qh();break;case 5:$h(r);break;case 4:ri();break;case 13:Re(Ve);break;case 19:Re(Ve);break;case 10:Fh(r.type._context);break;case 22:case 23:tf()}n=n.return}if(it=t,Qe=t=Cr(t.current,null),mt=Xt=e,et=0,Po=null,Jh=bu=ds=0,zt=ao=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ts=null}return t}function pv(t,e){do{var n=Qe;try{if(Oh(),fl.current=$l,Bl){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bl=!1}if(cs=0,rt=Je=Me=null,io=!1,Ro=0,Xh.current=null,n===null||n.return===null){et=1,Po=e,Qe=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=mt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var N=Lp(o);if(N!==null){N.flags&=-257,Op(N,o,u,i,e),N.mode&1&&Mp(i,d,e),e=N,c=d;var k=e.updateQueue;if(k===null){var C=new Set;C.add(c),e.updateQueue=C}else k.add(c);break e}else{if(!(e&1)){Mp(i,d,e),nf();break e}c=Error(U(426))}}else if(Pe&&u.mode&1){var R=Lp(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Op(R,o,u,i,e),Mh(si(c,u));break e}}i=c=si(c,u),et!==4&&(et=2),ao===null?ao=[i]:ao.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=J0(i,c,e);Rp(i,E);break e;case 1:u=c;var b=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Sr===null||!Sr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Z0(i,u,e);Rp(i,D);break e}}i=i.return}while(i!==null)}vv(n)}catch(M){e=M,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function gv(){var t=ql.current;return ql.current=$l,t===null?$l:t}function nf(){(et===0||et===3||et===2)&&(et=4),it===null||!(ds&268435455)&&!(bu&268435455)||yr(it,mt)}function Kl(t,e){var n=de;de|=2;var r=gv();(it!==t||mt!==e)&&(qn=null,ss(t,e));do try{oE();break}catch(s){pv(t,s)}while(!0);if(Oh(),de=n,ql.current=r,Qe!==null)throw Error(U(261));return it=null,mt=0,et}function oE(){for(;Qe!==null;)yv(Qe)}function aE(){for(;Qe!==null&&!k_();)yv(Qe)}function yv(t){var e=wv(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?vv(t):Qe=e,Xh.current=null}function vv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eE(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Qe=null;return}}else if(n=Z1(n,e,Xt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);et===0&&(et=5)}function Jr(t,e,n){var r=ye,s=hn.transition;try{hn.transition=null,ye=1,lE(t,e,n,r)}finally{hn.transition=s,ye=r}return null}function lE(t,e,n,r){do Qs();while(xr!==null);if(de&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(B_(t,i),t===it&&(Qe=it=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ka||(Ka=!0,_v(Cl,function(){return Qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=hn.transition,hn.transition=null;var o=ye;ye=1;var u=de;de|=4,Xh.current=null,nE(t,n),hv(n,t),C1(pd),Rl=!!md,pd=md=null,t.current=n,rE(n),P_(),de=u,ye=o,hn.transition=i}else t.current=n;if(Ka&&(Ka=!1,xr=t,Wl=s),i=t.pendingLanes,i===0&&(Sr=null),M_(n.stateNode),Wt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=Vd,Vd=null,t;return Wl&1&&t.tag!==0&&Qs(),i=t.pendingLanes,i&1?t===Md?lo++:(lo=0,Md=t):lo=0,Ur(),null}function Qs(){if(xr!==null){var t=Jy(Wl),e=hn.transition,n=ye;try{if(hn.transition=null,ye=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,Wl=0,de&6)throw Error(U(331));var s=de;for(de|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(K=d;K!==null;){var m=K;switch(m.tag){case 0:case 11:case 15:oo(8,m,i)}var p=m.child;if(p!==null)p.return=m,K=p;else for(;K!==null;){m=K;var v=m.sibling,N=m.return;if(uv(m),m===d){K=null;break}if(v!==null){v.return=N,K=v;break}K=N}}}var k=i.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,K=E;break e}K=i.return}}var b=t.current;for(K=b;K!==null;){o=K;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,K=T;else e:for(o=b;K!==null;){if(u=K,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Eu(9,u)}}catch(M){Be(u,u.return,M)}if(u===o){K=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,K=D;break e}K=u.return}}if(de=s,Ur(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(mu,t)}catch{}r=!0}return r}finally{ye=n,hn.transition=e}}return!1}function Xp(t,e,n){e=si(n,e),e=J0(t,e,1),t=Tr(t,e,1),e=Mt(),t!==null&&(Xo(t,1,e),Wt(t,e))}function Be(t,e,n){if(t.tag===3)Xp(t,t,n);else for(;e!==null;){if(e.tag===3){Xp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sr===null||!Sr.has(r))){t=si(n,t),t=Z0(e,t,1),e=Tr(e,t,1),t=Mt(),e!==null&&(Xo(e,1,t),Wt(e,t));break}}e=e.return}}function uE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(mt&n)===n&&(et===4||et===3&&(mt&130023424)===mt&&500>He()-Zh?ss(t,0):Jh|=n),Wt(t,e)}function xv(t,e){e===0&&(t.mode&1?(e=La,La<<=1,!(La&130023424)&&(La=4194304)):e=1);var n=Mt();t=Jn(t,e),t!==null&&(Xo(t,e,n),Wt(t,n))}function cE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xv(t,n)}function dE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),xv(t,n)}var wv;wv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,J1(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Pe&&e.flags&1048576&&N0(e,Ll,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pl(t,e),t=e.pendingProps;var s=ei(e,kt.current);Ks(e,n),s=Wh(null,e,r,t,s,n);var i=Kh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(i=!0,Vl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zh(e),s.updater=_u,e.stateNode=s,s._reactInternals=e,Nd(e,r,t,n),e=Id(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&Dh(e),Vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fE(r),t=_n(r,t),s){case 0:e=Sd(null,e,r,t,n);break e;case 1:e=zp(null,e,r,t,n);break e;case 11:e=Fp(null,e,r,t,n);break e;case 14:e=Up(null,e,r,_n(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),Sd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),zp(t,e,r,s,n);case 3:e:{if(rv(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,R0(t,e),Ul(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(U(423)),e),e=Bp(t,e,r,n,s);break e}else if(r!==s){s=si(Error(U(424)),e),e=Bp(t,e,r,n,s);break e}else for(Jt=Nr(e.stateNode.containerInfo.firstChild),en=e,Pe=!0,bn=null,n=C0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=Zn(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return j0(e),t===null&&_d(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gd(r,s)?o=null:i!==null&&gd(r,i)&&(e.flags|=32),nv(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&_d(e),null;case 13:return sv(t,e,n);case 4:return Bh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),Fp(t,e,r,s,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ne(Ol,r._currentValue),r._currentValue=o,i!==null)if(Sn(i.value,o)){if(i.children===s.children&&!qt.current){e=Zn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Qn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ed(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ed(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ks(e,n),s=mn(s),r=r(s),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,s=_n(r,e.pendingProps),s=_n(r.type,s),Up(t,e,r,s,n);case 15:return ev(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),pl(t,e),e.tag=1,Ht(r)?(t=!0,Vl(e)):t=!1,Ks(e,n),X0(e,r,s),Nd(e,r,s,n),Id(null,e,r,!0,t,n);case 19:return iv(t,e,n);case 22:return tv(t,e,n)}throw Error(U(156,e.tag))};function _v(t,e){return Qy(t,e)}function hE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,e,n,r){return new hE(t,e,n,r)}function rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fE(t){if(typeof t=="function")return rf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eh)return 11;if(t===bh)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case js:return is(n.children,s,i,e);case _h:o=8,s|=8;break;case Qc:return t=dn(12,n,e,s|2),t.elementType=Qc,t.lanes=i,t;case Gc:return t=dn(13,n,e,s),t.elementType=Gc,t.lanes=i,t;case Yc:return t=dn(19,n,e,s),t.elementType=Yc,t.lanes=i,t;case jy:return Nu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ay:o=10;break e;case Ry:o=9;break e;case Eh:o=11;break e;case bh:o=14;break e;case fr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=dn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function is(t,e,n,r){return t=dn(7,t,r,e),t.lanes=n,t}function Nu(t,e,n,r){return t=dn(22,t,r,e),t.elementType=jy,t.lanes=n,t.stateNode={isHidden:!1},t}function Pc(t,e,n){return t=dn(6,t,null,e),t.lanes=n,t}function Dc(t,e,n){return e=dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mc(0),this.expirationTimes=mc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sf(t,e,n,r,s,i,o,u,c){return t=new mE(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=dn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(i),t}function pE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ev(t){if(!t)return Pr;t=t._reactInternals;e:{if(ys(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ht(n))return E0(t,n,e)}return e}function bv(t,e,n,r,s,i,o,u,c){return t=sf(n,r,!0,t,s,i,o,u,c),t.context=Ev(null),n=t.current,r=Mt(),s=Ir(n),i=Qn(r,s),i.callback=e??null,Tr(n,i,s),t.current.lanes=s,Xo(t,s,r),Wt(t,r),t}function Tu(t,e,n,r){var s=e.current,i=Mt(),o=Ir(s);return n=Ev(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tr(s,e,o),t!==null&&(Tn(t,s,o,i),hl(t,s,o)),o}function Ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function of(t,e){Jp(t,e),(t=t.alternate)&&Jp(t,e)}function gE(){return null}var Nv=typeof reportError=="function"?reportError:function(t){console.error(t)};function af(t){this._internalRoot=t}Su.prototype.render=af.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Tu(t,e,null,null)};Su.prototype.unmount=af.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){Tu(null,t,null,null)}),e[Xn]=null}};function Su(t){this._internalRoot=t}Su.prototype.unstable_scheduleHydration=function(t){if(t){var e=t0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&r0(t)}};function lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Iu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zp(){}function yE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ql(o);i.call(d)}}var o=bv(e,r,t,0,null,!1,!1,"",Zp);return t._reactRootContainer=o,t[Xn]=o.current,To(t.nodeType===8?t.parentNode:t),hs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Ql(c);u.call(d)}}var c=sf(t,0,!1,null,null,!1,!1,"",Zp);return t._reactRootContainer=c,t[Xn]=c.current,To(t.nodeType===8?t.parentNode:t),hs(function(){Tu(e,c,n,r)}),c}function Cu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Ql(o);u.call(c)}}Tu(e,o,t,s)}else o=yE(n,e,t,s,r);return Ql(o)}Zy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qi(e.pendingLanes);n!==0&&(Sh(e,n|1),Wt(e,He()),!(de&6)&&(ii=He()+500,Ur()))}break;case 13:hs(function(){var r=Jn(t,1);if(r!==null){var s=Mt();Tn(r,t,1,s)}}),of(t,1)}};Ih=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=Mt();Tn(e,t,134217728,n)}of(t,134217728)}};e0=function(t){if(t.tag===13){var e=Ir(t),n=Jn(t,e);if(n!==null){var r=Mt();Tn(n,t,e,r)}of(t,e)}};t0=function(){return ye};n0=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};od=function(t,e,n){switch(e){case"input":if(Zc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=vu(r);if(!s)throw Error(U(90));Py(r),Zc(r,s)}}}break;case"textarea":Vy(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};By=ef;$y=hs;var vE={usingClientEntryPoint:!1,Events:[Zo,Vs,vu,Uy,zy,ef]},$i={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xE={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wy(t),t===null?null:t.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||gE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{mu=Qa.inject(xE),Dn=Qa}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vE;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lf(e))throw Error(U(200));return pE(t,e,null,n)};nn.createRoot=function(t,e){if(!lf(t))throw Error(U(299));var n=!1,r="",s=Nv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sf(t,1,!1,null,null,n,!1,r,s),t[Xn]=e.current,To(t.nodeType===8?t.parentNode:t),new af(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Wy(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return hs(t)};nn.hydrate=function(t,e,n){if(!Iu(e))throw Error(U(200));return Cu(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!lf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Nv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bv(e,null,t,1,n??null,s,!1,i,o),t[Xn]=e.current,To(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Su(e)};nn.render=function(t,e,n){if(!Iu(e))throw Error(U(200));return Cu(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Iu(t))throw Error(U(40));return t._reactRootContainer?(hs(function(){Cu(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};nn.unstable_batchedUpdates=ef;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Iu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Cu(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function Tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tv)}catch(t){console.error(t)}}Tv(),Ty.exports=nn;var Bs=Ty.exports,Sv,eg=Bs;Sv=eg.createRoot,eg.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),je=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...d},m)=>j.createElement("svg",{ref:m,...wE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${_E(t)}`,u].join(" "),...d},[...e.map(([p,v])=>j.createElement(p,v)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=je("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=je("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=je("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=je("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=je("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=je("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=je("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=je("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=je("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=je("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=je("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=je("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),TE=({children:t,currentPage:e,onPageChange:n})=>{const r=[{id:"dashboard",name:"대시보드",icon:Gs},{id:"demand-register",name:"수요처 등록",icon:Mo},{id:"demand-list",name:"수요처 관리",icon:os},{id:"performance-input",name:"실적 입력",icon:Ud},{id:"performance-list",name:"실적 조회",icon:Dr},{id:"budget-usage",name:"예산 사용 내역",icon:os},{id:"manual",name:"사용매뉴얼",icon:Fd}];return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[l.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:l.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"관리자 대시보드"})}),l.jsx("nav",{className:"mt-8",children:l.jsx("div",{className:"space-y-1 px-4",children:r.map(s=>{const i=s.icon;return l.jsxs("button",{onClick:()=>n(s.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${e===s.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[l.jsx(i,{className:"mr-3 h-5 w-5"}),s.name]},s.id)})})})]}),l.jsx("div",{className:"pl-64",children:l.jsx("main",{className:"p-8",children:t})})]})};function SE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return j.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Ru=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yi(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function df(t){return"nodeType"in t}function Qt(t){var e,n;return t?yi(t)?t:df(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function hf(t){const{Document:e}=Qt(t);return t instanceof e}function ta(t){return yi(t)?!1:t instanceof Qt(t).HTMLElement}function kv(t){return t instanceof Qt(t).SVGElement}function vi(t){return t?yi(t)?t.document:df(t)?hf(t)?t:ta(t)||kv(t)?t.ownerDocument:document:document:document}const On=Ru?j.useLayoutEffect:j.useEffect;function ff(t){const e=j.useRef(t);return On(()=>{e.current=t}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function IE(){const t=j.useRef(null),e=j.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=j.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Oo(t,e){e===void 0&&(e=[t]);const n=j.useRef(t);return On(()=>{n.current!==t&&(n.current=t)},e),n}function na(t,e){const n=j.useRef();return j.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Yl(t){const e=ff(t),n=j.useRef(null),r=j.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function zd(t){const e=j.useRef();return j.useEffect(()=>{e.current=t},[t]),e.current}let Vc={};function ra(t,e){return j.useMemo(()=>{if(e)return e;const n=Vc[t]==null?0:Vc[t]+1;return Vc[t]=n,t+"-"+n},[t,e])}function Pv(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const u=Object.entries(o);for(const[c,d]of u){const m=i[c];m!=null&&(i[c]=m+t*d)}return i},{...e})}}const Ys=Pv(1),Xl=Pv(-1);function CE(t){return"clientX"in t&&"clientY"in t}function mf(t){if(!t)return!1;const{KeyboardEvent:e}=Qt(t.target);return e&&t instanceof e}function AE(t){if(!t)return!1;const{TouchEvent:e}=Qt(t.target);return e&&t instanceof e}function Bd(t){if(AE(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return CE(t)?{x:t.clientX,y:t.clientY}:null}const Fo=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Fo.Translate.toString(t),Fo.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),ng="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function RE(t){return t.matches(ng)?t:t.querySelector(ng)}const jE={display:"none"};function kE(t){let{id:e,value:n}=t;return Ut.createElement("div",{id:e,style:jE},n)}function PE(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ut.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function DE(){const[t,e]=j.useState("");return{announce:j.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Dv=j.createContext(null);function VE(t){const e=j.useContext(Dv);j.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function ME(){const[t]=j.useState(()=>new Set),e=j.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[j.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var u;return(u=o[s])==null?void 0:u.call(o,i)})},[t]),e]}const LE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},OE={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function FE(t){let{announcements:e=OE,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=LE}=t;const{announce:i,announcement:o}=DE(),u=ra("DndLiveRegion"),[c,d]=j.useState(!1);if(j.useEffect(()=>{d(!0)},[]),VE(j.useMemo(()=>({onDragStart(p){let{active:v}=p;i(e.onDragStart({active:v}))},onDragMove(p){let{active:v,over:N}=p;e.onDragMove&&i(e.onDragMove({active:v,over:N}))},onDragOver(p){let{active:v,over:N}=p;i(e.onDragOver({active:v,over:N}))},onDragEnd(p){let{active:v,over:N}=p;i(e.onDragEnd({active:v,over:N}))},onDragCancel(p){let{active:v,over:N}=p;i(e.onDragCancel({active:v,over:N}))}}),[i,e])),!c)return null;const m=Ut.createElement(Ut.Fragment,null,Ut.createElement(kE,{id:r,value:s.draggable}),Ut.createElement(PE,{id:u,announcement:o}));return n?Bs.createPortal(m,n):m}var Ze;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ze||(Ze={}));function Jl(){}function UE(t,e){return j.useMemo(()=>({sensor:t,options:{}}),[t,e])}function zE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return j.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const In=Object.freeze({x:0,y:0});function BE(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function $E(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function qE(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function HE(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function rg(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const WE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=rg(e,e.left,e.top),i=[];for(const o of r){const{id:u}=o,c=n.get(u);if(c){const d=BE(rg(c),s);i.push({id:u,data:{droppableContainer:o,value:d}})}}return i.sort($E)};function KE(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,u=i-n;if(r<s&&n<i){const c=e.width*e.height,d=t.width*t.height,m=o*u,p=m/(c+d-m);return Number(p.toFixed(4))}return 0}const QE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,u=n.get(o);if(u){const c=KE(u,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(qE)};function GE(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Vv(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:In}function YE(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,u)=>({...o,top:o.top+t*u.y,bottom:o.bottom+t*u.y,left:o.left+t*u.x,right:o.right+t*u.x}),{...n})}}const XE=YE(1);function JE(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ZE(t,e,n){const r=JE(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:u}=r,c=t.left-o-(1-s)*parseFloat(n),d=t.top-u-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),m=s?t.width/s:t.width,p=i?t.height/i:t.height;return{width:m,height:p,top:d,right:c+m,bottom:d+p,left:c}}const eb={ignoreTransform:!1};function xi(t,e){e===void 0&&(e=eb);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:m}=Qt(t).getComputedStyle(t);d&&(n=ZE(n,d,m))}const{top:r,left:s,width:i,height:o,bottom:u,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:u,right:c}}function sg(t){return xi(t,{ignoreTransform:!0})}function tb(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function nb(t,e){return e===void 0&&(e=Qt(t).getComputedStyle(t)),e.position==="fixed"}function rb(t,e){e===void 0&&(e=Qt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function pf(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(hf(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ta(s)||kv(s)||n.includes(s))return n;const i=Qt(t).getComputedStyle(s);return s!==t&&rb(s,i)&&n.push(s),nb(s,i)?n:r(s.parentNode)}return t?r(t):n}function Mv(t){const[e]=pf(t,1);return e??null}function Mc(t){return!Ru||!t?null:yi(t)?t:df(t)?hf(t)||t===vi(t).scrollingElement?window:ta(t)?t:null:null}function Lv(t){return yi(t)?t.scrollX:t.scrollLeft}function Ov(t){return yi(t)?t.scrollY:t.scrollTop}function $d(t){return{x:Lv(t),y:Ov(t)}}var st;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(st||(st={}));function Fv(t){return!Ru||!t?!1:t===document.scrollingElement}function Uv(t){const e={x:0,y:0},n=Fv(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:u,maxScroll:r,minScroll:e}}const sb={x:.2,y:.2};function ib(t,e,n,r,s){let{top:i,left:o,right:u,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=sb);const{isTop:d,isBottom:m,isLeft:p,isRight:v}=Uv(t),N={x:0,y:0},k={x:0,y:0},C={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+C.height?(N.y=st.Backward,k.y=r*Math.abs((e.top+C.height-i)/C.height)):!m&&c>=e.bottom-C.height&&(N.y=st.Forward,k.y=r*Math.abs((e.bottom-C.height-c)/C.height)),!v&&u>=e.right-C.width?(N.x=st.Forward,k.x=r*Math.abs((e.right-C.width-u)/C.width)):!p&&o<=e.left+C.width&&(N.x=st.Backward,k.x=r*Math.abs((e.left+C.width-o)/C.width)),{direction:N,speed:k}}function ob(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function zv(t){return t.reduce((e,n)=>Ys(e,$d(n)),In)}function ab(t){return t.reduce((e,n)=>e+Lv(n),0)}function lb(t){return t.reduce((e,n)=>e+Ov(n),0)}function ub(t,e){if(e===void 0&&(e=xi),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Mv(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const cb=[["x",["left","right"],ab],["y",["top","bottom"],lb]];class gf{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=pf(n),s=zv(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,u]of cb)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=u(r),m=s[i]-d;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class uo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function db(t){const{EventTarget:e}=Qt(t);return t instanceof e?t:vi(t)}function Lc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var ln;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ln||(ln={}));function ig(t){t.preventDefault()}function hb(t){t.stopPropagation()}var pe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(pe||(pe={}));const Bv={start:[pe.Space,pe.Enter],cancel:[pe.Esc],end:[pe.Space,pe.Enter,pe.Tab]},fb=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case pe.Right:return{...n,x:n.x+25};case pe.Left:return{...n,x:n.x-25};case pe.Down:return{...n,y:n.y+25};case pe.Up:return{...n,y:n.y-25}}};class $v{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new uo(vi(n)),this.windowListeners=new uo(Qt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ln.Resize,this.handleCancel),this.windowListeners.add(ln.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ln.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&ub(r),n(In)}handleKeyDown(e){if(mf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Bv,coordinateGetter:o=fb,scrollBehavior:u="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=r.current,m=d?{x:d.left,y:d.top}:In;this.referenceCoordinates||(this.referenceCoordinates=m);const p=o(e,{active:n,context:r.current,currentCoordinates:m});if(p){const v=Xl(p,m),N={x:0,y:0},{scrollableAncestors:k}=r.current;for(const C of k){const R=e.code,{isTop:E,isRight:b,isLeft:T,isBottom:D,maxScroll:M,minScroll:L}=Uv(C),_=ob(C),y={x:Math.min(R===pe.Right?_.right-_.width/2:_.right,Math.max(R===pe.Right?_.left:_.left+_.width/2,p.x)),y:Math.min(R===pe.Down?_.bottom-_.height/2:_.bottom,Math.max(R===pe.Down?_.top:_.top+_.height/2,p.y))},g=R===pe.Right&&!b||R===pe.Left&&!T,x=R===pe.Down&&!D||R===pe.Up&&!E;if(g&&y.x!==p.x){const S=C.scrollLeft+v.x,A=R===pe.Right&&S<=M.x||R===pe.Left&&S>=L.x;if(A&&!v.y){C.scrollTo({left:S,behavior:u});return}A?N.x=C.scrollLeft-S:N.x=R===pe.Right?C.scrollLeft-M.x:C.scrollLeft-L.x,N.x&&C.scrollBy({left:-N.x,behavior:u});break}else if(x&&y.y!==p.y){const S=C.scrollTop+v.y,A=R===pe.Down&&S<=M.y||R===pe.Up&&S>=L.y;if(A&&!v.x){C.scrollTo({top:S,behavior:u});return}A?N.y=C.scrollTop-S:N.y=R===pe.Down?C.scrollTop-M.y:C.scrollTop-L.y,N.y&&C.scrollBy({top:-N.y,behavior:u});break}}this.handleMove(e,Ys(Xl(p,this.referenceCoordinates),N))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$v.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Bv,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const u=i.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function og(t){return!!(t&&"distance"in t)}function ag(t){return!!(t&&"delay"in t)}class yf{constructor(e,n,r){var s;r===void 0&&(r=db(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=vi(o),this.documentListeners=new uo(this.document),this.listeners=new uo(r),this.windowListeners=new uo(Qt(o)),this.initialCoordinates=(s=Bd(i))!=null?s:In,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ln.Resize,this.handleCancel),this.windowListeners.add(ln.DragStart,ig),this.windowListeners.add(ln.VisibilityChange,this.handleCancel),this.windowListeners.add(ln.ContextMenu,ig),this.documentListeners.add(ln.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ag(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(og(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ln.Click,hb,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ln.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:u}}=i;if(!s)return;const c=(n=Bd(e))!=null?n:In,d=Xl(s,c);if(!r&&u){if(og(u)){if(u.tolerance!=null&&Lc(d,u.tolerance))return this.handleCancel();if(Lc(d,u.distance))return this.handleStart()}if(ag(u)&&Lc(d,u.tolerance))return this.handleCancel();this.handlePending(u,d);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===pe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const mb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class vf extends yf{constructor(e){const{event:n}=e,r=vi(n.target);super(e,mb,r)}}vf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const pb={move:{name:"mousemove"},end:{name:"mouseup"}};var qd;(function(t){t[t.RightClick=2]="RightClick"})(qd||(qd={}));class gb extends yf{constructor(e){super(e,pb,vi(e.event.target))}}gb.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===qd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Oc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yb extends yf{constructor(e){super(e,Oc)}static setup(){return window.addEventListener(Oc.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Oc.move.name,e)};function e(){}}}yb.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var co;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(co||(co={}));var Zl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zl||(Zl={}));function vb(t){let{acceleration:e,activator:n=co.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:u=Zl.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:m,delta:p,threshold:v}=t;const N=wb({delta:p,disabled:!i}),[k,C]=IE(),R=j.useRef({x:0,y:0}),E=j.useRef({x:0,y:0}),b=j.useMemo(()=>{switch(n){case co.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case co.DraggableRect:return s}},[n,s,c]),T=j.useRef(null),D=j.useCallback(()=>{const L=T.current;if(!L)return;const _=R.current.x*E.current.x,y=R.current.y*E.current.y;L.scrollBy(_,y)},[]),M=j.useMemo(()=>u===Zl.TreeOrder?[...d].reverse():d,[u,d]);j.useEffect(()=>{if(!i||!d.length||!b){C();return}for(const L of M){if((r==null?void 0:r(L))===!1)continue;const _=d.indexOf(L),y=m[_];if(!y)continue;const{direction:g,speed:x}=ib(L,y,b,e,v);for(const S of["x","y"])N[S][g[S]]||(x[S]=0,g[S]=0);if(x.x>0||x.y>0){C(),T.current=L,k(D,o),R.current=x,E.current=g;return}}R.current={x:0,y:0},E.current={x:0,y:0},C()},[e,D,r,C,i,o,JSON.stringify(b),JSON.stringify(N),k,d,M,m,JSON.stringify(v)])}const xb={x:{[st.Backward]:!1,[st.Forward]:!1},y:{[st.Backward]:!1,[st.Forward]:!1}};function wb(t){let{delta:e,disabled:n}=t;const r=zd(e);return na(s=>{if(n||!r||!s)return xb;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[st.Backward]:s.x[st.Backward]||i.x===-1,[st.Forward]:s.x[st.Forward]||i.x===1},y:{[st.Backward]:s.y[st.Backward]||i.y===-1,[st.Forward]:s.y[st.Forward]||i.y===1}}},[n,e,r])}function _b(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return na(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function Eb(t,e){return j.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Uo;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Uo||(Uo={}));var Hd;(function(t){t.Optimized="optimized"})(Hd||(Hd={}));const lg=new Map;function bb(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=j.useState(null),{frequency:u,measure:c,strategy:d}=s,m=j.useRef(t),p=R(),v=Oo(p),N=j.useCallback(function(E){E===void 0&&(E=[]),!v.current&&o(b=>b===null?E:b.concat(E.filter(T=>!b.includes(T))))},[v]),k=j.useRef(null),C=na(E=>{if(p&&!n)return lg;if(!E||E===lg||m.current!==t||i!=null){const b=new Map;for(let T of t){if(!T)continue;if(i&&i.length>0&&!i.includes(T.id)&&T.rect.current){b.set(T.id,T.rect.current);continue}const D=T.node.current,M=D?new gf(c(D),D):null;T.rect.current=M,M&&b.set(T.id,M)}return b}return E},[t,i,n,p,c]);return j.useEffect(()=>{m.current=t},[t]),j.useEffect(()=>{p||N()},[n,p]),j.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),j.useEffect(()=>{p||typeof u!="number"||k.current!==null||(k.current=setTimeout(()=>{N(),k.current=null},u))},[u,p,N,...r]),{droppableRects:C,measureDroppableContainers:N,measuringScheduled:i!=null};function R(){switch(d){case Uo.Always:return!1;case Uo.BeforeDragging:return n;default:return!n}}}function qv(t,e){return na(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Nb(t,e){return qv(t,e)}function Tb(t){let{callback:e,disabled:n}=t;const r=ff(e),s=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return j.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ju(t){let{callback:e,disabled:n}=t;const r=ff(e),s=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return j.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Sb(t){return new gf(xi(t),t)}function ug(t,e,n){e===void 0&&(e=Sb);const[r,s]=j.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=c??n)!=null?d:null}const m=e(t);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const o=Tb({callback(c){if(t)for(const d of c){const{type:m,target:p}=d;if(m==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),u=ju({callback:i});return On(()=>{i(),t?(u==null||u.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),o==null||o.disconnect())},[t]),r}function Ib(t){const e=qv(t);return Vv(t,e)}const cg=[];function Cb(t){const e=j.useRef(t),n=na(r=>t?r&&r!==cg&&t&&e.current&&t.parentNode===e.current.parentNode?r:pf(t):cg,[t]);return j.useEffect(()=>{e.current=t},[t]),n}function Ab(t){const[e,n]=j.useState(null),r=j.useRef(t),s=j.useCallback(i=>{const o=Mc(i.target);o&&n(u=>u?(u.set(o,$d(o)),new Map(u)):null)},[]);return j.useEffect(()=>{const i=r.current;if(t!==i){o(i);const u=t.map(c=>{const d=Mc(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,$d(d)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=t}return()=>{o(t),o(i)};function o(u){u.forEach(c=>{const d=Mc(c);d==null||d.removeEventListener("scroll",s)})}},[s,t]),j.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Ys(i,o),In):zv(t):In,[t,e])}function dg(t,e){e===void 0&&(e=[]);const n=j.useRef(null);return j.useEffect(()=>{n.current=null},e),j.useEffect(()=>{const r=t!==In;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Xl(t,n.current):In}function Rb(t){j.useEffect(()=>{if(!Ru)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function jb(t,e){return j.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function Hv(t){return j.useMemo(()=>t?tb(t):null,[t])}const hg=[];function kb(t,e){e===void 0&&(e=xi);const[n]=t,r=Hv(n?Qt(n):null),[s,i]=j.useState(hg);function o(){i(()=>t.length?t.map(c=>Fv(c)?r:new gf(e(c),c)):hg)}const u=ju({callback:o});return On(()=>{u==null||u.disconnect(),o(),t.forEach(c=>u==null?void 0:u.observe(c))},[t]),s}function Pb(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ta(e)?e:t}function Db(t){let{measure:e}=t;const[n,r]=j.useState(null),s=j.useCallback(d=>{for(const{target:m}of d)if(ta(m)){r(p=>{const v=e(m);return p?{...p,width:v.width,height:v.height}:v});break}},[e]),i=ju({callback:s}),o=j.useCallback(d=>{const m=Pb(d);i==null||i.disconnect(),m&&(i==null||i.observe(m)),r(m?e(m):null)},[e,i]),[u,c]=Yl(o);return j.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const Vb=[{sensor:vf,options:{}},{sensor:$v,options:{}}],Mb={current:{}},xl={draggable:{measure:sg},droppable:{measure:sg,strategy:Uo.WhileDragging,frequency:Hd.Optimized},dragOverlay:{measure:xi}};class ho extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Lb={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ho,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Jl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xl,measureDroppableContainers:Jl,windowRect:null,measuringScheduled:!1},Ob={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Jl,draggableNodes:new Map,over:null,measureDroppableContainers:Jl},ku=j.createContext(Ob),Wv=j.createContext(Lb);function Fb(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ho}}}function Ub(t,e){switch(e.type){case Ze.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ze.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ze.DragEnd:case Ze.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ze.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new ho(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Ze.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ho(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Ze.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new ho(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function zb(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=j.useContext(ku),i=zd(r),o=zd(n==null?void 0:n.id);return j.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!mf(i)||document.activeElement===i.target)return;const u=s.get(o);if(!u)return;const{activatorNode:c,node:d}=u;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const m of[c.current,d.current]){if(!m)continue;const p=RE(m);if(p){p.focus();break}}})}},[r,e,s,o,i]),null}function Bb(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function $b(t){return j.useMemo(()=>({draggable:{...xl.draggable,...t==null?void 0:t.draggable},droppable:{...xl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...xl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function qb(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=j.useRef(!1),{x:o,y:u}=typeof s=="boolean"?{x:s,y:s}:s;On(()=>{if(!o&&!u||!e){i.current=!1;return}if(i.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const m=n(d),p=Vv(m,r);if(o||(p.x=0),u||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=Mv(d);v&&v.scrollBy({top:p.y,left:p.x})}},[e,o,u,r,n])}const Kv=j.createContext({...In,scaleX:1,scaleY:1});var pr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(pr||(pr={}));const Hb=j.memo(function(e){var n,r,s,i;let{id:o,accessibility:u,autoScroll:c=!0,children:d,sensors:m=Vb,collisionDetection:p=QE,measuring:v,modifiers:N,...k}=e;const C=j.useReducer(Ub,void 0,Fb),[R,E]=C,[b,T]=ME(),[D,M]=j.useState(pr.Uninitialized),L=D===pr.Initialized,{draggable:{active:_,nodes:y,translate:g},droppable:{containers:x}}=R,S=_!=null?y.get(_):null,A=j.useRef({initial:null,translated:null}),I=j.useMemo(()=>{var We;return _!=null?{id:_,data:(We=S==null?void 0:S.data)!=null?We:Mb,rect:A}:null},[_,S]),oe=j.useRef(null),[ne,Ye]=j.useState(null),[se,$]=j.useState(null),Q=Oo(k,Object.values(k)),Y=ra("DndDescribedBy",o),he=j.useMemo(()=>x.getEnabled(),[x]),B=$b(v),{droppableRects:X,measureDroppableContainers:we,measuringScheduled:Te}=bb(he,{dragging:L,dependencies:[g.x,g.y],config:B.droppable}),xe=_b(y,_),Fe=j.useMemo(()=>se?Bd(se):null,[se]),ot=qr(),at=Nb(xe,B.draggable.measure);qb({activeNode:_!=null?y.get(_):null,config:ot.layoutShiftCompensation,initialRect:at,measure:B.draggable.measure});const re=ug(xe,B.draggable.measure,at),Xe=ug(xe?xe.parentElement:null),vt=j.useRef({activatorEvent:null,active:null,activeNode:xe,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:x,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),sn=x.getNodeFor((n=vt.current.over)==null?void 0:n.id),xt=Db({measure:B.dragOverlay.measure}),z=(r=xt.nodeRef.current)!=null?r:xe,W=L?(s=xt.rect)!=null?s:re:null,_e=!!(xt.nodeRef.current&&xt.rect),ge=Ib(_e?null:re),An=Hv(z?Qt(z):null),Ft=Cb(L?sn??xe:null),Gt=kb(Ft),ir=Bb(N,{transform:{x:g.x-ge.x,y:g.y-ge.y,scaleX:1,scaleY:1},activatorEvent:se,active:I,activeNodeRect:re,containerNodeRect:Xe,draggingNodeRect:W,over:vt.current.over,overlayNodeRect:xt.rect,scrollableAncestors:Ft,scrollableAncestorRects:Gt,windowRect:An}),ws=Fe?Ys(Fe,g):null,_s=Ab(Ft),ha=dg(_s),tt=dg(_s,[re]),Ue=Ys(ir,ha),gn=W?XE(W,ir):null,or=I&&gn?p({active:I,collisionRect:gn,droppableRects:X,droppableContainers:he,pointerCoordinates:ws}):null,Si=HE(or,"id"),[Rn,ar]=j.useState(null),fa=_e?ir:Ys(ir,tt),ma=GE(fa,(i=Rn==null?void 0:Rn.rect)!=null?i:null,re),$r=j.useRef(null),pa=j.useCallback((We,lt)=>{let{sensor:$e,options:yn}=lt;if(oe.current==null)return;const ut=y.get(oe.current);if(!ut)return;const wt=We.nativeEvent,_t=new $e({active:oe.current,activeNode:ut,event:wt,options:yn,context:vt,onAbort(ue){if(!y.get(ue))return;const{onDragAbort:Et}=Q.current,Pt={id:ue};Et==null||Et(Pt),b({type:"onDragAbort",event:Pt})},onPending(ue,vn,Et,Pt){if(!y.get(ue))return;const{onDragPending:Wr}=Q.current,Dt={id:ue,constraint:vn,initialCoordinates:Et,offset:Pt};Wr==null||Wr(Dt),b({type:"onDragPending",event:Dt})},onStart(ue){const vn=oe.current;if(vn==null)return;const Et=y.get(vn);if(!Et)return;const{onDragStart:Pt}=Q.current,Hr={activatorEvent:wt,active:{id:vn,data:Et.data,rect:A}};Bs.unstable_batchedUpdates(()=>{Pt==null||Pt(Hr),M(pr.Initializing),E({type:Ze.DragStart,initialCoordinates:ue,active:vn}),b({type:"onDragStart",event:Hr}),Ye($r.current),$(wt)})},onMove(ue){E({type:Ze.DragMove,coordinates:ue})},onEnd:zn(Ze.DragEnd),onCancel:zn(Ze.DragCancel)});$r.current=_t;function zn(ue){return async function(){const{active:Et,collisions:Pt,over:Hr,scrollAdjustedTranslate:Wr}=vt.current;let Dt=null;if(Et&&Wr){const{cancelDrop:Kr}=Q.current;Dt={activatorEvent:wt,active:Et,collisions:Pt,delta:Wr,over:Hr},ue===Ze.DragEnd&&typeof Kr=="function"&&await Promise.resolve(Kr(Dt))&&(ue=Ze.DragCancel)}oe.current=null,Bs.unstable_batchedUpdates(()=>{E({type:ue}),M(pr.Uninitialized),ar(null),Ye(null),$(null),$r.current=null;const Kr=ue===Ze.DragEnd?"onDragEnd":"onDragCancel";if(Dt){const Ii=Q.current[Kr];Ii==null||Ii(Dt),b({type:Kr,event:Dt})}})}}},[y]),Yu=j.useCallback((We,lt)=>($e,yn)=>{const ut=$e.nativeEvent,wt=y.get(yn);if(oe.current!==null||!wt||ut.dndKit||ut.defaultPrevented)return;const _t={active:wt};We($e,lt.options,_t)===!0&&(ut.dndKit={capturedBy:lt.sensor},oe.current=yn,pa($e,lt))},[y,pa]),Es=Eb(m,Yu);Rb(m),On(()=>{re&&D===pr.Initializing&&M(pr.Initialized)},[re,D]),j.useEffect(()=>{const{onDragMove:We}=Q.current,{active:lt,activatorEvent:$e,collisions:yn,over:ut}=vt.current;if(!lt||!$e)return;const wt={active:lt,activatorEvent:$e,collisions:yn,delta:{x:Ue.x,y:Ue.y},over:ut};Bs.unstable_batchedUpdates(()=>{We==null||We(wt),b({type:"onDragMove",event:wt})})},[Ue.x,Ue.y]),j.useEffect(()=>{const{active:We,activatorEvent:lt,collisions:$e,droppableContainers:yn,scrollAdjustedTranslate:ut}=vt.current;if(!We||oe.current==null||!lt||!ut)return;const{onDragOver:wt}=Q.current,_t=yn.get(Si),zn=_t&&_t.rect.current?{id:_t.id,rect:_t.rect.current,data:_t.data,disabled:_t.disabled}:null,ue={active:We,activatorEvent:lt,collisions:$e,delta:{x:ut.x,y:ut.y},over:zn};Bs.unstable_batchedUpdates(()=>{ar(zn),wt==null||wt(ue),b({type:"onDragOver",event:ue})})},[Si]),On(()=>{vt.current={activatorEvent:se,active:I,activeNode:xe,collisionRect:gn,collisions:or,droppableRects:X,draggableNodes:y,draggingNode:z,draggingNodeRect:W,droppableContainers:x,over:Rn,scrollableAncestors:Ft,scrollAdjustedTranslate:Ue},A.current={initial:W,translated:gn}},[I,xe,or,gn,y,z,W,X,x,Rn,Ft,Ue]),vb({...ot,delta:g,draggingRect:gn,pointerCoordinates:ws,scrollableAncestors:Ft,scrollableAncestorRects:Gt});const ga=j.useMemo(()=>({active:I,activeNode:xe,activeNodeRect:re,activatorEvent:se,collisions:or,containerNodeRect:Xe,dragOverlay:xt,draggableNodes:y,droppableContainers:x,droppableRects:X,over:Rn,measureDroppableContainers:we,scrollableAncestors:Ft,scrollableAncestorRects:Gt,measuringConfiguration:B,measuringScheduled:Te,windowRect:An}),[I,xe,re,se,or,Xe,xt,y,x,X,Rn,we,Ft,Gt,B,Te,An]),ya=j.useMemo(()=>({activatorEvent:se,activators:Es,active:I,activeNodeRect:re,ariaDescribedById:{draggable:Y},dispatch:E,draggableNodes:y,over:Rn,measureDroppableContainers:we}),[se,Es,I,re,E,Y,y,Rn,we]);return Ut.createElement(Dv.Provider,{value:T},Ut.createElement(ku.Provider,{value:ya},Ut.createElement(Wv.Provider,{value:ga},Ut.createElement(Kv.Provider,{value:ma},d)),Ut.createElement(zb,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Ut.createElement(FE,{...u,hiddenTextDescribedById:Y}));function qr(){const We=(ne==null?void 0:ne.autoScrollEnabled)===!1,lt=typeof c=="object"?c.enabled===!1:c===!1,$e=L&&!We&&!lt;return typeof c=="object"?{...c,enabled:$e}:{enabled:$e}}}),Wb=j.createContext(null),fg="button",Kb="Draggable";function Qb(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=ra(Kb),{activators:o,activatorEvent:u,active:c,activeNodeRect:d,ariaDescribedById:m,draggableNodes:p,over:v}=j.useContext(ku),{role:N=fg,roleDescription:k="draggable",tabIndex:C=0}=s??{},R=(c==null?void 0:c.id)===e,E=j.useContext(R?Kv:Wb),[b,T]=Yl(),[D,M]=Yl(),L=jb(o,e),_=Oo(n);On(()=>(p.set(e,{id:e,key:i,node:b,activatorNode:D,data:_}),()=>{const g=p.get(e);g&&g.key===i&&p.delete(e)}),[p,e]);const y=j.useMemo(()=>({role:N,tabIndex:C,"aria-disabled":r,"aria-pressed":R&&N===fg?!0:void 0,"aria-roledescription":k,"aria-describedby":m.draggable}),[r,N,C,R,k,m.draggable]);return{active:c,activatorEvent:u,activeNodeRect:d,attributes:y,isDragging:R,listeners:r?void 0:L,node:b,over:v,setNodeRef:T,setActivatorNodeRef:M,transform:E}}function Gb(){return j.useContext(Wv)}const Yb="Droppable",Xb={timeout:25};function Jb(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=ra(Yb),{active:o,dispatch:u,over:c,measureDroppableContainers:d}=j.useContext(ku),m=j.useRef({disabled:n}),p=j.useRef(!1),v=j.useRef(null),N=j.useRef(null),{disabled:k,updateMeasurementsFor:C,timeout:R}={...Xb,...s},E=Oo(C??r),b=j.useCallback(()=>{if(!p.current){p.current=!0;return}N.current!=null&&clearTimeout(N.current),N.current=setTimeout(()=>{d(Array.isArray(E.current)?E.current:[E.current]),N.current=null},R)},[R]),T=ju({callback:b,disabled:k||!o}),D=j.useCallback((y,g)=>{T&&(g&&(T.unobserve(g),p.current=!1),y&&T.observe(y))},[T]),[M,L]=Yl(D),_=Oo(e);return j.useEffect(()=>{!T||!M.current||(T.disconnect(),p.current=!1,T.observe(M.current))},[M,T]),j.useEffect(()=>(u({type:Ze.RegisterDroppable,element:{id:r,key:i,disabled:n,node:M,rect:v,data:_}}),()=>u({type:Ze.UnregisterDroppable,key:i,id:r})),[r]),j.useEffect(()=>{n!==m.current.disabled&&(u({type:Ze.SetDroppableDisabled,id:r,key:i,disabled:n}),m.current.disabled=n)},[r,i,n,u]),{active:o,rect:v,isOver:(c==null?void 0:c.id)===r,node:M,over:c,setNodeRef:L}}function xf(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function Zb(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ya(t){return t!==null&&t>=0}function eN(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function tN(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Qv=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=xf(e,r,n),o=e[s],u=i[s];return!u||!o?null:{x:u.left-o.left,y:u.top-o.top,scaleX:u.width/o.width,scaleY:u.height/o.height}},Xa={scaleX:1,scaleY:1},nN=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const u=(e=i[n])!=null?e:r;if(!u)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(u.top+u.height):d.top-u.top,...Xa}:null}const c=rN(i,s,n);return s>n&&s<=o?{x:0,y:-u.height-c,...Xa}:s<n&&s>=o?{x:0,y:u.height+c,...Xa}:{x:0,y:0,...Xa}};function rN(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Gv="Sortable",Yv=Ut.createContext({activeIndex:-1,containerId:Gv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Qv,disabled:{draggable:!1,droppable:!1}});function sN(t){let{children:e,id:n,items:r,strategy:s=Qv,disabled:i=!1}=t;const{active:o,dragOverlay:u,droppableRects:c,over:d,measureDroppableContainers:m}=Gb(),p=ra(Gv,n),v=u.rect!==null,N=j.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),k=o!=null,C=o?N.indexOf(o.id):-1,R=d?N.indexOf(d.id):-1,E=j.useRef(N),b=!eN(N,E.current),T=R!==-1&&C===-1||b,D=tN(i);On(()=>{b&&k&&m(N)},[b,N,k,m]),j.useEffect(()=>{E.current=N},[N]);const M=j.useMemo(()=>({activeIndex:C,containerId:p,disabled:D,disableTransforms:T,items:N,overIndex:R,useDragOverlay:v,sortedRects:Zb(N,c),strategy:s}),[C,p,D.draggable,D.droppable,T,N,R,c,v,s]);return Ut.createElement(Yv.Provider,{value:M},e)}const iN=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return xf(n,r,s).indexOf(e)},oN=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:u,previousContainerId:c,transition:d}=t;return!d||!r||u!==i&&s===o?!1:n?!0:o!==s&&e===c},aN={duration:200,easing:"ease"},Xv="transform",lN=Fo.Transition.toString({property:Xv,duration:0,easing:"linear"}),uN={roleDescription:"sortable"};function cN(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=j.useState(null),u=j.useRef(n);return On(()=>{if(!e&&n!==u.current&&r.current){const c=s.current;if(c){const d=xi(r.current,{ignoreTransform:!0}),m={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(m.x||m.y)&&o(m)}}n!==u.current&&(u.current=n)},[e,n,r,s]),j.useEffect(()=>{i&&o(null)},[i]),i}function dN(t){let{animateLayoutChanges:e=oN,attributes:n,disabled:r,data:s,getNewIndex:i=iN,id:o,strategy:u,resizeObserverConfig:c,transition:d=aN}=t;const{items:m,containerId:p,activeIndex:v,disabled:N,disableTransforms:k,sortedRects:C,overIndex:R,useDragOverlay:E,strategy:b}=j.useContext(Yv),T=hN(r,N),D=m.indexOf(o),M=j.useMemo(()=>({sortable:{containerId:p,index:D,items:m},...s}),[p,s,D,m]),L=j.useMemo(()=>m.slice(m.indexOf(o)),[m,o]),{rect:_,node:y,isOver:g,setNodeRef:x}=Jb({id:o,data:M,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...c}}),{active:S,activatorEvent:A,activeNodeRect:I,attributes:oe,setNodeRef:ne,listeners:Ye,isDragging:se,over:$,setActivatorNodeRef:Q,transform:Y}=Qb({id:o,data:M,attributes:{...uN,...n},disabled:T.draggable}),he=SE(x,ne),B=!!S,X=B&&!k&&Ya(v)&&Ya(R),we=!E&&se,Te=we&&X?Y:null,Fe=X?Te??(u??b)({rects:C,activeNodeRect:I,activeIndex:v,overIndex:R,index:D}):null,ot=Ya(v)&&Ya(R)?i({id:o,items:m,activeIndex:v,overIndex:R}):D,at=S==null?void 0:S.id,re=j.useRef({activeId:at,items:m,newIndex:ot,containerId:p}),Xe=m!==re.current.items,vt=e({active:S,containerId:p,isDragging:se,isSorting:B,id:o,index:D,items:m,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:d,wasDragging:re.current.activeId!=null}),sn=cN({disabled:!vt,index:D,node:y,rect:_});return j.useEffect(()=>{B&&re.current.newIndex!==ot&&(re.current.newIndex=ot),p!==re.current.containerId&&(re.current.containerId=p),m!==re.current.items&&(re.current.items=m)},[B,ot,p,m]),j.useEffect(()=>{if(at===re.current.activeId)return;if(at!=null&&re.current.activeId==null){re.current.activeId=at;return}const z=setTimeout(()=>{re.current.activeId=at},50);return()=>clearTimeout(z)},[at]),{active:S,activeIndex:v,attributes:oe,data:M,rect:_,index:D,newIndex:ot,items:m,isOver:g,isSorting:B,isDragging:se,listeners:Ye,node:y,overIndex:R,over:$,setNodeRef:he,setActivatorNodeRef:Q,setDroppableNodeRef:x,setDraggableNodeRef:ne,transform:sn??Fe,transition:xt()};function xt(){if(sn||Xe&&re.current.newIndex===D)return lN;if(!(we&&!mf(A)||!d)&&(B||vt))return Fo.Transition.toString({...d,property:Xv})}}function hN(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}pe.Down,pe.Right,pe.Up,pe.Left;const fN="modulepreload",mN=function(t){return"/result/"+t},mg={},pN=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=mN(c),c in mg)return;mg[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":fN,d||(p.as="script"),p.crossOrigin="",p.href=c,u&&p.setAttribute("nonce",u),document.head.appendChild(p),d)return new Promise((v,N)=>{p.addEventListener("load",v),p.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return s.then(o=>{for(const u of o||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};var pg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let v=(u&15)<<2|d>>6,N=d&63;c||(N=64,o||(v=64)),r.push(n[m],n[p],n[v],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Jv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||p==null)throw new yN;const v=i<<2|u>>4;if(r.push(v),d!==64){const N=u<<4&240|d>>2;if(r.push(N),p!==64){const k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vN=function(t){const e=Jv(t);return Zv.encodeByteArray(e,!0)},eu=function(t){return vN(t).replace(/\./g,"")},xN=function(t){try{return Zv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=()=>wN().__FIREBASE_DEFAULTS__,EN=()=>{if(typeof process>"u"||typeof pg>"u")return;const t=pg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xN(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return _N()||EN()||bN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NN=t=>{var e,n;return(n=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TN=t=>{const e=NN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ex=()=>{var t;return(t=wf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eu(JSON.stringify(n)),eu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AN(){var t;const e=(t=wf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RN(){return!AN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jN(){try{return typeof indexedDB=="object"}catch{return!1}}function kN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="FirebaseError";class wi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PN,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tx.prototype.create)}}class tx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?DN(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new wi(s,u,r)}}function DN(t,e){return t.replace(VN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const VN=/\{\$([^}]+)}/g;function Wd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(gg(i)&&gg(o)){if(!Wd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function gg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){return t&&t._delegate?t._delegate:t}class zo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ON(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LN(t){return t===Zr?void 0:t}function ON(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const UN={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},zN=ce.INFO,BN={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},$N=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nx{constructor(e){this.name=e,this._logLevel=zN,this._logHandler=$N,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const qN=(t,e)=>e.some(n=>t instanceof n);let yg,vg;function HN(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WN(){return vg||(vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rx=new WeakMap,Kd=new WeakMap,sx=new WeakMap,Fc=new WeakMap,_f=new WeakMap;function KN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rx.set(n,t)}).catch(()=>{}),_f.set(e,t),e}function QN(t){if(Kd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kd.set(t,e)}let Qd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GN(t){Qd=t(Qd)}function YN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uc(this),e,...n);return sx.set(r,e.sort?e.sort():[e]),Ar(r)}:WN().includes(t)?function(...e){return t.apply(Uc(this),e),Ar(rx.get(this))}:function(...e){return Ar(t.apply(Uc(this),e))}}function XN(t){return typeof t=="function"?YN(t):(t instanceof IDBTransaction&&QN(t),qN(t,HN())?new Proxy(t,Qd):t)}function Ar(t){if(t instanceof IDBRequest)return KN(t);if(Fc.has(t))return Fc.get(t);const e=XN(t);return e!==t&&(Fc.set(t,e),_f.set(e,t)),e}const Uc=t=>_f.get(t);function JN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Ar(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ar(o.result),c.oldVersion,c.newVersion,Ar(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const ZN=["get","getKey","getAll","getAllKeys","count"],eT=["put","add","delete","clear"],zc=new Map;function xg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zc.get(e))return zc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZN.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return zc.set(e,i),i}GN(t=>({...t,get:(e,n,r)=>xg(e,n)||t.get(e,n,r),has:(e,n)=>!!xg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gd="@firebase/app",wg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new nx("@firebase/app"),rT="@firebase/app-compat",sT="@firebase/analytics-compat",iT="@firebase/analytics",oT="@firebase/app-check-compat",aT="@firebase/app-check",lT="@firebase/auth",uT="@firebase/auth-compat",cT="@firebase/database",dT="@firebase/data-connect",hT="@firebase/database-compat",fT="@firebase/functions",mT="@firebase/functions-compat",pT="@firebase/installations",gT="@firebase/installations-compat",yT="@firebase/messaging",vT="@firebase/messaging-compat",xT="@firebase/performance",wT="@firebase/performance-compat",_T="@firebase/remote-config",ET="@firebase/remote-config-compat",bT="@firebase/storage",NT="@firebase/storage-compat",TT="@firebase/firestore",ST="@firebase/vertexai-preview",IT="@firebase/firestore-compat",CT="firebase",AT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="[DEFAULT]",RT={[Gd]:"fire-core",[rT]:"fire-core-compat",[iT]:"fire-analytics",[sT]:"fire-analytics-compat",[aT]:"fire-app-check",[oT]:"fire-app-check-compat",[lT]:"fire-auth",[uT]:"fire-auth-compat",[cT]:"fire-rtdb",[dT]:"fire-data-connect",[hT]:"fire-rtdb-compat",[fT]:"fire-fn",[mT]:"fire-fn-compat",[pT]:"fire-iid",[gT]:"fire-iid-compat",[yT]:"fire-fcm",[vT]:"fire-fcm-compat",[xT]:"fire-perf",[wT]:"fire-perf-compat",[_T]:"fire-rc",[ET]:"fire-rc-compat",[bT]:"fire-gcs",[NT]:"fire-gcs-compat",[TT]:"fire-fst",[IT]:"fire-fst-compat",[ST]:"fire-vertex","fire-js":"fire-js",[CT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Map,jT=new Map,Xd=new Map;function _g(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nu(t){const e=t.name;if(Xd.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Xd.set(e,t);for(const n of tu.values())_g(n,t);for(const n of jT.values())_g(n,t);return!0}function kT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new tx("app","Firebase",PT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=AT;function ix(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=ex()),!n)throw Rr.create("no-options");const i=tu.get(s);if(i){if(Wd(n,i.options)&&Wd(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new FN(s);for(const c of Xd.values())o.addComponent(c);const u=new DT(n,r,o);return tu.set(s,u),u}function MT(t=Yd){const e=tu.get(t);if(!e&&t===Yd&&ex())return ix();if(!e)throw Rr.create("no-app",{appName:t});return e}function Xs(t,e,n){var r;let s=(r=RT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(u.join(" "));return}nu(new zo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebase-heartbeat-database",OT=1,Bo="firebase-heartbeat-store";let Bc=null;function ox(){return Bc||(Bc=JN(LT,OT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Bc}async function FT(t){try{const n=(await ox()).transaction(Bo),r=await n.objectStore(Bo).get(ax(t));return await n.done,r}catch(e){if(e instanceof wi)er.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(n.message)}}}async function Eg(t,e){try{const r=(await ox()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,ax(t)),await r.done}catch(n){if(n instanceof wi)er.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});er.warn(r.message)}}}function ax(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=1024,zT=30*24*60*60*1e3;class BT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=zT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bg(),{heartbeatsToSend:r,unsentEntries:s}=$T(this._heartbeatsCache.heartbeats),i=eu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return er.warn(n),""}}}function bg(){return new Date().toISOString().substring(0,10)}function $T(t,e=UT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ng(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ng(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jN()?kN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ng(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){nu(new zo("platform-logger",e=>new tT(e),"PRIVATE")),nu(new zo("heartbeat",e=>new BT(e),"PRIVATE")),Xs(Gd,wg,t),Xs(Gd,wg,"esm2017"),Xs("fire-js","")}HT("");var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,lx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function g(){}g.prototype=y.prototype,_.D=y.prototype,_.prototype=new g,_.prototype.constructor=_,_.C=function(x,S,A){for(var I=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)I[oe-2]=arguments[oe];return y.prototype[S].apply(x,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,g){g||(g=0);var x=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)x[S]=y.charCodeAt(g++)|y.charCodeAt(g++)<<8|y.charCodeAt(g++)<<16|y.charCodeAt(g++)<<24;else for(S=0;16>S;++S)x[S]=y[g++]|y[g++]<<8|y[g++]<<16|y[g++]<<24;y=_.g[0],g=_.g[1],S=_.g[2];var A=_.g[3],I=y+(A^g&(S^A))+x[0]+3614090360&4294967295;y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[1]+3905402710&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[2]+606105819&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[3]+3250441966&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(A^g&(S^A))+x[4]+4118548399&4294967295,y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[5]+1200080426&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[6]+2821735955&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[7]+4249261313&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(A^g&(S^A))+x[8]+1770035416&4294967295,y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[9]+2336552879&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[10]+4294925233&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[11]+2304563134&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(A^g&(S^A))+x[12]+1804603682&4294967295,y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[13]+4254626195&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[14]+2792965006&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[15]+1236535329&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(S^A&(g^S))+x[1]+4129170786&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[6]+3225465664&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[11]+643717713&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[0]+3921069994&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(S^A&(g^S))+x[5]+3593408605&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[10]+38016083&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[15]+3634488961&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[4]+3889429448&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(S^A&(g^S))+x[9]+568446438&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[14]+3275163606&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[3]+4107603335&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[8]+1163531501&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(S^A&(g^S))+x[13]+2850285829&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[2]+4243563512&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[7]+1735328473&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[12]+2368359562&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(g^S^A)+x[5]+4294588738&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[8]+2272392833&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[11]+1839030562&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[14]+4259657740&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(g^S^A)+x[1]+2763975236&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[4]+1272893353&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[7]+4139469664&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[10]+3200236656&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(g^S^A)+x[13]+681279174&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[0]+3936430074&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[3]+3572445317&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[6]+76029189&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(g^S^A)+x[9]+3654602809&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[12]+3873151461&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[15]+530742520&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[2]+3299628645&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(S^(g|~A))+x[0]+4096336452&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[7]+1126891415&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[14]+2878612391&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[5]+4237533241&4294967295,g=S+(I<<21&4294967295|I>>>11),I=y+(S^(g|~A))+x[12]+1700485571&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[3]+2399980690&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[10]+4293915773&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[1]+2240044497&4294967295,g=S+(I<<21&4294967295|I>>>11),I=y+(S^(g|~A))+x[8]+1873313359&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[15]+4264355552&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[6]+2734768916&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[13]+1309151649&4294967295,g=S+(I<<21&4294967295|I>>>11),I=y+(S^(g|~A))+x[4]+4149444226&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[11]+3174756917&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[2]+718787259&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(S+(I<<21&4294967295|I>>>11))&4294967295,_.g[2]=_.g[2]+S&4294967295,_.g[3]=_.g[3]+A&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var g=y-this.blockSize,x=this.B,S=this.h,A=0;A<y;){if(S==0)for(;A<=g;)s(this,_,A),A+=this.blockSize;if(typeof _=="string"){for(;A<y;)if(x[S++]=_.charCodeAt(A++),S==this.blockSize){s(this,x),S=0;break}}else for(;A<y;)if(x[S++]=_[A++],S==this.blockSize){s(this,x),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var g=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=g&255,g/=256;for(this.u(_),_=Array(16),y=g=0;4>y;++y)for(var x=0;32>x;x+=8)_[g++]=this.g[y]>>>x&255;return _};function i(_,y){var g=u;return Object.prototype.hasOwnProperty.call(g,_)?g[_]:g[_]=y(_)}function o(_,y){this.h=y;for(var g=[],x=!0,S=_.length-1;0<=S;S--){var A=_[S]|0;x&&A==y||(g[S]=A,x=!1)}this.g=g}var u={};function c(_){return-128<=_&&128>_?i(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return R(d(-_));for(var y=[],g=1,x=0;_>=g;x++)y[x]=_/g|0,g*=4294967296;return new o(y,0)}function m(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return R(m(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=d(Math.pow(y,8)),x=p,S=0;S<_.length;S+=8){var A=Math.min(8,_.length-S),I=parseInt(_.substring(S,S+A),y);8>A?(A=d(Math.pow(y,A)),x=x.j(A).add(d(I))):(x=x.j(g),x=x.add(d(I)))}return x}var p=c(0),v=c(1),N=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-R(this).m();for(var _=0,y=1,g=0;g<this.g.length;g++){var x=this.i(g);_+=(0<=x?x:4294967296+x)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(C(this))return"-"+R(this).toString(_);for(var y=d(Math.pow(_,6)),g=this,x="";;){var S=D(g,y).g;g=E(g,S.j(y));var A=((0<g.g.length?g.g[0]:g.h)>>>0).toString(_);if(g=S,k(g))return A+x;for(;6>A.length;)A="0"+A;x=A+x}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function C(_){return _.h==-1}t.l=function(_){return _=E(this,_),C(_)?-1:k(_)?0:1};function R(_){for(var y=_.g.length,g=[],x=0;x<y;x++)g[x]=~_.g[x];return new o(g,~_.h).add(v)}t.abs=function(){return C(this)?R(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0,S=0;S<=y;S++){var A=x+(this.i(S)&65535)+(_.i(S)&65535),I=(A>>>16)+(this.i(S)>>>16)+(_.i(S)>>>16);x=I>>>16,A&=65535,I&=65535,g[S]=I<<16|A}return new o(g,g[g.length-1]&-2147483648?-1:0)};function E(_,y){return _.add(R(y))}t.j=function(_){if(k(this)||k(_))return p;if(C(this))return C(_)?R(this).j(R(_)):R(R(this).j(_));if(C(_))return R(this.j(R(_)));if(0>this.l(N)&&0>_.l(N))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,g=[],x=0;x<2*y;x++)g[x]=0;for(x=0;x<this.g.length;x++)for(var S=0;S<_.g.length;S++){var A=this.i(x)>>>16,I=this.i(x)&65535,oe=_.i(S)>>>16,ne=_.i(S)&65535;g[2*x+2*S]+=I*ne,b(g,2*x+2*S),g[2*x+2*S+1]+=A*ne,b(g,2*x+2*S+1),g[2*x+2*S+1]+=I*oe,b(g,2*x+2*S+1),g[2*x+2*S+2]+=A*oe,b(g,2*x+2*S+2)}for(x=0;x<y;x++)g[x]=g[2*x+1]<<16|g[2*x];for(x=y;x<2*y;x++)g[x]=0;return new o(g,0)};function b(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function T(_,y){this.g=_,this.h=y}function D(_,y){if(k(y))throw Error("division by zero");if(k(_))return new T(p,p);if(C(_))return y=D(R(_),y),new T(R(y.g),R(y.h));if(C(y))return y=D(_,R(y)),new T(R(y.g),y.h);if(30<_.g.length){if(C(_)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var g=v,x=y;0>=x.l(_);)g=M(g),x=M(x);var S=L(g,1),A=L(x,1);for(x=L(x,2),g=L(g,2);!k(x);){var I=A.add(x);0>=I.l(_)&&(S=S.add(g),A=I),x=L(x,1),g=L(g,1)}return y=E(_,S.j(y)),new T(S,y)}for(S=p;0<=_.l(y);){for(g=Math.max(1,Math.floor(_.m()/y.m())),x=Math.ceil(Math.log(g)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),A=d(g),I=A.j(y);C(I)||0<I.l(_);)g-=x,A=d(g),I=A.j(y);k(A)&&(A=v),S=S.add(A),_=E(_,I)}return new T(S,_)}t.A=function(_){return D(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0;x<y;x++)g[x]=this.i(x)&_.i(x);return new o(g,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0;x<y;x++)g[x]=this.i(x)|_.i(x);return new o(g,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0;x<y;x++)g[x]=this.i(x)^_.i(x);return new o(g,this.h^_.h)};function M(_){for(var y=_.g.length+1,g=[],x=0;x<y;x++)g[x]=_.i(x)<<1|_.i(x-1)>>>31;return new o(g,_.h)}function L(_,y){var g=y>>5;y%=32;for(var x=_.g.length-g,S=[],A=0;A<x;A++)S[A]=0<y?_.i(A+g)>>>y|_.i(A+g+1)<<32-y:_.i(A+g);return new o(S,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,as=o}).apply(typeof Tg<"u"?Tg:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ux,Yi,cx,wl,Jd,dx,hx,fx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var P=a[w];if(!(P in f))break e;f=f[P]}a=a[a.length-1],w=f[a],h=h(w),h!=w&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,w=!1,P={next:function(){if(!w&&f<a.length){var V=f++;return{value:h(V,a[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function m(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),a.apply(h,P)}}return function(){return a.apply(h,arguments)}}function v(a,h,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,v.apply(null,arguments)}function N(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var w=f.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function k(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(w,P,V){for(var q=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)q[Ee-2]=arguments[Ee];return h.prototype[P].apply(w,q)}}function C(a){const h=a.length;if(0<h){const f=Array(h);for(let w=0;w<h;w++)f[w]=a[w];return f}return[]}function R(a,h){for(let f=1;f<arguments.length;f++){const w=arguments[f];if(c(w)){const P=a.length||0,V=w.length||0;a.length=P+V;for(let q=0;q<V;q++)a[P+q]=w[q]}else a.push(w)}}class E{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function b(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var M=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function L(a,h,f){for(const w in a)h.call(f,a[w],w,a)}function _(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function y(a){const h={};for(const f in a)h[f]=a[f];return h}const g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,h){let f,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(f in w)a[f]=w[f];for(let V=0;V<g.length;V++)f=g[V],Object.prototype.hasOwnProperty.call(w,f)&&(a[f]=w[f])}}function S(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function A(a){u.setTimeout(()=>{throw a},0)}function I(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class oe{constructor(){this.h=this.g=null}add(h,f){const w=ne.get();w.set(h,f),this.h?this.h.next=w:this.g=w,this.h=w}}var ne=new E(()=>new Ye,a=>a.reset());class Ye{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let se,$=!1,Q=new oe,Y=()=>{const a=u.Promise.resolve(void 0);se=()=>{a.then(he)}};var he=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){A(f)}var h=ne;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,h),u.removeEventListener("test",f,h)}catch{}return a}();function Te(a,h){if(X.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(M){e:{try{D(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:xe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Te.aa.h.call(this)}}k(Te,X);var xe={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),ot=0;function at(a,h,f,w,P){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!w,this.ha=P,this.key=++ot,this.da=this.fa=!1}function re(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Xe(a){this.src=a,this.g={},this.h=0}Xe.prototype.add=function(a,h,f,w,P){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var q=sn(a,h,w,P);return-1<q?(h=a[q],f||(h.fa=!1)):(h=new at(h,this.src,V,!!w,P),h.fa=f,a.push(h)),h};function vt(a,h){var f=h.type;if(f in a.g){var w=a.g[f],P=Array.prototype.indexOf.call(w,h,void 0),V;(V=0<=P)&&Array.prototype.splice.call(w,P,1),V&&(re(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function sn(a,h,f,w){for(var P=0;P<a.length;++P){var V=a[P];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==w)return P}return-1}var xt="closure_lm_"+(1e6*Math.random()|0),z={};function W(a,h,f,w,P){if(Array.isArray(h)){for(var V=0;V<h.length;V++)W(a,h[V],f,w,P);return null}return f=ha(f),a&&a[Fe]?a.K(h,f,d(w)?!!w.capture:!!w,P):_e(a,h,f,!1,w,P)}function _e(a,h,f,w,P,V){if(!h)throw Error("Invalid event type");var q=d(P)?!!P.capture:!!P,Ee=ws(a);if(Ee||(a[xt]=Ee=new Xe(a)),f=Ee.add(h,f,w,q,V),f.proxy)return f;if(w=ge(),f.proxy=w,w.src=a,w.listener=f,a.addEventListener)we||(P=q),P===void 0&&(P=!1),a.addEventListener(h.toString(),w,P);else if(a.attachEvent)a.attachEvent(Gt(h.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ge(){function a(f){return h.call(a.src,a.listener,f)}const h=ir;return a}function An(a,h,f,w,P){if(Array.isArray(h))for(var V=0;V<h.length;V++)An(a,h[V],f,w,P);else w=d(w)?!!w.capture:!!w,f=ha(f),a&&a[Fe]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],f=sn(V,f,w,P),-1<f&&(re(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=ws(a))&&(h=a.g[h.toString()],a=-1,h&&(a=sn(h,f,w,P)),(f=-1<a?h[a]:null)&&Ft(f))}function Ft(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Fe])vt(h.i,a);else{var f=a.type,w=a.proxy;h.removeEventListener?h.removeEventListener(f,w,a.capture):h.detachEvent?h.detachEvent(Gt(f),w):h.addListener&&h.removeListener&&h.removeListener(w),(f=ws(h))?(vt(f,a),f.h==0&&(f.src=null,h[xt]=null)):re(a)}}}function Gt(a){return a in z?z[a]:z[a]="on"+a}function ir(a,h){if(a.da)a=!0;else{h=new Te(h,this);var f=a.listener,w=a.ha||a.src;a.fa&&Ft(a),a=f.call(w,h)}return a}function ws(a){return a=a[xt],a instanceof Xe?a:null}var _s="__closure_events_fn_"+(1e9*Math.random()>>>0);function ha(a){return typeof a=="function"?a:(a[_s]||(a[_s]=function(h){return a.handleEvent(h)}),a[_s])}function tt(){B.call(this),this.i=new Xe(this),this.M=this,this.F=null}k(tt,B),tt.prototype[Fe]=!0,tt.prototype.removeEventListener=function(a,h,f,w){An(this,a,h,f,w)};function Ue(a,h){var f,w=a.F;if(w)for(f=[];w;w=w.F)f.push(w);if(a=a.M,w=h.type||h,typeof h=="string")h=new X(h,a);else if(h instanceof X)h.target=h.target||a;else{var P=h;h=new X(w,a),x(h,P)}if(P=!0,f)for(var V=f.length-1;0<=V;V--){var q=h.g=f[V];P=gn(q,w,!0,h)&&P}if(q=h.g=a,P=gn(q,w,!0,h)&&P,P=gn(q,w,!1,h)&&P,f)for(V=0;V<f.length;V++)q=h.g=f[V],P=gn(q,w,!1,h)&&P}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],w=0;w<f.length;w++)re(f[w]);delete a.g[h],a.h--}}this.F=null},tt.prototype.K=function(a,h,f,w){return this.i.add(String(a),h,!1,f,w)},tt.prototype.L=function(a,h,f,w){return this.i.add(String(a),h,!0,f,w)};function gn(a,h,f,w){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,V=0;V<h.length;++V){var q=h[V];if(q&&!q.da&&q.capture==f){var Ee=q.listener,ct=q.ha||q.src;q.fa&&vt(a.i,q),P=Ee.call(ct,w)!==!1&&P}}return P&&!w.defaultPrevented}function or(a,h,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function Si(a){a.g=or(()=>{a.g=null,a.i&&(a.i=!1,Si(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Rn extends B{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Si(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(a){B.call(this),this.h=a,this.g={}}k(ar,B);var fa=[];function ma(a){L(a.g,function(h,f){this.g.hasOwnProperty(f)&&Ft(h)},a),a.g={}}ar.prototype.N=function(){ar.aa.N.call(this),ma(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=u.JSON.stringify,pa=u.JSON.parse,Yu=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Es(){}Es.prototype.h=null;function ga(a){return a.h||(a.h=a.i())}function ya(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function We(){X.call(this,"d")}k(We,X);function lt(){X.call(this,"c")}k(lt,X);var $e={},yn=null;function ut(){return yn=yn||new tt}$e.La="serverreachability";function wt(a){X.call(this,$e.La,a)}k(wt,X);function _t(a){const h=ut();Ue(h,new wt(h))}$e.STAT_EVENT="statevent";function zn(a,h){X.call(this,$e.STAT_EVENT,a),this.stat=h}k(zn,X);function ue(a){const h=ut();Ue(h,new zn(h,a))}$e.Ma="timingevent";function vn(a,h){X.call(this,$e.Ma,a),this.size=h}k(vn,X);function Et(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function Pt(){this.g=!0}Pt.prototype.xa=function(){this.g=!1};function Hr(a,h,f,w,P,V){a.info(function(){if(a.g)if(V)for(var q="",Ee=V.split("&"),ct=0;ct<Ee.length;ct++){var fe=Ee[ct].split("=");if(1<fe.length){var bt=fe[0];fe=fe[1];var Nt=bt.split("_");q=2<=Nt.length&&Nt[1]=="type"?q+(bt+"="+fe+"&"):q+(bt+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+h+`
`+f+`
`+q})}function Wr(a,h,f,w,P,V,q){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+h+`
`+f+`
`+V+" "+q})}function Dt(a,h,f,w){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Ii(a,f)+(w?" "+w:"")})}function Kr(a,h){a.info(function(){return"TIMEOUT: "+h})}Pt.prototype.info=function(){};function Ii(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var w=f[a];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<P.length;q++)P[q]=""}}}}return $r(f)}catch{return h}}var va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},am={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xu;function xa(){}k(xa,Es),xa.prototype.g=function(){return new XMLHttpRequest},xa.prototype.i=function(){return{}},Xu=new xa;function lr(a,h,f,w){this.j=a,this.i=h,this.l=f,this.R=w||1,this.U=new ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lm}function lm(){this.i=null,this.g="",this.h=!1}var um={},Ju={};function Zu(a,h,f){a.L=1,a.v=ba(Bn(h)),a.m=f,a.P=!0,cm(a,null)}function cm(a,h){a.F=Date.now(),wa(a),a.A=Bn(a.v);var f=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),Nm(f.i,"t",w),a.C=0,f=a.j.J,a.h=new lm,a.g=Bm(a.j,f?h:null,!a.m),0<a.O&&(a.M=new Rn(v(a.Y,a,a.g),a.O)),h=a.U,f=a.g,w=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(fa[0]=P.toString()),P=fa);for(var V=0;V<P.length;V++){var q=W(f,P[V],w||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),_t(),Hr(a.i,a.u,a.A,a.l,a.R,a.m)}lr.prototype.ca=function(a){a=a.target;const h=this.M;h&&$n(a)==3?h.j():this.Y(a)},lr.prototype.Y=function(a){try{if(a==this.g)e:{const Nt=$n(this.g);var h=this.g.Ba();const Ts=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||jm(this.g)))){this.J||Nt!=4||h==7||(h==8||0>=Ts?_t(3):_t(2)),ec(this);var f=this.g.Z();this.X=f;t:if(dm(this)){var w=jm(this.g);a="";var P=w.length,V=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Ci(this);var q="";break t}this.h.i=new u.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,a+=this.h.i.decode(w[h],{stream:!(V&&h==P-1)});w.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,Wr(this.i,this.u,this.A,this.l,this.R,Nt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,ct=this.g;if((Ee=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ee)){var fe=Ee;break t}}fe=null}if(f=fe)Dt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tc(this,f);else{this.o=!1,this.s=3,ue(12),Qr(this),Ci(this);break e}}if(this.P){f=!0;let xn;for(;!this.J&&this.C<q.length;)if(xn=Aw(this,q),xn==Ju){Nt==4&&(this.s=4,ue(14),f=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==um){this.s=4,ue(15),Dt(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Dt(this.i,this.l,xn,null),tc(this,xn);if(dm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||q.length!=0||this.h.h||(this.s=1,ue(16),f=!1),this.o=this.o&&f,!f)Dt(this.i,this.l,q,"[Invalid Chunked Response]"),Qr(this),Ci(this);else if(0<q.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),ac(bt),bt.M=!0,ue(11))}}else Dt(this.i,this.l,q,null),tc(this,q);Nt==4&&Qr(this),this.o&&!this.J&&(Nt==4?Om(this.j,this):(this.o=!1,wa(this)))}else Ww(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),Qr(this),Ci(this)}}}catch{}finally{}};function dm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Aw(a,h){var f=a.C,w=h.indexOf(`
`,f);return w==-1?Ju:(f=Number(h.substring(f,w)),isNaN(f)?um:(w+=1,w+f>h.length?Ju:(h=h.slice(w,w+f),a.C=w+f,h)))}lr.prototype.cancel=function(){this.J=!0,Qr(this)};function wa(a){a.S=Date.now()+a.I,hm(a,a.I)}function hm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Et(v(a.ba,a),h)}function ec(a){a.B&&(u.clearTimeout(a.B),a.B=null)}lr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Kr(this.i,this.A),this.L!=2&&(_t(),ue(17)),Qr(this),this.s=2,Ci(this)):hm(this,this.S-a)};function Ci(a){a.j.G==0||a.J||Om(a.j,a)}function Qr(a){ec(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,ma(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function tc(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||nc(f.h,a))){if(!a.K&&nc(f.h,a)&&f.G==3){try{var w=f.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Aa(f),Ia(f);else break e;oc(f),ue(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=Et(v(f.Za,f),6e3));if(1>=pm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Yr(f,11)}else if((a.K||f.g==a)&&Aa(f),!b(h))for(P=f.Da.g.parse(h),h=0;h<P.length;h++){let fe=P[h];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];const bt=fe[3];bt!=null&&(f.la=bt,f.j.info("VER="+f.la));const Nt=fe[4];Nt!=null&&(f.Aa=Nt,f.j.info("SVER="+f.Aa));const Ts=fe[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(w=1.5*Ts,f.L=w,f.j.info("backChannelRequestTimeoutMs_="+w)),w=f;const xn=a.g;if(xn){const ja=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var V=w.h;V.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(rc(V,V.h),V.h=null))}if(w.D){const lc=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(w.ya=lc,Se(w.I,w.D,lc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),w=f;var q=a;if(w.qa=zm(w,w.J?w.ia:null,w.W),q.K){gm(w.h,q);var Ee=q,ct=w.L;ct&&(Ee.I=ct),Ee.B&&(ec(Ee),wa(Ee)),w.g=q}else Mm(w);0<f.i.length&&Ca(f)}else fe[0]!="stop"&&fe[0]!="close"||Yr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Yr(f,7):ic(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}_t(4)}catch{}}var Rw=class{constructor(a,h){this.g=a,this.map=h}};function fm(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function pm(a){return a.h?1:a.g?a.g.size:0}function nc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function rc(a,h){a.g?a.g.add(h):a.h=h}function gm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}fm.prototype.cancel=function(){if(this.i=ym(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ym(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return C(a.i)}function jw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,w=0;w<f;w++)h.push(a[w]);return h}h=[],f=0;for(w in a)h[f++]=a[w];return h}function kw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const w in a)h[f++]=w;return h}}}function vm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=kw(a),w=jw(a),P=w.length,V=0;V<P;V++)h.call(void 0,w[V],f&&f[V],a)}var xm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pw(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var w=a[f].indexOf("="),P=null;if(0<=w){var V=a[f].substring(0,w);P=a[f].substring(w+1)}else V=a[f];h(V,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Gr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gr){this.h=a.h,_a(this,a.j),this.o=a.o,this.g=a.g,Ea(this,a.s),this.l=a.l;var h=a.i,f=new ji;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),wm(this,f),this.m=a.m}else a&&(h=String(a).match(xm))?(this.h=!1,_a(this,h[1]||"",!0),this.o=Ai(h[2]||""),this.g=Ai(h[3]||"",!0),Ea(this,h[4]),this.l=Ai(h[5]||"",!0),wm(this,h[6]||"",!0),this.m=Ai(h[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}Gr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ri(h,_m,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ri(h,_m,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ri(f,f.charAt(0)=="/"?Mw:Vw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ri(f,Ow)),a.join("")};function Bn(a){return new Gr(a)}function _a(a,h,f){a.j=f?Ai(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ea(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function wm(a,h,f){h instanceof ji?(a.i=h,Fw(a.i,a.h)):(f||(h=Ri(h,Lw)),a.i=new ji(h,a.h))}function Se(a,h,f){a.i.set(h,f)}function ba(a){return Se(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ai(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ri(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,Dw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Dw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var _m=/[#\/\?@]/g,Vw=/[#\?:]/g,Mw=/[#\?]/g,Lw=/[#\?@]/g,Ow=/#/g;function ji(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function ur(a){a.g||(a.g=new Map,a.h=0,a.i&&Pw(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ji.prototype,t.add=function(a,h){ur(this),this.i=null,a=bs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Em(a,h){ur(a),h=bs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function bm(a,h){return ur(a),h=bs(a,h),a.g.has(h)}t.forEach=function(a,h){ur(this),this.g.forEach(function(f,w){f.forEach(function(P){a.call(h,P,w,this)},this)},this)},t.na=function(){ur(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let w=0;w<h.length;w++){const P=a[w];for(let V=0;V<P.length;V++)f.push(h[w])}return f},t.V=function(a){ur(this);let h=[];if(typeof a=="string")bm(this,a)&&(h=h.concat(this.g.get(bs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return ur(this),this.i=null,a=bs(this,a),bm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Nm(a,h,f){Em(a,h),0<f.length&&(a.i=null,a.g.set(bs(a,h),C(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var w=h[f];const V=encodeURIComponent(String(w)),q=this.V(w);for(w=0;w<q.length;w++){var P=V;q[w]!==""&&(P+="="+encodeURIComponent(String(q[w]))),a.push(P)}}return this.i=a.join("&")};function bs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Fw(a,h){h&&!a.j&&(ur(a),a.i=null,a.g.forEach(function(f,w){var P=w.toLowerCase();w!=P&&(Em(this,w),Nm(this,P,f))},a)),a.j=h}function Uw(a,h){const f=new Pt;if(u.Image){const w=new Image;w.onload=N(cr,f,"TestLoadImage: loaded",!0,h,w),w.onerror=N(cr,f,"TestLoadImage: error",!1,h,w),w.onabort=N(cr,f,"TestLoadImage: abort",!1,h,w),w.ontimeout=N(cr,f,"TestLoadImage: timeout",!1,h,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else h(!1)}function zw(a,h){const f=new Pt,w=new AbortController,P=setTimeout(()=>{w.abort(),cr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:w.signal}).then(V=>{clearTimeout(P),V.ok?cr(f,"TestPingServer: ok",!0,h):cr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),cr(f,"TestPingServer: error",!1,h)})}function cr(a,h,f,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(f)}catch{}}function Bw(){this.g=new Yu}function $w(a,h,f){const w=f||"";try{vm(a,function(P,V){let q=P;d(P)&&(q=$r(P)),h.push(w+V+"="+encodeURIComponent(q))})}catch(P){throw h.push(w+"type="+encodeURIComponent("_badmap")),P}}function Na(a){this.l=a.Ub||null,this.j=a.eb||!1}k(Na,Es),Na.prototype.g=function(){return new Ta(this.l,this.j)},Na.prototype.i=function(a){return function(){return a}}({});function Ta(a,h){tt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ta,tt),t=Ta.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Pi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ki(this):Pi(this),this.readyState==3&&Tm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ki(this))},t.Qa=function(a){this.g&&(this.response=a,ki(this))},t.ga=function(){this.g&&ki(this)};function ki(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Pi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Pi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sm(a){let h="";return L(a,function(f,w){h+=w,h+=":",h+=f,h+=`\r
`}),h}function sc(a,h,f){e:{for(w in f){var w=!1;break e}w=!0}w||(f=Sm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Se(a,h,f))}function ze(a){tt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ze,tt);var qw=/^https?$/i,Hw=["POST","PUT"];t=ze.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xu.g(),this.v=this.o?ga(this.o):ga(Xu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){Im(this,V);return}if(a=f||"",f=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)f.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const V of w.keys())f.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),P=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Hw,h,void 0))||w||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of f)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rm(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Im(this,V)}};function Im(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Cm(a),Sa(a)}function Cm(a){a.A||(a.A=!0,Ue(a,"complete"),Ue(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ue(this,"complete"),Ue(this,"abort"),Sa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Am(this):this.bb())},t.bb=function(){Am(this)};function Am(a){if(a.h&&typeof o<"u"&&(!a.v[1]||$n(a)!=4||a.Z()!=2)){if(a.u&&$n(a)==4)or(a.Ea,0,a);else if(Ue(a,"readystatechange"),$n(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var w;if(w=q===0){var P=String(a.D).match(xm)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),w=!qw.test(P?P.toLowerCase():"")}f=w}if(f)Ue(a,"complete"),Ue(a,"success");else{a.m=6;try{var V=2<$n(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Cm(a)}}finally{Sa(a)}}}}function Sa(a,h){if(a.g){Rm(a);const f=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Ue(a,"ready");try{f.onreadystatechange=w}catch{}}}function Rm(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),pa(h)}};function jm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ww(a){const h={};a=(a.g&&2<=$n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(b(a[w]))continue;var f=S(a[w]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[P]||[];h[P]=V,V.push(f)}_(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function km(a){this.Aa=0,this.i=[],this.j=new Pt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Di("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Di("baseRetryDelayMs",5e3,a),this.cb=Di("retryDelaySeedMs",1e4,a),this.Wa=Di("forwardChannelMaxRetries",2,a),this.wa=Di("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new fm(a&&a.concurrentRequestLimit),this.Da=new Bw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=km.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,w){ue(0),this.W=a,this.H=h||{},f&&w!==void 0&&(this.H.OSID=f,this.H.OAID=w),this.F=this.X,this.I=zm(this,null,this.W),Ca(this)};function ic(a){if(Pm(a),a.G==3){var h=a.U++,f=Bn(a.I);if(Se(f,"SID",a.K),Se(f,"RID",h),Se(f,"TYPE","terminate"),Vi(a,f),h=new lr(a,a.j,h),h.L=2,h.v=ba(Bn(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=h.v,f=!0),f||(h.g=Bm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),wa(h)}Um(a)}function Ia(a){a.g&&(ac(a),a.g.cancel(),a.g=null)}function Pm(a){Ia(a),a.u&&(u.clearTimeout(a.u),a.u=null),Aa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Ca(a){if(!mm(a.h)&&!a.s){a.s=!0;var h=a.Ga;se||Y(),$||(se(),$=!0),Q.add(h,a),a.B=0}}function Kw(a,h){return pm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Et(v(a.Ga,a,h),Fm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new lr(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),x(V,this.S)):V=this.S),this.m!==null||this.O||(P.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var w=this.i[f];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Vm(this,P,h),f=Bn(this.I),Se(f,"RID",a),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Vi(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(Sm(V)))+"&"+h:this.m&&sc(f,this.m,V)),rc(this.h,P),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",h),Se(f,"SID","null"),P.T=!0,Zu(P,f,null)):Zu(P,f,h),this.G=2}}else this.G==3&&(a?Dm(this,a):this.i.length==0||mm(this.h)||Dm(this))};function Dm(a,h){var f;h?f=h.l:f=a.U++;const w=Bn(a.I);Se(w,"SID",a.K),Se(w,"RID",f),Se(w,"AID",a.T),Vi(a,w),a.m&&a.o&&sc(w,a.m,a.o),f=new lr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Vm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),rc(a.h,f),Zu(f,w,h)}function Vi(a,h){a.H&&L(a.H,function(f,w){Se(h,w,f)}),a.l&&vm({},function(f,w){Se(h,w,f)})}function Vm(a,h,f){f=Math.min(a.i.length,f);var w=a.l?v(a.l.Na,a.l,a):null;e:{var P=a.i;let V=-1;for(;;){const q=["count="+f];V==-1?0<f?(V=P[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Ee=!0;for(let ct=0;ct<f;ct++){let fe=P[ct].g;const bt=P[ct].map;if(fe-=V,0>fe)V=Math.max(0,P[ct].g-100),Ee=!1;else try{$w(bt,q,"req"+fe+"_")}catch{w&&w(bt)}}if(Ee){w=q.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,w}function Mm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;se||Y(),$||(se(),$=!0),Q.add(h,a),a.v=0}}function oc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Et(v(a.Fa,a),Fm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Lm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Et(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),Ia(this),Lm(this))};function ac(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Lm(a){a.g=new lr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Bn(a.qa);Se(h,"RID","rpc"),Se(h,"SID",a.K),Se(h,"AID",a.T),Se(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Se(h,"TO",a.ja),Se(h,"TYPE","xmlhttp"),Vi(a,h),a.m&&a.o&&sc(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ba(Bn(h)),f.m=null,f.P=!0,cm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ia(this),oc(this),ue(19))};function Aa(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Om(a,h){var f=null;if(a.g==h){Aa(a),ac(a),a.g=null;var w=2}else if(nc(a.h,h))f=h.D,gm(a.h,h),w=1;else return;if(a.G!=0){if(h.o)if(w==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var P=a.B;w=ut(),Ue(w,new vn(w,f)),Ca(a)}else Mm(a);else if(P=h.s,P==3||P==0&&0<h.X||!(w==1&&Kw(a,h)||w==2&&oc(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),P){case 1:Yr(a,5);break;case 4:Yr(a,10);break;case 3:Yr(a,6);break;default:Yr(a,2)}}}function Fm(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Yr(a,h){if(a.j.info("Error code "+h),h==2){var f=v(a.fb,a),w=a.Xa;const P=!w;w=new Gr(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||_a(w,"https"),ba(w),P?Uw(w.toString(),f):zw(w.toString(),f)}else ue(2);a.G=0,a.l&&a.l.sa(h),Um(a),Pm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Um(a){if(a.G=0,a.ka=[],a.l){const h=ym(a.h);(h.length!=0||a.i.length!=0)&&(R(a.ka,h),R(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function zm(a,h,f){var w=f instanceof Gr?Bn(f):new Gr(f);if(w.g!="")h&&(w.g=h+"."+w.g),Ea(w,w.s);else{var P=u.location;w=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var V=new Gr(null);w&&_a(V,w),h&&(V.g=h),P&&Ea(V,P),f&&(V.l=f),w=V}return f=a.D,h=a.ya,f&&h&&Se(w,f,h),Se(w,"VER",a.la),Vi(a,w),w}function Bm(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ze(new Na({eb:f})):new ze(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $m(){}t=$m.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ra(){}Ra.prototype.g=function(a,h){return new Yt(a,h)};function Yt(a,h){tt.call(this),this.g=new km(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!b(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!b(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ns(this)}k(Yt,tt),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){ic(this.g)},Yt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=$r(a),a=f);h.i.push(new Rw(h.Ya++,a)),h.G==3&&Ca(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,ic(this.g),delete this.g,Yt.aa.N.call(this)};function qm(a){We.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}k(qm,We);function Hm(){lt.call(this),this.status=1}k(Hm,lt);function Ns(a){this.g=a}k(Ns,$m),Ns.prototype.ua=function(){Ue(this.g,"a")},Ns.prototype.ta=function(a){Ue(this.g,new qm(a))},Ns.prototype.sa=function(a){Ue(this.g,new Hm)},Ns.prototype.ra=function(){Ue(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,fx=function(){return new Ra},hx=function(){return ut()},dx=$e,Jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,wl=va,am.COMPLETE="complete",cx=am,ya.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Yi=ya,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,ux=ze}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const Sg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new nx("@firebase/firestore");function qi(){return fs.logLevel}function G(t,...e){if(fs.logLevel<=ce.DEBUG){const n=e.map(Ef);fs.debug(`Firestore (${_i}): ${t}`,...n)}}function tr(t,...e){if(fs.logLevel<=ce.ERROR){const n=e.map(Ef);fs.error(`Firestore (${_i}): ${t}`,...n)}}function ai(t,...e){if(fs.logLevel<=ce.WARN){const n=e.map(Ef);fs.warn(`Firestore (${_i}): ${t}`,...n)}}function Ef(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function ve(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class KT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QT{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new mx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new Ct(e)}}class GT{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new GT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new XT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ZT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function li(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ce(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ce(0,0))}static max(){return new ee(new Ce(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $o.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends $o{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const e2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends $o{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return e2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new H(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new H(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ae.fromString(e))}static fromName(e){return new J(Ae.fromString(e).popFirst(5))}static empty(){return new J(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ae(e.slice()))}}function t2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new Vr(s,J.empty(),e)}function n2(t){return new Vr(t.readTime,t.key,-1)}class Vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vr(ee.min(),J.empty(),-1)}static max(){return new Vr(ee.max(),J.empty(),-1)}}function r2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==s2)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{o[d]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function o2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ia(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bf.oe=-1;function Pu(t){return t==null}function ru(t){return t===0&&1/t==-1/0}function a2(t){return typeof t=="number"&&Number.isInteger(t)&&!ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Za(this.root,e,this.comparator,!1)}getReverseIterator(){return new Za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Za(this.root,e,this.comparator,!0)}}class Za{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ht.RED,this.left=s??ht.EMPTY,this.right=i??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ht(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cg(this.data.getIterator())}getIteratorFrom(e){return new Cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class Cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new pt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return li(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yx("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const l2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=l2.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ms(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tf(t){const e=t.mapValue.fields.__previous_value__;return Nf(e)?Tf(e):e}function qo(t){const e=Mr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,s,i,o,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Ho{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nf(t)?4:d2(t)?9007199254740991:c2(t)?10:11:Z()}function Un(t,e){if(t===e)return!0;const n=ps(t);if(n!==ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Mr(s.timestampValue),u=Mr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ms(s.bytesValue).isEqual(ms(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return qe(s.geoPointValue.latitude)===qe(i.geoPointValue.latitude)&&qe(s.geoPointValue.longitude)===qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return qe(s.integerValue)===qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qe(s.doubleValue),u=qe(i.doubleValue);return o===u?ru(o)===ru(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return li(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Ig(o)!==Ig(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Un(o[c],u[c])))return!1;return!0}(t,e);default:return Z()}}function Wo(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function ui(t,e){if(t===e)return 0;const n=ps(t),r=ps(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=qe(i.integerValue||i.doubleValue),c=qe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Ag(t.timestampValue,e.timestampValue);case 4:return Ag(qo(t),qo(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const u=ms(i),c=ms(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const m=me(u[d],c[d]);if(m!==0)return m}return me(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=me(qe(i.latitude),qe(o.latitude));return u!==0?u:me(qe(i.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,d,m;const p=i.fields||{},v=o.fields||{},N=(u=p.value)===null||u===void 0?void 0:u.arrayValue,k=(c=v.value)===null||c===void 0?void 0:c.arrayValue,C=me(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((m=k==null?void 0:k.values)===null||m===void 0?void 0:m.length)||0);return C!==0?C:Rg(N,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===el.mapValue&&o===el.mapValue)return 0;if(i===el.mapValue)return 1;if(o===el.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const v=me(c[p],m[p]);if(v!==0)return v;const N=ui(u[c[p]],d[m[p]]);if(N!==0)return N}return me(c.length,m.length)}(t.mapValue,e.mapValue);default:throw Z()}}function Ag(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Mr(t),r=Mr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Rg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ui(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function ci(t){return Zd(t)}function Zd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ms(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zd(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function jg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function eh(t){return!!t&&"integerValue"in t}function Sf(t){return!!t&&"arrayValue"in t}function kg(t){return!!t&&"nullValue"in t}function Pg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _l(t){return!!t&&"mapValue"in t}function c2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function d2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fo(n)}setAll(e){let n=ft.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=fo(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Bt(fo(this.value))}}function vx(t){const e=[];return vs(t.fields,(n,r)=>{const s=new ft([n]);if(_l(r)){const i=vx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Rt(e,0,ee.min(),ee.min(),ee.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,ee.min(),ee.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ee.min(),ee.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.position=e,this.inclusive=n}}function Dg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=ui(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n="asc"){this.field=e,this.dir=n}}function h2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{}class Ge extends xx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new m2(e,n,r):n==="array-contains"?new y2(e,r):n==="in"?new v2(e,r):n==="not-in"?new x2(e,r):n==="array-contains-any"?new w2(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new p2(e,r):new g2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ui(n,this.value)):n!==null&&ps(this.value)===ps(n)&&this.matchesComparison(ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends xx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Cn(e,n)}matches(e){return wx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wx(t){return t.op==="and"}function _x(t){return f2(t)&&wx(t)}function f2(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function th(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+ci(t.value);if(_x(t))return t.filters.map(e=>th(e)).join(",");{const e=t.filters.map(n=>th(n)).join(",");return`${t.op}(${e})`}}function Ex(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&Un(r.value,s.value)}(t,e):t instanceof Cn?function(r,s){return s instanceof Cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Ex(o,s.filters[u]),!0):!1}(t,e):void Z()}function bx(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${ci(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(bx).join(" ,")+"}"}(t):"Filter"}class m2 extends Ge{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class p2 extends Ge{constructor(e,n){super(e,"in",n),this.keys=Nx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g2 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=Nx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Nx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class y2 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sf(n)&&Wo(n.arrayValue,this.value)}}class v2 extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wo(this.value.arrayValue,n)}}class x2 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wo(this.value.arrayValue,n)}}class w2 extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function Mg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _2(t,e,n,r,s,i,o)}function If(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>th(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ci(r)).join(",")),e.ue=n}return e.ue}function Cf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!h2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ex(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vg(t.startAt,e.startAt)&&Vg(t.endAt,e.endAt)}function nh(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function E2(t,e,n,r,s,i,o,u){return new Ei(t,e,n,r,s,i,o,u)}function Du(t){return new Ei(t)}function Lg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tx(t){return t.collectionGroup!==null}function mo(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new pt(ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ko(i,r))}),n.has(ft.keyField().canonicalString())||e.ce.push(new Ko(ft.keyField(),r))}return e.ce}function Mn(t){const e=te(t);return e.le||(e.le=b2(e,mo(t))),e.le}function b2(t,e){if(t.limitType==="F")return Mg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ko(s.field,i)});const n=t.endAt?new su(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new su(t.startAt.position,t.startAt.inclusive):null;return Mg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rh(t,e){const n=t.filters.concat([e]);return new Ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sh(t,e,n){return new Ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vu(t,e){return Cf(Mn(t),Mn(e))&&t.limitType===e.limitType}function Sx(t){return`${If(Mn(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>bx(s)).join(", ")}]`),Pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ci(s)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function Mu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of mo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=Dg(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,mo(r),s)||r.endAt&&!function(o,u,c){const d=Dg(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,mo(r),s))}(t,e)}function N2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ix(t){return(e,n)=>{let r=!1;for(const s of mo(t)){const i=T2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function T2(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?ui(c,d):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return gx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Oe(J.comparator);function nr(){return S2}const Cx=new Oe(J.comparator);function Xi(...t){let e=Cx;for(const n of t)e=e.insert(n.key,n);return e}function Ax(t){let e=Cx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rs(){return po()}function Rx(){return po()}function po(){return new bi(t=>t.toString(),(t,e)=>t.isEqual(e))}const I2=new Oe(J.comparator),C2=new pt(J.comparator);function ae(...t){let e=C2;for(const n of t)e=e.add(n);return e}const A2=new pt(me);function R2(){return A2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function jx(t){return{integerValue:""+t}}function j2(t,e){return a2(e)?jx(e):Af(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function k2(t,e,n){return t instanceof iu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Nf(i)&&(i=Tf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Qo?Px(t,e):t instanceof Go?Dx(t,e):function(s,i){const o=kx(s,i),u=Og(o)+Og(s.Pe);return eh(o)&&eh(s.Pe)?jx(u):Af(s.serializer,u)}(t,e)}function P2(t,e,n){return t instanceof Qo?Px(t,e):t instanceof Go?Dx(t,e):n}function kx(t,e){return t instanceof ou?function(r){return eh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class iu extends Lu{}class Qo extends Lu{constructor(e){super(),this.elements=e}}function Px(t,e){const n=Vx(e);for(const r of t.elements)n.some(s=>Un(s,r))||n.push(r);return{arrayValue:{values:n}}}class Go extends Lu{constructor(e){super(),this.elements=e}}function Dx(t,e){let n=Vx(e);for(const r of t.elements)n=n.filter(s=>!Un(s,r));return{arrayValue:{values:n}}}class ou extends Lu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Og(t){return qe(t.integerValue||t.doubleValue)}function Vx(t){return Sf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function D2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Qo&&s instanceof Qo||r instanceof Go&&s instanceof Go?li(r.elements,s.elements,Un):r instanceof ou&&s instanceof ou?Un(r.Pe,s.Pe):r instanceof iu&&s instanceof iu}(t.transform,e.transform)}class V2{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function El(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ou{}function Mx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rf(t.key,fn.none()):new oa(t.key,t.data,fn.none());{const n=t.data,r=Bt.empty();let s=new pt(ft.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zr(t.key,r,new Zt(s.toArray()),fn.none())}}function M2(t,e,n){t instanceof oa?function(s,i,o){const u=s.value.clone(),c=Ug(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(s,i,o){if(!El(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Ug(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Lx(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function go(t,e,n,r){return t instanceof oa?function(i,o,u,c){if(!El(i.precondition,o))return u;const d=i.value.clone(),m=zg(i.fieldTransforms,c,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof zr?function(i,o,u,c){if(!El(i.precondition,o))return u;const d=zg(i.fieldTransforms,c,o),m=o.data;return m.setAll(Lx(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return El(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function L2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=kx(r.transform,s||null);i!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,i))}return n||null}function Fg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&li(r,s,(i,o)=>D2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oa extends Ou{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zr extends Ou{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ug(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,P2(o,u,n[s]))}return r}function zg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,k2(i,o,e))}return r}class Rf extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O2 extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&M2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=go(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Rx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Mx(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&li(this.mutations,e.mutations,(n,r)=>Fg(n,r))&&li(this.baseMutations,e.baseMutations,(n,r)=>Fg(n,r))}}class jf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return I2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new jf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,le;function B2(t){switch(t){default:return Z();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Ox(t){if(t===void 0)return tr("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ke.OK:return O.OK;case Ke.CANCELLED:return O.CANCELLED;case Ke.UNKNOWN:return O.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return O.INTERNAL;case Ke.UNAVAILABLE:return O.UNAVAILABLE;case Ke.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ke.NOT_FOUND:return O.NOT_FOUND;case Ke.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ke.ABORTED:return O.ABORTED;case Ke.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ke.DATA_LOSS:return O.DATA_LOSS;default:return Z()}}(le=Ke||(Ke={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new as([4294967295,4294967295],0);function Bg(t){const e=$2().encode(t),n=new lx;return n.update(e),new Uint8Array(n.digest())}function $g(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new as([n,r],0),new as([s,i],0)]}class kf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ji(`Invalid padding: ${n}`);if(r<0)throw new Ji(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ji(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ji(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=as.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(as.fromNumber(r)));return s.compare(q2)===1&&(s=new as([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Bg(e),[r,s]=$g(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new kf(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=Bg(e),[r,s]=$g(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ji extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,aa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fu(ee.min(),s,new Oe(me),nr(),ae())}}class aa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new aa(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Fx{constructor(e,n){this.targetId=e,this.me=n}}class Ux{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class qg{constructor(){this.fe=0,this.ge=Wg(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new aa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Wg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class H2{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=Hg(),this.Qe=new Oe(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(nh(i))if(r===0){const o=new J(i.path);this.Ue(n,o,Rt.newNoDocument(o,ee.min()))}else ve(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=ms(r).toUint8Array()}catch(c){if(c instanceof yx)return ai("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new kf(o,s,i)}catch(c){return ai(c instanceof Ji?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&nh(u.target)){const c=new J(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Rt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Fu(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=Hg(),this.Qe=new Oe(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new qg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Hg(){return new Oe(J.comparator)}function Wg(){return new Oe(J.comparator)}const W2={asc:"ASCENDING",desc:"DESCENDING"},K2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q2={and:"AND",or:"OR"};class G2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ih(t,e){return t.useProto3Json||Pu(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Y2(t,e){return au(t,e.toTimestamp())}function Ln(t){return ve(!!t),ee.fromTimestamp(function(n){const r=Mr(n);return new Ce(r.seconds,r.nanos)}(t))}function Pf(t,e){return oh(t,e).canonicalString()}function oh(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Bx(t){const e=Ae.fromString(t);return ve(Kx(e)),e}function ah(t,e){return Pf(t.databaseId,e.path)}function $c(t,e){const n=Bx(e);if(n.get(1)!==t.databaseId.projectId)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(qx(n))}function $x(t,e){return Pf(t.databaseId,e)}function X2(t){const e=Bx(t);return e.length===4?Ae.emptyPath():qx(e)}function lh(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qx(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kg(t,e,n){return{name:ah(t,e),fields:n.value.mapValue.fields}}function J2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ve(m===void 0||typeof m=="string"),yt.fromBase64String(m||"")):(ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array),yt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const m=d.code===void 0?O.UNKNOWN:Ox(d.code);return new H(m,d.message||"")}(o);n=new Ux(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$c(t,r.document.name),i=Ln(r.document.updateTime),o=r.document.createTime?Ln(r.document.createTime):ee.min(),u=new Bt({mapValue:{fields:r.document.fields}}),c=Rt.newFoundDocument(s,i,o,u),d=r.targetIds||[],m=r.removedTargetIds||[];n=new bl(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$c(t,r.document),i=r.readTime?Ln(r.readTime):ee.min(),o=Rt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new bl([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$c(t,r.document),i=r.removedTargetIds||[];n=new bl([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new z2(s,i),u=r.targetId;n=new Fx(u,o)}}return n}function Z2(t,e){let n;if(e instanceof oa)n={update:Kg(t,e.key,e.value)};else if(e instanceof Rf)n={delete:ah(t,e.key)};else if(e instanceof zr)n={update:Kg(t,e.key,e.data),updateMask:lS(e.fieldMask)};else{if(!(e instanceof O2))return Z();n={verify:ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof iu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Go)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ou)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Y2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function eS(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ln(s.updateTime):Ln(i);return o.isEqual(ee.min())&&(o=Ln(i)),new V2(o,s.transformResults||[])}(n,e))):[]}function tS(t,e){return{documents:[$x(t,e.path)]}}function nS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$x(t,s);const i=function(d){if(d.length!==0)return Wx(Cn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(v){return{field:Cs(v.field),direction:iS(v.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=ih(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function rS(t){let e=X2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const v=Hx(p);return v instanceof Cn&&_x(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(v=>function(k){return new Ko(As(k.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(p){let v;return v=typeof p=="object"?p.value:p,Pu(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(p){const v=!!p.before,N=p.values||[];return new su(N,v)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const v=!p.before,N=p.values||[];return new su(N,v)}(n.endAt)),E2(e,s,o,i,u,"F",c,d)}function sS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=As(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=As(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=As(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=As(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(As(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>Hx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function iS(t){return W2[t]}function oS(t){return K2[t]}function aS(t){return Q2[t]}function Cs(t){return{fieldPath:t.canonicalString()}}function As(t){return ft.fromServerFormat(t.fieldPath)}function Wx(t){return t instanceof Ge?function(n){if(n.op==="=="){if(Pg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(kg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(kg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:oS(n.op),value:n.value}}}(t):t instanceof Cn?function(n){const r=n.getFilters().map(s=>Wx(s));return r.length===1?r[0]:{compositeFilter:{op:aS(n.op),filters:r}}}(t):Z()}function lS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Kx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),u=yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.ct=e}}function cS(t){const e=rS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.un=new hS}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Vr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class hS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new pt(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new pt(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new di(0)}static kn(){return new di(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.changes=new bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&go(r.mutation,s,Zt.empty(),Ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=rs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Xi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=nr();const o=po(),u=function(){return po()}();return n.forEach((c,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof zr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),go(m.mutation,d,m.mutation.getFieldMask(),Ce.now())):o.set(d.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>{var p;return u.set(d,new mS(m,(p=o.get(d))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,n){const r=po();let s=new Oe((o,u)=>o-u),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=r.get(c)||Zt.empty();m=u.applyToLocalView(d,m),r.set(c,m);const p=(s.get(u.batchId)||ae()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,m=c.value,p=Rx();m.forEach(v=>{if(!i.has(v)){const N=Mx(n.get(v),r.get(v));N!==null&&p.set(v,N),i=i.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(rs());let u=-1,c=i;return o.next(d=>F.forEach(d,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?F.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{c=c.insert(m,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ae())).next(m=>({batchId:u,changes:Ax(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Xi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Xi();return this.indexManager.getCollectionParents(e,i).next(u=>F.forEach(u,c=>{const d=function(p,v){return new Ei(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Rt.newInvalidDocument(m)))});let u=Xi();return o.forEach((c,d)=>{const m=i.get(c);m!==void 0&&go(m.mutation,d,Zt.empty(),Ce.now()),Mu(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ln(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:cS(s.bundledQuery),readTime:Ln(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.overlays=new Oe(J.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=rs(),i=n.length+1,o=new J(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=rs(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const u=rs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>u.set(d,m)),!(u.size()>=s)););return F.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new U2(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this.Tr=new pt(nt.Er),this.dr=new pt(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new Ae([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Ae([])),r=new nt(n,e),s=new nt(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(nt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new F2(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new nt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(me);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new nt(new J(i),0);let u=new pt(me);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},o),F.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.Mr=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=nr();const o=n.path,u=new J(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||r2(n2(m),r)<=0||(s.has(m.key)||Mu(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _S(this)}getSize(e){return F.resolve(this.size)}}class _S extends fS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.persistence=e,this.Nr=new bi(n=>If(n),Cf),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Df,this.targetCount=0,this.kr=di.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new di(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bf(0),this.Kr=!1,this.Kr=!0,this.$r=new vS,this.referenceDelegate=e(this),this.Ur=new ES(this),this.indexManager=new dS,this.remoteDocumentCache=function(s){return new wS(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new uS(n),this.Gr=new gS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new xS(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new NS(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class NS extends i2{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Jr=new Df,this.Yr=null}static Zr(e){return new Vf(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Mf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RN()?8:o2(CN())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new TS;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(qi()<=ce.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(qi()<=ce.DEBUG&&G("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(qi()<=ce.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):F.resolve())}Yi(e,n){if(Lg(n))return F.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sh(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,o,c.readTime)?this.Yi(e,sh(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Lg(n)||s.isEqual(ee.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(qi()<=ce.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Is(n)),this.rs(e,o,n,t2(s,-1)).next(u=>u))})}ts(e,n){let r=new pt(Ix(e));return n.forEach((s,i)=>{Mu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return qi()<=ce.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Is(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Oe(me),this._s=new bi(i=>If(i),Cf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function CS(t,e,n,r){return new IS(t,e,n,r)}async function Qx(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ae();for(const d of s){o.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){u.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})}function AS(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,m){const p=d.batch,v=p.keys();let N=F.resolve();return v.forEach(k=>{N=N.next(()=>m.getEntry(c,k)).next(C=>{const R=d.docVersions.get(k);ve(R!==null),C.version.compareTo(R)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),m.addEntry(C)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ae();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Gx(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function RS(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((m,p)=>{const v=s.get(p);if(!v)return;u.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,p)));let N=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?N=N.withResumeToken(yt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):m.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(m.resumeToken,r)),s=s.insert(p,N),function(C,R,E){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(v,N,m)&&u.push(n.Ur.updateTargetData(i,N))});let c=nr(),d=ae();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(jS(i,o,e.documentUpdates).next(m=>{c=m.Ps,d=m.Is})),!r.isEqual(ee.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return F.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function jS(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=nr();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):G("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function kS(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PS(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function uh(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ia(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Qg(t,e,n){const r=te(t);let s=ee.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,m){const p=te(c),v=p._s.get(m);return v!==void 0?F.resolve(p.os.get(v)):p.Ur.getTargetData(d,m)}(r,o,Mn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ae())).next(u=>(DS(r,N2(e),u),{documents:u,Ts:i})))}function DS(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Gg{constructor(){this.activeTargetIds=R2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VS{constructor(){this.so=new Gg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=null;function qc(){return tl===null?tl=function(){return 268435456+Math.round(2147483648*Math.random())}():tl++,"0x"+tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class FS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=qc(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(m=>(G("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw ai("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",s),m})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_i}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=LS[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=qc();return new Promise((o,u)=>{const c=new ux;c.setWithCredentials(!0),c.listenOnce(cx.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wl.NO_ERROR:const m=c.getResponseJson();G(It,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case wl.TIMEOUT:G(It,`RPC '${e}' ${i} timed out`),u(new H(O.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const p=c.getStatus();if(G(It,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const N=v==null?void 0:v.error;if(N&&N.status&&N.message){const k=function(R){const E=R.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(E)>=0?E:O.UNKNOWN}(N.status);u(new H(k,N.message))}else u(new H(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new H(O.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{G(It,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);G(It,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=qc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fx(),u=hx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");G(It,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);let v=!1,N=!1;const k=new OS({Io:R=>{N?G(It,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(v||(G(It,`Opening RPC '${e}' stream ${s} transport.`),p.open(),v=!0),G(It,`RPC '${e}' stream ${s} sending:`,R),p.send(R))},To:()=>p.close()}),C=(R,E,b)=>{R.listen(E,T=>{try{b(T)}catch(D){setTimeout(()=>{throw D},0)}})};return C(p,Yi.EventType.OPEN,()=>{N||(G(It,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),C(p,Yi.EventType.CLOSE,()=>{N||(N=!0,G(It,`RPC '${e}' stream ${s} transport closed`),k.So())}),C(p,Yi.EventType.ERROR,R=>{N||(N=!0,ai(It,`RPC '${e}' stream ${s} transport errored:`,R),k.So(new H(O.UNAVAILABLE,"The operation could not be completed")))}),C(p,Yi.EventType.MESSAGE,R=>{var E;if(!N){const b=R.data[0];ve(!!b);const T=b,D=T.error||((E=T[0])===null||E===void 0?void 0:E.error);if(D){G(It,`RPC '${e}' stream ${s} received error:`,D);const M=D.status;let L=function(g){const x=Ke[g];if(x!==void 0)return Ox(x)}(M),_=D.message;L===void 0&&(L=O.INTERNAL,_="Unknown error status: "+M+" with message "+D.message),N=!0,k.So(new H(L,_)),p.close()}else G(It,`RPC '${e}' stream ${s} received:`,b),k.bo(b)}}),C(u,dx.STAT_EVENT,R=>{R.stat===Jd.PROXY?G(It,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Jd.NOPROXY&&G(It,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function Hc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){return new G2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class US extends Xx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=J2(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Ln(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=lh(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=nh(c)?{documents:tS(i,c)}:{query:nS(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=zx(i,o.resumeToken);const d=ih(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){u.readTime=au(i,o.snapshotVersion.toTimestamp());const d=ih(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=sS(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=lh(this.serializer),n.removeTarget=e,this.a_(n)}}class zS extends Xx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=eS(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=lh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Z2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,oh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,oh(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class $S{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tr(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{xs(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=te(c);d.L_.add(4),await la(d),d.q_.set("Unknown"),d.L_.delete(4),await zu(d)}(this))})}),this.q_=new $S(r,s)}}async function zu(t){if(xs(t))for(const e of t.B_)await e(!0)}async function la(t){for(const e of t.B_)await e(!1)}function Jx(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Uf(n)?Ff(n):Ni(n).r_()&&Of(n,e))}function Lf(t,e){const n=te(t),r=Ni(n);n.N_.delete(e),r.r_()&&Zx(n,e),n.N_.size===0&&(r.r_()?r.o_():xs(n)&&n.q_.set("Unknown"))}function Of(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ni(t).A_(e)}function Zx(t,e){t.Q_.xe(e),Ni(t).R_(e)}function Ff(t){t.Q_=new H2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ni(t).start(),t.q_.v_()}function Uf(t){return xs(t)&&!Ni(t).n_()&&t.N_.size>0}function xs(t){return te(t).L_.size===0}function ew(t){t.Q_=void 0}async function HS(t){t.q_.set("Online")}async function WS(t){t.N_.forEach((e,n)=>{Of(t,e)})}async function KS(t,e){ew(t),Uf(t)?(t.q_.M_(e),Ff(t)):t.q_.set("Unknown")}async function QS(t,e,n){if(t.q_.set("Online"),e instanceof Ux&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lu(t,r)}else if(e instanceof bl?t.Q_.Ke(e):e instanceof Fx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await Gx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.N_.get(d);m&&i.N_.set(d,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const m=i.N_.get(c);if(!m)return;i.N_.set(c,m.withResumeToken(yt.EMPTY_BYTE_STRING,m.snapshotVersion)),Zx(i,c);const p=new wr(m.target,c,d,m.sequenceNumber);Of(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await lu(t,r)}}async function lu(t,e,n){if(!ia(e))throw e;t.L_.add(1),await la(t),t.q_.set("Offline"),n||(n=()=>Gx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await zu(t)})}function tw(t,e){return e().catch(n=>lu(t,n,e))}async function Bu(t){const e=te(t),n=Lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GS(e);)try{const s=await kS(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,YS(e,s)}catch(s){await lu(e,s)}nw(e)&&rw(e)}function GS(t){return xs(t)&&t.O_.length<10}function YS(t,e){t.O_.push(e);const n=Lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function nw(t){return xs(t)&&!Lr(t).n_()&&t.O_.length>0}function rw(t){Lr(t).start()}async function XS(t){Lr(t).p_()}async function JS(t){const e=Lr(t);for(const n of t.O_)e.m_(n.mutations)}async function ZS(t,e,n){const r=t.O_.shift(),s=jf.from(r,e,n);await tw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bu(t)}async function eI(t,e){e&&Lr(t).V_&&await async function(r,s){if(function(o){return B2(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();Lr(r).s_(),await tw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bu(r)}}(t,e),nw(t)&&rw(t)}async function Xg(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=xs(n);n.L_.add(3),await la(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zu(n)}async function tI(t,e){const n=te(t);e?(n.L_.delete(2),await zu(n)):e||(n.L_.add(2),await la(n),n.q_.set("Unknown"))}function Ni(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new US(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:HS.bind(null,t),Ro:WS.bind(null,t),mo:KS.bind(null,t),d_:QS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Uf(t)?Ff(t):t.q_.set("Unknown")):(await t.K_.stop(),ew(t))})),t.K_}function Lr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new zS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:XS.bind(null,t),mo:eI.bind(null,t),f_:JS.bind(null,t),g_:ZS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new zf(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bf(t,e){if(tr("AsyncQueue",`${e}: ${t}`),ia(t))return new H(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Xi(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new Js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(){this.W_=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class hi{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new hi(e,n,Js.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class rI{constructor(){this.queries=Zg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Zg(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new H(O.ABORTED,"Firestore shutting down"))}}function Zg(){return new bi(t=>Sx(t),Vu)}async function $f(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new nI,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Bf(o,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Hf(n)}async function qf(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sI(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Hf(n)}function iI(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Hf(t){t.Y_.forEach(e=>{e.next()})}var ch,ey;(ey=ch||(ch={})).ea="default",ey.Cache="cache";class Wf{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ch.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.key=e}}class iw{constructor(e){this.key=e}}class oI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=Ix(e),this.Ra=new Js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Jg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const v=s.get(m),N=Mu(this.query,p)?p:null,k=!!v&&this.mutatedKeys.has(v.key),C=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let R=!1;v&&N?v.data.isEqual(N.data)?k!==C&&(r.track({type:3,doc:N}),R=!0):this.ga(v,N)||(r.track({type:2,doc:N}),R=!0,(c&&this.Aa(N,c)>0||d&&this.Aa(N,d)<0)&&(u=!0)):!v&&N?(r.track({type:0,doc:N}),R=!0):v&&!N&&(r.track({type:1,doc:v}),R=!0,(c||d)&&(u=!0)),R&&(N?(o=o.add(N),i=C?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,p)=>function(N,k){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return C(N)-C(k)}(m.type,p.type)||this.Aa(m.doc,p.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new hi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new iw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new sw(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return hi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class aI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lI{constructor(e){this.key=e,this.va=!1}}class uI{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bi(u=>Sx(u),Vu),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(J.comparator),this.Na=new Map,this.La=new Df,this.Ba={},this.ka=new Map,this.qa=di.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function cI(t,e,n=!0){const r=dw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ow(r,e,n,!0),s}async function dI(t,e){const n=dw(t);await ow(n,e,!0,!1)}async function ow(t,e,n,r){const s=await PS(t.localStore,Mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await hI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Jx(t.remoteStore,s),u}async function hI(t,e,n,r,s){t.Ka=(p,v,N)=>async function(C,R,E,b){let T=R.view.ma(E);T.ns&&(T=await Qg(C.localStore,R.query,!1).then(({documents:_})=>R.view.ma(_,T)));const D=b&&b.targetChanges.get(R.targetId),M=b&&b.targetMismatches.get(R.targetId)!=null,L=R.view.applyChanges(T,C.isPrimaryClient,D,M);return ny(C,R.targetId,L.wa),L.snapshot}(t,p,v,N);const i=await Qg(t.localStore,e,!0),o=new oI(e,i.Ts),u=o.ma(i.documents),c=aa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);ny(t,n,d.wa);const m=new aI(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function fI(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Vu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await uh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Lf(r.remoteStore,s.targetId),dh(r,s.targetId)}).catch(sa)):(dh(r,s.targetId),await uh(r.localStore,s.targetId,!0))}async function mI(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lf(n.remoteStore,r.targetId))}async function pI(t,e,n){const r=EI(t);try{const s=await function(o,u){const c=te(o),d=Ce.now(),m=u.reduce((N,k)=>N.add(k.key),ae());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=nr(),C=ae();return c.cs.getEntries(N,m).next(R=>{k=R,k.forEach((E,b)=>{b.isValidDocument()||(C=C.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(N,k)).next(R=>{p=R;const E=[];for(const b of u){const T=L2(b,p.get(b.key).overlayedDocument);T!=null&&E.push(new zr(b.key,T,vx(T.value.mapValue),fn.exists(!0)))}return c.mutationQueue.addMutationBatch(N,d,E,u)}).next(R=>{v=R;const E=R.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(N,R.batchId,E)})}).then(()=>({batchId:v.batchId,changes:Ax(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Oe(me)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ua(r,s.changes),await Bu(r.remoteStore)}catch(s){const i=Bf(s,"Failed to persist write");n.reject(i)}}async function aw(t,e){const n=te(t);try{const r=await RS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ve(o.va):s.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await ua(n,r,e)}catch(r){await sa(r)}}function ty(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=te(o);c.onlineState=u;let d=!1;c.queries.forEach((m,p)=>{for(const v of p.j_)v.Z_(u)&&(d=!0)}),d&&Hf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gI(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Oe(J.comparator);o=o.insert(i,Rt.newNoDocument(i,ee.min()));const u=ae().add(i),c=new Fu(ee.min(),new Map,new Oe(me),o,u);await aw(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Kf(r)}else await uh(r.localStore,e,!1).then(()=>dh(r,e,n)).catch(sa)}async function yI(t,e){const n=te(t),r=e.batch.batchId;try{const s=await AS(n.localStore,e);uw(n,r,null),lw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ua(n,s)}catch(s){await sa(s)}}async function vI(t,e,n){const r=te(t);try{const s=await function(o,u){const c=te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,u).next(p=>(ve(p!==null),m=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(r.localStore,e);uw(r,e,n),lw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ua(r,s)}catch(s){await sa(s)}}function lw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function uw(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function dh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||cw(t,r)})}function cw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Lf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Kf(t))}function ny(t,e,n){for(const r of n)r instanceof sw?(t.La.addReference(r.key,e),xI(t,r)):r instanceof iw?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||cw(t,r.key)):Z()}function xI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Kf(t))}function Kf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new lI(n)),t.Oa=t.Oa.insert(n,r),Jx(t.remoteStore,new wr(Mn(Du(n.path)),r,"TargetPurposeLimboResolution",bf.oe))}}async function ua(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Mf.Wi(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const m=te(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,v=>F.forEach(v.$i,N=>m.persistence.referenceDelegate.addReference(p,v.targetId,N)).next(()=>F.forEach(v.Ui,N=>m.persistence.referenceDelegate.removeReference(p,v.targetId,N)))))}catch(p){if(!ia(p))throw p;G("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const v=p.targetId;if(!p.fromCache){const N=m.os.get(v),k=N.snapshotVersion,C=N.withLastLimboFreeSnapshotVersion(k);m.os=m.os.insert(v,C)}}}(r.localStore,i))}async function wI(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await Qx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new H(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ua(n,r.hs)}}function _I(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function dw(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_I.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gI.bind(null,e),e.Ca.d_=sI.bind(null,e.eventManager),e.Ca.$a=iI.bind(null,e.eventManager),e}function EI(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vI.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return CS(this.persistence,new SS,e.initialUser,this.serializer)}Ga(e){return new bS(Vf.Zr,this.serializer)}Wa(e){return new VS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class hh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ty(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wI.bind(null,this.syncEngine),await tI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rI}()}createDatastore(e){const n=Uu(e.databaseInfo.databaseId),r=function(i){return new FS(i)}(e.databaseInfo);return function(i,o,u,c){return new BS(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new qS(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>ty(this.syncEngine,n,0),function(){return Yg.D()?new Yg:new MS}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,m){const p=new uI(s,i,o,u,c,d);return m&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await la(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hh.provider={build:()=>new hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=px.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Qx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ry(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NI(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Xg(e.remoteStore,s)),t._onlineComponents=e}async function NI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ai("Error using user provided cache. Falling back to memory cache: "+n),await Wc(t,new uu)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Wc(t,new uu);return t._offlineComponents}async function hw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await ry(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await ry(t,new hh))),t._onlineComponents}function TI(t){return hw(t).then(e=>e.syncEngine)}async function cu(t){const e=await hw(t),n=e.eventManager;return n.onListen=cI.bind(null,e.syncEngine),n.onUnlisten=fI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mI.bind(null,e.syncEngine),n}function SI(t,e,n={}){const r=new Gn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const m=new Qf({next:v=>{m.Za(),o.enqueueAndForget(()=>qf(i,p));const N=v.docs.has(u);!N&&v.fromCache?d.reject(new H(O.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&v.fromCache&&c&&c.source==="server"?d.reject(new H(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new Wf(Du(u.path),m,{includeMetadataChanges:!0,_a:!0});return $f(i,p)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}function II(t,e,n={}){const r=new Gn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const m=new Qf({next:v=>{m.Za(),o.enqueueAndForget(()=>qf(i,p)),v.fromCache&&c.source==="server"?d.reject(new H(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new Wf(u,m,{includeMetadataChanges:!0,_a:!0});return $f(i,p)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e,n){if(!n)throw new H(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CI(t,e,n,r){if(e===!0&&r===!0)throw new H(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iy(t){if(!J.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oy(t){if(J.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $u(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$u(t);throw new H(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ay({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ay(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WT;switch(r.type){case"firstParty":return new YT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sy.get(n);r&&(G("ComponentProvider","Removing Datastore"),sy.delete(n),r.terminate())}(this),Promise.resolve()}}function AI(t,e,n,r={}){var s;const i=(t=Kt(t,qu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=Ct.MOCK_USER;else{u=IN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ct(d)}t._authCredentials=new KT(new mx(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Br(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class jr extends Br{constructor(e,n,r){super(e,n,Du(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new J(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function on(t,e,...n){if(t=Fn(t),mw("collection","path",e),t instanceof qu){const r=Ae.fromString(e,...n);return oy(r),new jr(t,null,r)}{if(!(t instanceof jt||t instanceof jr))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return oy(r),new jr(t.firestore,null,r)}}function an(t,e,...n){if(t=Fn(t),arguments.length===1&&(e=px.newId()),mw("doc","path",e),t instanceof qu){const r=Ae.fromString(e,...n);return iy(r),new jt(t,null,new J(r))}{if(!(t instanceof jt||t instanceof jr))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return iy(r),new jt(t.firestore,t instanceof jr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yx(this,"async_queue_retry"),this.Vu=()=>{const r=Hc();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Hc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Hc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Gn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ia(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw tr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=zf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function uy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class rr extends qu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ly,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ly(e),this._firestoreClient=void 0,await e}}}function RI(t,e){const n=typeof t=="object"?t:MT(),r=typeof t=="string"?t:"(default)",s=kT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=TN("firestore");i&&AI(s,...i)}return s}function Hu(t){if(t._terminated)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jI(t),t._firestoreClient}function jI(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,m){return new u2(u,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,fw(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new bI(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(yt.fromBase64String(e))}catch(n){throw new H(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fi(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=/^__.*__$/;class PI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}class pw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Jf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return du(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gw(this.Cu)&&kI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class DI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uu(e)}Qu(e,n,r,s=!1){return new Jf({Cu:e,methodName:n,qu:r,path:ft.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ku(t){const e=t._freezeSettings(),n=Uu(t._databaseId);return new DI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Zf("Data must be an object, but it was:",o,r);const u=vw(r,o);let c,d;if(i.merge)c=new Zt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const v=fh(e,p,n);if(!o.contains(v))throw new H(O.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);ww(m,v)||m.push(v)}c=new Zt(m),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new PI(new Bt(u),c,d)}class Qu extends Gf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qu}}function VI(t,e,n,r){const s=t.Qu(1,e,n);Zf("Data must be an object, but it was:",s,r);const i=[],o=Bt.empty();vs(r,(c,d)=>{const m=em(e,c,n);d=Fn(d);const p=s.Nu(m);if(d instanceof Qu)i.push(m);else{const v=ca(d,p);v!=null&&(i.push(m),o.set(m,v))}});const u=new Zt(i);return new pw(o,u,s.fieldTransforms)}function MI(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[fh(e,r,n)],c=[s];if(i.length%2!=0)throw new H(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)u.push(fh(e,i[v])),c.push(i[v+1]);const d=[],m=Bt.empty();for(let v=u.length-1;v>=0;--v)if(!ww(d,u[v])){const N=u[v];let k=c[v];k=Fn(k);const C=o.Nu(N);if(k instanceof Qu)d.push(N);else{const R=ca(k,C);R!=null&&(d.push(N),m.set(N,R))}}const p=new Zt(d);return new pw(m,p,o.fieldTransforms)}function LI(t,e,n,r=!1){return ca(n,t.Qu(r?4:3,e))}function ca(t,e){if(xw(t=Fn(t)))return Zf("Unsupported field value:",e,t),vw(t,e);if(t instanceof Gf)return function(r,s){if(!gw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=ca(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return j2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ce.fromDate(r);return{timestampValue:au(s.serializer,i)}}if(r instanceof Ce){const i=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(s.serializer,i)}}if(r instanceof Yf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fi)return{bytesValue:zx(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xf)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return Af(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${$u(r)}`)}(t,e)}function vw(t,e){const n={};return gx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(t,(r,s)=>{const i=ca(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function xw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof Yf||t instanceof fi||t instanceof jt||t instanceof Gf||t instanceof Xf)}function Zf(t,e,n){if(!xw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=$u(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function fh(t,e,n){if((e=Fn(e))instanceof Wu)return e._internalPath;if(typeof e=="string")return em(t,e);throw du("Field path arguments must be of type string or ",t,!1,void 0,n)}const OI=new RegExp("[~\\*/\\[\\]]");function em(t,e,n){if(e.search(OI)>=0)throw du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wu(...e.split("."))._internalPath}catch{throw du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function du(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new H(O.INVALID_ARGUMENT,u+t+c)}function ww(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FI extends _w{data(){return super.data()}}function tm(t,e){return typeof e=="string"?em(t,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nm{}class bw extends nm{}function hr(t,e,...n){let r=[];e instanceof nm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof sm).length,u=i.filter(c=>c instanceof rm).length;if(o>1||o>0&&u>0)throw new H(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class rm extends bw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rm(e,n,r)}_apply(e){const n=this._parse(e);return Nw(e._query,n),new Br(e.firestore,e.converter,rh(e._query,n))}_parse(e){const n=Ku(e.firestore);return function(i,o,u,c,d,m,p){let v;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){dy(p,m);const N=[];for(const k of p)N.push(cy(c,i,k));v={arrayValue:{values:N}}}else v=cy(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||dy(p,m),v=LI(u,o,p,m==="in"||m==="not-in");return Ge.create(d,m,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class sm extends nm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)Nw(o,c),o=rh(o,c)}(e._query,n),new Br(e.firestore,e.converter,rh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class im extends bw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new im(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ko(i,o)}(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ei(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nl(t,e="asc"){const n=e,r=tm("orderBy",t);return im._create(r,n)}function cy(t,e,n){if(typeof(n=Fn(n))=="string"){if(n==="")throw new H(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tx(e)&&n.indexOf("/")!==-1)throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!J.isDocumentKey(r))throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jg(t,new J(r))}if(n instanceof jt)return jg(t,n._key);throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$u(n)}.`)}function dy(t,e){if(!Array.isArray(t)||t.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nw(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UI{convertValue(e,n="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>qe(o.doubleValue));return new Xf(i)}convertGeoPoint(e){return new Yf(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const n=Mr(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);ve(Kx(r));const s=new Ho(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||tr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sw extends _w{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Nl extends Sw{data(e={}){return super.data(e)}}class Iw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nl(this._firestore,this._userDataWriter,r.key,r,new Zi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new Nl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Zi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new Nl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Zi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:zI(u.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){t=Kt(t,jt);const e=Kt(t.firestore,rr);return SI(Hu(e),t._key).then(n=>Cw(e,t,n))}class om extends UI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function rl(t){t=Kt(t,Br);const e=Kt(t.firestore,rr),n=Hu(e),r=new om(e);return Ew(t._query),II(n,t._query).then(s=>new Iw(e,r,t,s))}function $I(t,e,n){t=Kt(t,jt);const r=Kt(t.firestore,rr),s=Tw(t.converter,e);return Gu(r,[yw(Ku(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fn.none())])}function Hi(t,e,n,...r){t=Kt(t,jt);const s=Kt(t.firestore,rr),i=Ku(s);let o;return o=typeof(e=Fn(e))=="string"||e instanceof Wu?MI(i,"updateDoc",t._key,e,n,r):VI(i,"updateDoc",t._key,e),Gu(s,[o.toMutation(t._key,fn.exists(!0))])}function sl(t){return Gu(Kt(t.firestore,rr),[new Rf(t._key,fn.none())])}function il(t,e){const n=Kt(t.firestore,rr),r=an(t),s=Tw(t.converter,e);return Gu(n,[yw(Ku(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function ol(t,...e){var n,r,s;t=Fn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||uy(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(uy(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,d,m;if(t instanceof jt)d=Kt(t.firestore,rr),m=Du(t._key.path),c={next:p=>{e[o]&&e[o](Cw(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Kt(t,Br);d=Kt(p.firestore,rr),m=p._query;const v=new om(d);c={next:N=>{e[o]&&e[o](new Iw(d,v,p,N))},error:e[o+1],complete:e[o+2]},Ew(t._query)}return function(v,N,k,C){const R=new Qf(C),E=new Wf(N,R,k);return v.asyncQueue.enqueueAndForget(async()=>$f(await cu(v),E)),()=>{R.Za(),v.asyncQueue.enqueueAndForget(async()=>qf(await cu(v),E))}}(Hu(d),m,u,c)}function Gu(t,e){return function(r,s){const i=new Gn;return r.asyncQueue.enqueueAndForget(async()=>pI(await TI(r),s,i)),i.promise}(Hu(t),e)}function Cw(t,e,n){const r=n.docs.get(e._key),s=new om(t);return new Sw(t,s,e._key,r,new Zi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){_i=s})(VT),nu(new zo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new rr(new QT(r.getProvider("auth-internal")),new JT(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(d.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Xs(Sg,"4.7.3",e),Xs(Sg,"4.7.3","esm2017")})();var qI="firebase",HI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs(qI,HI,"app");const WI={apiKey:"AIzaSyCkgUUr8CADydWb62Qdb8p8MHZ_TUkrCzE",authDomain:"sportsbox-result.firebaseapp.com",projectId:"sportsbox-result",storageBucket:"sportsbox-result.appspot.com",messagingSenderId:"1098188923070",appId:"1:1098188923070:web:b021c52a64965bf79dbeef",measurementId:"G-DR5V9BNFZ2"},KI=ix(WI),De=RI(KI),ke={async getDemands(){try{const t=hr(on(De,"demands"),nl("createdAt","desc"));return(await rl(t)).docs.map(n=>{var r,s;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("수요처 데이터 로드 실패:",t),t}},async addDemand(t){try{const e=Ce.now(),n={...t,email:t.email||"",createdAt:e,updatedAt:e};return{id:(await il(on(De,"demands"),n)).id,...t,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("수요처 추가 실패:",e),e}},async updateDemand(t,e){try{const n=an(De,"demands",t);await Hi(n,{...e,updatedAt:Ce.now()})}catch(n){throw console.error("수요처 수정 실패:",n),n}},async deleteDemand(t){try{await sl(an(De,"demands",t))}catch(e){throw console.error("수요처 삭제 실패:",e),e}},async getPerformances(){try{const t=hr(on(De,"performances"),nl("date","desc"));return(await rl(t)).docs.map(n=>{var r,s,i;return{id:n.id,...n.data(),date:((r=n.data().date)==null?void 0:r.toDate())||new Date,createdAt:((s=n.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((i=n.data().updatedAt)==null?void 0:i.toDate())||new Date}})}catch(t){throw console.error("실적 데이터 로드 실패:",t),t}},async addPerformance(t){try{const e=Ce.now(),n=t.notes!==void 0&&t.notes!==null?t.notes.toString().trim():"";return{id:(await il(on(De,"performances"),{...t,notes:n,date:Ce.fromDate(t.date),createdAt:e,updatedAt:e})).id,...t,notes:n,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("실적 추가 실패:",e),e}},async updatePerformance(t,e){try{const n=an(De,"performances",t),r=e.notes!==void 0&&e.notes!==null?e.notes.toString().trim():void 0,s={...e,updatedAt:Ce.now()};r!==void 0&&(s.notes=r),e.date&&(s.date=Ce.fromDate(e.date)),await Hi(n,s)}catch(n){throw console.error("실적 수정 실패:",n),n}},async deletePerformance(t){try{await sl(an(De,"performances",t))}catch(e){throw console.error("실적 삭제 실패:",e),e}},subscribeToDemands(t){const e=hr(on(De,"demands"),nl("createdAt","desc"));return ol(e,n=>{const r=n.docs.map(s=>{var i,o;return{id:s.id,...s.data(),createdAt:((i=s.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=s.data().updatedAt)==null?void 0:o.toDate())||new Date}});t(r)})},subscribeToPerformances(t){const e=hr(on(De,"performances"),nl("date","desc"));return ol(e,n=>{const r=n.docs.map(s=>{var i,o,u;return{id:s.id,...s.data(),date:((i=s.data().date)==null?void 0:i.toDate())||new Date,createdAt:((o=s.data().createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((u=s.data().updatedAt)==null?void 0:u.toDate())||new Date}});t(r)})},async getBudgets(){try{const t=hr(on(De,"budgets"));return(await rl(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 항목 데이터 로드 실패:",t),t}},async addBudget(t){try{return{id:(await il(on(De,"budgets"),t)).id,...t}}catch(e){throw console.error("예산 항목 추가 실패:",e),e}},async updateBudget(t,e){try{const n=an(De,"budgets",t);await Hi(n,e)}catch(n){throw console.error("예산 항목 수정 실패:",n),n}},async deleteBudget(t){try{await sl(an(De,"budgets",t))}catch(e){throw console.error("예산 항목 삭제 실패:",e),e}},async updateBudgetOrder(t){const e=[];for(const n of t){const r=an(De,"budgets",n.id);e.push(Hi(r,{order:n.order??0}))}await Promise.all(e)},subscribeToBudgets(t){const e=hr(on(De,"budgets"));return ol(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async getBudgetUsages(){try{const t=hr(on(De,"budgetUsages"));return(await rl(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 사용 내역 데이터 로드 실패:",t),t}},async addBudgetUsage(t){try{return{id:(await il(on(De,"budgetUsages"),t)).id,...t}}catch(e){throw console.error("예산 사용 내역 추가 실패:",e),e}},async updateBudgetUsage(t,e){try{const n=an(De,"budgetUsages",t);await Hi(n,e)}catch(n){throw console.error("예산 사용 내역 수정 실패:",n),n}},async deleteBudgetUsage(t){try{await sl(an(De,"budgetUsages",t))}catch(e){throw console.error("예산 사용 내역 삭제 실패:",e),e}},subscribeToBudgetUsages(t){const e=hr(on(De,"budgetUsages"));return ol(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async getAdminUser(){try{const t=an(De,"admin","user"),e=await BI(t);return e.exists()?e.data():null}catch(t){throw console.error("관리자 계정 로드 실패:",t),t}},async saveAdminUser(t){try{const e=an(De,"admin","user");await $I(e,t)}catch(e){throw console.error("관리자 계정 저장 실패:",e),e}},async createDefaultAdmin(){try{const{hashPassword:t}=await pN(async()=>{const{hashPassword:n}=await Promise.resolve().then(()=>dC);return{hashPassword:n}},void 0),e=await t("admin123");await this.saveAdminUser({username:"admin",passwordHash:e})}catch(t){throw console.error("기본 관리자 계정 생성 실패:",t),t}}},Ti=()=>{const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,i]=j.useState(!0),[o,u]=j.useState(null);return j.useEffect(()=>{let c=null,d=null;return(async()=>{try{i(!0),u(null),c=ke.subscribeToDemands(p=>{e(p)}),d=ke.subscribeToPerformances(p=>{r(p)}),i(!1)}catch(p){console.error("Firebase 데이터 초기화 실패:",p),u("데이터를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요."),i(!1)}})(),()=>{c&&c(),d&&d()}},[]),{demands:t,performances:n,loading:s,error:o,addDemand:ke.addDemand,updateDemand:ke.updateDemand,deleteDemand:ke.deleteDemand,addPerformance:ke.addPerformance,updatePerformance:ke.updatePerformance,deletePerformance:ke.deletePerformance}},hy=(t,e=[])=>{if(t.length===0)return{totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]};const n=t.reduce((C,R)=>C+(R.maleCount||0),0),r=t.reduce((C,R)=>C+(R.femaleCount||0),0),s=n+r,i=t.reduce((C,R)=>C+(R.promotionCount||0),0),u=new Set(t.map(C=>C.organizationName)).size,c=new Date,d=[];for(let C=11;C>=0;C--){const R=new Date(c.getFullYear(),c.getMonth()-C,1),E=R.toLocaleDateString("ko-KR",{month:"short",year:"2-digit"}),b=t.filter(L=>{if(!L.date)return!1;const _=new Date(L.date);return _.getMonth()===R.getMonth()&&_.getFullYear()===R.getFullYear()}),T=b.reduce((L,_)=>L+(_.maleCount||0),0),D=b.reduce((L,_)=>L+(_.femaleCount||0),0),M=b.reduce((L,_)=>L+(_.promotionCount||0),0);d.push({month:E,male:T,female:D,total:T+D,promotions:M})}const m=new Map;t.forEach(C=>{const R=m.get(C.organizationName)||{total:0,count:0,city:""},E=e.find(b=>b.organizationName===C.organizationName);m.set(C.organizationName,{total:R.total+(C.maleCount||0)+(C.femaleCount||0),count:R.count+1,city:(E==null?void 0:E.city)||R.city||""})});const p=Array.from(m.entries()).map(([C,R])=>({name:C,total:R.total,count:R.count,city:R.city})).sort((C,R)=>R.total-C.total),v=new Map;["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"].forEach(C=>{v.set(C,{total:0,count:0})}),t.forEach(C=>{const R=e.find(E=>E.organizationName===C.organizationName);if(R&&v.has(R.city)){const E=v.get(R.city);v.set(R.city,{total:E.total+(C.maleCount||0)+(C.femaleCount||0),count:E.count+1})}});const k=Array.from(v.entries()).map(([C,R])=>({name:C,total:R.total,count:R.count})).sort((C,R)=>R.total-C.total);return{totalMale:n,totalFemale:r,totalPeople:s,totalPromotions:i,totalOrganizations:u,monthlyData:d,organizationData:p,cityData:k}},fy=()=>{const{demands:t,performances:e}=Ti(),[n,r]=j.useState({totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]}),[s,i]=j.useState([]),[o,u]=j.useState([]),[c,d]=j.useState(null),[m,p]=j.useState(""),[v,N]=j.useState(0),k=["과천시","광명시","광주시","군포시","김포시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","여주시","오산시","용인시","의왕시","이천시","평택시","하남시","화성시","양평군"],C=["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"],[R,E]=j.useState("전체"),[b,T]=j.useState(null),[D,M]=j.useState(!1),[L,_]=j.useState(!1),[y,g]=j.useState(!1),[x,S]=j.useState(null),[A,I]=j.useState({});function oe(){const z={};se.forEach(W=>{const _e=W.program||"스포츠교실";z[_e]||(z[_e]={count:0,people:0}),z[_e].count+=1,z[_e].people+=(W.maleCount||0)+(W.femaleCount||0)}),I(z),_(!0)}j.useEffect(()=>{const z=ke.subscribeToBudgets(i),W=ke.subscribeToBudgetUsages(u);return()=>{z(),W()}},[]);const[ne,Ye]=j.useState({}),se=e.filter(z=>{const W=new Date(z.date),_e=ne.startDate instanceof Date?ne.startDate:ne.startDate?new Date(ne.startDate):void 0,ge=ne.endDate instanceof Date?ne.endDate:ne.endDate?new Date(ne.endDate):void 0;return!(_e&&W<_e||ge&&W>ge)});j.useEffect(()=>{o.filter(W=>!(ne.startDate&&new Date(W.date)<ne.startDate||ne.endDate&&new Date(W.date)>ne.endDate));const z=hy(se,t);r({...z,totalOrganizations:t.length})},[t,e,ne.startDate,ne.endDate]);const $=z=>{d(z.id),p(z.name),N(z.amount)},Q=async z=>{await ke.updateBudget(z,{name:m,amount:v}),d(null)},Y=async()=>{await ke.addBudget({name:"",amount:0})},he=zE(UE(vf)),B=async z=>{const{active:W,over:_e}=z;if(W.id!==_e.id){const ge=s.findIndex(Gt=>Gt.id===W.id),An=s.findIndex(Gt=>Gt.id===_e.id),Ft=xf(s,ge,An).map((Gt,ir)=>({...Gt,order:ir}));await ke.updateBudgetOrder(Ft)}},X=o.filter(z=>!(ne.startDate&&new Date(z.date)<ne.startDate||ne.endDate&&new Date(z.date)>ne.endDate)),we=z=>X.filter(W=>W.budgetItemId===z).reduce((W,_e)=>W+(Number(_e.amount)||0),0),Te=async z=>{await ke.deleteBudget(z)},xe=z=>{S(z),g(!0)};j.useEffect(()=>{const z=hy(e,t);r({...z,totalOrganizations:t.length})},[t,e]);const Fe=s.reduce((z,W)=>z+(Number(W.amount)||0),0),ot=X.reduce((z,W)=>z+(Number(W.amount)||0),0),at=Fe-ot,re=Fe>0?Math.round(ot/Fe*1e3)/10:0,Xe=({title:z,value:W,icon:_e,color:ge})=>l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:z}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:W})]}),l.jsx("div",{className:`p-3 rounded-lg ${ge}`,children:l.jsx(_e,{className:"w-6 h-6 text-white"})})]})}),vt=({data:z,onBarClick:W})=>{const _e=Math.max(...z.map(ge=>ge.total),1);return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"시/군별 참여 현황"}),l.jsx("div",{className:"flex gap-2 mb-4",children:["전체","남부","북부"].map(ge=>l.jsx("button",{className:`px-4 py-2 rounded-full border font-semibold transition-colors duration-200 ${R===ge?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>E(ge),children:ge},ge))}),z.length>0?l.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-96 overflow-y-auto",children:z.map((ge,An)=>l.jsxs("div",{className:`flex items-center space-x-4 p-3 bg-gray-50 rounded-lg transition cursor-pointer hover:shadow-md ${W?"hover:bg-blue-100":""}`,onClick:W?()=>W(ge.name):void 0,children:[l.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[70px] text-center",children:ge.name}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"bg-gray-200 rounded-full h-6 relative",children:l.jsx("div",{className:"bg-blue-500 h-6 rounded-full transition-all duration-500 ease-out flex items-center justify-end pr-2",style:{width:`${Math.max(ge.total/_e*100,8)}%`},title:`${ge.count}회, ${ge.total.toLocaleString()}명`,children:l.jsxs("span",{className:"text-xs text-white font-medium",children:[ge.total.toLocaleString(),"명"]})})})}),l.jsxs("div",{className:"text-sm text-gray-600 font-mono min-w-[50px] text-right",children:[ge.count,"회"]})]},An))}):l.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"데이터가 없습니다"})]})},sn=n.cityData.filter(z=>R==="전체"?!0:R==="남부"?k.includes(z.name):R==="북부"?C.includes(z.name):!0),xt=n.organizationData.filter(z=>z.city===b);return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"대시보드"}),l.jsx("p",{className:"text-gray-600",children:"수요처 및 실적 현황 개요"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx(Xe,{title:"등록 단체수",value:n.totalOrganizations.toString(),icon:tg,color:"bg-blue-500"}),l.jsx("div",{onClick:oe,className:"cursor-pointer",children:l.jsx(Xe,{title:"총 횟수",value:se.length.toString(),icon:Do,color:"bg-green-500"})}),l.jsx(Xe,{title:"총 참여 인원",value:se.reduce((z,W)=>z+(W.maleCount||0)+(W.femaleCount||0),0).toLocaleString()+"명",icon:Dr,color:"bg-purple-500"}),l.jsx(Xe,{title:"평균 참여 인원",value:se.length>0?Math.round(se.reduce((z,W)=>z+(W.maleCount||0)+(W.femaleCount||0),0)/se.length).toLocaleString()+"명":"0명",icon:Gs,color:"bg-orange-500"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[l.jsx(Xe,{title:"전체 예산액",value:Fe.toLocaleString()+"원",icon:Gs,color:"bg-blue-500"}),l.jsx(Xe,{title:"전체 사용액",value:ot.toLocaleString()+"원",icon:Dr,color:"bg-green-500"}),l.jsx(Xe,{title:"전체 잔액",value:at.toLocaleString()+"원",icon:tg,color:"bg-gray-500"}),l.jsx(Xe,{title:"전체 집행율",value:re+"%",icon:Do,color:"bg-orange-500"})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"시작 날짜"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ne.startDate?ne.startDate.toISOString().split("T")[0]:"",onChange:z=>Ye(W=>({...W,startDate:z.target.value?new Date(z.target.value):void 0}))}),l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"종료 날짜"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ne.endDate?ne.endDate.toISOString().split("T")[0]:"",onChange:z=>Ye(W=>({...W,endDate:z.target.value?new Date(z.target.value):void 0}))}),l.jsx("button",{className:"ml-2 px-3 py-1 bg-gray-100 rounded hover:bg-gray-200 text-sm",onClick:()=>Ye({}),children:"전체 초기화"})]})}),l.jsx("div",{className:"mb-8",children:l.jsx(vt,{data:sn,onBarClick:z=>{T(z),M(!0)}})}),l.jsx(Hb,{sensors:he,collisionDetection:WE,onDragEnd:B,children:l.jsx(sN,{items:s.map(z=>z.id),strategy:nN,children:l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 현황"}),l.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:Y,children:"+ 예산 항목 추가"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-2 text-center"}),l.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),l.jsx("th",{className:"px-2 py-2 text-right",children:"예산액"}),l.jsx("th",{className:"px-2 py-2 text-right",children:"사용액"}),l.jsx("th",{className:"px-2 py-2 text-right",children:"잔액"}),l.jsx("th",{className:"px-2 py-2 text-right",children:"집행율(%)"}),l.jsx("th",{className:"px-2 py-2 text-center",children:"수정"}),l.jsx("th",{className:"px-2 py-2 text-center",children:"삭제"})]})}),l.jsx("tbody",{children:s.sort((z,W)=>(z.order??0)-(W.order??0)).map(z=>l.jsx(QI,{item:z,editingBudgetId:c,editingBudgetName:m,editingBudgetAmount:v,setEditingBudgetName:p,setEditingBudgetAmount:N,setEditingBudgetId:d,handleEditBudget:$,handleSaveBudget:Q,handleDeleteBudget:Te,handleBudgetItemClick:xe,used:we(z.id),isDragging:!1},z.id))})]})})]})})}),D&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 relative animate-fadeIn",children:[l.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>M(!1),children:"×"}),l.jsxs("h3",{className:"text-2xl font-bold mb-4 text-blue-700",children:[b," 수요처별 참여 현황"]}),xt.length>0?l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("th",{className:"px-2 py-2 text-left",children:"수요처명"}),l.jsx("th",{className:"px-2 py-2 text-right",children:"횟수"}),l.jsx("th",{className:"px-2 py-2 text-right",children:"총 참여인원"})]})}),l.jsx("tbody",{children:xt.map((z,W)=>l.jsxs("tr",{className:"hover:bg-blue-50",children:[l.jsx("td",{className:"px-2 py-2 font-medium text-gray-900",children:z.name}),l.jsxs("td",{className:"px-2 py-2 text-right",children:[z.count,"회"]}),l.jsxs("td",{className:"px-2 py-2 text-right",children:[z.total.toLocaleString(),"명"]})]},W))})]}):l.jsx("div",{className:"text-gray-500 text-center py-8",children:"데이터가 없습니다"})]})}),L&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 relative animate-fadeIn border-2 border-green-400",children:[l.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>_(!1),children:"×"}),l.jsx("h3",{className:"text-2xl font-bold mb-6 text-green-700 text-center",children:"프로그램별 실적 요약"}),l.jsx("div",{className:"grid gap-4",children:["스포츠교실","스포츠체험존","스포츠이벤트"].map(z=>{var W,_e,ge;return l.jsxs("div",{className:"bg-green-50 rounded-lg p-4 flex items-center justify-between shadow-sm border border-green-100",children:[l.jsx("div",{className:"font-semibold text-lg text-green-900",children:z}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"총 횟수"}),l.jsxs("span",{className:"text-xl font-bold text-green-700",children:[((W=A[z])==null?void 0:W.count)||0,"회"]})]}),l.jsxs("div",{className:"flex flex-col items-end ml-6",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"총 인원"}),l.jsxs("span",{className:"text-xl font-bold text-green-700",children:[((ge=(_e=A[z])==null?void 0:_e.people)==null?void 0:ge.toLocaleString())||0,"명"]})]})]},z)})})]})}),y&&x&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[80vh] p-6 relative animate-fadeIn",children:[l.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>g(!1),children:"×"}),l.jsxs("h3",{className:"text-2xl font-bold mb-4 text-blue-700",children:[x.name," 사용 내역"]}),l.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:(()=>{const z=X.filter(W=>W.budgetItemId===x.id);return z.length>0?l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left",children:"적요"}),l.jsx("th",{className:"px-3 py-2 text-left",children:"채주"}),l.jsx("th",{className:"px-3 py-2 text-right",children:"집행액"}),l.jsx("th",{className:"px-3 py-2 text-center",children:"집행일자"}),l.jsx("th",{className:"px-3 py-2 text-center",children:"결제방법"}),l.jsx("th",{className:"px-3 py-2 text-left",children:"메모"})]})}),l.jsx("tbody",{children:z.map((W,_e)=>l.jsxs("tr",{className:"hover:bg-blue-50 border-b",children:[l.jsx("td",{className:"px-3 py-2 font-medium text-gray-900",children:W.description}),l.jsx("td",{className:"px-3 py-2 text-gray-700",children:W.vendor}),l.jsxs("td",{className:"px-3 py-2 text-right font-semibold text-blue-600",children:[Number(W.amount).toLocaleString(),"원"]}),l.jsx("td",{className:"px-3 py-2 text-center text-gray-700",children:W.date}),l.jsx("td",{className:"px-3 py-2 text-center text-gray-700",children:W.paymentMethod}),l.jsx("td",{className:"px-3 py-2 text-gray-600",children:W.note||"-"})]},W.id))}),l.jsx("tfoot",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("td",{colSpan:2,className:"px-3 py-2 font-semibold text-gray-900",children:"총 사용액"}),l.jsxs("td",{className:"px-3 py-2 text-right font-bold text-blue-600",children:[z.reduce((W,_e)=>W+Number(_e.amount),0).toLocaleString(),"원"]}),l.jsx("td",{colSpan:3})]})})]}):l.jsx("div",{className:"text-gray-500 text-center py-8",children:"사용 내역이 없습니다"})})()})]})})]})};function QI({item:t,editingBudgetId:e,editingBudgetName:n,editingBudgetAmount:r,setEditingBudgetName:s,setEditingBudgetAmount:i,setEditingBudgetId:o,handleEditBudget:u,handleSaveBudget:c,handleDeleteBudget:d,handleBudgetItemClick:m,used:p,isDragging:v}){const{attributes:N,listeners:k,setNodeRef:C,transform:R,transition:E,isDragging:b}=dN({id:t.id}),T={transform:Fo.Transform.toString(R),transition:E,background:b?"#e0f2fe":void 0},D=t.amount-p,M=t.amount>0?p/t.amount*100:0;return l.jsxs("tr",{ref:C,style:T,...N,children:[l.jsx("td",{className:"px-2 py-2 text-center cursor-grab",...k,children:l.jsx(NE,{className:"w-4 h-4 text-gray-400"})}),l.jsx("td",{className:"px-2 py-2 flex items-center gap-2",children:e===t.id?l.jsx("input",{className:"border rounded px-2 py-1 w-32",value:n,onChange:L=>s(L.target.value)}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`${t.name.includes("북부")?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded font-semibold":"bg-gray-100 text-gray-800 px-2 py-1 rounded font-semibold"} cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>m(t),title:"클릭하여 사용 내역 보기",children:t.name}),t.region==="남부"&&l.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}),t.region==="북부"&&l.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"})]})}),l.jsx("td",{className:"px-2 py-2 text-right",children:e===t.id?l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:r,onChange:L=>i(Number(L.target.value))}):t.amount.toLocaleString()}),l.jsx("td",{className:"px-2 py-2 text-right",children:p.toLocaleString()}),l.jsx("td",{className:"px-2 py-2 text-right",children:D.toLocaleString()}),l.jsx("td",{className:"px-2 py-2 text-right",children:M.toFixed(2)}),l.jsx("td",{className:"px-2 py-2 text-center",children:e===t.id?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 text-green-600 hover:underline",onClick:()=>c(t.id),children:"저장"}),l.jsx("button",{className:"px-2 py-1 text-gray-500 hover:underline",onClick:()=>o(null),children:"취소"})]}):l.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>u(t),children:"수정"})}),l.jsx("td",{className:"px-2 py-2 text-center",children:l.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>d(t.id),children:l.jsx(Au,{className:"inline w-4 h-4"})})})]})}const GI=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));i.length>=4&&n.push({city:i[0]||"",organizationName:i[1]||"",contactPerson:i[2]||"",phoneNumber:i[3]||"",email:i[4]||""})}return n},YI=()=>{const t=`\uFEFF시/군,단체명,담당자명,연락처,이메일
수원시,예시 단체,홍길동,010-1234-5678,hong@example.com
성남시,샘플 그룹,김철수,010-9876-5432,kim@sample.org`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="수요처_등록_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},XI=t=>{let e=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,총인원,홍보횟수,메모
`;t.forEach(i=>{const o=(i.maleCount||0)+(i.femaleCount||0),u=i.date?i.date.toLocaleDateString("ko-KR"):"",c=i.notes||"",d=[u,`"${i.organizationName}"`,`"${i.city||""}"`,`"${i.program||"스포츠교실"}"`,i.maleCount||0,i.femaleCount||0,o,i.promotionCount||0,`"${c.replace(/"/g,'""')}"`].join(",");e+=d+`
`});const n=new Blob([e],{type:"text/csv;charset=utf-8"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`실적_데이터_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)},JI=()=>{const t=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,홍보횟수,메모
2024-01-15,예시 단체,수원시,스포츠교실,10,15,5,샘플 메모
2024-01-16,샘플 그룹,성남시,스포츠체험존,8,12,3,테스트 데이터
2024-01-17,테스트 단체,안양시,스포츠이벤트,5,10,2,이벤트 데이터`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="실적_업로드_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},ZI=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));if(i.length>=8){const o=i[0];let u;try{o.includes("-")?u=new Date(o):o.includes("/")?u=new Date(o):u=new Date,isNaN(u.getTime())&&(u=new Date)}catch{u=new Date}n.push({date:u,organizationName:i[1]||"",city:i[2]||"",program:i[3]||"스포츠교실",maleCount:parseInt(i[4])||0,femaleCount:parseInt(i[5])||0,promotionCount:parseInt(i[6])||0,notes:i[7]||""})}}return n},eC=(t,e)=>{let n=`\uFEFF예산명,적요,채주,집행액,집행일자,결제방법,메모
`;t.forEach(o=>{var d;const c=[`"${((d=e.find(m=>m.id===o.budgetItemId))==null?void 0:d.name)||""}"`,`"${o.description||""}"`,`"${o.vendor||""}"`,o.amount||0,o.date||"",o.paymentMethod||"",`"${o.note||""}"`].join(",");n+=c+`
`});const r=new Blob([n],{type:"text/csv;charset=utf-8"}),s=window.URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`예산사용내역_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)},da=()=>{const[t,e]=j.useState([]),n=j.useCallback(s=>{const i=crypto.randomUUID(),o={...s,id:i,duration:s.duration||5e3};e(u=>[...u,o]),setTimeout(()=>{e(u=>u.filter(c=>c.id!==i))},o.duration)},[]),r=j.useCallback(s=>{e(i=>i.filter(o=>o.id!==s))},[]);return{toasts:t,addToast:n,removeToast:r}},tC=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],nC=()=>{const{addToast:t}=da(),{addDemand:e}=Ti(),n=j.useRef(null),[r,s]=j.useState("manual"),[i,o]=j.useState(!1),[u,c]=j.useState(!1),[d,m]=j.useState(!1),[p,v]=j.useState(!1),[N,k]=j.useState({success:0,error:0}),[C,R]=j.useState(!1),[E,b]=j.useState(!1),[T,D]=j.useState({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""}),M=A=>{const{name:I,value:oe}=A.target;D(ne=>({...ne,[I]:oe}))},L=async A=>{if(A.preventDefault(),!T.city||!T.organizationName||!T.contactPerson||!T.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}R(!0);try{await e({city:T.city,organizationName:T.organizationName,contactPerson:T.contactPerson,phoneNumber:T.phoneNumber,email:T.email||""}),c(!0),D({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""})}catch{t({type:"error",title:"등록 실패",message:"수요처 등록 중 오류가 발생했습니다"})}finally{R(!1)}},_=async A=>{b(!0);const I=new FileReader;I.onload=async oe=>{var ne;try{const Ye=(ne=oe.target)==null?void 0:ne.result,se=GI(Ye);if(se.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let $=0,Q=0;for(const Y of se)try{Y.city&&Y.organizationName&&Y.contactPerson&&Y.phoneNumber?(await e(Y),$++):Q++}catch{Q++}k({success:$,error:Q}),v(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{b(!1)}},I.readAsText(A,"UTF-8")},y=A=>{A.preventDefault(),o(!1);const I=Array.from(A.dataTransfer.files);I.length>0&&_(I[0])},g=A=>{A.preventDefault(),o(!0)},x=A=>{A.preventDefault(),o(!1)},S=A=>{const I=A.target.files;I&&I.length>0&&_(I[0]),A.target.value=""};return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 등록"}),l.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 수요처를 등록하세요"})]}),l.jsx("div",{className:"border-b border-gray-200 mb-8",children:l.jsxs("nav",{className:"-mb-px flex space-x-8",children:[l.jsxs("button",{onClick:()=>s("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Rv,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),l.jsxs("button",{onClick:()=>s("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Mo,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),r==="manual"&&l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:l.jsxs("form",{onSubmit:L,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"시/군 *"}),l.jsxs("select",{id:"city",name:"city",value:T.city,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[l.jsx("option",{value:"",children:"시/군을 선택하세요"}),tC.map(A=>l.jsx("option",{value:A,children:A},A))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),l.jsx("input",{type:"text",id:"organizationName",name:"organizationName",value:T.organizationName,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"단체명을 입력하세요",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-gray-700 mb-2",children:"담당자명 *"}),l.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:T.contactPerson,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"담당자명을 입력하세요",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"연락처 *"}),l.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:T.phoneNumber,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"연락처를 입력하세요",required:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일 (선택사항)"}),l.jsx("input",{type:"email",id:"email",name:"email",value:T.email,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"이메일 주소를 입력하세요"})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",disabled:C,children:C?l.jsxs(l.Fragment,{children:[l.jsx(Vo,{className:"w-4 h-4 mr-2 animate-spin"}),"등록 중..."]}):"수요처 등록"})})]})}),r==="bulk"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(os,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),l.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 시/군, 단체명, 담당자명, 연락처, 이메일(선택)"}),l.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[l.jsxs("button",{onClick:YI,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(cf,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),l.jsxs("button",{onClick:()=>m(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(uf,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:l.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:y,onDragOver:g,onDragLeave:x,children:E?l.jsxs(l.Fragment,{children:[l.jsx(Vo,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),l.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Mo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),l.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),l.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),l.jsx("input",{ref:n,type:"file",accept:".csv,.txt",onChange:S,className:"hidden"}),l.jsx("button",{onClick:()=>{var A;return(A=n.current)==null?void 0:A.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),u&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx(be,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"등록 완료!"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"수요처가 성공적으로 등록되었습니다."}),l.jsx("button",{onClick:()=>c(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx(be,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"업로드 완료!"}),l.jsxs("div",{className:"text-gray-600 mb-6",children:[l.jsx("p",{className:"mb-2",children:"파일 업로드가 완료되었습니다."}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{children:"성공:"}),l.jsxs("span",{className:"font-semibold text-green-600",children:[N.success,"건"]})]}),N.error>0&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:"실패:"}),l.jsxs("span",{className:"font-semibold text-red-600",children:[N.error,"건"]})]})]})]}),l.jsx("button",{onClick:()=>v(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),d&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"CSV 파일 저장 방법"}),l.jsx("p",{className:"text-gray-600",children:"한글이 깨지지 않게 저장하는 방법을 안내합니다."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 Microsoft Excel 사용시"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),l.jsxs("li",{children:["데이터 입력 완료 후 ",l.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),l.jsxs("li",{children:["파일 형식에서 ",l.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),l.jsx("li",{children:"파일명 입력 후 저장"}),l.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),l.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',l.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 Google Sheets 사용시"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"구글 시트에서 데이터 입력"}),l.jsxs("li",{children:[l.jsx("strong",{children:"파일 → 다운로드 → 쉼표로 구분된 값(.csv, 현재 시트)"})," 선택"]}),l.jsx("li",{children:"다운로드된 파일을 업로드"})]}),l.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:l.jsx("p",{className:"text-sm text-green-800",children:"구글 시트는 자동으로 UTF-8로 저장되어 한글 문제가 없습니다."})})]})]}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:()=>m(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},rC=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],sC=()=>{const{addToast:t}=da(),{demands:e,updateDemand:n,deleteDemand:r}=Ti(),[s,i]=j.useState(null),[o,u]=j.useState(""),[c,d]=j.useState({}),m=e.filter(R=>R.organizationName.toLowerCase().includes(o.toLowerCase())||R.city.toLowerCase().includes(o.toLowerCase())||R.contactPerson.toLowerCase().includes(o.toLowerCase())),p=R=>{i(R.id),d(R)},v=async()=>{if(!s||!c.city||!c.organizationName||!c.contactPerson||!c.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await n(s,c),i(null),d({}),t({type:"success",title:"수정 완료",message:"수요처 정보가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"수요처 정보 수정 중 오류가 발생했습니다"})}},N=()=>{i(null),d({})},k=async(R,E)=>{if(window.confirm(`"${E}"의 수요처 정보를 삭제하시겠습니까?`))try{await r(R),t({type:"success",title:"삭제 완료",message:"수요처 정보가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"수요처 정보 삭제 중 오류가 발생했습니다"})}},C=(R,E)=>{d(b=>({...b,[R]:E}))};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 관리"}),l.jsx("p",{className:"text-gray-600",children:"등록된 수요처 정보를 조회, 수정, 삭제할 수 있습니다"})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"relative max-w-md",children:[l.jsx(jv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"수요처 검색...",value:o,onChange:R=>u(R.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"시/군"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"담당자"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"연락처"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"이메일"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"등록일"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(R=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:s===R.id?l.jsxs("select",{value:c.city||"",onChange:E=>C("city",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"시/군 선택"}),rC.map(E=>l.jsx("option",{value:E,children:E},E))]}):l.jsx("span",{className:"text-sm text-gray-900",children:R.city})}),l.jsx("td",{className:"px-6 py-4",children:s===R.id?l.jsx("input",{type:"text",value:c.organizationName||"",onChange:E=>C("organizationName",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-sm font-medium text-gray-900",children:R.organizationName})}),l.jsx("td",{className:"px-6 py-4",children:s===R.id?l.jsx("input",{type:"text",value:c.contactPerson||"",onChange:E=>C("contactPerson",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-sm text-gray-900",children:R.contactPerson})}),l.jsx("td",{className:"px-6 py-4",children:s===R.id?l.jsx("input",{type:"tel",value:c.phoneNumber||"",onChange:E=>C("phoneNumber",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-sm text-gray-900",children:R.phoneNumber})}),l.jsx("td",{className:"px-6 py-4",children:s===R.id?l.jsx("input",{type:"email",value:c.email||"",onChange:E=>C("email",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-sm text-gray-500",children:R.email||"-"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:"text-sm text-gray-500",children:R.createdAt.toLocaleDateString("ko-KR")})}),l.jsx("td",{className:"px-6 py-4 text-right",children:s===R.id?l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:v,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:l.jsx(oi,{className:"w-4 h-4"})}),l.jsx("button",{onClick:N,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:l.jsx(Lo,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:()=>p(R),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:l.jsx(Av,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>k(R.id,R.organizationName),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:l.jsx(Au,{className:"w-4 h-4"})})]})})]},R.id))})]})}),m.length===0&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-gray-500",children:"검색 결과가 없습니다"})})]}),l.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",m.length,"건 표시"]})]})},iC=()=>{const{addToast:t}=da(),{demands:e,addPerformance:n}=Ti(),r=j.useRef(null),[s,i]=j.useState("manual"),[o,u]=j.useState(!1),[c,d]=j.useState(!1),[m,p]=j.useState(!1),[v,N]=j.useState(!1),[k,C]=j.useState({success:0,error:0}),[R,E]=j.useState(""),[b,T]=j.useState(!1),[D,M]=j.useState(!1),[L,_]=j.useState(!1),[y,g]=j.useState({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),x=Array.from(new Set(e.map(B=>B.organizationName))).sort(),S=x.filter(B=>B.toLowerCase().includes(R.toLowerCase())),A=e.find(B=>B.organizationName===y.organizationName),I=(A==null?void 0:A.city)||"",oe=B=>{const{name:X,value:we}=B.target;g(Te=>({...Te,[X]:we}))},ne=()=>{const B=parseInt(y.maleCount)||0,X=parseInt(y.femaleCount)||0;return B+X},Ye=async B=>{if(B.preventDefault(),!y.date||!y.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const X=parseInt(y.maleCount)||0,we=parseInt(y.femaleCount)||0,Te=parseInt(y.promotionCount)||0;if(X<0||we<0||Te<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}M(!0);try{await n({date:new Date(y.date),organizationName:y.organizationName,city:I,program:y.program,maleCount:X,femaleCount:we,promotionCount:Te,notes:y.notes?y.notes.trim():""}),d(!0),g({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),E(""),T(!1)}catch{t({type:"error",title:"저장 실패",message:"실적 데이터 저장 중 오류가 발생했습니다"})}finally{M(!1)}},se=async B=>{_(!0);const X=new FileReader;X.onload=async we=>{var Te;try{const xe=(Te=we.target)==null?void 0:Te.result,Fe=ZI(xe);if(Fe.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let ot=0,at=0;for(const re of Fe)try{re.date&&re.organizationName?(await n(re),ot++):at++}catch{at++}C({success:ot,error:at}),p(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{_(!1)}},X.readAsText(B,"UTF-8")},$=B=>{B.preventDefault(),u(!1);const X=Array.from(B.dataTransfer.files);X.length>0&&se(X[0])},Q=B=>{B.preventDefault(),u(!0)},Y=B=>{B.preventDefault(),u(!1)},he=B=>{const X=B.target.files;X&&X.length>0&&se(X[0]),B.target.value=""};return j.useEffect(()=>{const B=X=>{X.target.closest(".organization-dropdown")||T(!1)};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[]),l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 입력"}),l.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 실적 데이터를 등록하세요"})]}),l.jsx("div",{className:"border-b border-gray-200 mb-8",children:l.jsxs("nav",{className:"-mb-px flex space-x-8",children:[l.jsxs("button",{onClick:()=>i("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(oi,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),l.jsxs("button",{onClick:()=>i("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Mo,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),s==="manual"&&l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:l.jsxs("form",{onSubmit:Ye,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),l.jsxs("div",{className:"relative",children:[l.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"date",id:"date",name:"date",value:y.date,onChange:oe,className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),l.jsxs("div",{className:"relative organization-dropdown",children:[l.jsx("input",{type:"text",placeholder:"단체명을 검색하세요...",value:R,onChange:B=>{E(B.target.value),T(!0)},onFocus:()=>T(!0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),y.organizationName&&l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l.jsx("button",{type:"button",onClick:()=>{g(B=>({...B,organizationName:""})),E("")},className:"text-gray-400 hover:text-gray-600",children:"×"})}),b&&l.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:S.length>0?S.map(B=>l.jsx("button",{type:"button",onClick:()=>{g(X=>({...X,organizationName:B})),E(B),T(!1)},className:"w-full px-4 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none",children:B},B)):l.jsx("div",{className:"px-4 py-2 text-gray-500",children:"검색 결과가 없습니다"})})]}),x.length===0&&l.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"등록된 단체가 없습니다. 먼저 수요처를 등록해주세요."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"program",className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램 *"}),l.jsxs("select",{id:"program",name:"program",value:y.program,onChange:oe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[l.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),l.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),l.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]}),y.organizationName&&l.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("span",{className:"font-medium",children:"선택된 단체:"})," ",y.organizationName,I&&` (${I})`]})}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[l.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[l.jsx(Dr,{className:"w-5 h-5 mr-2 text-blue-600"}),"참여 인원"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"maleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"남성 인원"}),l.jsx("input",{type:"number",id:"maleCount",name:"maleCount",value:y.maleCount,onChange:oe,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"femaleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"여성 인원"}),l.jsx("input",{type:"number",id:"femaleCount",name:"femaleCount",value:y.femaleCount,onChange:oe,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"총 인원"}),l.jsxs("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:[ne().toLocaleString(),"명"]})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"promotionCount",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[l.jsx(Cv,{className:"w-4 h-4 mr-2 text-orange-500"}),"홍보 횟수"]}),l.jsx("input",{type:"number",id:"promotionCount",name:"promotionCount",value:y.promotionCount,onChange:oe,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"홍보 횟수를 입력하세요"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"메모 (선택사항)"}),l.jsx("textarea",{id:"notes",name:"notes",value:y.notes,onChange:oe,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"추가 메모를 입력하세요..."})]}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[D?l.jsx(Vo,{className:"w-4 h-4 mr-2 animate-spin"}):l.jsx(oi,{className:"w-4 h-4 mr-2"}),"실적 저장"]})})]})}),s==="bulk"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(os,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),l.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 날짜, 단체명, 시군, 프로그램, 남성, 여성, 홍보횟수, 메모"}),l.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"중요:"})," 날짜는 YYYY-MM-DD 형식으로 입력하세요 (예: 2024-01-15)"]})}),l.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[l.jsxs("button",{onClick:JI,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(cf,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),l.jsxs("button",{onClick:()=>N(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(uf,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:l.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:$,onDragOver:Q,onDragLeave:Y,children:L?l.jsxs(l.Fragment,{children:[l.jsx(Vo,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),l.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Mo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),l.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),l.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),l.jsx("input",{ref:r,type:"file",accept:".csv,.txt",onChange:he,className:"hidden"}),l.jsx("button",{onClick:()=>{var B;return(B=r.current)==null?void 0:B.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx(be,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"저장 완료!"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"실적 데이터가 성공적으로 저장되었습니다."}),l.jsx("button",{onClick:()=>{d(!1),g({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),E(""),T(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx(be,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"일괄등록 완료!"}),l.jsxs("div",{className:"text-gray-600 mb-6",children:[l.jsx("p",{className:"mb-2",children:"실적 데이터 일괄등록이 완료되었습니다."}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{children:"성공:"}),l.jsxs("span",{className:"font-semibold text-green-600",children:[k.success,"건"]})]}),k.error>0&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:"실패:"}),l.jsxs("span",{className:"font-semibold text-red-600",children:[k.error,"건"]})]})]})]}),l.jsx("button",{onClick:()=>p(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),v&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"실적 데이터 저장 방법"}),l.jsx("p",{className:"text-gray-600",children:"실적 데이터를 올바르게 저장하는 방법을 안내합니다."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 수기 입력 방법"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"날짜를 선택하세요 (필수)"}),l.jsx("li",{children:"단체명을 검색하여 선택하세요 (필수)"}),l.jsx("li",{children:"프로그램 유형을 선택하세요 (스포츠교실/스포츠체험존/스포츠이벤트)"}),l.jsx("li",{children:"남성/여성 인원수를 입력하세요"}),l.jsx("li",{children:"홍보 횟수를 입력하세요 (선택사항)"}),l.jsx("li",{children:"메모를 입력하세요 (선택사항)"}),l.jsx("li",{children:'"실적 저장" 버튼을 클릭하세요'})]})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 CSV 파일 업로드 방법"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),l.jsxs("li",{children:["데이터 입력 완료 후 ",l.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),l.jsxs("li",{children:["파일 형식에서 ",l.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),l.jsx("li",{children:"파일명 입력 후 저장"}),l.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),l.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',l.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📅 날짜 형식"}),l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"날짜는 반드시 YYYY-MM-DD 형식으로 입력해야 합니다:"}),l.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700",children:[l.jsx("li",{children:"올바른 형식: 2024-01-15, 2024-12-31"}),l.jsx("li",{children:"잘못된 형식: 2024/01/15, 2024.01.15, 01-15-2024"})]})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"🔧 한글 깨짐 해결방법"}),l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"파일 업로드 시 한글이 깨지는 경우:"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-700",children:[l.jsx("li",{children:"엑셀에서 파일을 다시 열기"}),l.jsx("li",{children:"파일 → 다른 이름으로 저장"}),l.jsx("li",{children:'파일 형식에서 "CSV UTF-8(쉼표로 분리)" 선택'}),l.jsx("li",{children:"새로운 파일로 저장 후 업로드"})]})]})]}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:()=>N(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},oC=()=>{const{addToast:t}=da(),{performances:e,demands:n,updatePerformance:r,deletePerformance:s}=Ti(),[i,o]=j.useState([]),[u,c]=j.useState(null),[d,m]=j.useState({}),[p,v]=j.useState({}),[N,k]=j.useState(""),C=Array.from(new Set(n.map(g=>g.organizationName))).sort();j.useEffect(()=>{R()},[e,p,N]);const R=()=>{let g=[...e];p.startDate&&(g=g.filter(x=>x.date&&x.date>=p.startDate)),p.endDate&&(g=g.filter(x=>x.date&&x.date<=p.endDate)),p.organizationName&&(g=g.filter(x=>x.organizationName===p.organizationName)),p.program&&(g=g.filter(x=>x.program===p.program)),N&&(g=g.filter(x=>x.organizationName.toLowerCase().includes(N.toLowerCase())||x.notes&&x.notes.toLowerCase().includes(N.toLowerCase()))),g.sort((x,S)=>!x.date&&!S.date?0:x.date?S.date?S.date.getTime()-x.date.getTime():-1:1),o(g)},E=(g,x)=>{v(S=>({...S,[g]:x}))},b=()=>{v({}),k("")},T=g=>{c(g.id),m({...g,date:g.date})},D=async()=>{if(!u||!d.date||!d.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const g=d.maleCount||0,x=d.femaleCount||0,S=d.promotionCount||0;if(g<0||x<0||S<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await r(u,{...d,notes:d.notes?d.notes.trim():""}),c(null),m({}),t({type:"success",title:"수정 완료",message:"실적 데이터가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"실적 데이터 수정 중 오류가 발생했습니다"})}},M=()=>{c(null),m({})},L=async(g,x,S)=>{const A=S?S.toLocaleDateString("ko-KR"):"날짜 없음";if(window.confirm(`"${x}"의 ${A} 실적 데이터를 삭제하시겠습니까?`))try{await s(g),t({type:"success",title:"삭제 완료",message:"실적 데이터가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"실적 데이터 삭제 중 오류가 발생했습니다"})}},_=(g,x)=>{m(S=>({...S,[g]:x}))},y=()=>{if(i.length===0){t({type:"warning",title:"다운로드 불가",message:"다운로드할 데이터가 없습니다"});return}try{XI(i),t({type:"success",title:"다운로드 완료",message:"실적 데이터가 성공적으로 다운로드되었습니다"})}catch{t({type:"error",title:"다운로드 실패",message:"엑셀 파일 다운로드 중 오류가 발생했습니다"})}};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 조회"}),l.jsx("p",{className:"text-gray-600",children:"등록된 실적 데이터를 조회하고 관리하세요"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[l.jsx(bE,{className:"w-5 h-5 mr-2"}),"필터"]}),l.jsx("button",{onClick:b,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"전체 초기화"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검색"}),l.jsxs("div",{className:"relative",children:[l.jsx(jv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx("input",{type:"text",placeholder:"검색어 입력...",value:N,onChange:g=>k(g.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 날짜"}),l.jsxs("div",{className:"relative",children:[l.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx("input",{type:"date",value:p.startDate?p.startDate.toISOString().split("T")[0]:"",onChange:g=>E("startDate",g.target.value?new Date(g.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 날짜"}),l.jsxs("div",{className:"relative",children:[l.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx("input",{type:"date",value:p.endDate?p.endDate.toISOString().split("T")[0]:"",onChange:g=>E("endDate",g.target.value?new Date(g.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명"}),l.jsxs("select",{value:p.organizationName||"",onChange:g=>E("organizationName",g.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"전체 단체"}),C.map(g=>l.jsx("option",{value:g,children:g},g))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램"}),l.jsxs("select",{value:p.program||"",onChange:g=>E("program",g.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"전체 프로그램"}),l.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),l.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),l.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"text-sm text-gray-500",children:["총 ",e.length,"건 중 ",i.length,"건 표시"]}),l.jsxs("button",{onClick:y,disabled:i.length===0,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[l.jsx(cf,{className:"w-4 h-4 mr-2"}),"엑셀 다운로드"]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-32",children:"날짜"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-48",children:"단체명"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-24",children:"시/군"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-32",children:"프로그램"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"남성"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"여성"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"총 인원"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-24",children:"홍보횟수"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 min-w-32",children:"메모"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900 w-24",children:"작업"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(g=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 w-32",children:u===g.id?l.jsx("input",{type:"date",value:d.date?new Date(d.date).toISOString().split("T")[0]:"",onChange:x=>_("date",new Date(x.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-sm text-gray-900",children:g.date?g.date.toLocaleDateString("ko-KR"):"날짜 없음"})}),l.jsx("td",{className:"px-6 py-4 w-48",children:u===g.id?l.jsxs("select",{value:d.organizationName||"",onChange:x=>_("organizationName",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"단체 선택"}),C.map(x=>l.jsx("option",{value:x,children:x},x))]}):l.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.organizationName})}),l.jsx("td",{className:"px-6 py-4 w-24",children:l.jsx("span",{className:"text-sm text-gray-600",children:g.city||"-"})}),l.jsx("td",{className:"px-6 py-4 w-32",children:u===g.id?l.jsxs("select",{value:d.program||g.program||"스포츠교실",onChange:x=>_("program",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),l.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),l.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]}):l.jsx("span",{className:"text-sm text-purple-600 font-medium",children:g.program||"스포츠교실"})}),l.jsx("td",{className:"px-6 py-4 w-20",children:u===g.id?l.jsx("input",{type:"number",value:d.maleCount||"",onChange:x=>_("maleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsxs("span",{className:"text-sm text-blue-600 font-mono flex items-center",children:[l.jsx(Dr,{className:"w-4 h-4 mr-1"}),(g.maleCount||0).toLocaleString()]})}),l.jsx("td",{className:"px-6 py-4 w-20",children:u===g.id?l.jsx("input",{type:"number",value:d.femaleCount||"",onChange:x=>_("femaleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsxs("span",{className:"text-sm text-pink-600 font-mono flex items-center",children:[l.jsx(Dr,{className:"w-4 h-4 mr-1"}),(g.femaleCount||0).toLocaleString()]})}),l.jsx("td",{className:"px-6 py-4 w-20",children:l.jsxs("span",{className:"text-sm text-gray-900 font-bold",children:[((g.maleCount||0)+(g.femaleCount||0)).toLocaleString(),"명"]})}),l.jsx("td",{className:"px-6 py-4 w-24",children:u===g.id?l.jsx("input",{type:"number",value:d.promotionCount||"",onChange:x=>_("promotionCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsxs("span",{className:"text-sm text-orange-600 font-mono flex items-center",children:[l.jsx(Cv,{className:"w-4 h-4 mr-1"}),(g.promotionCount||0).toLocaleString(),"회"]})}),l.jsx("td",{className:"px-6 py-4 min-w-32",children:u===g.id?l.jsx("textarea",{value:d.notes||"",onChange:x=>_("notes",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}):l.jsx("span",{className:"text-sm text-gray-500",children:g.notes||"-"})}),l.jsx("td",{className:"px-6 py-4 text-right w-24",children:u===g.id?l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:D,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:l.jsx(oi,{className:"w-4 h-4"})}),l.jsx("button",{onClick:M,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:l.jsx(Lo,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:()=>T(g),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:l.jsx(Av,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>L(g.id,g.organizationName,g.date),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:l.jsx(Au,{className:"w-4 h-4"})})]})})]},g.id))})]})}),i.length===0&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-gray-500",children:e.length===0?"실적 데이터가 없습니다":"검색 조건에 맞는 데이터가 없습니다"})})]})]})},aC=({toast:t,onRemove:e})=>{const{type:n,title:r,message:s,duration:i=5e3}=t;j.useEffect(()=>{const c=setTimeout(()=>{e(t.id)},i);return()=>clearTimeout(c)},[t.id,i,e]);const o=()=>{switch(n){case"success":return l.jsx(be,{className:"w-5 h-5 text-green-500"});case"error":return l.jsx(uf,{className:"w-5 h-5 text-red-500"});case"warning":return l.jsx(Iv,{className:"w-5 h-5 text-orange-500"});case"info":return l.jsx(Gl,{className:"w-5 h-5 text-blue-500"});default:return l.jsx(Gl,{className:"w-5 h-5 text-blue-500"})}},u=()=>{switch(n){case"success":return"border-l-green-500";case"error":return"border-l-red-500";case"warning":return"border-l-orange-500";case"info":return"border-l-blue-500";default:return"border-l-blue-500"}};return l.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 ${u()} p-4 mb-3 max-w-md animate-slide-in`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:o()}),l.jsxs("div",{className:"ml-3 flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),l.jsx("p",{className:"text-sm text-gray-500",children:s})]}),l.jsx("button",{onClick:()=>e(t.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(Lo,{className:"w-4 h-4"})})]})})},lC=({toasts:t,onRemove:e})=>l.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.map(n=>l.jsx(aC,{toast:n,onRemove:e},n.id))}),uC=()=>{var y;const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,i]=j.useState(null),[o,u]=j.useState({}),[c,d]=j.useState("전체"),m=g=>{const x=["스포츠이벤트(동/하계)","용품구입비","근무자피복비(동/하계)","간담회 및 회의운영","차량리스비","차량관리비(유류비,정비,세차 등)","차량보험료","기타운영비","사업홍보비","전산구축 및 유지보수","주최자배상책임공제","운동 영상장비 구입"],S=["용품구입비_북부","근무자 피복비_북부(동/하계)","간담회 및 회의운영_북부","차량리스비_북부","차량관리비_북부(유류비,정비,세차 등)","차량개조비_북부(래핑,앵글제작 등)","차량보험료_북부","기타운영비_북부","사업홍보비_북부","운영수당(스포츠박스)_북부"];return x.includes(g)?"남부":S.includes(g)?"북부":null},p=t.filter(g=>{const x=m(g.name);return c==="전체"||x===c}).sort((g,x)=>g.name.localeCompare(x.name,"ko")),v=[...n].sort((g,x)=>g.date&&x.date?new Date(x.date).getTime()-new Date(g.date).getTime():x.id.localeCompare(g.id)),[N,k]=j.useState(!1),[C,R]=j.useState({budgetItemId:((y=t[0])==null?void 0:y.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""});j.useEffect(()=>{const g=ke.subscribeToBudgets(e),x=ke.subscribeToBudgetUsages(r);return()=>{g(),x()}},[]),j.useEffect(()=>{const g=x=>{var S;x.key==="Escape"&&(s&&(i(null),u({})),N&&(k(!1),R({budgetItemId:((S=t[0])==null?void 0:S.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})))};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s,N,t]);const E=()=>{var x;k(!0);const g=p[0];R({budgetItemId:(g==null?void 0:g.id)||((x=t[0])==null?void 0:x.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},b=g=>{i(g.id),u({...g})},T=async()=>{s&&(await ke.updateBudgetUsage(s,o),i(null),u({}))},D=async()=>{s&&(await ke.deleteBudgetUsage(s),i(null),u({}))},M=(g,x)=>{u(S=>({...S,[g]:x}))},L=async()=>{var g;await ke.addBudgetUsage(C),k(!1),R({budgetItemId:((g=t[0])==null?void 0:g.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},_=(g,x)=>{R(S=>({...S,[g]:x}))};return j.useEffect(()=>{if(N&&p.length>0){const g=t.find(S=>S.id===C.budgetItemId),x=g?m(g.name):null;c!=="전체"&&x!==c&&R(S=>{var A;return{...S,budgetItemId:((A=p[0])==null?void 0:A.id)||""}})}if(s&&p.length>0){const g=t.find(S=>S.id===o.budgetItemId),x=g?m(g.name):null;c!=="전체"&&x!==c&&u(S=>{var A;return{...S,budgetItemId:((A=p[0])==null?void 0:A.id)||""}})}},[c,N,s,p,C.budgetItemId,o.budgetItemId,t]),l.jsxs("div",{className:"w-full max-w-5xl mx-auto px-2",children:[l.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"예산 사용 내역"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition",onClick:E,children:[l.jsx(Rv,{className:"w-4 h-4"})," 내역 추가"]}),l.jsx("button",{className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition",onClick:()=>eC(n,t),children:"엑셀 다운로드"})]})]}),l.jsxs("div",{className:"grid gap-4",children:[N&&l.jsx("div",{className:"rounded-xl shadow-md border-2 border-blue-300 bg-white ring-2 ring-blue-400 overflow-x-auto",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap md:items-center gap-4 p-6 min-w-[2000px] max-w-full",children:[l.jsxs("div",{className:"flex-none w-48 min-w-[160px] max-w-[200px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"예산명"}),l.jsx("div",{className:"flex gap-2 mb-2",children:["전체","남부","북부"].map(g=>l.jsx("button",{type:"button",className:`px-3 py-1 rounded-full border text-xs font-semibold transition-colors duration-200 ${c===g?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>d(g),children:g},g))}),l.jsx("select",{className:"border rounded px-2 py-1 w-full",value:C.budgetItemId,onChange:g=>_("budgetItemId",g.target.value),children:p.map(g=>l.jsx("option",{value:g.id,children:g.name},g.id))})]}),l.jsxs("div",{className:"flex-[4] min-w-[500px] max-w-[700px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"적요"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:C.description||"",onChange:g=>_("description",g.target.value)})]}),l.jsxs("div",{className:"flex-none w-28 min-w-[60px] max-w-[100px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"채주"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:C.vendor||"",onChange:g=>_("vendor",g.target.value)})]}),l.jsxs("div",{className:"flex-none w-36 min-w-[120px] max-w-[140px] text-right",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행액"}),l.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full text-right",value:C.amount!==void 0&&C.amount!==null?Number(C.amount).toLocaleString():"",onChange:g=>{const x=g.target.value.replace(/,/g,"");isNaN(Number(x))||_("amount",Number(x))}})]}),l.jsxs("div",{className:"flex-none w-40 min-w-[120px] max-w-[140px] text-center",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행일자"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:C.date||"",onChange:g=>_("date",g.target.value)})]}),l.jsxs("div",{className:"flex-none w-36 min-w-[100px] max-w-[120px] text-center",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"결제방법"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:C.paymentMethod||"",onChange:g=>_("paymentMethod",g.target.value),children:[l.jsx("option",{value:"",children:"선택"}),l.jsx("option",{value:"계좌입금",children:"계좌입금"}),l.jsx("option",{value:"카드결제",children:"카드결제"})]})]}),l.jsxs("div",{className:"flex-none w-32 min-w-[80px] max-w-[120px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"메모"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:C.note||"",onChange:g=>_("note",g.target.value)})]}),l.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center flex-none w-20 min-w-[60px] max-w-[80px]",children:[l.jsx("button",{className:"p-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:L,title:"저장",children:l.jsx(oi,{className:"w-5 h-5"})}),l.jsx("button",{className:"p-2 bg-gray-200 text-gray-700 rounded-full shadow hover:bg-gray-300 transition",onClick:()=>k(!1),title:"취소",children:l.jsx(Lo,{className:"w-5 h-5"})})]})]})}),v.map(g=>{const x=s===g.id,S=t.find(A=>A.id===(x?o.budgetItemId:g.budgetItemId));return l.jsxs("div",{className:`rounded-xl shadow-md border border-gray-100 bg-white hover:shadow-lg transition cursor-pointer relative ${x?"ring-2 ring-blue-400":"hover:ring-1 hover:ring-blue-200"} overflow-x-auto`,onClick:()=>!x&&b(g),children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap md:items-center gap-4 p-6 min-w-[2000px] max-w-full",children:[l.jsxs("div",{className:"flex-none w-48 min-w-[160px] max-w-[200px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"예산명"}),x?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex gap-2 mb-2",children:["전체","남부","북부"].map(A=>l.jsx("button",{type:"button",className:`px-3 py-1 rounded-full border text-xs font-semibold transition-colors duration-200 ${c===A?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>d(A),children:A},A))}),l.jsx("select",{className:"border rounded px-2 py-1 w-full",value:o.budgetItemId,onChange:A=>M("budgetItemId",A.target.value),children:p.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))})]}):l.jsx("span",{className:S!=null&&S.name.includes("북부")?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded font-semibold":"bg-gray-100 text-gray-800 px-2 py-1 rounded font-semibold",children:(S==null?void 0:S.name)||"-"})]}),l.jsx("div",{className:"flex-[4] min-w-[500px] max-w-[700px]",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"적요"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.description||"",onChange:A=>M("description",A.target.value)})]}):l.jsx("div",{className:"text-gray-800 truncate",title:g.description,children:g.description||"-"})}),l.jsx("div",{className:"flex-none w-28 min-w-[60px] max-w-[100px]",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"채주"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.vendor||"",onChange:A=>M("vendor",A.target.value)})]}):l.jsx("div",{className:"text-gray-700 truncate",title:g.vendor,children:g.vendor||"-"})}),l.jsx("div",{className:"flex-none w-36 min-w-[120px] max-w-[140px] text-right",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행액"}),l.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full text-right",value:o.amount!==void 0&&o.amount!==null?Number(o.amount).toLocaleString():"",onChange:A=>{const I=A.target.value.replace(/,/g,"");isNaN(Number(I))||M("amount",Number(I))}})]}):l.jsxs("span",{className:"font-bold text-blue-700",children:[g.amount.toLocaleString(),"원"]})}),l.jsx("div",{className:"flex-none w-40 min-w-[120px] max-w-[140px] text-center",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행일자"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:o.date||"",onChange:A=>M("date",A.target.value)})]}):l.jsx("span",{className:"text-gray-600",children:g.date||"-"})}),l.jsx("div",{className:"flex-none w-36 min-w-[100px] max-w-[120px] text-center",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"결제방법"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:o.paymentMethod||"",onChange:A=>M("paymentMethod",A.target.value),children:[l.jsx("option",{value:"",children:"선택"}),l.jsx("option",{value:"계좌입금",children:"계좌입금"}),l.jsx("option",{value:"카드결제",children:"카드결제"})]})]}):l.jsx("span",{className:"text-gray-600",children:g.paymentMethod||"-"})}),l.jsx("div",{className:"flex-none w-32 min-w-[80px] max-w-[120px]",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"메모"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.note||"",onChange:A=>M("note",A.target.value)})]}):l.jsx("div",{className:"text-gray-500 truncate",title:g.note,children:g.note||"-"})}),x&&l.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center flex-none w-20 min-w-[60px] max-w-[80px]",children:[l.jsx("button",{className:"p-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:T,title:"저장",children:l.jsx(oi,{className:"w-5 h-5"})}),l.jsx("button",{className:"p-2 bg-gray-200 text-gray-700 rounded-full shadow hover:bg-gray-300 transition",onClick:()=>{i(null),u({})},title:"취소",children:l.jsx(Lo,{className:"w-5 h-5"})})]})]}),x&&l.jsx("div",{className:"flex justify-end border-t pt-3 pb-2 px-6 bg-gray-50 rounded-b-xl",children:l.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition",onClick:D,children:[l.jsx(Au,{className:"w-4 h-4"})," 선택된 내역 삭제"]})})]},g.id)})]})]})},cC=()=>l.jsxs("div",{className:"w-full max-w-6xl mx-auto px-2",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center",children:[l.jsx(Fd,{className:"mr-3 h-8 w-8 text-blue-600"}),"스포츠박스 예산/실적 통합관리 시스템 사용 매뉴얼"]}),l.jsx("p",{className:"text-gray-600 text-lg",children:"효율적인 스포츠박스 운영을 위한 통합 관리 시스템"})]}),l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-8 border border-blue-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[l.jsx(Gl,{className:"mr-2 h-6 w-6"}),"📋 시스템 개요"]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[l.jsx("p",{className:"text-gray-700 mb-3",children:"이 시스템은 스포츠박스 운영에 필요한 실적관리와 예산관리를 통합적으로 처리할 수 있는 웹 기반 시스템입니다."}),l.jsxs("div",{className:"flex items-center bg-blue-100 rounded-lg p-3",children:[l.jsx(EE,{className:"mr-2 h-5 w-5 text-blue-600"}),l.jsx("span",{className:"font-semibold text-blue-800",children:"접속 주소:"}),l.jsx("a",{href:"https://sportsbox031.github.io/result/",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"https://sportsbox031.github.io/result/"})]})]})})]}),l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 mb-8 border border-green-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-green-900 mb-6 flex items-center",children:[l.jsx(Gs,{className:"mr-2 h-6 w-6"}),"🎯 주요 기능"]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-green-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:l.jsx(Ud,{className:"h-6 w-6 text-blue-600"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"1️⃣ 실적 입력"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"사용 시점:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"수업 완료 후"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"입력 내용:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"프로그램별 수업 실적 데이터"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"수요처 관리:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"기존 수요처 검색 후 없을 경우에만 신규 등록"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-green-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"bg-purple-100 rounded-full p-2 mr-3",children:l.jsx(os,{className:"h-6 w-6 text-purple-600"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"2️⃣ 예산 사용내역"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"사용 시점:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"지출 발생 후"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"입력 내용:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"예산 사용 관련 모든 내역"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"지역 구분:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"남부/북부 예산 구분을 위한 지역 버튼 제공"})]})]})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-6 mb-8 border border-orange-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-orange-900 mb-6 flex items-center",children:[l.jsx(Fd,{className:"mr-2 h-6 w-6"}),"🔧 상세 사용 방법"]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 mb-6 border border-orange-200 shadow-sm",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[l.jsx(Ud,{className:"mr-2 h-5 w-5 text-blue-600"}),"📊 실적 입력 방법"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"1"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"수업 완료 후 시스템 접속"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"2"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"실적 입력 메뉴 선택"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"수요처 검색"}),l.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"기존 수요처가 있는 경우: 선택하여 사용"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"기존 수요처가 없는 경우: 신규 수요처 등록 진행"})]})]})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"4"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"프로그램별 실적 데이터 입력 및 저장"})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-orange-200 shadow-sm",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[l.jsx(os,{className:"mr-2 h-5 w-5 text-purple-600"}),"💰 예산 사용내역 입력 방법"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"1"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"지출 발생 후 시스템 접속"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"2"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"예산 사용내역 메뉴 선택"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"지역 버튼 클릭 (남부/북부 구분)"}),l.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ga,{className:"h-4 w-4 text-blue-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"남부 버튼: 남부 지역 예산 항목만 표시"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ga,{className:"h-4 w-4 text-green-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"북부 버튼: 북부 지역 예산 항목만 표시"})]})]})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"4"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"해당 예산 항목 선택 후 사용 내역 입력"})})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 mb-8 border border-indigo-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-indigo-900 mb-6 flex items-center",children:[l.jsx(Gs,{className:"mr-2 h-6 w-6"}),"📈 대시보드 활용 방법"]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-indigo-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Dr,{className:"mr-2 h-5 w-5 text-blue-600"}),"📋 총 실적 현황 확인"]}),l.jsx("p",{className:"text-gray-600 mb-3",children:"총 횟수 클릭 → 프로그램별 횟수 및 참여 인원 상세 조회"}),l.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-blue-700",children:["💡 ",l.jsx("strong",{children:"팁:"})," 각 프로그램별 실적을 한눈에 확인할 수 있습니다."]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-indigo-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Ga,{className:"mr-2 h-5 w-5 text-green-600"}),"🗺️ 시군별 참여 현황"]}),l.jsx("p",{className:"text-gray-600 mb-3",children:"각 시군명 클릭 → 해당 시군 소속 수요처별 횟수 및 인원 상세 조회"}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-green-700",children:["💡 ",l.jsx("strong",{children:"팁:"})," 지역별 실적 현황을 세부적으로 분석할 수 있습니다."]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-indigo-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(os,{className:"mr-2 h-5 w-5 text-purple-600"}),"💳 예산 사용 현황"]}),l.jsx("p",{className:"text-gray-600 mb-3",children:"각 예산명 클릭 → 해당 예산의 세부 사용 내역 조회"}),l.jsx("div",{className:"bg-purple-50 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-purple-700",children:["💡 ",l.jsx("strong",{children:"팁:"})," 예산별 사용 내역을 상세히 확인할 수 있습니다."]})})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-6 border border-red-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-red-900 mb-6 flex items-center",children:[l.jsx(Iv,{className:"mr-2 h-6 w-6"}),"⚠️ 주의사항"]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-red-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Dr,{className:"mr-2 h-5 w-5 text-blue-600"}),"✅ 수요처 관리"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"실적 입력 시 반드시 기존 수요처 검색 먼저 진행"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"검색 결과가 없을 경우에만 신규 수요처 등록"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"중복 등록 방지를 위해 꼼꼼한 검색 필요"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-red-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Ga,{className:"mr-2 h-5 w-5 text-green-600"}),"✅ 예산 구분"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"남부/북부 예산 혼동 방지를 위해 지역 버튼 활용 필수"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"지출 전 해당 지역 예산 확인 후 사용내역 입력"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-red-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Gs,{className:"mr-2 h-5 w-5 text-orange-600"}),"✅ 입력 타이밍"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"실적 입력: 수업 완료 직후"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"예산 사용내역: 지출 발생 직후"})]})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-6 border border-teal-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-teal-900 mb-4 flex items-center",children:[l.jsx(Gl,{className:"mr-2 h-6 w-6"}),"💡 추가 정보"]}),l.jsx("div",{className:"bg-white rounded-lg p-6 border border-teal-200 shadow-sm",children:l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"🔐 보안"}),l.jsxs("ul",{className:"space-y-2 text-gray-600",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"관리자 계정으로만 접근 가능"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"비밀번호 변경 시 모든 사용자에게 적용"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"실시간 데이터 동기화"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"📱 사용성"}),l.jsxs("ul",{className:"space-y-2 text-gray-600",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"반응형 디자인으로 모바일에서도 사용 가능"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"ESC 키로 빠른 모드 종료"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(be,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"엑셀 다운로드 기능 제공"})]})]})]})]})})]})]});async function hu(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")}const dC=Object.freeze(Object.defineProperty({__proto__:null,hashPassword:hu},Symbol.toStringTag,{value:"Module"}));function hC({onLogin:t}){const[e,n]=j.useState("admin"),[r,s]=j.useState(""),[i,o]=j.useState(""),[u,c]=j.useState(!1);async function d(m){m.preventDefault(),c(!0),o("");try{let p=await ke.getAdminUser();p||(await ke.createDefaultAdmin(),p=await ke.getAdminUser());const v=await hu(r);e===(p==null?void 0:p.username)&&v===(p==null?void 0:p.passwordHash)?t():o("아이디 또는 비밀번호가 올바르지 않습니다.")}catch(p){console.error("로그인 실패:",p),o("로그인 중 오류가 발생했습니다. 네트워크 연결을 확인해주세요.")}finally{c(!1)}}return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:l.jsxs("form",{onSubmit:d,className:"bg-white p-8 rounded-xl shadow-md w-full max-w-xs",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"관리자 로그인"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"아이디"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:e,onChange:m=>n(m.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"비밀번호"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:r,onChange:m=>s(m.target.value)})]}),i&&l.jsx("div",{className:"text-red-600 text-sm mb-2",children:i}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-semibold hover:bg-blue-700 transition",disabled:u,children:u?"로그인 중...":"로그인"})]})})}function fC({onClose:t}){const[e,n]=j.useState(""),[r,s]=j.useState(""),[i,o]=j.useState(""),[u,c]=j.useState(""),[d,m]=j.useState(""),[p,v]=j.useState(!1);j.useEffect(()=>{if(u){const k=setTimeout(()=>{t()},2e3);return()=>clearTimeout(k)}},[u,t]);async function N(k){k.preventDefault(),v(!0),m(""),c("");try{const C=await ke.getAdminUser();if(!C){m("관리자 계정이 존재하지 않습니다."),v(!1);return}if(await hu(e)!==C.passwordHash){m("기존 비밀번호가 올바르지 않습니다."),v(!1);return}if(r.length<6){m("새 비밀번호는 6자 이상이어야 합니다."),v(!1);return}if(r!==i){m("새 비밀번호가 일치하지 않습니다."),v(!1);return}const E=await hu(r);await ke.saveAdminUser({username:"admin",passwordHash:E}),c("비밀번호가 성공적으로 변경되었습니다."),n(""),s(""),o("")}catch(C){console.error("비밀번호 변경 실패:",C),m("비밀번호 변경 중 오류가 발생했습니다. 네트워크 연결을 확인해주세요.")}finally{v(!1)}}return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:l.jsxs("form",{onSubmit:N,className:"bg-white p-8 rounded-xl shadow-md w-full max-w-xs relative",children:[l.jsx("button",{type:"button",className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-xl",onClick:t,children:"×"}),l.jsx("h2",{className:"text-xl font-bold mb-6 text-center",children:"비밀번호 변경"}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"기존 비밀번호"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:e,onChange:k=>n(k.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"새 비밀번호"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:r,onChange:k=>s(k.target.value)})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"새 비밀번호 확인"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:i,onChange:k=>o(k.target.value)})]}),d&&l.jsx("div",{className:"text-red-600 text-sm mb-2",children:d}),u&&l.jsx("div",{className:"text-green-600 text-sm mb-2",children:u}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-semibold hover:bg-blue-700 transition",disabled:p,children:p?"변경 중...":"비밀번호 변경"})]})})}function mC(){const[t,e]=j.useState("dashboard"),{toasts:n,addToast:r,removeToast:s}=da(),{loading:i,error:o}=Ti(),[u,c]=j.useState(!1),[d,m]=j.useState(!1);j.useEffect(()=>{localStorage.getItem("admin_logged_in")==="true"&&c(!0)},[]);function p(){c(!0),localStorage.setItem("admin_logged_in","true")}function v(){c(!1),localStorage.removeItem("admin_logged_in")}if(!u)return l.jsx(hC,{onLogin:p});const N=()=>{if(i)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Vo,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(o)return l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-800 font-medium mb-2",children:"연결 오류"}),l.jsx("p",{className:"text-red-600 text-sm",children:o}),l.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"다시 시도"})]})});switch(t){case"dashboard":return l.jsx(fy,{});case"demand-register":return l.jsx(nC,{});case"demand-list":return l.jsx(sC,{});case"performance-input":return l.jsx(iC,{});case"performance-list":return l.jsx(oC,{});case"budget-usage":return l.jsx(uC,{});case"manual":return l.jsx(cC,{});default:return l.jsx(fy,{})}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs(TE,{currentPage:t,onPageChange:e,children:[l.jsxs("div",{className:"flex justify-end mb-2",children:[l.jsx("button",{className:"mr-2 px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 text-sm",onClick:()=>m(!0),children:"비밀번호 변경"}),l.jsx("button",{className:"px-3 py-1 bg-red-200 rounded hover:bg-red-300 text-sm",onClick:v,children:"로그아웃"})]}),N()]}),l.jsx(lC,{toasts:n,onRemove:s}),d&&l.jsx(fC,{onClose:()=>m(!1)})]})}Sv(document.getElementById("root")).render(l.jsx(j.StrictMode,{children:l.jsx(mC,{})}));
