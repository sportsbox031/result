(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iy={exports:{}},au={},oy={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=Symbol.for("react.element"),zw=Symbol.for("react.portal"),Uw=Symbol.for("react.fragment"),Bw=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),qw=Symbol.for("react.provider"),Hw=Symbol.for("react.context"),Ww=Symbol.for("react.forward_ref"),Kw=Symbol.for("react.suspense"),Qw=Symbol.for("react.memo"),Gw=Symbol.for("react.lazy"),Lp=Symbol.iterator;function Yw(t){return t===null||typeof t!="object"?null:(t=Lp&&t[Lp]||t["@@iterator"],typeof t=="function"?t:null)}var ay={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ly=Object.assign,uy={};function li(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ay}li.prototype.isReactComponent={};li.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};li.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cy(){}cy.prototype=li.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ay}var oh=ih.prototype=new cy;oh.constructor=ih;ly(oh,li.prototype);oh.isPureReactComponent=!0;var Op=Array.isArray,dy=Object.prototype.hasOwnProperty,ah={current:null},hy={key:!0,ref:!0,__self:!0,__source:!0};function fy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dy.call(e,r)&&!hy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ho,type:t,key:i,ref:o,props:s,_owner:ah.current}}function Xw(t,e){return{$$typeof:Ho,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ho}function Jw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fp=/\/+/g;function ec(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jw(""+t.key):e.toString(36)}function rl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ho:case zw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ec(o,0):r,Op(s)?(n="",t!=null&&(n=t.replace(Fp,"$&/")+"/"),rl(s,e,n,"",function(h){return h})):s!=null&&(lh(s)&&(s=Xw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Op(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+ec(i,l);o+=rl(i,e,n,u,s)}else if(u=Yw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+ec(i,l++),o+=rl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Aa(t,e,n){if(t==null)return t;var r=[],s=0;return rl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Zw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},sl={transition:null},ex={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:sl,ReactCurrentOwner:ah};function py(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Aa,forEach:function(t,e,n){Aa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Aa(t,function(){e++}),e},toArray:function(t){return Aa(t,function(e){return e})||[]},only:function(t){if(!lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=li;se.Fragment=Uw;se.Profiler=$w;se.PureComponent=ih;se.StrictMode=Bw;se.Suspense=Kw;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ex;se.act=py;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ly({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ah.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)dy.call(e,u)&&!hy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ho,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:Hw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qw,_context:t},t.Consumer=t};se.createElement=fy;se.createFactory=function(t){var e=fy.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Ww,render:t}};se.isValidElement=lh;se.lazy=function(t){return{$$typeof:Gw,_payload:{_status:-1,_result:t},_init:Zw}};se.memo=function(t,e){return{$$typeof:Qw,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=sl.transition;sl.transition={};try{t()}finally{sl.transition=e}};se.unstable_act=py;se.useCallback=function(t,e){return bt.current.useCallback(t,e)};se.useContext=function(t){return bt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};se.useEffect=function(t,e){return bt.current.useEffect(t,e)};se.useId=function(){return bt.current.useId()};se.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return bt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};se.useRef=function(t){return bt.current.useRef(t)};se.useState=function(t){return bt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return bt.current.useTransition()};se.version="18.3.1";oy.exports=se;var P=oy.exports;const kt=Fw(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=P,nx=Symbol.for("react.element"),rx=Symbol.for("react.fragment"),sx=Object.prototype.hasOwnProperty,ix=tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ox={key:!0,ref:!0,__self:!0,__source:!0};function my(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sx.call(e,r)&&!ox.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nx,type:t,key:i,ref:o,props:s,_owner:ix.current}}au.Fragment=rx;au.jsx=my;au.jsxs=my;iy.exports=au;var c=iy.exports,gy={exports:{}},Kt={},yy={exports:{}},vy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var fe=K-1>>>1,U=B[fe];if(0<s(U,Q))B[fe]=Q,B[K]=U,K=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var fe=0,U=B.length,Y=U>>>1;fe<Y;){var $=2*(fe+1)-1,J=B[$],re=$+1,oe=B[re];if(0>s(J,K))re<U&&0>s(oe,J)?(B[fe]=oe,B[re]=K,fe=re):(B[fe]=J,B[$]=K,fe=$);else if(re<U&&0>s(oe,K))B[fe]=oe,B[re]=K,fe=re;else break e}}return Q}function s(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,v=3,I=!1,k=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=B)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function D(B){if(b=!1,S(B),!k)if(n(u)!==null)k=!0,ze(L);else{var Q=n(h);Q!==null&&ue(D,Q.startTime-B)}}function L(B,Q){k=!1,b&&(b=!1,w(g),g=-1),I=!0;var K=v;try{for(S(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||B&&!N());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,v=m.priorityLevel;var U=fe(m.expirationTime<=Q);Q=t.unstable_now(),typeof U=="function"?m.callback=U:m===n(u)&&r(u),S(Q)}else r(u);m=n(u)}if(m!==null)var Y=!0;else{var $=n(h);$!==null&&ue(D,$.startTime-Q),Y=!1}return Y}finally{m=null,v=K,I=!1}}var V=!1,E=null,g=-1,y=5,T=-1;function N(){return!(t.unstable_now()-T<y)}function R(){if(E!==null){var B=t.unstable_now();T=B;var Q=!0;try{Q=E(!0,B)}finally{Q?C():(V=!1,E=null)}}else V=!1}var C;if(typeof x=="function")C=function(){x(R)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ke=ie.port2;ie.port1.onmessage=R,C=function(){ke.postMessage(null)}}else C=function(){A(R,0)};function ze(B){E=B,V||(V=!0,C())}function ue(B,Q){g=A(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||I||(k=!0,ze(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var K=v;v=Q;try{return B()}finally{v=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=v;v=B;try{return Q()}finally{v=K}},t.unstable_scheduleCallback=function(B,Q,K){var fe=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?fe+K:fe):K=fe,B){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=K+U,B={id:p++,callback:Q,priorityLevel:B,startTime:K,expirationTime:U,sortIndex:-1},K>fe?(B.sortIndex=K,e(h,B),n(u)===null&&B===n(h)&&(b?(w(g),g=-1):b=!0,ue(D,K-fe))):(B.sortIndex=U,e(u,B),k||I||(k=!0,ze(L))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var Q=v;return function(){var K=v;v=Q;try{return B.apply(this,arguments)}finally{v=K}}}})(vy);yy.exports=vy;var ax=yy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx=P,Wt=ax;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _y=new Set,co={};function us(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(co[t]=e,t=0;t<e.length;t++)_y.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oc=Object.prototype.hasOwnProperty,ux=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zp={},Up={};function cx(t){return Oc.call(Up,t)?!0:Oc.call(zp,t)?!1:ux.test(t)?Up[t]=!0:(zp[t]=!0,!1)}function dx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hx(t,e,n,r){if(e===null||typeof e>"u"||dx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,ch);ct[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,ch);ct[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,ch);ct[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function dh(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hx(e,n,s,r)&&(n=null),r||s===null?cx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=lx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),Fc=Symbol.for("react.profiler"),wy=Symbol.for("react.provider"),xy=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),zc=Symbol.for("react.suspense"),Uc=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),Ey=Symbol.for("react.offscreen"),Bp=Symbol.iterator;function Ri(t){return t===null||typeof t!="object"?null:(t=Bp&&t[Bp]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,tc;function zi(t){if(tc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tc=e&&e[1]||""}return`
`+tc+t}var nc=!1;function rc(t,e){if(!t||nc)return"";nc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{nc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function fx(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=rc(t.type,!1),t;case 11:return t=rc(t.type.render,!1),t;case 1:return t=rc(t.type,!0),t;default:return""}}function Bc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case Is:return"Portal";case Fc:return"Profiler";case hh:return"StrictMode";case zc:return"Suspense";case Uc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xy:return(t.displayName||"Context")+".Consumer";case wy:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Bc(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return Bc(t(e))}catch{}}return null}function px(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bc(e);case 8:return e===hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ty(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mx(t){var e=Ty(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ka(t){t._valueTracker||(t._valueTracker=mx(t))}function Sy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ty(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $c(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $p(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Iy(t,e){e=e.checked,e!=null&&dh(t,"checked",e,!1)}function qc(t,e){Iy(t,e);var n=Ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hc(t,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hc(t,e,n){(e!=="number"||xl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ui=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ui(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ir(n)}}function Cy(t,e){var n=Ir(e.value),r=Ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ny(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ny(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pa,by=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pa=Pa||document.createElement("div"),Pa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gx=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(t){gx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qi[e]=Qi[t]})});function Ay(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qi.hasOwnProperty(t)&&Qi[t]?(""+e).trim():e+"px"}function Ry(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ay(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yx=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qc(t,e){if(e){if(yx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Gc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yc=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xc=null,Fs=null,zs=null;function Kp(t){if(t=Qo(t)){if(typeof Xc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=hu(e),Xc(t.stateNode,t.type,e))}}function ky(t){Fs?zs?zs.push(t):zs=[t]:Fs=t}function Py(){if(Fs){var t=Fs,e=zs;if(zs=Fs=null,Kp(t),e)for(t=0;t<e.length;t++)Kp(e[t])}}function Dy(t,e){return t(e)}function jy(){}var sc=!1;function Vy(t,e,n){if(sc)return t(e,n);sc=!0;try{return Dy(t,e,n)}finally{sc=!1,(Fs!==null||zs!==null)&&(jy(),Py())}}function fo(t,e){var n=t.stateNode;if(n===null)return null;var r=hu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Jc=!1;if(qn)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){Jc=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{Jc=!1}function vx(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Gi=!1,El=null,Tl=!1,Zc=null,_x={onError:function(t){Gi=!0,El=t}};function wx(t,e,n,r,s,i,o,l,u){Gi=!1,El=null,vx.apply(_x,arguments)}function xx(t,e,n,r,s,i,o,l,u){if(wx.apply(this,arguments),Gi){if(Gi){var h=El;Gi=!1,El=null}else throw Error(z(198));Tl||(Tl=!0,Zc=h)}}function cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function My(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qp(t){if(cs(t)!==t)throw Error(z(188))}function Ex(t){var e=t.alternate;if(!e){if(e=cs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qp(s),t;if(i===r)return Qp(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Ly(t){return t=Ex(t),t!==null?Oy(t):null}function Oy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Oy(t);if(e!==null)return e;t=t.sibling}return null}var Fy=Wt.unstable_scheduleCallback,Gp=Wt.unstable_cancelCallback,Tx=Wt.unstable_shouldYield,Sx=Wt.unstable_requestPaint,Fe=Wt.unstable_now,Ix=Wt.unstable_getCurrentPriorityLevel,gh=Wt.unstable_ImmediatePriority,zy=Wt.unstable_UserBlockingPriority,Sl=Wt.unstable_NormalPriority,Cx=Wt.unstable_LowPriority,Uy=Wt.unstable_IdlePriority,lu=null,Nn=null;function Nx(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(lu,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Rx,bx=Math.log,Ax=Math.LN2;function Rx(t){return t>>>=0,t===0?32:31-(bx(t)/Ax|0)|0}var Da=64,ja=4194304;function Bi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Il(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Bi(l):(i&=o,i!==0&&(r=Bi(i)))}else o=n&~s,o!==0?r=Bi(o):i!==0&&(r=Bi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pn(e),s=1<<n,r|=t[n],e&=~s;return r}function kx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Px(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=kx(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function By(){var t=Da;return Da<<=1,!(Da&4194240)&&(Da=64),t}function ic(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function Dx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function $y(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qy,vh,Hy,Wy,Ky,td=!1,Va=[],fr=null,pr=null,mr=null,po=new Map,mo=new Map,lr=[],jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yp(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":po.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(e.pointerId)}}function Pi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qo(e),e!==null&&vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Vx(t,e,n,r,s){switch(e){case"focusin":return fr=Pi(fr,t,e,n,r,s),!0;case"dragenter":return pr=Pi(pr,t,e,n,r,s),!0;case"mouseover":return mr=Pi(mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return po.set(i,Pi(po.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mo.set(i,Pi(mo.get(i)||null,t,e,n,r,s)),!0}return!1}function Qy(t){var e=Kr(t.target);if(e!==null){var n=cs(e);if(n!==null){if(e=n.tag,e===13){if(e=My(n),e!==null){t.blockedOn=e,Ky(t.priority,function(){Hy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yc=r,n.target.dispatchEvent(r),Yc=null}else return e=Qo(n),e!==null&&vh(e),t.blockedOn=n,!1;e.shift()}return!0}function Xp(t,e,n){il(t)&&n.delete(e)}function Mx(){td=!1,fr!==null&&il(fr)&&(fr=null),pr!==null&&il(pr)&&(pr=null),mr!==null&&il(mr)&&(mr=null),po.forEach(Xp),mo.forEach(Xp)}function Di(t,e){t.blockedOn===e&&(t.blockedOn=null,td||(td=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Mx)))}function go(t){function e(s){return Di(s,t)}if(0<Va.length){Di(Va[0],t);for(var n=1;n<Va.length;n++){var r=Va[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&Di(fr,t),pr!==null&&Di(pr,t),mr!==null&&Di(mr,t),po.forEach(e),mo.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)Qy(n),n.blockedOn===null&&lr.shift()}var Us=Xn.ReactCurrentBatchConfig,Cl=!0;function Lx(t,e,n,r){var s=ye,i=Us.transition;Us.transition=null;try{ye=1,_h(t,e,n,r)}finally{ye=s,Us.transition=i}}function Ox(t,e,n,r){var s=ye,i=Us.transition;Us.transition=null;try{ye=4,_h(t,e,n,r)}finally{ye=s,Us.transition=i}}function _h(t,e,n,r){if(Cl){var s=nd(t,e,n,r);if(s===null)mc(t,e,r,Nl,n),Yp(t,r);else if(Vx(s,t,e,n,r))r.stopPropagation();else if(Yp(t,r),e&4&&-1<jx.indexOf(t)){for(;s!==null;){var i=Qo(s);if(i!==null&&qy(i),i=nd(t,e,n,r),i===null&&mc(t,e,r,Nl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else mc(t,e,r,null,n)}}var Nl=null;function nd(t,e,n,r){if(Nl=null,t=mh(r),t=Kr(t),t!==null)if(e=cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=My(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function Gy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ix()){case gh:return 1;case zy:return 4;case Sl:case Cx:return 16;case Uy:return 536870912;default:return 16}default:return 16}}var cr=null,wh=null,ol=null;function Yy(){if(ol)return ol;var t,e=wh,n=e.length,r,s="value"in cr?cr.value:cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ol=s.slice(t,1<r?1-r:void 0)}function al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ma(){return!0}function Jp(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ma:Jp,this.isPropagationStopped=Jp,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),e}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=Qt(ui),Ko=Ae({},ui,{view:0,detail:0}),Fx=Qt(Ko),oc,ac,ji,uu=Ae({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ji&&(ji&&t.type==="mousemove"?(oc=t.screenX-ji.screenX,ac=t.screenY-ji.screenY):ac=oc=0,ji=t),oc)},movementY:function(t){return"movementY"in t?t.movementY:ac}}),Zp=Qt(uu),zx=Ae({},uu,{dataTransfer:0}),Ux=Qt(zx),Bx=Ae({},Ko,{relatedTarget:0}),lc=Qt(Bx),$x=Ae({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),qx=Qt($x),Hx=Ae({},ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wx=Qt(Hx),Kx=Ae({},ui,{data:0}),em=Qt(Kx),Qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yx[t])?!!e[t]:!1}function Eh(){return Xx}var Jx=Ae({},Ko,{key:function(t){if(t.key){var e=Qx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(t){return t.type==="keypress"?al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zx=Qt(Jx),e1=Ae({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tm=Qt(e1),t1=Ae({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),n1=Qt(t1),r1=Ae({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),s1=Qt(r1),i1=Ae({},uu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=Qt(i1),a1=[9,13,27,32],Th=qn&&"CompositionEvent"in window,Yi=null;qn&&"documentMode"in document&&(Yi=document.documentMode);var l1=qn&&"TextEvent"in window&&!Yi,Xy=qn&&(!Th||Yi&&8<Yi&&11>=Yi),nm=" ",rm=!1;function Jy(t,e){switch(t){case"keyup":return a1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function u1(t,e){switch(t){case"compositionend":return Zy(e);case"keypress":return e.which!==32?null:(rm=!0,nm);case"textInput":return t=e.data,t===nm&&rm?null:t;default:return null}}function c1(t,e){if(Ns)return t==="compositionend"||!Th&&Jy(t,e)?(t=Yy(),ol=wh=cr=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xy&&e.locale!=="ko"?null:e.data;default:return null}}var d1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!d1[t.type]:e==="textarea"}function e0(t,e,n,r){ky(r),e=bl(e,"onChange"),0<e.length&&(n=new xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xi=null,yo=null;function h1(t){d0(t,0)}function cu(t){var e=Rs(t);if(Sy(e))return t}function f1(t,e){if(t==="change")return e}var t0=!1;if(qn){var uc;if(qn){var cc="oninput"in document;if(!cc){var im=document.createElement("div");im.setAttribute("oninput","return;"),cc=typeof im.oninput=="function"}uc=cc}else uc=!1;t0=uc&&(!document.documentMode||9<document.documentMode)}function om(){Xi&&(Xi.detachEvent("onpropertychange",n0),yo=Xi=null)}function n0(t){if(t.propertyName==="value"&&cu(yo)){var e=[];e0(e,yo,t,mh(t)),Vy(h1,e)}}function p1(t,e,n){t==="focusin"?(om(),Xi=e,yo=n,Xi.attachEvent("onpropertychange",n0)):t==="focusout"&&om()}function m1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(yo)}function g1(t,e){if(t==="click")return cu(e)}function y1(t,e){if(t==="input"||t==="change")return cu(e)}function v1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:v1;function vo(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Oc.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function am(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lm(t,e){var n=am(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=am(n)}}function r0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s0(){for(var t=window,e=xl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xl(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _1(t){var e=s0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r0(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lm(n,i);var o=lm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var w1=qn&&"documentMode"in document&&11>=document.documentMode,bs=null,rd=null,Ji=null,sd=!1;function um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sd||bs==null||bs!==xl(r)||(r=bs,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&vo(Ji,r)||(Ji=r,r=bl(rd,"onSelect"),0<r.length&&(e=new xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bs)))}function La(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionend:La("Transition","TransitionEnd")},dc={},i0={};qn&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function du(t){if(dc[t])return dc[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i0)return dc[t]=e[n];return t}var o0=du("animationend"),a0=du("animationiteration"),l0=du("animationstart"),u0=du("transitionend"),c0=new Map,cm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){c0.set(t,e),us(e,[t])}for(var hc=0;hc<cm.length;hc++){var fc=cm[hc],x1=fc.toLowerCase(),E1=fc[0].toUpperCase()+fc.slice(1);Rr(x1,"on"+E1)}Rr(o0,"onAnimationEnd");Rr(a0,"onAnimationIteration");Rr(l0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(u0,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xx(r,e,void 0,t),t.currentTarget=null}function d0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;dm(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;dm(s,l,h),i=u}}}if(Tl)throw t=Zc,Tl=!1,Zc=null,t}function Ee(t,e){var n=e[ud];n===void 0&&(n=e[ud]=new Set);var r=t+"__bubble";n.has(r)||(h0(e,t,2,!1),n.add(r))}function pc(t,e,n){var r=0;e&&(r|=4),h0(n,t,r,e)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function _o(t){if(!t[Oa]){t[Oa]=!0,_y.forEach(function(n){n!=="selectionchange"&&(T1.has(n)||pc(n,!1,t),pc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Oa]||(e[Oa]=!0,pc("selectionchange",!1,e))}}function h0(t,e,n,r){switch(Gy(e)){case 1:var s=Lx;break;case 4:s=Ox;break;default:s=_h}n=s.bind(null,e,n,t),s=void 0,!Jc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function mc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Kr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Vy(function(){var h=i,p=mh(n),m=[];e:{var v=c0.get(t);if(v!==void 0){var I=xh,k=t;switch(t){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":I=Zx;break;case"focusin":k="focus",I=lc;break;case"focusout":k="blur",I=lc;break;case"beforeblur":case"afterblur":I=lc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Ux;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=n1;break;case o0:case a0:case l0:I=qx;break;case u0:I=s1;break;case"scroll":I=Fx;break;case"wheel":I=o1;break;case"copy":case"cut":case"paste":I=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=tm}var b=(e&4)!==0,A=!b&&t==="scroll",w=b?v!==null?v+"Capture":null:v;b=[];for(var x=h,S;x!==null;){S=x;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,w!==null&&(D=fo(x,w),D!=null&&b.push(wo(x,D,S)))),A)break;x=x.return}0<b.length&&(v=new I(v,k,null,n,p),m.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",v&&n!==Yc&&(k=n.relatedTarget||n.fromElement)&&(Kr(k)||k[Hn]))break e;if((I||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,I?(k=n.relatedTarget||n.toElement,I=h,k=k?Kr(k):null,k!==null&&(A=cs(k),k!==A||k.tag!==5&&k.tag!==6)&&(k=null)):(I=null,k=h),I!==k)){if(b=Zp,D="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=tm,D="onPointerLeave",w="onPointerEnter",x="pointer"),A=I==null?v:Rs(I),S=k==null?v:Rs(k),v=new b(D,x+"leave",I,n,p),v.target=A,v.relatedTarget=S,D=null,Kr(p)===h&&(b=new b(w,x+"enter",k,n,p),b.target=S,b.relatedTarget=A,D=b),A=D,I&&k)t:{for(b=I,w=k,x=0,S=b;S;S=xs(S))x++;for(S=0,D=w;D;D=xs(D))S++;for(;0<x-S;)b=xs(b),x--;for(;0<S-x;)w=xs(w),S--;for(;x--;){if(b===w||w!==null&&b===w.alternate)break t;b=xs(b),w=xs(w)}b=null}else b=null;I!==null&&hm(m,v,I,b,!1),k!==null&&A!==null&&hm(m,A,k,b,!0)}}e:{if(v=h?Rs(h):window,I=v.nodeName&&v.nodeName.toLowerCase(),I==="select"||I==="input"&&v.type==="file")var L=f1;else if(sm(v))if(t0)L=y1;else{L=m1;var V=p1}else(I=v.nodeName)&&I.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(L=g1);if(L&&(L=L(t,h))){e0(m,L,n,p);break e}V&&V(t,v,h),t==="focusout"&&(V=v._wrapperState)&&V.controlled&&v.type==="number"&&Hc(v,"number",v.value)}switch(V=h?Rs(h):window,t){case"focusin":(sm(V)||V.contentEditable==="true")&&(bs=V,rd=h,Ji=null);break;case"focusout":Ji=rd=bs=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,um(m,n,p);break;case"selectionchange":if(w1)break;case"keydown":case"keyup":um(m,n,p)}var E;if(Th)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ns?Jy(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Xy&&n.locale!=="ko"&&(Ns||g!=="onCompositionStart"?g==="onCompositionEnd"&&Ns&&(E=Yy()):(cr=p,wh="value"in cr?cr.value:cr.textContent,Ns=!0)),V=bl(h,g),0<V.length&&(g=new em(g,t,null,n,p),m.push({event:g,listeners:V}),E?g.data=E:(E=Zy(n),E!==null&&(g.data=E)))),(E=l1?u1(t,n):c1(t,n))&&(h=bl(h,"onBeforeInput"),0<h.length&&(p=new em("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}d0(m,e)})}function wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fo(t,n),i!=null&&r.unshift(wo(t,i,s)),i=fo(t,e),i!=null&&r.push(wo(t,i,s))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=fo(n,i),u!=null&&o.unshift(wo(n,u,l))):s||(u=fo(n,i),u!=null&&o.push(wo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var S1=/\r\n?/g,I1=/\u0000|\uFFFD/g;function fm(t){return(typeof t=="string"?t:""+t).replace(S1,`
`).replace(I1,"")}function Fa(t,e,n){if(e=fm(e),fm(t)!==e&&n)throw Error(z(425))}function Al(){}var id=null,od=null;function ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ld=typeof setTimeout=="function"?setTimeout:void 0,C1=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(t){return pm.resolve(null).then(t).catch(b1)}:ld;function b1(t){setTimeout(function(){throw t})}function gc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),go(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);go(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ci=Math.random().toString(36).slice(2),Cn="__reactFiber$"+ci,xo="__reactProps$"+ci,Hn="__reactContainer$"+ci,ud="__reactEvents$"+ci,A1="__reactListeners$"+ci,R1="__reactHandles$"+ci;function Kr(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mm(t);t!==null;){if(n=t[Cn])return n;t=mm(t)}return e}t=n,n=t.parentNode}return null}function Qo(t){return t=t[Cn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function hu(t){return t[xo]||null}var cd=[],ks=-1;function kr(t){return{current:t}}function Ie(t){0>ks||(t.current=cd[ks],cd[ks]=null,ks--)}function we(t,e){ks++,cd[ks]=t.current,t.current=e}var Cr={},Tt=kr(Cr),Vt=kr(!1),es=Cr;function Qs(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function Rl(){Ie(Vt),Ie(Tt)}function gm(t,e,n){if(Tt.current!==Cr)throw Error(z(168));we(Tt,e),we(Vt,n)}function f0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,px(t)||"Unknown",s));return Ae({},n,r)}function kl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,es=Tt.current,we(Tt,t),we(Vt,Vt.current),!0}function ym(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=f0(t,e,es),r.__reactInternalMemoizedMergedChildContext=t,Ie(Vt),Ie(Tt),we(Tt,t)):Ie(Vt),we(Vt,n)}var zn=null,fu=!1,yc=!1;function p0(t){zn===null?zn=[t]:zn.push(t)}function k1(t){fu=!0,p0(t)}function Pr(){if(!yc&&zn!==null){yc=!0;var t=0,e=ye;try{var n=zn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,fu=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Fy(gh,Pr),s}finally{ye=e,yc=!1}}return null}var Ps=[],Ds=0,Pl=null,Dl=0,Zt=[],en=0,ts=null,Un=1,Bn="";function qr(t,e){Ps[Ds++]=Dl,Ps[Ds++]=Pl,Pl=t,Dl=e}function m0(t,e,n){Zt[en++]=Un,Zt[en++]=Bn,Zt[en++]=ts,ts=t;var r=Un;t=Bn;var s=32-pn(r)-1;r&=~(1<<s),n+=1;var i=32-pn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Un=1<<32-pn(e)+s|n<<s|r,Bn=i+t}else Un=1<<i|n<<s|r,Bn=t}function Ih(t){t.return!==null&&(qr(t,1),m0(t,1,0))}function Ch(t){for(;t===Pl;)Pl=Ps[--Ds],Ps[Ds]=null,Dl=Ps[--Ds],Ps[Ds]=null;for(;t===ts;)ts=Zt[--en],Zt[en]=null,Bn=Zt[--en],Zt[en]=null,Un=Zt[--en],Zt[en]=null}var Ht=null,$t=null,Ce=!1,fn=null;function g0(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,$t=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ts!==null?{id:Un,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,$t=null,!0):!1;default:return!1}}function dd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hd(t){if(Ce){var e=$t;if(e){var n=e;if(!vm(t,e)){if(dd(t))throw Error(z(418));e=gr(n.nextSibling);var r=Ht;e&&vm(t,e)?g0(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Ht=t)}}else{if(dd(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ce=!1,Ht=t}}}function _m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function za(t){if(t!==Ht)return!1;if(!Ce)return _m(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ad(t.type,t.memoizedProps)),e&&(e=$t)){if(dd(t))throw y0(),Error(z(418));for(;e;)g0(t,e),e=gr(e.nextSibling)}if(_m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Ht?gr(t.stateNode.nextSibling):null;return!0}function y0(){for(var t=$t;t;)t=gr(t.nextSibling)}function Gs(){$t=Ht=null,Ce=!1}function Nh(t){fn===null?fn=[t]:fn.push(t)}var P1=Xn.ReactCurrentBatchConfig;function Vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ua(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wm(t){var e=t._init;return e(t._payload)}function v0(t){function e(w,x){if(t){var S=w.deletions;S===null?(w.deletions=[x],w.flags|=16):S.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=wr(w,x),w.index=0,w.sibling=null,w}function i(w,x,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<x?(w.flags|=2,x):S):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,x,S,D){return x===null||x.tag!==6?(x=Sc(S,w.mode,D),x.return=w,x):(x=s(x,S),x.return=w,x)}function u(w,x,S,D){var L=S.type;return L===Cs?p(w,x,S.props.children,D,S.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ir&&wm(L)===x.type)?(D=s(x,S.props),D.ref=Vi(w,x,S),D.return=w,D):(D=pl(S.type,S.key,S.props,null,w.mode,D),D.ref=Vi(w,x,S),D.return=w,D)}function h(w,x,S,D){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Ic(S,w.mode,D),x.return=w,x):(x=s(x,S.children||[]),x.return=w,x)}function p(w,x,S,D,L){return x===null||x.tag!==7?(x=Jr(S,w.mode,D,L),x.return=w,x):(x=s(x,S),x.return=w,x)}function m(w,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sc(""+x,w.mode,S),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ra:return S=pl(x.type,x.key,x.props,null,w.mode,S),S.ref=Vi(w,null,x),S.return=w,S;case Is:return x=Ic(x,w.mode,S),x.return=w,x;case ir:var D=x._init;return m(w,D(x._payload),S)}if(Ui(x)||Ri(x))return x=Jr(x,w.mode,S,null),x.return=w,x;Ua(w,x)}return null}function v(w,x,S,D){var L=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(w,x,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ra:return S.key===L?u(w,x,S,D):null;case Is:return S.key===L?h(w,x,S,D):null;case ir:return L=S._init,v(w,x,L(S._payload),D)}if(Ui(S)||Ri(S))return L!==null?null:p(w,x,S,D,null);Ua(w,S)}return null}function I(w,x,S,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(S)||null,l(x,w,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ra:return w=w.get(D.key===null?S:D.key)||null,u(x,w,D,L);case Is:return w=w.get(D.key===null?S:D.key)||null,h(x,w,D,L);case ir:var V=D._init;return I(w,x,S,V(D._payload),L)}if(Ui(D)||Ri(D))return w=w.get(S)||null,p(x,w,D,L,null);Ua(x,D)}return null}function k(w,x,S,D){for(var L=null,V=null,E=x,g=x=0,y=null;E!==null&&g<S.length;g++){E.index>g?(y=E,E=null):y=E.sibling;var T=v(w,E,S[g],D);if(T===null){E===null&&(E=y);break}t&&E&&T.alternate===null&&e(w,E),x=i(T,x,g),V===null?L=T:V.sibling=T,V=T,E=y}if(g===S.length)return n(w,E),Ce&&qr(w,g),L;if(E===null){for(;g<S.length;g++)E=m(w,S[g],D),E!==null&&(x=i(E,x,g),V===null?L=E:V.sibling=E,V=E);return Ce&&qr(w,g),L}for(E=r(w,E);g<S.length;g++)y=I(E,w,g,S[g],D),y!==null&&(t&&y.alternate!==null&&E.delete(y.key===null?g:y.key),x=i(y,x,g),V===null?L=y:V.sibling=y,V=y);return t&&E.forEach(function(N){return e(w,N)}),Ce&&qr(w,g),L}function b(w,x,S,D){var L=Ri(S);if(typeof L!="function")throw Error(z(150));if(S=L.call(S),S==null)throw Error(z(151));for(var V=L=null,E=x,g=x=0,y=null,T=S.next();E!==null&&!T.done;g++,T=S.next()){E.index>g?(y=E,E=null):y=E.sibling;var N=v(w,E,T.value,D);if(N===null){E===null&&(E=y);break}t&&E&&N.alternate===null&&e(w,E),x=i(N,x,g),V===null?L=N:V.sibling=N,V=N,E=y}if(T.done)return n(w,E),Ce&&qr(w,g),L;if(E===null){for(;!T.done;g++,T=S.next())T=m(w,T.value,D),T!==null&&(x=i(T,x,g),V===null?L=T:V.sibling=T,V=T);return Ce&&qr(w,g),L}for(E=r(w,E);!T.done;g++,T=S.next())T=I(E,w,g,T.value,D),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?g:T.key),x=i(T,x,g),V===null?L=T:V.sibling=T,V=T);return t&&E.forEach(function(R){return e(w,R)}),Ce&&qr(w,g),L}function A(w,x,S,D){if(typeof S=="object"&&S!==null&&S.type===Cs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ra:e:{for(var L=S.key,V=x;V!==null;){if(V.key===L){if(L=S.type,L===Cs){if(V.tag===7){n(w,V.sibling),x=s(V,S.props.children),x.return=w,w=x;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ir&&wm(L)===V.type){n(w,V.sibling),x=s(V,S.props),x.ref=Vi(w,V,S),x.return=w,w=x;break e}n(w,V);break}else e(w,V);V=V.sibling}S.type===Cs?(x=Jr(S.props.children,w.mode,D,S.key),x.return=w,w=x):(D=pl(S.type,S.key,S.props,null,w.mode,D),D.ref=Vi(w,x,S),D.return=w,w=D)}return o(w);case Is:e:{for(V=S.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(w,x.sibling),x=s(x,S.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=Ic(S,w.mode,D),x.return=w,w=x}return o(w);case ir:return V=S._init,A(w,x,V(S._payload),D)}if(Ui(S))return k(w,x,S,D);if(Ri(S))return b(w,x,S,D);Ua(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,S),x.return=w,w=x):(n(w,x),x=Sc(S,w.mode,D),x.return=w,w=x),o(w)):n(w,x)}return A}var Ys=v0(!0),_0=v0(!1),jl=kr(null),Vl=null,js=null,bh=null;function Ah(){bh=js=Vl=null}function Rh(t){var e=jl.current;Ie(jl),t._currentValue=e}function fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){Vl=t,bh=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(bh!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(Vl===null)throw Error(z(308));js=t,Vl.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Qr=null;function kh(t){Qr===null?Qr=[t]:Qr.push(t)}function w0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,kh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Ph(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wn(t,n)}return s=r.interleaved,s===null?(e.next=e,kh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wn(t,n)}function ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function xm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ml(t,e,n,r){var s=t.updateQueue;or=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=h=u=null,l=i;do{var v=l.lane,I=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,b=l;switch(v=e,I=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){m=k.call(I,m,v);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,v=typeof k=="function"?k.call(I,m,v):k,v==null)break e;m=Ae({},m,v);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else I={eventTime:I,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=I,u=m):p=p.next=I,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rs|=o,t.lanes=o,t.memoizedState=m}}function Em(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Go={},bn=kr(Go),Eo=kr(Go),To=kr(Go);function Gr(t){if(t===Go)throw Error(z(174));return t}function Dh(t,e){switch(we(To,e),we(Eo,t),we(bn,Go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kc(e,t)}Ie(bn),we(bn,e)}function Xs(){Ie(bn),Ie(Eo),Ie(To)}function E0(t){Gr(To.current);var e=Gr(bn.current),n=Kc(e,t.type);e!==n&&(we(Eo,t),we(bn,n))}function jh(t){Eo.current===t&&(Ie(bn),Ie(Eo))}var Ne=kr(0);function Ll(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vc=[];function Vh(){for(var t=0;t<vc.length;t++)vc[t]._workInProgressVersionPrimary=null;vc.length=0}var ul=Xn.ReactCurrentDispatcher,_c=Xn.ReactCurrentBatchConfig,ns=0,be=null,He=null,Xe=null,Ol=!1,Zi=!1,So=0,D1=0;function yt(){throw Error(z(321))}function Mh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function Lh(t,e,n,r,s,i){if(ns=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ul.current=t===null||t.memoizedState===null?L1:O1,t=n(r,s),Zi){i=0;do{if(Zi=!1,So=0,25<=i)throw Error(z(301));i+=1,Xe=He=null,e.updateQueue=null,ul.current=F1,t=n(r,s)}while(Zi)}if(ul.current=Fl,e=He!==null&&He.next!==null,ns=0,Xe=He=be=null,Ol=!1,e)throw Error(z(300));return t}function Oh(){var t=So!==0;return So=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?be.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function sn(){if(He===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?be.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(z(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?be.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Io(t,e){return typeof e=="function"?e(t):e}function wc(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var p=h.lane;if((ns&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,be.lanes|=p,rs|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,yn(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,rs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xc(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yn(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function T0(){}function S0(t,e){var n=be,r=sn(),s=e(),i=!yn(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,Fh(N0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Co(9,C0.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(z(349));ns&30||I0(n,e,s)}return s}function I0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function C0(t,e,n,r){e.value=n,e.getSnapshot=r,b0(e)&&A0(t)}function N0(t,e,n){return n(function(){b0(e)&&A0(t)})}function b0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function A0(t){var e=Wn(t,1);e!==null&&mn(e,t,1,-1)}function Tm(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=M1.bind(null,be,t),[e.memoizedState,t]}function Co(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function R0(){return sn().memoizedState}function cl(t,e,n,r){var s=In();be.flags|=t,s.memoizedState=Co(1|e,n,void 0,r===void 0?null:r)}function pu(t,e,n,r){var s=sn();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&Mh(r,o.deps)){s.memoizedState=Co(e,n,i,r);return}}be.flags|=t,s.memoizedState=Co(1|e,n,i,r)}function Sm(t,e){return cl(8390656,8,t,e)}function Fh(t,e){return pu(2048,8,t,e)}function k0(t,e){return pu(4,2,t,e)}function P0(t,e){return pu(4,4,t,e)}function D0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function j0(t,e,n){return n=n!=null?n.concat([t]):null,pu(4,4,D0.bind(null,e,t),n)}function zh(){}function V0(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function M0(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L0(t,e,n){return ns&21?(yn(n,e)||(n=By(),be.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function j1(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=_c.transition;_c.transition={};try{t(!1),e()}finally{ye=n,_c.transition=r}}function O0(){return sn().memoizedState}function V1(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},F0(t))z0(e,n);else if(n=w0(t,e,n,r),n!==null){var s=Nt();mn(n,t,r,s),U0(n,e,r)}}function M1(t,e,n){var r=_r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(F0(t))z0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,yn(l,o)){var u=e.interleaved;u===null?(s.next=s,kh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=w0(t,e,s,r),n!==null&&(s=Nt(),mn(n,t,r,s),U0(n,e,r))}}function F0(t){var e=t.alternate;return t===be||e!==null&&e===be}function z0(t,e){Zi=Ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var Fl={readContext:rn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},L1={readContext:rn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:Sm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cl(4194308,4,D0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return cl(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V1.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:Tm,useDebugValue:zh,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=Tm(!1),e=t[0];return t=j1.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=In();if(Ce){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));ns&30||I0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sm(N0.bind(null,r,i,t),[t]),r.flags|=2048,Co(9,C0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=Ze.identifierPrefix;if(Ce){var n=Bn,r=Un;n=(r&~(1<<32-pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=So++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=D1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O1={readContext:rn,useCallback:V0,useContext:rn,useEffect:Fh,useImperativeHandle:j0,useInsertionEffect:k0,useLayoutEffect:P0,useMemo:M0,useReducer:wc,useRef:R0,useState:function(){return wc(Io)},useDebugValue:zh,useDeferredValue:function(t){var e=sn();return L0(e,He.memoizedState,t)},useTransition:function(){var t=wc(Io)[0],e=sn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:S0,useId:O0,unstable_isNewReconciler:!1},F1={readContext:rn,useCallback:V0,useContext:rn,useEffect:Fh,useImperativeHandle:j0,useInsertionEffect:k0,useLayoutEffect:P0,useMemo:M0,useReducer:xc,useRef:R0,useState:function(){return xc(Io)},useDebugValue:zh,useDeferredValue:function(t){var e=sn();return He===null?e.memoizedState=t:L0(e,He.memoizedState,t)},useTransition:function(){var t=xc(Io)[0],e=sn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:S0,useId:O0,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mu={isMounted:function(t){return(t=t._reactInternals)?cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=_r(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(mn(e,t,s,r),ll(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=_r(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(mn(e,t,s,r),ll(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=_r(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(mn(e,t,r,n),ll(e,t,r))}};function Im(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vo(n,r)||!vo(s,i):!0}function B0(t,e,n){var r=!1,s=Cr,i=e.contextType;return typeof i=="object"&&i!==null?i=rn(i):(s=Mt(e)?es:Tt.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):Cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mu.enqueueReplaceState(e,e.state,null)}function md(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ph(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rn(i):(i=Mt(e)?es:Tt.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mu.enqueueReplaceState(s,s.state,null),Ml(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=fx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ec(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z1=typeof WeakMap=="function"?WeakMap:Map;function $0(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ul||(Ul=!0,Cd=r),gd(t,e)},n}function q0(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gd(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Nm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eE.bind(null,t,e,n),e.then(t,t))}function bm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Am(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var U1=Xn.ReactCurrentOwner,jt=!1;function Ct(t,e,n,r){e.child=t===null?_0(e,null,n,r):Ys(e,t.child,n,r)}function Rm(t,e,n,r,s){n=n.render;var i=e.ref;return Bs(e,s),r=Lh(t,e,n,r,i,s),n=Oh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ce&&n&&Ih(e),e.flags|=1,Ct(t,e,r,s),e.child)}function km(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,H0(t,e,i,r,s)):(t=pl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vo,n(o,r)&&t.ref===e.ref)return Kn(t,e,s)}return e.flags|=1,t=wr(i,r),t.ref=e.ref,t.return=e,e.child=t}function H0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vo(i,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Kn(t,e,s)}return yd(t,e,n,r,s)}function W0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Ms,Bt),Bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Ms,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(Ms,Bt),Bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(Ms,Bt),Bt|=r;return Ct(t,e,s,n),e.child}function K0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yd(t,e,n,r,s){var i=Mt(n)?es:Tt.current;return i=Qs(e,i),Bs(e,s),n=Lh(t,e,n,r,i,s),r=Oh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ce&&r&&Ih(e),e.flags|=1,Ct(t,e,n,s),e.child)}function Pm(t,e,n,r,s){if(Mt(n)){var i=!0;kl(e)}else i=!1;if(Bs(e,s),e.stateNode===null)dl(t,e),B0(e,n,r),md(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=rn(h):(h=Mt(n)?es:Tt.current,h=Qs(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Cm(e,o,r,h),or=!1;var v=e.memoizedState;o.state=v,Ml(e,r,o,s),u=e.memoizedState,l!==r||v!==u||Vt.current||or?(typeof p=="function"&&(pd(e,n,p,r),u=e.memoizedState),(l=or||Im(e,n,l,r,v,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,x0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:dn(e.type,l),o.props=h,m=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=Mt(n)?es:Tt.current,u=Qs(e,u));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||v!==u)&&Cm(e,o,r,u),or=!1,v=e.memoizedState,o.state=v,Ml(e,r,o,s);var k=e.memoizedState;l!==m||v!==k||Vt.current||or?(typeof I=="function"&&(pd(e,n,I,r),k=e.memoizedState),(h=or||Im(e,n,h,r,v,k,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return vd(t,e,n,r,i,s)}function vd(t,e,n,r,s,i){K0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ym(e,n,!1),Kn(t,e,i);r=e.stateNode,U1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,l,i)):Ct(t,e,l,i),e.memoizedState=r.state,s&&ym(e,n,!0),e.child}function Q0(t){var e=t.stateNode;e.pendingContext?gm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gm(t,e.context,!1),Dh(t,e.containerInfo)}function Dm(t,e,n,r,s){return Gs(),Nh(s),e.flags|=256,Ct(t,e,n,r),e.child}var _d={dehydrated:null,treeContext:null,retryLane:0};function wd(t){return{baseLanes:t,cachePool:null,transitions:null}}function G0(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(Ne,s&1),t===null)return hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vu(o,r,0,null),t=Jr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wd(n),e.memoizedState=_d,t):Uh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return B1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=wr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=wr(l,i):(i=Jr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_d,r}return i=t.child,t=i.sibling,r=wr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uh(t,e){return e=vu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ba(t,e,n,r){return r!==null&&Nh(r),Ys(e,t.child,null,n),t=Uh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function B1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ec(Error(z(422))),Ba(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vu({mode:"visible",children:r.children},s,0,null),i=Jr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=wd(o),e.memoizedState=_d,i);if(!(e.mode&1))return Ba(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Ec(i,r,void 0),Ba(t,e,o,r)}if(l=(o&t.childLanes)!==0,jt||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wn(t,s),mn(r,t,s,-1))}return Kh(),r=Ec(Error(z(421))),Ba(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=gr(s.nextSibling),Ht=e,Ce=!0,fn=null,t!==null&&(Zt[en++]=Un,Zt[en++]=Bn,Zt[en++]=ts,Un=t.id,Bn=t.overflow,ts=e),e=Uh(e,r.children),e.flags|=4096,e)}function jm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fd(t.return,e,n)}function Tc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Y0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ct(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jm(t,n,e);else if(t.tag===19)jm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ll(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Tc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ll(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Tc(e,!0,n,null,i);break;case"together":Tc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $1(t,e,n){switch(e.tag){case 3:Q0(e),Gs();break;case 5:E0(e);break;case 1:Mt(e.type)&&kl(e);break;case 4:Dh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(jl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?G0(t,e,n):(we(Ne,Ne.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);we(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Y0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,W0(t,e,n)}return Kn(t,e,n)}var X0,xd,J0,Z0;X0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xd=function(){};J0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(bn.current);var i=null;switch(n){case"input":s=$c(t,s),r=$c(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Wc(t,s),r=Wc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Al)}Qc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(co.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(co.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ee("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Z0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mi(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function q1(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Mt(e.type)&&Rl(),vt(e),null;case 3:return r=e.stateNode,Xs(),Ie(Vt),Ie(Tt),Vh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(za(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(Ad(fn),fn=null))),xd(t,e),vt(e),null;case 5:jh(e);var s=Gr(To.current);if(n=e.type,t!==null&&e.stateNode!=null)J0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return vt(e),null}if(t=Gr(bn.current),za(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[xo]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<$i.length;s++)Ee($i[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":$p(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Hp(r,i),Ee("invalid",r)}Qc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Fa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Fa(r.textContent,l,t),s=["children",""+l]):co.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":ka(r),qp(r,i,!0);break;case"textarea":ka(r),Wp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Al)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ny(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[xo]=r,X0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gc(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<$i.length;s++)Ee($i[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":$p(t,r),s=$c(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Hp(t,r),s=Wc(t,r),Ee("invalid",t);break;default:s=r}Qc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Ry(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&by(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ho(t,u):typeof u=="number"&&ho(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(co.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&dh(t,i,u,o))}switch(n){case"input":ka(t),qp(t,r,!1);break;case"textarea":ka(t),Wp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ir(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Os(t,!!r.multiple,i,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Al)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)Z0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Gr(To.current),Gr(bn.current),za(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:Fa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return vt(e),null;case 13:if(Ie(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&$t!==null&&e.mode&1&&!(e.flags&128))y0(),Gs(),e.flags|=98560,i=!1;else if(i=za(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Cn]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),i=!1}else fn!==null&&(Ad(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Qe===0&&(Qe=3):Kh())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Xs(),xd(t,e),t===null&&_o(e.stateNode.containerInfo),vt(e),null;case 10:return Rh(e.type._context),vt(e),null;case 17:return Mt(e.type)&&Rl(),vt(e),null;case 19:if(Ie(Ne),i=e.memoizedState,i===null)return vt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mi(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ll(t),o!==null){for(e.flags|=128,Mi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Zs&&(e.flags|=128,r=!0,Mi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ll(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return vt(e),null}else 2*Fe()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,Mi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Ne.current,we(Ne,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return Wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function H1(t,e){switch(Ch(e),e.tag){case 1:return Mt(e.type)&&Rl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),Ie(Vt),Ie(Tt),Vh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jh(e),null;case 13:if(Ie(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ne),null;case 4:return Xs(),null;case 10:return Rh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var $a=!1,xt=!1,W1=typeof WeakSet=="function"?WeakSet:Set,H=null;function Vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Ed(t,e,n){try{n()}catch(r){je(t,e,r)}}var Vm=!1;function K1(t,e){if(id=Cl,t=s0(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,v=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)v=m,m=I;for(;;){if(m===t)break t;if(v===n&&++h===s&&(l=o),v===i&&++p===r&&(u=o),(I=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=I}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(od={focusedElem:t,selectionRange:n},Cl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,A=k.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:dn(e.type,b),A);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=Vm,Vm=!1,k}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ed(e,n,i)}s=s.next}while(s!==r)}}function gu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Td(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ev(t){var e=t.alternate;e!==null&&(t.alternate=null,ev(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[xo],delete e[ud],delete e[A1],delete e[R1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tv(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Al));else if(r!==4&&(t=t.child,t!==null))for(Sd(t,e,n),t=t.sibling;t!==null;)Sd(t,e,n),t=t.sibling}function Id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Id(t,e,n),t=t.sibling;t!==null;)Id(t,e,n),t=t.sibling}var it=null,hn=!1;function rr(t,e,n){for(n=n.child;n!==null;)nv(t,e,n),n=n.sibling}function nv(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(lu,n)}catch{}switch(n.tag){case 5:xt||Vs(n,e);case 6:var r=it,s=hn;it=null,rr(t,e,n),it=r,hn=s,it!==null&&(hn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(hn?(t=it,n=n.stateNode,t.nodeType===8?gc(t.parentNode,n):t.nodeType===1&&gc(t,n),go(t)):gc(it,n.stateNode));break;case 4:r=it,s=hn,it=n.stateNode.containerInfo,hn=!0,rr(t,e,n),it=r,hn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ed(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!xt&&(Vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){je(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,rr(t,e,n),xt=r):rr(t,e,n);break;default:rr(t,e,n)}}function Lm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new W1),e.forEach(function(r){var s=nE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:it=l.stateNode,hn=!1;break e;case 3:it=l.stateNode.containerInfo,hn=!0;break e;case 4:it=l.stateNode.containerInfo,hn=!0;break e}l=l.return}if(it===null)throw Error(z(160));nv(i,o,s),it=null,hn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){je(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rv(e,t),e=e.sibling}function rv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),Tn(t),r&4){try{eo(3,t,t.return),gu(3,t)}catch(b){je(t,t.return,b)}try{eo(5,t,t.return)}catch(b){je(t,t.return,b)}}break;case 1:cn(e,t),Tn(t),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(cn(e,t),Tn(t),r&512&&n!==null&&Vs(n,n.return),t.flags&32){var s=t.stateNode;try{ho(s,"")}catch(b){je(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Iy(s,i),Gc(l,o);var h=Gc(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Ry(s,m):p==="dangerouslySetInnerHTML"?by(s,m):p==="children"?ho(s,m):dh(s,p,m,h)}switch(l){case"input":qc(s,i);break;case"textarea":Cy(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Os(s,!!i.multiple,I,!1):v!==!!i.multiple&&(i.defaultValue!=null?Os(s,!!i.multiple,i.defaultValue,!0):Os(s,!!i.multiple,i.multiple?[]:"",!1))}s[xo]=i}catch(b){je(t,t.return,b)}}break;case 6:if(cn(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){je(t,t.return,b)}}break;case 3:if(cn(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{go(e.containerInfo)}catch(b){je(t,t.return,b)}break;case 4:cn(e,t),Tn(t);break;case 13:cn(e,t),Tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=Fe())),r&4&&Lm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(h=xt)||p,cn(e,t),xt=h):cn(e,t),Tn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(m=H=p;H!==null;){switch(v=H,I=v.child,v.tag){case 0:case 11:case 14:case 15:eo(4,v,v.return);break;case 1:Vs(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){je(r,n,b)}}break;case 5:Vs(v,v.return);break;case 22:if(v.memoizedState!==null){Fm(m);continue}}I!==null?(I.return=v,H=I):Fm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ay("display",o))}catch(b){je(t,t.return,b)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(b){je(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:cn(e,t),Tn(t),r&4&&Lm(t);break;case 21:break;default:cn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tv(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ho(s,""),r.flags&=-33);var i=Mm(t);Id(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Mm(t);Sd(t,l,o);break;default:throw Error(z(161))}}catch(u){je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Q1(t,e,n){H=t,sv(t)}function sv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$a;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||xt;l=$a;var h=xt;if($a=o,(xt=u)&&!h)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?zm(s):u!==null?(u.return=o,H=u):zm(s);for(;i!==null;)H=i,sv(i),i=i.sibling;H=s,$a=l,xt=h}Om(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Om(t)}}function Om(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||gu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Em(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Em(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&go(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}xt||e.flags&512&&Td(e)}catch(v){je(e,e.return,v)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Fm(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function zm(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gu(4,e)}catch(u){je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){je(e,s,u)}}var i=e.return;try{Td(e)}catch(u){je(e,i,u)}break;case 5:var o=e.return;try{Td(e)}catch(u){je(e,o,u)}}}catch(u){je(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var G1=Math.ceil,zl=Xn.ReactCurrentDispatcher,Bh=Xn.ReactCurrentOwner,nn=Xn.ReactCurrentBatchConfig,he=0,Ze=null,$e=null,lt=0,Bt=0,Ms=kr(0),Qe=0,No=null,rs=0,yu=0,$h=0,to=null,Pt=null,qh=0,Zs=1/0,Fn=null,Ul=!1,Cd=null,vr=null,qa=!1,dr=null,Bl=0,no=0,Nd=null,hl=-1,fl=0;function Nt(){return he&6?Fe():hl!==-1?hl:hl=Fe()}function _r(t){return t.mode&1?he&2&&lt!==0?lt&-lt:P1.transition!==null?(fl===0&&(fl=By()),fl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:Gy(t.type)),t):1}function mn(t,e,n,r){if(50<no)throw no=0,Nd=null,Error(z(185));Wo(t,n,r),(!(he&2)||t!==Ze)&&(t===Ze&&(!(he&2)&&(yu|=n),Qe===4&&ur(t,lt)),Lt(t,r),n===1&&he===0&&!(e.mode&1)&&(Zs=Fe()+500,fu&&Pr()))}function Lt(t,e){var n=t.callbackNode;Px(t,e);var r=Il(t,t===Ze?lt:0);if(r===0)n!==null&&Gp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gp(n),e===1)t.tag===0?k1(Um.bind(null,t)):p0(Um.bind(null,t)),N1(function(){!(he&6)&&Pr()}),n=null;else{switch($y(r)){case 1:n=gh;break;case 4:n=zy;break;case 16:n=Sl;break;case 536870912:n=Uy;break;default:n=Sl}n=hv(n,iv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iv(t,e){if(hl=-1,fl=0,he&6)throw Error(z(327));var n=t.callbackNode;if($s()&&t.callbackNode!==n)return null;var r=Il(t,t===Ze?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$l(t,r);else{e=r;var s=he;he|=2;var i=av();(Ze!==t||lt!==e)&&(Fn=null,Zs=Fe()+500,Xr(t,e));do try{J1();break}catch(l){ov(t,l)}while(!0);Ah(),zl.current=i,he=s,$e!==null?e=0:(Ze=null,lt=0,e=Qe)}if(e!==0){if(e===2&&(s=ed(t),s!==0&&(r=s,e=bd(t,s))),e===1)throw n=No,Xr(t,0),ur(t,r),Lt(t,Fe()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!Y1(s)&&(e=$l(t,r),e===2&&(i=ed(t),i!==0&&(r=i,e=bd(t,i))),e===1))throw n=No,Xr(t,0),ur(t,r),Lt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Hr(t,Pt,Fn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=qh+500-Fe(),10<e)){if(Il(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ld(Hr.bind(null,t,Pt,Fn),e);break}Hr(t,Pt,Fn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G1(r/1960))-r,10<r){t.timeoutHandle=ld(Hr.bind(null,t,Pt,Fn),r);break}Hr(t,Pt,Fn);break;case 5:Hr(t,Pt,Fn);break;default:throw Error(z(329))}}}return Lt(t,Fe()),t.callbackNode===n?iv.bind(null,t):null}function bd(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=$l(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Ad(e)),t}function Ad(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function Y1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~$h,e&=~yu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),r=1<<n;t[n]=-1,e&=~r}}function Um(t){if(he&6)throw Error(z(327));$s();var e=Il(t,0);if(!(e&1))return Lt(t,Fe()),null;var n=$l(t,e);if(t.tag!==0&&n===2){var r=ed(t);r!==0&&(e=r,n=bd(t,r))}if(n===1)throw n=No,Xr(t,0),ur(t,e),Lt(t,Fe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,Pt,Fn),Lt(t,Fe()),null}function Hh(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Zs=Fe()+500,fu&&Pr())}}function ss(t){dr!==null&&dr.tag===0&&!(he&6)&&$s();var e=he;he|=1;var n=nn.transition,r=ye;try{if(nn.transition=null,ye=1,t)return t()}finally{ye=r,nn.transition=n,he=e,!(he&6)&&Pr()}}function Wh(){Bt=Ms.current,Ie(Ms)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,C1(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rl();break;case 3:Xs(),Ie(Vt),Ie(Tt),Vh();break;case 5:jh(r);break;case 4:Xs();break;case 13:Ie(Ne);break;case 19:Ie(Ne);break;case 10:Rh(r.type._context);break;case 22:case 23:Wh()}n=n.return}if(Ze=t,$e=t=wr(t.current,null),lt=Bt=e,Qe=0,No=null,$h=yu=rs=0,Pt=to=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qr=null}return t}function ov(t,e){do{var n=$e;try{if(Ah(),ul.current=Fl,Ol){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ol=!1}if(ns=0,Xe=He=be=null,Zi=!1,So=0,Bh.current=null,n===null||n.return===null){Qe=1,No=e,$e=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=lt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=bm(o);if(I!==null){I.flags&=-257,Am(I,o,l,i,e),I.mode&1&&Nm(i,h,e),e=I,u=h;var k=e.updateQueue;if(k===null){var b=new Set;b.add(u),e.updateQueue=b}else k.add(u);break e}else{if(!(e&1)){Nm(i,h,e),Kh();break e}u=Error(z(426))}}else if(Ce&&l.mode&1){var A=bm(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Am(A,o,l,i,e),Nh(Js(u,l));break e}}i=u=Js(u,l),Qe!==4&&(Qe=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=$0(i,u,e);xm(i,w);break e;case 1:l=u;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(vr===null||!vr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=q0(i,l,e);xm(i,D);break e}}i=i.return}while(i!==null)}uv(n)}catch(L){e=L,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function av(){var t=zl.current;return zl.current=Fl,t===null?Fl:t}function Kh(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ze===null||!(rs&268435455)&&!(yu&268435455)||ur(Ze,lt)}function $l(t,e){var n=he;he|=2;var r=av();(Ze!==t||lt!==e)&&(Fn=null,Xr(t,e));do try{X1();break}catch(s){ov(t,s)}while(!0);if(Ah(),he=n,zl.current=r,$e!==null)throw Error(z(261));return Ze=null,lt=0,Qe}function X1(){for(;$e!==null;)lv($e)}function J1(){for(;$e!==null&&!Tx();)lv($e)}function lv(t){var e=dv(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?uv(t):$e=e,Bh.current=null}function uv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=H1(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,$e=null;return}}else if(n=q1(n,e,Bt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Qe===0&&(Qe=5)}function Hr(t,e,n){var r=ye,s=nn.transition;try{nn.transition=null,ye=1,Z1(t,e,n,r)}finally{nn.transition=s,ye=r}return null}function Z1(t,e,n,r){do $s();while(dr!==null);if(he&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Dx(t,i),t===Ze&&($e=Ze=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qa||(qa=!0,hv(Sl,function(){return $s(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nn.transition,nn.transition=null;var o=ye;ye=1;var l=he;he|=4,Bh.current=null,K1(t,n),rv(n,t),_1(od),Cl=!!id,od=id=null,t.current=n,Q1(n),Sx(),he=l,ye=o,nn.transition=i}else t.current=n;if(qa&&(qa=!1,dr=t,Bl=s),i=t.pendingLanes,i===0&&(vr=null),Nx(n.stateNode),Lt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ul)throw Ul=!1,t=Cd,Cd=null,t;return Bl&1&&t.tag!==0&&$s(),i=t.pendingLanes,i&1?t===Nd?no++:(no=0,Nd=t):no=0,Pr(),null}function $s(){if(dr!==null){var t=$y(Bl),e=nn.transition,n=ye;try{if(nn.transition=null,ye=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,Bl=0,he&6)throw Error(z(331));var s=he;for(he|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:eo(8,p,i)}var m=p.child;if(m!==null)m.return=p,H=m;else for(;H!==null;){p=H;var v=p.sibling,I=p.return;if(ev(p),p===h){H=null;break}if(v!==null){v.return=I,H=v;break}H=I}}}var k=i.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var A=b.sibling;b.sibling=null,b=A}while(b!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var x=t.current;for(H=x;H!==null;){o=H;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,H=S;else e:for(o=x;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gu(9,l)}}catch(L){je(l,l.return,L)}if(l===o){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(he=s,Pr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(lu,t)}catch{}r=!0}return r}finally{ye=n,nn.transition=e}}return!1}function Bm(t,e,n){e=Js(n,e),e=$0(t,e,1),t=yr(t,e,1),e=Nt(),t!==null&&(Wo(t,1,e),Lt(t,e))}function je(t,e,n){if(t.tag===3)Bm(t,t,n);else for(;e!==null;){if(e.tag===3){Bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=Js(n,t),t=q0(e,t,1),e=yr(e,t,1),t=Nt(),e!==null&&(Wo(e,1,t),Lt(e,t));break}}e=e.return}}function eE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(lt&n)===n&&(Qe===4||Qe===3&&(lt&130023424)===lt&&500>Fe()-qh?Xr(t,0):$h|=n),Lt(t,e)}function cv(t,e){e===0&&(t.mode&1?(e=ja,ja<<=1,!(ja&130023424)&&(ja=4194304)):e=1);var n=Nt();t=Wn(t,e),t!==null&&(Wo(t,e,n),Lt(t,n))}function tE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cv(t,n)}function nE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),cv(t,n)}var dv;dv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,$1(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Ce&&e.flags&1048576&&m0(e,Dl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var s=Qs(e,Tt.current);Bs(e,n),s=Lh(null,e,r,t,s,n);var i=Oh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(i=!0,kl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ph(e),s.updater=mu,e.stateNode=s,s._reactInternals=e,md(e,r,t,n),e=vd(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Ih(e),Ct(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sE(r),t=dn(r,t),s){case 0:e=yd(null,e,r,t,n);break e;case 1:e=Pm(null,e,r,t,n);break e;case 11:e=Rm(null,e,r,t,n);break e;case 14:e=km(null,e,r,dn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),yd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),Pm(t,e,r,s,n);case 3:e:{if(Q0(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,x0(t,e),Ml(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error(z(423)),e),e=Dm(t,e,r,n,s);break e}else if(r!==s){s=Js(Error(z(424)),e),e=Dm(t,e,r,n,s);break e}else for($t=gr(e.stateNode.containerInfo.firstChild),Ht=e,Ce=!0,fn=null,n=_0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),r===s){e=Kn(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return E0(e),t===null&&hd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ad(r,s)?o=null:i!==null&&ad(r,i)&&(e.flags|=32),K0(t,e),Ct(t,e,o,n),e.child;case 6:return t===null&&hd(e),null;case 13:return G0(t,e,n);case 4:return Dh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),Rm(t,e,r,s,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(jl,r._currentValue),r._currentValue=o,i!==null)if(yn(i.value,o)){if(i.children===s.children&&!Vt.current){e=Kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=$n(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),fd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ct(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bs(e,n),s=rn(s),r=r(s),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,s=dn(r,e.pendingProps),s=dn(r.type,s),km(t,e,r,s,n);case 15:return H0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),dl(t,e),e.tag=1,Mt(r)?(t=!0,kl(e)):t=!1,Bs(e,n),B0(e,r,s),md(e,r,s,n),vd(null,e,r,!0,t,n);case 19:return Y0(t,e,n);case 22:return W0(t,e,n)}throw Error(z(156,e.tag))};function hv(t,e){return Fy(t,e)}function rE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new rE(t,e,n,r)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sE(t){if(typeof t=="function")return Qh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===ph)return 14}return 2}function wr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return Jr(n.children,s,i,e);case hh:o=8,s|=8;break;case Fc:return t=tn(12,n,e,s|2),t.elementType=Fc,t.lanes=i,t;case zc:return t=tn(13,n,e,s),t.elementType=zc,t.lanes=i,t;case Uc:return t=tn(19,n,e,s),t.elementType=Uc,t.lanes=i,t;case Ey:return vu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wy:o=10;break e;case xy:o=9;break e;case fh:o=11;break e;case ph:o=14;break e;case ir:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=tn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jr(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function vu(t,e,n,r){return t=tn(22,t,r,e),t.elementType=Ey,t.lanes=n,t.stateNode={isHidden:!1},t}function Sc(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function Ic(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,r,s,i,o,l,u){return t=new iE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(i),t}function oE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fv(t){if(!t)return Cr;t=t._reactInternals;e:{if(cs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Mt(n))return f0(t,n,e)}return e}function pv(t,e,n,r,s,i,o,l,u){return t=Gh(n,r,!0,t,s,i,o,l,u),t.context=fv(null),n=t.current,r=Nt(),s=_r(n),i=$n(r,s),i.callback=e??null,yr(n,i,s),t.current.lanes=s,Wo(t,s,r),Lt(t,r),t}function _u(t,e,n,r){var s=e.current,i=Nt(),o=_r(s);return n=fv(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(mn(t,s,o,i),ll(t,s,o)),o}function ql(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $m(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){$m(t,e),(t=t.alternate)&&$m(t,e)}function aE(){return null}var mv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}wu.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));_u(t,e,null,null)};wu.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){_u(null,t,null,null)}),e[Hn]=null}};function wu(t){this._internalRoot=t}wu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&Qy(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qm(){}function lE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=ql(o);i.call(h)}}var o=pv(e,r,t,0,null,!1,!1,"",qm);return t._reactRootContainer=o,t[Hn]=o.current,_o(t.nodeType===8?t.parentNode:t),ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=ql(u);l.call(h)}}var u=Gh(t,0,!1,null,null,!1,!1,"",qm);return t._reactRootContainer=u,t[Hn]=u.current,_o(t.nodeType===8?t.parentNode:t),ss(function(){_u(e,u,n,r)}),u}function Eu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=ql(o);l.call(u)}}_u(e,o,t,s)}else o=lE(n,e,t,s,r);return ql(o)}qy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bi(e.pendingLanes);n!==0&&(yh(e,n|1),Lt(e,Fe()),!(he&6)&&(Zs=Fe()+500,Pr()))}break;case 13:ss(function(){var r=Wn(t,1);if(r!==null){var s=Nt();mn(r,t,1,s)}}),Yh(t,1)}};vh=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=Nt();mn(e,t,134217728,n)}Yh(t,134217728)}};Hy=function(t){if(t.tag===13){var e=_r(t),n=Wn(t,e);if(n!==null){var r=Nt();mn(n,t,e,r)}Yh(t,e)}};Wy=function(){return ye};Ky=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Xc=function(t,e,n){switch(e){case"input":if(qc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hu(r);if(!s)throw Error(z(90));Sy(r),qc(r,s)}}}break;case"textarea":Cy(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};Dy=Hh;jy=ss;var uE={usingClientEntryPoint:!1,Events:[Qo,Rs,hu,ky,Py,Hh]},Li={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cE={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ly(t),t===null?null:t.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||aE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{lu=Ha.inject(cE),Nn=Ha}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uE;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(z(200));return oE(t,e,null,n)};Kt.createRoot=function(t,e){if(!Jh(t))throw Error(z(299));var n=!1,r="",s=mv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gh(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,_o(t.nodeType===8?t.parentNode:t),new Xh(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Ly(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return ss(t)};Kt.hydrate=function(t,e,n){if(!xu(e))throw Error(z(200));return Eu(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=mv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pv(e,null,t,1,n??null,s,!1,i,o),t[Hn]=e.current,_o(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wu(e)};Kt.render=function(t,e,n){if(!xu(e))throw Error(z(200));return Eu(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!xu(t))throw Error(z(40));return t._reactRootContainer?(ss(function(){Eu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Hh;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Eu(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function gv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gv)}catch(t){console.error(t)}}gv(),gy.exports=Kt;var Ls=gy.exports,yv,Hm=Ls;yv=Hm.createRoot,Hm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...h},p)=>P.createElement("svg",{ref:p,...dE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${hE(t)}`,l].join(" "),...h},[...e.map(([m,v])=>P.createElement(m,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=Ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Ve("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yE=({children:t,currentPage:e,onPageChange:n})=>{const r=[{id:"dashboard",name:"대시보드",icon:Rd},{id:"demand-register",name:"수요처 등록",icon:Po},{id:"demand-list",name:"수요처 관리",icon:Hl},{id:"performance-input",name:"실적 입력",icon:gE},{id:"performance-list",name:"실적 조회",icon:ei},{id:"budget-usage",name:"예산 사용 내역",icon:Hl}];return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[c.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:c.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"관리자 대시보드"})}),c.jsx("nav",{className:"mt-8",children:c.jsx("div",{className:"space-y-1 px-4",children:r.map(s=>{const i=s.icon;return c.jsxs("button",{onClick:()=>n(s.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${e===s.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[c.jsx(i,{className:"mr-3 h-5 w-5"}),s.name]},s.id)})})})]}),c.jsx("div",{className:"pl-64",children:c.jsx("main",{className:"p-8",children:t})})]})};function vE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return P.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Iu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function di(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function tf(t){return"nodeType"in t}function Ft(t){var e,n;return t?di(t)?t:tf(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function nf(t){const{Document:e}=Ft(t);return t instanceof e}function Yo(t){return di(t)?!1:t instanceof Ft(t).HTMLElement}function Ev(t){return t instanceof Ft(t).SVGElement}function hi(t){return t?di(t)?t.document:tf(t)?nf(t)?t:Yo(t)||Ev(t)?t.ownerDocument:document:document:document}const Pn=Iu?P.useLayoutEffect:P.useEffect;function rf(t){const e=P.useRef(t);return Pn(()=>{e.current=t}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function _E(){const t=P.useRef(null),e=P.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=P.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Do(t,e){e===void 0&&(e=[t]);const n=P.useRef(t);return Pn(()=>{n.current!==t&&(n.current=t)},e),n}function Xo(t,e){const n=P.useRef();return P.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Wl(t){const e=rf(t),n=P.useRef(null),r=P.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function kd(t){const e=P.useRef();return P.useEffect(()=>{e.current=t},[t]),e.current}let Cc={};function Jo(t,e){return P.useMemo(()=>{if(e)return e;const n=Cc[t]==null?0:Cc[t]+1;return Cc[t]=n,t+"-"+n},[t,e])}function Tv(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[u,h]of l){const p=i[u];p!=null&&(i[u]=p+t*h)}return i},{...e})}}const qs=Tv(1),Kl=Tv(-1);function wE(t){return"clientX"in t&&"clientY"in t}function sf(t){if(!t)return!1;const{KeyboardEvent:e}=Ft(t.target);return e&&t instanceof e}function xE(t){if(!t)return!1;const{TouchEvent:e}=Ft(t.target);return e&&t instanceof e}function Pd(t){if(xE(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return wE(t)?{x:t.clientX,y:t.clientY}:null}const jo=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[jo.Translate.toString(t),jo.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Qm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function EE(t){return t.matches(Qm)?t:t.querySelector(Qm)}const TE={display:"none"};function SE(t){let{id:e,value:n}=t;return kt.createElement("div",{id:e,style:TE},n)}function IE(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return kt.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function CE(){const[t,e]=P.useState("");return{announce:P.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Sv=P.createContext(null);function NE(t){const e=P.useContext(Sv);P.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function bE(){const[t]=P.useState(()=>new Set),e=P.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[P.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const AE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},RE={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function kE(t){let{announcements:e=RE,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=AE}=t;const{announce:i,announcement:o}=CE(),l=Jo("DndLiveRegion"),[u,h]=P.useState(!1);if(P.useEffect(()=>{h(!0)},[]),NE(P.useMemo(()=>({onDragStart(m){let{active:v}=m;i(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:I}=m;e.onDragMove&&i(e.onDragMove({active:v,over:I}))},onDragOver(m){let{active:v,over:I}=m;i(e.onDragOver({active:v,over:I}))},onDragEnd(m){let{active:v,over:I}=m;i(e.onDragEnd({active:v,over:I}))},onDragCancel(m){let{active:v,over:I}=m;i(e.onDragCancel({active:v,over:I}))}}),[i,e])),!u)return null;const p=kt.createElement(kt.Fragment,null,kt.createElement(SE,{id:r,value:s.draggable}),kt.createElement(IE,{id:l,announcement:o}));return n?Ls.createPortal(p,n):p}var Ke;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ke||(Ke={}));function Ql(){}function PE(t,e){return P.useMemo(()=>({sensor:t,options:{}}),[t,e])}function DE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return P.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const vn=Object.freeze({x:0,y:0});function jE(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function VE(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function ME(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function LE(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Gm(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const OE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Gm(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const h=jE(Gm(u),s);i.push({id:l,data:{droppableContainer:o,value:h}})}}return i.sort(VE)};function FE(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const u=e.width*e.height,h=t.width*t.height,p=o*l,m=p/(u+h-p);return Number(m.toFixed(4))}return 0}const zE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const u=FE(l,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(ME)};function UE(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Iv(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:vn}function BE(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const $E=BE(1);function qE(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function HE(t,e,n){const r=qE(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,u=t.left-o-(1-s)*parseFloat(n),h=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?t.width/s:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:u+p,bottom:h+m,left:u}}const WE={ignoreTransform:!1};function fi(t,e){e===void 0&&(e=WE);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Ft(t).getComputedStyle(t);h&&(n=HE(n,h,p))}const{top:r,left:s,width:i,height:o,bottom:l,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:u}}function Ym(t){return fi(t,{ignoreTransform:!0})}function KE(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function QE(t,e){return e===void 0&&(e=Ft(t).getComputedStyle(t)),e.position==="fixed"}function GE(t,e){e===void 0&&(e=Ft(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function of(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(nf(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Yo(s)||Ev(s)||n.includes(s))return n;const i=Ft(t).getComputedStyle(s);return s!==t&&GE(s,i)&&n.push(s),QE(s,i)?n:r(s.parentNode)}return t?r(t):n}function Cv(t){const[e]=of(t,1);return e??null}function Nc(t){return!Iu||!t?null:di(t)?t:tf(t)?nf(t)||t===hi(t).scrollingElement?window:Yo(t)?t:null:null}function Nv(t){return di(t)?t.scrollX:t.scrollLeft}function bv(t){return di(t)?t.scrollY:t.scrollTop}function Dd(t){return{x:Nv(t),y:bv(t)}}var Je;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Je||(Je={}));function Av(t){return!Iu||!t?!1:t===document.scrollingElement}function Rv(t){const e={x:0,y:0},n=Av(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const YE={x:.2,y:.2};function XE(t,e,n,r,s){let{top:i,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=YE);const{isTop:h,isBottom:p,isLeft:m,isRight:v}=Rv(t),I={x:0,y:0},k={x:0,y:0},b={height:e.height*s.y,width:e.width*s.x};return!h&&i<=e.top+b.height?(I.y=Je.Backward,k.y=r*Math.abs((e.top+b.height-i)/b.height)):!p&&u>=e.bottom-b.height&&(I.y=Je.Forward,k.y=r*Math.abs((e.bottom-b.height-u)/b.height)),!v&&l>=e.right-b.width?(I.x=Je.Forward,k.x=r*Math.abs((e.right-b.width-l)/b.width)):!m&&o<=e.left+b.width&&(I.x=Je.Backward,k.x=r*Math.abs((e.left+b.width-o)/b.width)),{direction:I,speed:k}}function JE(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function kv(t){return t.reduce((e,n)=>qs(e,Dd(n)),vn)}function ZE(t){return t.reduce((e,n)=>e+Nv(n),0)}function eT(t){return t.reduce((e,n)=>e+bv(n),0)}function tT(t,e){if(e===void 0&&(e=fi),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Cv(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const nT=[["x",["left","right"],ZE],["y",["top","bottom"],eT]];class af{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=of(n),s=kv(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of nT)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=l(r),p=s[i]-h;return this.rect[u]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ro{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function rT(t){const{EventTarget:e}=Ft(t);return t instanceof e?t:hi(t)}function bc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Jt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Jt||(Jt={}));function Xm(t){t.preventDefault()}function sT(t){t.stopPropagation()}var ge;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ge||(ge={}));const Pv={start:[ge.Space,ge.Enter],cancel:[ge.Esc],end:[ge.Space,ge.Enter,ge.Tab]},iT=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ge.Right:return{...n,x:n.x+25};case ge.Left:return{...n,x:n.x-25};case ge.Down:return{...n,y:n.y+25};case ge.Up:return{...n,y:n.y-25}}};class Dv{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ro(hi(n)),this.windowListeners=new ro(Ft(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Jt.Resize,this.handleCancel),this.windowListeners.add(Jt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Jt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&tT(r),n(vn)}handleKeyDown(e){if(sf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Pv,coordinateGetter:o=iT,scrollBehavior:l="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=r.current,p=h?{x:h.left,y:h.top}:vn;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:n,context:r.current,currentCoordinates:p});if(m){const v=Kl(m,p),I={x:0,y:0},{scrollableAncestors:k}=r.current;for(const b of k){const A=e.code,{isTop:w,isRight:x,isLeft:S,isBottom:D,maxScroll:L,minScroll:V}=Rv(b),E=JE(b),g={x:Math.min(A===ge.Right?E.right-E.width/2:E.right,Math.max(A===ge.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(A===ge.Down?E.bottom-E.height/2:E.bottom,Math.max(A===ge.Down?E.top:E.top+E.height/2,m.y))},y=A===ge.Right&&!x||A===ge.Left&&!S,T=A===ge.Down&&!D||A===ge.Up&&!w;if(y&&g.x!==m.x){const N=b.scrollLeft+v.x,R=A===ge.Right&&N<=L.x||A===ge.Left&&N>=V.x;if(R&&!v.y){b.scrollTo({left:N,behavior:l});return}R?I.x=b.scrollLeft-N:I.x=A===ge.Right?b.scrollLeft-L.x:b.scrollLeft-V.x,I.x&&b.scrollBy({left:-I.x,behavior:l});break}else if(T&&g.y!==m.y){const N=b.scrollTop+v.y,R=A===ge.Down&&N<=L.y||A===ge.Up&&N>=V.y;if(R&&!v.x){b.scrollTo({top:N,behavior:l});return}R?I.y=b.scrollTop-N:I.y=A===ge.Down?b.scrollTop-L.y:b.scrollTop-V.y,I.y&&b.scrollBy({top:-I.y,behavior:l});break}}this.handleMove(e,qs(Kl(m,this.referenceCoordinates),I))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dv.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Pv,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Jm(t){return!!(t&&"distance"in t)}function Zm(t){return!!(t&&"delay"in t)}class lf{constructor(e,n,r){var s;r===void 0&&(r=rT(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=hi(o),this.documentListeners=new ro(this.document),this.listeners=new ro(r),this.windowListeners=new ro(Ft(o)),this.initialCoordinates=(s=Pd(i))!=null?s:vn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Jt.Resize,this.handleCancel),this.windowListeners.add(Jt.DragStart,Xm),this.windowListeners.add(Jt.VisibilityChange,this.handleCancel),this.windowListeners.add(Jt.ContextMenu,Xm),this.documentListeners.add(Jt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Zm(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Jm(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Jt.Click,sT,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Jt.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const u=(n=Pd(e))!=null?n:vn,h=Kl(s,u);if(!r&&l){if(Jm(l)){if(l.tolerance!=null&&bc(h,l.tolerance))return this.handleCancel();if(bc(h,l.distance))return this.handleStart()}if(Zm(l)&&bc(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ge.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const oT={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class uf extends lf{constructor(e){const{event:n}=e,r=hi(n.target);super(e,oT,r)}}uf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const aT={move:{name:"mousemove"},end:{name:"mouseup"}};var jd;(function(t){t[t.RightClick=2]="RightClick"})(jd||(jd={}));class lT extends lf{constructor(e){super(e,aT,hi(e.event.target))}}lT.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===jd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ac={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class uT extends lf{constructor(e){super(e,Ac)}static setup(){return window.addEventListener(Ac.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ac.move.name,e)};function e(){}}}uT.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var so;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(so||(so={}));var Gl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gl||(Gl={}));function cT(t){let{acceleration:e,activator:n=so.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=Gl.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:v}=t;const I=hT({delta:m,disabled:!i}),[k,b]=_E(),A=P.useRef({x:0,y:0}),w=P.useRef({x:0,y:0}),x=P.useMemo(()=>{switch(n){case so.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case so.DraggableRect:return s}},[n,s,u]),S=P.useRef(null),D=P.useCallback(()=>{const V=S.current;if(!V)return;const E=A.current.x*w.current.x,g=A.current.y*w.current.y;V.scrollBy(E,g)},[]),L=P.useMemo(()=>l===Gl.TreeOrder?[...h].reverse():h,[l,h]);P.useEffect(()=>{if(!i||!h.length||!x){b();return}for(const V of L){if((r==null?void 0:r(V))===!1)continue;const E=h.indexOf(V),g=p[E];if(!g)continue;const{direction:y,speed:T}=XE(V,g,x,e,v);for(const N of["x","y"])I[N][y[N]]||(T[N]=0,y[N]=0);if(T.x>0||T.y>0){b(),S.current=V,k(D,o),A.current=T,w.current=y;return}}A.current={x:0,y:0},w.current={x:0,y:0},b()},[e,D,r,b,i,o,JSON.stringify(x),JSON.stringify(I),k,h,L,p,JSON.stringify(v)])}const dT={x:{[Je.Backward]:!1,[Je.Forward]:!1},y:{[Je.Backward]:!1,[Je.Forward]:!1}};function hT(t){let{delta:e,disabled:n}=t;const r=kd(e);return Xo(s=>{if(n||!r||!s)return dT;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Je.Backward]:s.x[Je.Backward]||i.x===-1,[Je.Forward]:s.x[Je.Forward]||i.x===1},y:{[Je.Backward]:s.y[Je.Backward]||i.y===-1,[Je.Forward]:s.y[Je.Forward]||i.y===1}}},[n,e,r])}function fT(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Xo(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function pT(t,e){return P.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Vo;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Vo||(Vo={}));var Vd;(function(t){t.Optimized="optimized"})(Vd||(Vd={}));const eg=new Map;function mT(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=P.useState(null),{frequency:l,measure:u,strategy:h}=s,p=P.useRef(t),m=A(),v=Do(m),I=P.useCallback(function(w){w===void 0&&(w=[]),!v.current&&o(x=>x===null?w:x.concat(w.filter(S=>!x.includes(S))))},[v]),k=P.useRef(null),b=Xo(w=>{if(m&&!n)return eg;if(!w||w===eg||p.current!==t||i!=null){const x=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){x.set(S.id,S.rect.current);continue}const D=S.node.current,L=D?new af(u(D),D):null;S.rect.current=L,L&&x.set(S.id,L)}return x}return w},[t,i,n,m,u]);return P.useEffect(()=>{p.current=t},[t]),P.useEffect(()=>{m||I()},[n,m]),P.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),P.useEffect(()=>{m||typeof l!="number"||k.current!==null||(k.current=setTimeout(()=>{I(),k.current=null},l))},[l,m,I,...r]),{droppableRects:b,measureDroppableContainers:I,measuringScheduled:i!=null};function A(){switch(h){case Vo.Always:return!1;case Vo.BeforeDragging:return n;default:return!n}}}function jv(t,e){return Xo(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function gT(t,e){return jv(t,e)}function yT(t){let{callback:e,disabled:n}=t;const r=rf(e),s=P.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return P.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Cu(t){let{callback:e,disabled:n}=t;const r=rf(e),s=P.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return P.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function vT(t){return new af(fi(t),t)}function tg(t,e,n){e===void 0&&(e=vT);const[r,s]=P.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=u??n)!=null?h:null}const p=e(t);return JSON.stringify(u)===JSON.stringify(p)?u:p})}const o=yT({callback(u){if(t)for(const h of u){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),l=Cu({callback:i});return Pn(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function _T(t){const e=jv(t);return Iv(t,e)}const ng=[];function wT(t){const e=P.useRef(t),n=Xo(r=>t?r&&r!==ng&&t&&e.current&&t.parentNode===e.current.parentNode?r:of(t):ng,[t]);return P.useEffect(()=>{e.current=t},[t]),n}function xT(t){const[e,n]=P.useState(null),r=P.useRef(t),s=P.useCallback(i=>{const o=Nc(i.target);o&&n(l=>l?(l.set(o,Dd(o)),new Map(l)):null)},[]);return P.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(u=>{const h=Nc(u);return h?(h.addEventListener("scroll",s,{passive:!0}),[h,Dd(h)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(u=>{const h=Nc(u);h==null||h.removeEventListener("scroll",s)})}},[s,t]),P.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>qs(i,o),vn):kv(t):vn,[t,e])}function rg(t,e){e===void 0&&(e=[]);const n=P.useRef(null);return P.useEffect(()=>{n.current=null},e),P.useEffect(()=>{const r=t!==vn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Kl(t,n.current):vn}function ET(t){P.useEffect(()=>{if(!Iu)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function TT(t,e){return P.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function Vv(t){return P.useMemo(()=>t?KE(t):null,[t])}const sg=[];function ST(t,e){e===void 0&&(e=fi);const[n]=t,r=Vv(n?Ft(n):null),[s,i]=P.useState(sg);function o(){i(()=>t.length?t.map(u=>Av(u)?r:new af(e(u),u)):sg)}const l=Cu({callback:o});return Pn(()=>{l==null||l.disconnect(),o(),t.forEach(u=>l==null?void 0:l.observe(u))},[t]),s}function IT(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Yo(e)?e:t}function CT(t){let{measure:e}=t;const[n,r]=P.useState(null),s=P.useCallback(h=>{for(const{target:p}of h)if(Yo(p)){r(m=>{const v=e(p);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),i=Cu({callback:s}),o=P.useCallback(h=>{const p=IT(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),r(p?e(p):null)},[e,i]),[l,u]=Wl(o);return P.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const NT=[{sensor:uf,options:{}},{sensor:Dv,options:{}}],bT={current:{}},ml={draggable:{measure:Ym},droppable:{measure:Ym,strategy:Vo.WhileDragging,frequency:Vd.Optimized},dragOverlay:{measure:fi}};class io extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const AT={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new io,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ql},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ml,measureDroppableContainers:Ql,windowRect:null,measuringScheduled:!1},RT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ql,draggableNodes:new Map,over:null,measureDroppableContainers:Ql},Nu=P.createContext(RT),Mv=P.createContext(AT);function kT(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new io}}}function PT(t,e){switch(e.type){case Ke.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ke.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ke.DragEnd:case Ke.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ke.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new io(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Ke.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new io(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Ke.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new io(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function DT(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=P.useContext(Nu),i=kd(r),o=kd(n==null?void 0:n.id);return P.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!sf(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:u,node:h}=l;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[u.current,h.current]){if(!p)continue;const m=EE(p);if(m){m.focus();break}}})}},[r,e,s,o,i]),null}function jT(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function VT(t){return P.useMemo(()=>({draggable:{...ml.draggable,...t==null?void 0:t.draggable},droppable:{...ml.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ml.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function MT(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=P.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Pn(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=n(h),m=Iv(p,r);if(o||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=Cv(h);v&&v.scrollBy({top:m.y,left:m.x})}},[e,o,l,r,n])}const Lv=P.createContext({...vn,scaleX:1,scaleY:1});var ar;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ar||(ar={}));const LT=P.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:u=!0,children:h,sensors:p=NT,collisionDetection:m=zE,measuring:v,modifiers:I,...k}=e;const b=P.useReducer(PT,void 0,kT),[A,w]=b,[x,S]=bE(),[D,L]=P.useState(ar.Uninitialized),V=D===ar.Initialized,{draggable:{active:E,nodes:g,translate:y},droppable:{containers:T}}=A,N=E!=null?g.get(E):null,R=P.useRef({initial:null,translated:null}),C=P.useMemo(()=>{var Ue;return E!=null?{id:E,data:(Ue=N==null?void 0:N.data)!=null?Ue:bT,rect:R}:null},[E,N]),ie=P.useRef(null),[ke,ze]=P.useState(null),[ue,B]=P.useState(null),Q=Do(k,Object.values(k)),K=Jo("DndDescribedBy",o),fe=P.useMemo(()=>T.getEnabled(),[T]),U=VT(v),{droppableRects:Y,measureDroppableContainers:$,measuringScheduled:J}=mT(fe,{dragging:V,dependencies:[y.x,y.y],config:U.droppable}),re=fT(g,E),oe=P.useMemo(()=>ue?Pd(ue):null,[ue]),et=Lr(),tt=gT(re,U.draggable.measure);MT({activeNode:E!=null?g.get(E):null,config:et.layoutShiftCompensation,initialRect:tt,measure:U.draggable.measure});const ne=tg(re,U.draggable.measure,tt),Gt=tg(re?re.parentElement:null),Rt=P.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:g,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),wn=T.getNodeFor((n=Rt.current.over)==null?void 0:n.id),zt=CT({measure:U.dragOverlay.measure}),xn=(r=zt.nodeRef.current)!=null?r:re,Vn=V?(s=zt.rect)!=null?s:ne:null,aa=!!(zt.nodeRef.current&&zt.rect),la=_T(aa?null:ne),fs=Vv(xn?Ft(xn):null),Yt=wT(V?wn??re:null),Vr=ST(Yt),ps=jT(I,{transform:{x:y.x-la.x,y:y.y-la.y,scaleX:1,scaleY:1},activatorEvent:ue,active:C,activeNodeRect:ne,containerNodeRect:Gt,draggingNodeRect:Vn,over:Rt.current.over,overlayNodeRect:zt.rect,scrollableAncestors:Yt,scrollableAncestorRects:Vr,windowRect:fs}),ms=oe?qs(oe,y):null,gs=xT(Yt),ua=rg(gs),Ge=rg(gs,[ne]),Pe=qs(ps,ua),on=Vn?$E(Vn,ps):null,Jn=C&&on?m({active:C,collisionRect:on,droppableRects:Y,droppableContainers:fe,pointerCoordinates:ms}):null,wi=LE(Jn,"id"),[En,Zn]=P.useState(null),ca=aa?ps:qs(ps,Ge),da=UE(ca,(i=En==null?void 0:En.rect)!=null?i:null,ne),Mr=P.useRef(null),ha=P.useCallback((Ue,nt)=>{let{sensor:Me,options:an}=nt;if(ie.current==null)return;const rt=g.get(ie.current);if(!rt)return;const ht=Ue.nativeEvent,ft=new Me({active:ie.current,activeNode:rt,event:ht,options:an,context:Rt,onAbort(ce){if(!g.get(ce))return;const{onDragAbort:pt}=Q.current,St={id:ce};pt==null||pt(St),x({type:"onDragAbort",event:St})},onPending(ce,ln,pt,St){if(!g.get(ce))return;const{onDragPending:Fr}=Q.current,It={id:ce,constraint:ln,initialCoordinates:pt,offset:St};Fr==null||Fr(It),x({type:"onDragPending",event:It})},onStart(ce){const ln=ie.current;if(ln==null)return;const pt=g.get(ln);if(!pt)return;const{onDragStart:St}=Q.current,Or={activatorEvent:ht,active:{id:ln,data:pt.data,rect:R}};Ls.unstable_batchedUpdates(()=>{St==null||St(Or),L(ar.Initializing),w({type:Ke.DragStart,initialCoordinates:ce,active:ln}),x({type:"onDragStart",event:Or}),ze(Mr.current),B(ht)})},onMove(ce){w({type:Ke.DragMove,coordinates:ce})},onEnd:Mn(Ke.DragEnd),onCancel:Mn(Ke.DragCancel)});Mr.current=ft;function Mn(ce){return async function(){const{active:pt,collisions:St,over:Or,scrollAdjustedTranslate:Fr}=Rt.current;let It=null;if(pt&&Fr){const{cancelDrop:zr}=Q.current;It={activatorEvent:ht,active:pt,collisions:St,delta:Fr,over:Or},ce===Ke.DragEnd&&typeof zr=="function"&&await Promise.resolve(zr(It))&&(ce=Ke.DragCancel)}ie.current=null,Ls.unstable_batchedUpdates(()=>{w({type:ce}),L(ar.Uninitialized),Zn(null),ze(null),B(null),Mr.current=null;const zr=ce===Ke.DragEnd?"onDragEnd":"onDragCancel";if(It){const xi=Q.current[zr];xi==null||xi(It),x({type:zr,event:It})}})}}},[g]),Uu=P.useCallback((Ue,nt)=>(Me,an)=>{const rt=Me.nativeEvent,ht=g.get(an);if(ie.current!==null||!ht||rt.dndKit||rt.defaultPrevented)return;const ft={active:ht};Ue(Me,nt.options,ft)===!0&&(rt.dndKit={capturedBy:nt.sensor},ie.current=an,ha(Me,nt))},[g,ha]),ys=pT(p,Uu);ET(p),Pn(()=>{ne&&D===ar.Initializing&&L(ar.Initialized)},[ne,D]),P.useEffect(()=>{const{onDragMove:Ue}=Q.current,{active:nt,activatorEvent:Me,collisions:an,over:rt}=Rt.current;if(!nt||!Me)return;const ht={active:nt,activatorEvent:Me,collisions:an,delta:{x:Pe.x,y:Pe.y},over:rt};Ls.unstable_batchedUpdates(()=>{Ue==null||Ue(ht),x({type:"onDragMove",event:ht})})},[Pe.x,Pe.y]),P.useEffect(()=>{const{active:Ue,activatorEvent:nt,collisions:Me,droppableContainers:an,scrollAdjustedTranslate:rt}=Rt.current;if(!Ue||ie.current==null||!nt||!rt)return;const{onDragOver:ht}=Q.current,ft=an.get(wi),Mn=ft&&ft.rect.current?{id:ft.id,rect:ft.rect.current,data:ft.data,disabled:ft.disabled}:null,ce={active:Ue,activatorEvent:nt,collisions:Me,delta:{x:rt.x,y:rt.y},over:Mn};Ls.unstable_batchedUpdates(()=>{Zn(Mn),ht==null||ht(ce),x({type:"onDragOver",event:ce})})},[wi]),Pn(()=>{Rt.current={activatorEvent:ue,active:C,activeNode:re,collisionRect:on,collisions:Jn,droppableRects:Y,draggableNodes:g,draggingNode:xn,draggingNodeRect:Vn,droppableContainers:T,over:En,scrollableAncestors:Yt,scrollAdjustedTranslate:Pe},R.current={initial:Vn,translated:on}},[C,re,Jn,on,g,xn,Vn,Y,T,En,Yt,Pe]),cT({...et,delta:y,draggingRect:on,pointerCoordinates:ms,scrollableAncestors:Yt,scrollableAncestorRects:Vr});const fa=P.useMemo(()=>({active:C,activeNode:re,activeNodeRect:ne,activatorEvent:ue,collisions:Jn,containerNodeRect:Gt,dragOverlay:zt,draggableNodes:g,droppableContainers:T,droppableRects:Y,over:En,measureDroppableContainers:$,scrollableAncestors:Yt,scrollableAncestorRects:Vr,measuringConfiguration:U,measuringScheduled:J,windowRect:fs}),[C,re,ne,ue,Jn,Gt,zt,g,T,Y,En,$,Yt,Vr,U,J,fs]),pa=P.useMemo(()=>({activatorEvent:ue,activators:ys,active:C,activeNodeRect:ne,ariaDescribedById:{draggable:K},dispatch:w,draggableNodes:g,over:En,measureDroppableContainers:$}),[ue,ys,C,ne,w,K,g,En,$]);return kt.createElement(Sv.Provider,{value:S},kt.createElement(Nu.Provider,{value:pa},kt.createElement(Mv.Provider,{value:fa},kt.createElement(Lv.Provider,{value:da},h)),kt.createElement(DT,{disabled:(l==null?void 0:l.restoreFocus)===!1})),kt.createElement(kE,{...l,hiddenTextDescribedById:K}));function Lr(){const Ue=(ke==null?void 0:ke.autoScrollEnabled)===!1,nt=typeof u=="object"?u.enabled===!1:u===!1,Me=V&&!Ue&&!nt;return typeof u=="object"?{...u,enabled:Me}:{enabled:Me}}}),OT=P.createContext(null),ig="button",FT="Draggable";function zT(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Jo(FT),{activators:o,activatorEvent:l,active:u,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:v}=P.useContext(Nu),{role:I=ig,roleDescription:k="draggable",tabIndex:b=0}=s??{},A=(u==null?void 0:u.id)===e,w=P.useContext(A?Lv:OT),[x,S]=Wl(),[D,L]=Wl(),V=TT(o,e),E=Do(n);Pn(()=>(m.set(e,{id:e,key:i,node:x,activatorNode:D,data:E}),()=>{const y=m.get(e);y&&y.key===i&&m.delete(e)}),[m,e]);const g=P.useMemo(()=>({role:I,tabIndex:b,"aria-disabled":r,"aria-pressed":A&&I===ig?!0:void 0,"aria-roledescription":k,"aria-describedby":p.draggable}),[r,I,b,A,k,p.draggable]);return{active:u,activatorEvent:l,activeNodeRect:h,attributes:g,isDragging:A,listeners:r?void 0:V,node:x,over:v,setNodeRef:S,setActivatorNodeRef:L,transform:w}}function UT(){return P.useContext(Mv)}const BT="Droppable",$T={timeout:25};function qT(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Jo(BT),{active:o,dispatch:l,over:u,measureDroppableContainers:h}=P.useContext(Nu),p=P.useRef({disabled:n}),m=P.useRef(!1),v=P.useRef(null),I=P.useRef(null),{disabled:k,updateMeasurementsFor:b,timeout:A}={...$T,...s},w=Do(b??r),x=P.useCallback(()=>{if(!m.current){m.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{h(Array.isArray(w.current)?w.current:[w.current]),I.current=null},A)},[A]),S=Cu({callback:x,disabled:k||!o}),D=P.useCallback((g,y)=>{S&&(y&&(S.unobserve(y),m.current=!1),g&&S.observe(g))},[S]),[L,V]=Wl(D),E=Do(e);return P.useEffect(()=>{!S||!L.current||(S.disconnect(),m.current=!1,S.observe(L.current))},[L,S]),P.useEffect(()=>(l({type:Ke.RegisterDroppable,element:{id:r,key:i,disabled:n,node:L,rect:v,data:E}}),()=>l({type:Ke.UnregisterDroppable,key:i,id:r})),[r]),P.useEffect(()=>{n!==p.current.disabled&&(l({type:Ke.SetDroppableDisabled,id:r,key:i,disabled:n}),p.current.disabled=n)},[r,i,n,l]),{active:o,rect:v,isOver:(u==null?void 0:u.id)===r,node:L,over:u,setNodeRef:V}}function cf(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function HT(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Wa(t){return t!==null&&t>=0}function WT(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function KT(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Ov=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=cf(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Ka={scaleX:1,scaleY:1},QT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const h=i[o];return h?{x:0,y:n<o?h.top+h.height-(l.top+l.height):h.top-l.top,...Ka}:null}const u=GT(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-u,...Ka}:s<n&&s>=o?{x:0,y:l.height+u,...Ka}:{x:0,y:0,...Ka}};function GT(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Fv="Sortable",zv=kt.createContext({activeIndex:-1,containerId:Fv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ov,disabled:{draggable:!1,droppable:!1}});function YT(t){let{children:e,id:n,items:r,strategy:s=Ov,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:h,measureDroppableContainers:p}=UT(),m=Jo(Fv,n),v=l.rect!==null,I=P.useMemo(()=>r.map(V=>typeof V=="object"&&"id"in V?V.id:V),[r]),k=o!=null,b=o?I.indexOf(o.id):-1,A=h?I.indexOf(h.id):-1,w=P.useRef(I),x=!WT(I,w.current),S=A!==-1&&b===-1||x,D=KT(i);Pn(()=>{x&&k&&p(I)},[x,I,k,p]),P.useEffect(()=>{w.current=I},[I]);const L=P.useMemo(()=>({activeIndex:b,containerId:m,disabled:D,disableTransforms:S,items:I,overIndex:A,useDragOverlay:v,sortedRects:HT(I,u),strategy:s}),[b,m,D.draggable,D.droppable,S,I,A,u,v,s]);return kt.createElement(zv.Provider,{value:L},e)}const XT=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return cf(n,r,s).indexOf(e)},JT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:u,transition:h}=t;return!h||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===u},ZT={duration:200,easing:"ease"},Uv="transform",eS=jo.Transition.toString({property:Uv,duration:0,easing:"linear"}),tS={roleDescription:"sortable"};function nS(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=P.useState(null),l=P.useRef(n);return Pn(()=>{if(!e&&n!==l.current&&r.current){const u=s.current;if(u){const h=fi(r.current,{ignoreTransform:!0}),p={x:u.left-h.left,y:u.top-h.top,scaleX:u.width/h.width,scaleY:u.height/h.height};(p.x||p.y)&&o(p)}}n!==l.current&&(l.current=n)},[e,n,r,s]),P.useEffect(()=>{i&&o(null)},[i]),i}function rS(t){let{animateLayoutChanges:e=JT,attributes:n,disabled:r,data:s,getNewIndex:i=XT,id:o,strategy:l,resizeObserverConfig:u,transition:h=ZT}=t;const{items:p,containerId:m,activeIndex:v,disabled:I,disableTransforms:k,sortedRects:b,overIndex:A,useDragOverlay:w,strategy:x}=P.useContext(zv),S=sS(r,I),D=p.indexOf(o),L=P.useMemo(()=>({sortable:{containerId:m,index:D,items:p},...s}),[m,s,D,p]),V=P.useMemo(()=>p.slice(p.indexOf(o)),[p,o]),{rect:E,node:g,isOver:y,setNodeRef:T}=qT({id:o,data:L,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:V,...u}}),{active:N,activatorEvent:R,activeNodeRect:C,attributes:ie,setNodeRef:ke,listeners:ze,isDragging:ue,over:B,setActivatorNodeRef:Q,transform:K}=zT({id:o,data:L,attributes:{...tS,...n},disabled:S.draggable}),fe=vE(T,ke),U=!!N,Y=U&&!k&&Wa(v)&&Wa(A),$=!w&&ue,J=$&&Y?K:null,oe=Y?J??(l??x)({rects:b,activeNodeRect:C,activeIndex:v,overIndex:A,index:D}):null,et=Wa(v)&&Wa(A)?i({id:o,items:p,activeIndex:v,overIndex:A}):D,tt=N==null?void 0:N.id,ne=P.useRef({activeId:tt,items:p,newIndex:et,containerId:m}),Gt=p!==ne.current.items,Rt=e({active:N,containerId:m,isDragging:ue,isSorting:U,id:o,index:D,items:p,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:h,wasDragging:ne.current.activeId!=null}),wn=nS({disabled:!Rt,index:D,node:g,rect:E});return P.useEffect(()=>{U&&ne.current.newIndex!==et&&(ne.current.newIndex=et),m!==ne.current.containerId&&(ne.current.containerId=m),p!==ne.current.items&&(ne.current.items=p)},[U,et,m,p]),P.useEffect(()=>{if(tt===ne.current.activeId)return;if(tt!=null&&ne.current.activeId==null){ne.current.activeId=tt;return}const xn=setTimeout(()=>{ne.current.activeId=tt},50);return()=>clearTimeout(xn)},[tt]),{active:N,activeIndex:v,attributes:ie,data:L,rect:E,index:D,newIndex:et,items:p,isOver:y,isSorting:U,isDragging:ue,listeners:ze,node:g,overIndex:A,over:B,setNodeRef:fe,setActivatorNodeRef:Q,setDroppableNodeRef:T,setDraggableNodeRef:ke,transform:wn??oe,transition:zt()};function zt(){if(wn||Gt&&ne.current.newIndex===D)return eS;if(!($&&!sf(R)||!h)&&(U||Rt))return jo.Transition.toString({...h,property:Uv})}}function sS(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}ge.Down,ge.Right,ge.Up,ge.Left;var og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,I=h&63;u||(I=64,o||(v=64)),r.push(n[p],n[m],n[v],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new oS;const v=i<<2|l>>4;if(r.push(v),h!==64){const I=l<<4&240|h>>2;if(r.push(I),m!==64){const k=h<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aS=function(t){const e=Bv(t);return $v.encodeByteArray(e,!0)},Yl=function(t){return aS(t).replace(/\./g,"")},lS=function(t){try{return $v.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=()=>uS().__FIREBASE_DEFAULTS__,dS=()=>{if(typeof process>"u"||typeof og>"u")return;const t=og.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lS(t[1]);return e&&JSON.parse(e)},df=()=>{try{return cS()||dS()||hS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fS=t=>{var e,n;return(n=(e=df())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pS=t=>{const e=fS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qv=()=>{var t;return(t=df())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yl(JSON.stringify(n)),Yl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vS(){var t;const e=(t=df())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _S(){return!vS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wS(){try{return typeof indexedDB=="object"}catch{return!1}}function xS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="FirebaseError";class pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ES,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hv.prototype.create)}}class Hv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?TS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new pi(s,l,r)}}function TS(t,e){return t.replace(SS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SS=/\{\$([^}]+)}/g;function Md(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ag(i)&&ag(o)){if(!Md(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ag(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class Mo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NS(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(t){return t===Wr?void 0:t}function NS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const AS={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},RS=de.INFO,kS={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},PS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wv{constructor(e){this.name=e,this._logLevel=RS,this._logHandler=PS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const DS=(t,e)=>e.some(n=>t instanceof n);let lg,ug;function jS(){return lg||(lg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VS(){return ug||(ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kv=new WeakMap,Ld=new WeakMap,Qv=new WeakMap,Rc=new WeakMap,hf=new WeakMap;function MS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kv.set(n,t)}).catch(()=>{}),hf.set(e,t),e}function LS(t){if(Ld.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ld.set(t,e)}let Od={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ld.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OS(t){Od=t(Od)}function FS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kc(this),e,...n);return Qv.set(r,e.sort?e.sort():[e]),xr(r)}:VS().includes(t)?function(...e){return t.apply(kc(this),e),xr(Kv.get(this))}:function(...e){return xr(t.apply(kc(this),e))}}function zS(t){return typeof t=="function"?FS(t):(t instanceof IDBTransaction&&LS(t),DS(t,jS())?new Proxy(t,Od):t)}function xr(t){if(t instanceof IDBRequest)return MS(t);if(Rc.has(t))return Rc.get(t);const e=zS(t);return e!==t&&(Rc.set(t,e),hf.set(e,t)),e}const kc=t=>hf.get(t);function US(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=xr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xr(o.result),u.oldVersion,u.newVersion,xr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const BS=["get","getKey","getAll","getAllKeys","count"],$S=["put","add","delete","clear"],Pc=new Map;function cg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pc.get(e))return Pc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$S.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Pc.set(e,i),i}OS(t=>({...t,get:(e,n,r)=>cg(e,n)||t.get(e,n,r),has:(e,n)=>!!cg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fd="@firebase/app",dg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Wv("@firebase/app"),WS="@firebase/app-compat",KS="@firebase/analytics-compat",QS="@firebase/analytics",GS="@firebase/app-check-compat",YS="@firebase/app-check",XS="@firebase/auth",JS="@firebase/auth-compat",ZS="@firebase/database",eI="@firebase/data-connect",tI="@firebase/database-compat",nI="@firebase/functions",rI="@firebase/functions-compat",sI="@firebase/installations",iI="@firebase/installations-compat",oI="@firebase/messaging",aI="@firebase/messaging-compat",lI="@firebase/performance",uI="@firebase/performance-compat",cI="@firebase/remote-config",dI="@firebase/remote-config-compat",hI="@firebase/storage",fI="@firebase/storage-compat",pI="@firebase/firestore",mI="@firebase/vertexai-preview",gI="@firebase/firestore-compat",yI="firebase",vI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",_I={[Fd]:"fire-core",[WS]:"fire-core-compat",[QS]:"fire-analytics",[KS]:"fire-analytics-compat",[YS]:"fire-app-check",[GS]:"fire-app-check-compat",[XS]:"fire-auth",[JS]:"fire-auth-compat",[ZS]:"fire-rtdb",[eI]:"fire-data-connect",[tI]:"fire-rtdb-compat",[nI]:"fire-fn",[rI]:"fire-fn-compat",[sI]:"fire-iid",[iI]:"fire-iid-compat",[oI]:"fire-fcm",[aI]:"fire-fcm-compat",[lI]:"fire-perf",[uI]:"fire-perf-compat",[cI]:"fire-rc",[dI]:"fire-rc-compat",[hI]:"fire-gcs",[fI]:"fire-gcs-compat",[pI]:"fire-fst",[gI]:"fire-fst-compat",[mI]:"fire-vertex","fire-js":"fire-js",[yI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new Map,wI=new Map,Ud=new Map;function hg(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jl(t){const e=t.name;if(Ud.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Ud.set(e,t);for(const n of Xl.values())hg(n,t);for(const n of wI.values())hg(n,t);return!0}function xI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new Hv("app","Firebase",EI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=vI;function Gv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=qv()),!n)throw Er.create("no-options");const i=Xl.get(s);if(i){if(Md(n,i.options)&&Md(r,i.config))return i;throw Er.create("duplicate-app",{appName:s})}const o=new bS(s);for(const u of Ud.values())o.addComponent(u);const l=new TI(n,r,o);return Xl.set(s,l),l}function II(t=zd){const e=Xl.get(t);if(!e&&t===zd&&qv())return Gv();if(!e)throw Er.create("no-app",{appName:t});return e}function Hs(t,e,n){var r;let s=(r=_I[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(l.join(" "));return}Jl(new Mo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebase-heartbeat-database",NI=1,Lo="firebase-heartbeat-store";let Dc=null;function Yv(){return Dc||(Dc=US(CI,NI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),Dc}async function bI(t){try{const n=(await Yv()).transaction(Lo),r=await n.objectStore(Lo).get(Xv(t));return await n.done,r}catch(e){if(e instanceof pi)Qn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function fg(t,e){try{const r=(await Yv()).transaction(Lo,"readwrite");await r.objectStore(Lo).put(e,Xv(t)),await r.done}catch(n){if(n instanceof pi)Qn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function Xv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=1024,RI=30*24*60*60*1e3;class kI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=RI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pg(),{heartbeatsToSend:r,unsentEntries:s}=PI(this._heartbeatsCache.heartbeats),i=Yl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function pg(){return new Date().toISOString().substring(0,10)}function PI(t,e=AI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wS()?xS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mg(t){return Yl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){Jl(new Mo("platform-logger",e=>new qS(e),"PRIVATE")),Jl(new Mo("heartbeat",e=>new kI(e),"PRIVATE")),Hs(Fd,dg,t),Hs(Fd,dg,"esm2017"),Hs("fire-js","")}jI("");var gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,Jv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function y(){}y.prototype=g.prototype,E.D=g.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(T,N,R){for(var C=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)C[ie-2]=arguments[ie];return g.prototype[N].apply(T,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,g,y){y||(y=0);var T=Array(16);if(typeof g=="string")for(var N=0;16>N;++N)T[N]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(N=0;16>N;++N)T[N]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=E.g[0],y=E.g[1],N=E.g[2];var R=E.g[3],C=g+(R^y&(N^R))+T[0]+3614090360&4294967295;g=y+(C<<7&4294967295|C>>>25),C=R+(N^g&(y^N))+T[1]+3905402710&4294967295,R=g+(C<<12&4294967295|C>>>20),C=N+(y^R&(g^y))+T[2]+606105819&4294967295,N=R+(C<<17&4294967295|C>>>15),C=y+(g^N&(R^g))+T[3]+3250441966&4294967295,y=N+(C<<22&4294967295|C>>>10),C=g+(R^y&(N^R))+T[4]+4118548399&4294967295,g=y+(C<<7&4294967295|C>>>25),C=R+(N^g&(y^N))+T[5]+1200080426&4294967295,R=g+(C<<12&4294967295|C>>>20),C=N+(y^R&(g^y))+T[6]+2821735955&4294967295,N=R+(C<<17&4294967295|C>>>15),C=y+(g^N&(R^g))+T[7]+4249261313&4294967295,y=N+(C<<22&4294967295|C>>>10),C=g+(R^y&(N^R))+T[8]+1770035416&4294967295,g=y+(C<<7&4294967295|C>>>25),C=R+(N^g&(y^N))+T[9]+2336552879&4294967295,R=g+(C<<12&4294967295|C>>>20),C=N+(y^R&(g^y))+T[10]+4294925233&4294967295,N=R+(C<<17&4294967295|C>>>15),C=y+(g^N&(R^g))+T[11]+2304563134&4294967295,y=N+(C<<22&4294967295|C>>>10),C=g+(R^y&(N^R))+T[12]+1804603682&4294967295,g=y+(C<<7&4294967295|C>>>25),C=R+(N^g&(y^N))+T[13]+4254626195&4294967295,R=g+(C<<12&4294967295|C>>>20),C=N+(y^R&(g^y))+T[14]+2792965006&4294967295,N=R+(C<<17&4294967295|C>>>15),C=y+(g^N&(R^g))+T[15]+1236535329&4294967295,y=N+(C<<22&4294967295|C>>>10),C=g+(N^R&(y^N))+T[1]+4129170786&4294967295,g=y+(C<<5&4294967295|C>>>27),C=R+(y^N&(g^y))+T[6]+3225465664&4294967295,R=g+(C<<9&4294967295|C>>>23),C=N+(g^y&(R^g))+T[11]+643717713&4294967295,N=R+(C<<14&4294967295|C>>>18),C=y+(R^g&(N^R))+T[0]+3921069994&4294967295,y=N+(C<<20&4294967295|C>>>12),C=g+(N^R&(y^N))+T[5]+3593408605&4294967295,g=y+(C<<5&4294967295|C>>>27),C=R+(y^N&(g^y))+T[10]+38016083&4294967295,R=g+(C<<9&4294967295|C>>>23),C=N+(g^y&(R^g))+T[15]+3634488961&4294967295,N=R+(C<<14&4294967295|C>>>18),C=y+(R^g&(N^R))+T[4]+3889429448&4294967295,y=N+(C<<20&4294967295|C>>>12),C=g+(N^R&(y^N))+T[9]+568446438&4294967295,g=y+(C<<5&4294967295|C>>>27),C=R+(y^N&(g^y))+T[14]+3275163606&4294967295,R=g+(C<<9&4294967295|C>>>23),C=N+(g^y&(R^g))+T[3]+4107603335&4294967295,N=R+(C<<14&4294967295|C>>>18),C=y+(R^g&(N^R))+T[8]+1163531501&4294967295,y=N+(C<<20&4294967295|C>>>12),C=g+(N^R&(y^N))+T[13]+2850285829&4294967295,g=y+(C<<5&4294967295|C>>>27),C=R+(y^N&(g^y))+T[2]+4243563512&4294967295,R=g+(C<<9&4294967295|C>>>23),C=N+(g^y&(R^g))+T[7]+1735328473&4294967295,N=R+(C<<14&4294967295|C>>>18),C=y+(R^g&(N^R))+T[12]+2368359562&4294967295,y=N+(C<<20&4294967295|C>>>12),C=g+(y^N^R)+T[5]+4294588738&4294967295,g=y+(C<<4&4294967295|C>>>28),C=R+(g^y^N)+T[8]+2272392833&4294967295,R=g+(C<<11&4294967295|C>>>21),C=N+(R^g^y)+T[11]+1839030562&4294967295,N=R+(C<<16&4294967295|C>>>16),C=y+(N^R^g)+T[14]+4259657740&4294967295,y=N+(C<<23&4294967295|C>>>9),C=g+(y^N^R)+T[1]+2763975236&4294967295,g=y+(C<<4&4294967295|C>>>28),C=R+(g^y^N)+T[4]+1272893353&4294967295,R=g+(C<<11&4294967295|C>>>21),C=N+(R^g^y)+T[7]+4139469664&4294967295,N=R+(C<<16&4294967295|C>>>16),C=y+(N^R^g)+T[10]+3200236656&4294967295,y=N+(C<<23&4294967295|C>>>9),C=g+(y^N^R)+T[13]+681279174&4294967295,g=y+(C<<4&4294967295|C>>>28),C=R+(g^y^N)+T[0]+3936430074&4294967295,R=g+(C<<11&4294967295|C>>>21),C=N+(R^g^y)+T[3]+3572445317&4294967295,N=R+(C<<16&4294967295|C>>>16),C=y+(N^R^g)+T[6]+76029189&4294967295,y=N+(C<<23&4294967295|C>>>9),C=g+(y^N^R)+T[9]+3654602809&4294967295,g=y+(C<<4&4294967295|C>>>28),C=R+(g^y^N)+T[12]+3873151461&4294967295,R=g+(C<<11&4294967295|C>>>21),C=N+(R^g^y)+T[15]+530742520&4294967295,N=R+(C<<16&4294967295|C>>>16),C=y+(N^R^g)+T[2]+3299628645&4294967295,y=N+(C<<23&4294967295|C>>>9),C=g+(N^(y|~R))+T[0]+4096336452&4294967295,g=y+(C<<6&4294967295|C>>>26),C=R+(y^(g|~N))+T[7]+1126891415&4294967295,R=g+(C<<10&4294967295|C>>>22),C=N+(g^(R|~y))+T[14]+2878612391&4294967295,N=R+(C<<15&4294967295|C>>>17),C=y+(R^(N|~g))+T[5]+4237533241&4294967295,y=N+(C<<21&4294967295|C>>>11),C=g+(N^(y|~R))+T[12]+1700485571&4294967295,g=y+(C<<6&4294967295|C>>>26),C=R+(y^(g|~N))+T[3]+2399980690&4294967295,R=g+(C<<10&4294967295|C>>>22),C=N+(g^(R|~y))+T[10]+4293915773&4294967295,N=R+(C<<15&4294967295|C>>>17),C=y+(R^(N|~g))+T[1]+2240044497&4294967295,y=N+(C<<21&4294967295|C>>>11),C=g+(N^(y|~R))+T[8]+1873313359&4294967295,g=y+(C<<6&4294967295|C>>>26),C=R+(y^(g|~N))+T[15]+4264355552&4294967295,R=g+(C<<10&4294967295|C>>>22),C=N+(g^(R|~y))+T[6]+2734768916&4294967295,N=R+(C<<15&4294967295|C>>>17),C=y+(R^(N|~g))+T[13]+1309151649&4294967295,y=N+(C<<21&4294967295|C>>>11),C=g+(N^(y|~R))+T[4]+4149444226&4294967295,g=y+(C<<6&4294967295|C>>>26),C=R+(y^(g|~N))+T[11]+3174756917&4294967295,R=g+(C<<10&4294967295|C>>>22),C=N+(g^(R|~y))+T[2]+718787259&4294967295,N=R+(C<<15&4294967295|C>>>17),C=y+(R^(N|~g))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var y=g-this.blockSize,T=this.B,N=this.h,R=0;R<g;){if(N==0)for(;R<=y;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<g;)if(T[N++]=E.charCodeAt(R++),N==this.blockSize){s(this,T),N=0;break}}else for(;R<g;)if(T[N++]=E[R++],N==this.blockSize){s(this,T),N=0;break}}this.h=N,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var y=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=y&255,y/=256;for(this.u(E),E=Array(16),g=y=0;4>g;++g)for(var T=0;32>T;T+=8)E[y++]=this.g[g]>>>T&255;return E};function i(E,g){var y=l;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=g(E)}function o(E,g){this.h=g;for(var y=[],T=!0,N=E.length-1;0<=N;N--){var R=E[N]|0;T&&R==g||(y[N]=R,T=!1)}this.g=y}var l={};function u(E){return-128<=E&&128>E?i(E,function(g){return new o([g|0],0>g?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return A(h(-E));for(var g=[],y=1,T=0;E>=y;T++)g[T]=E/y|0,y*=4294967296;return new o(g,0)}function p(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return A(p(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),T=m,N=0;N<E.length;N+=8){var R=Math.min(8,E.length-N),C=parseInt(E.substring(N,N+R),g);8>R?(R=h(Math.pow(g,R)),T=T.j(R).add(h(C))):(T=T.j(y),T=T.add(h(C)))}return T}var m=u(0),v=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-A(this).m();for(var E=0,g=1,y=0;y<this.g.length;y++){var T=this.i(y);E+=(0<=T?T:4294967296+T)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(b(this))return"-"+A(this).toString(E);for(var g=h(Math.pow(E,6)),y=this,T="";;){var N=D(y,g).g;y=w(y,N.j(g));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=N,k(y))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function b(E){return E.h==-1}t.l=function(E){return E=w(this,E),b(E)?-1:k(E)?0:1};function A(E){for(var g=E.g.length,y=[],T=0;T<g;T++)y[T]=~E.g[T];return new o(y,~E.h).add(v)}t.abs=function(){return b(this)?A(this):this},t.add=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],T=0,N=0;N<=g;N++){var R=T+(this.i(N)&65535)+(E.i(N)&65535),C=(R>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);T=C>>>16,R&=65535,C&=65535,y[N]=C<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function w(E,g){return E.add(A(g))}t.j=function(E){if(k(this)||k(E))return m;if(b(this))return b(E)?A(this).j(A(E)):A(A(this).j(E));if(b(E))return A(this.j(A(E)));if(0>this.l(I)&&0>E.l(I))return h(this.m()*E.m());for(var g=this.g.length+E.g.length,y=[],T=0;T<2*g;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var N=0;N<E.g.length;N++){var R=this.i(T)>>>16,C=this.i(T)&65535,ie=E.i(N)>>>16,ke=E.i(N)&65535;y[2*T+2*N]+=C*ke,x(y,2*T+2*N),y[2*T+2*N+1]+=R*ke,x(y,2*T+2*N+1),y[2*T+2*N+1]+=C*ie,x(y,2*T+2*N+1),y[2*T+2*N+2]+=R*ie,x(y,2*T+2*N+2)}for(T=0;T<g;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=g;T<2*g;T++)y[T]=0;return new o(y,0)};function x(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function S(E,g){this.g=E,this.h=g}function D(E,g){if(k(g))throw Error("division by zero");if(k(E))return new S(m,m);if(b(E))return g=D(A(E),g),new S(A(g.g),A(g.h));if(b(g))return g=D(E,A(g)),new S(A(g.g),g.h);if(30<E.g.length){if(b(E)||b(g))throw Error("slowDivide_ only works with positive integers.");for(var y=v,T=g;0>=T.l(E);)y=L(y),T=L(T);var N=V(y,1),R=V(T,1);for(T=V(T,2),y=V(y,2);!k(T);){var C=R.add(T);0>=C.l(E)&&(N=N.add(y),R=C),T=V(T,1),y=V(y,1)}return g=w(E,N.j(g)),new S(N,g)}for(N=m;0<=E.l(g);){for(y=Math.max(1,Math.floor(E.m()/g.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=h(y),C=R.j(g);b(C)||0<C.l(E);)y-=T,R=h(y),C=R.j(g);k(R)&&(R=v),N=N.add(R),E=w(E,C)}return new S(N,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)&E.i(T);return new o(y,this.h&E.h)},t.or=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)|E.i(T);return new o(y,this.h|E.h)},t.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)^E.i(T);return new o(y,this.h^E.h)};function L(E){for(var g=E.g.length+1,y=[],T=0;T<g;T++)y[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(y,E.h)}function V(E,g){var y=g>>5;g%=32;for(var T=E.g.length-y,N=[],R=0;R<T;R++)N[R]=0<g?E.i(R+y)>>>g|E.i(R+y+1)<<32-g:E.i(R+y);return new o(N,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Zr=o}).apply(typeof gg<"u"?gg:typeof self<"u"?self:typeof window<"u"?window:{});var Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zv,qi,e_,gl,Bd,t_,n_,r_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qa=="object"&&Qa];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var j=a[_];if(!(j in f))break e;f=f[j]}a=a[a.length-1],_=f[a],d=d(_),d!=_&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,_=!1,j={next:function(){if(!_&&f<a.length){var M=f++;return{value:d(M,a[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,_),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function v(a,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function I(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function k(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,j,M){for(var q=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)q[_e-2]=arguments[_e];return d.prototype[j].apply(_,q)}}function b(a){const d=a.length;if(0<d){const f=Array(d);for(let _=0;_<d;_++)f[_]=a[_];return f}return[]}function A(a,d){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const j=a.length||0,M=_.length||0;a.length=j+M;for(let q=0;q<M;q++)a[j+q]=_[q]}else a.push(_)}}class w{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function x(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(a,d,f){for(const _ in a)d.call(f,a[_],_,a)}function E(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function g(a){const d={};for(const f in a)d[f]=a[f];return d}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let f,_;for(let j=1;j<arguments.length;j++){_=arguments[j];for(f in _)a[f]=_[f];for(let M=0;M<y.length;M++)f=y[M],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function N(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function R(a){l.setTimeout(()=>{throw a},0)}function C(){var a=Q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ie{constructor(){this.h=this.g=null}add(d,f){const _=ke.get();_.set(d,f),this.h?this.h.next=_:this.g=_,this.h=_}}var ke=new w(()=>new ze,a=>a.reset());class ze{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,B=!1,Q=new ie,K=()=>{const a=l.Promise.resolve(void 0);ue=()=>{a.then(fe)}};var fe=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){R(f)}var d=ke;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}B=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function J(a,d){if(Y.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{D(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:re[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&J.aa.h.call(this)}}k(J,Y);var re={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),et=0;function tt(a,d,f,_,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!_,this.ha=j,this.key=++et,this.da=this.fa=!1}function ne(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Gt(a){this.src=a,this.g={},this.h=0}Gt.prototype.add=function(a,d,f,_,j){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var q=wn(a,d,_,j);return-1<q?(d=a[q],f||(d.fa=!1)):(d=new tt(d,this.src,M,!!_,j),d.fa=f,a.push(d)),d};function Rt(a,d){var f=d.type;if(f in a.g){var _=a.g[f],j=Array.prototype.indexOf.call(_,d,void 0),M;(M=0<=j)&&Array.prototype.splice.call(_,j,1),M&&(ne(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function wn(a,d,f,_){for(var j=0;j<a.length;++j){var M=a[j];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==_)return j}return-1}var zt="closure_lm_"+(1e6*Math.random()|0),xn={};function Vn(a,d,f,_,j){if(Array.isArray(d)){for(var M=0;M<d.length;M++)Vn(a,d[M],f,_,j);return null}return f=ua(f),a&&a[oe]?a.K(d,f,h(_)?!!_.capture:!!_,j):aa(a,d,f,!1,_,j)}function aa(a,d,f,_,j,M){if(!d)throw Error("Invalid event type");var q=h(j)?!!j.capture:!!j,_e=ms(a);if(_e||(a[zt]=_e=new Gt(a)),f=_e.add(d,f,_,q,M),f.proxy)return f;if(_=la(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)$||(j=q),j===void 0&&(j=!1),a.addEventListener(d.toString(),_,j);else if(a.attachEvent)a.attachEvent(Vr(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function la(){function a(f){return d.call(a.src,a.listener,f)}const d=ps;return a}function fs(a,d,f,_,j){if(Array.isArray(d))for(var M=0;M<d.length;M++)fs(a,d[M],f,_,j);else _=h(_)?!!_.capture:!!_,f=ua(f),a&&a[oe]?(a=a.i,d=String(d).toString(),d in a.g&&(M=a.g[d],f=wn(M,f,_,j),-1<f&&(ne(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete a.g[d],a.h--)))):a&&(a=ms(a))&&(d=a.g[d.toString()],a=-1,d&&(a=wn(d,f,_,j)),(f=-1<a?d[a]:null)&&Yt(f))}function Yt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[oe])Rt(d.i,a);else{var f=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(f,_,a.capture):d.detachEvent?d.detachEvent(Vr(f),_):d.addListener&&d.removeListener&&d.removeListener(_),(f=ms(d))?(Rt(f,a),f.h==0&&(f.src=null,d[zt]=null)):ne(a)}}}function Vr(a){return a in xn?xn[a]:xn[a]="on"+a}function ps(a,d){if(a.da)a=!0;else{d=new J(d,this);var f=a.listener,_=a.ha||a.src;a.fa&&Yt(a),a=f.call(_,d)}return a}function ms(a){return a=a[zt],a instanceof Gt?a:null}var gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ua(a){return typeof a=="function"?a:(a[gs]||(a[gs]=function(d){return a.handleEvent(d)}),a[gs])}function Ge(){U.call(this),this.i=new Gt(this),this.M=this,this.F=null}k(Ge,U),Ge.prototype[oe]=!0,Ge.prototype.removeEventListener=function(a,d,f,_){fs(this,a,d,f,_)};function Pe(a,d){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new Y(d,a);else if(d instanceof Y)d.target=d.target||a;else{var j=d;d=new Y(_,a),T(d,j)}if(j=!0,f)for(var M=f.length-1;0<=M;M--){var q=d.g=f[M];j=on(q,_,!0,d)&&j}if(q=d.g=a,j=on(q,_,!0,d)&&j,j=on(q,_,!1,d)&&j,f)for(M=0;M<f.length;M++)q=d.g=f[M],j=on(q,_,!1,d)&&j}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],_=0;_<f.length;_++)ne(f[_]);delete a.g[d],a.h--}}this.F=null},Ge.prototype.K=function(a,d,f,_){return this.i.add(String(a),d,!1,f,_)},Ge.prototype.L=function(a,d,f,_){return this.i.add(String(a),d,!0,f,_)};function on(a,d,f,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,M=0;M<d.length;++M){var q=d[M];if(q&&!q.da&&q.capture==f){var _e=q.listener,st=q.ha||q.src;q.fa&&Rt(a.i,q),j=_e.call(st,_)!==!1&&j}}return j&&!_.defaultPrevented}function Jn(a,d,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function wi(a){a.g=Jn(()=>{a.g=null,a.i&&(a.i=!1,wi(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class En extends U{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:wi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(a){U.call(this),this.h=a,this.g={}}k(Zn,U);var ca=[];function da(a){V(a.g,function(d,f){this.g.hasOwnProperty(f)&&Yt(d)},a),a.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),da(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mr=l.JSON.stringify,ha=l.JSON.parse,Uu=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ys(){}ys.prototype.h=null;function fa(a){return a.h||(a.h=a.i())}function pa(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ue(){Y.call(this,"d")}k(Ue,Y);function nt(){Y.call(this,"c")}k(nt,Y);var Me={},an=null;function rt(){return an=an||new Ge}Me.La="serverreachability";function ht(a){Y.call(this,Me.La,a)}k(ht,Y);function ft(a){const d=rt();Pe(d,new ht(d))}Me.STAT_EVENT="statevent";function Mn(a,d){Y.call(this,Me.STAT_EVENT,a),this.stat=d}k(Mn,Y);function ce(a){const d=rt();Pe(d,new Mn(d,a))}Me.Ma="timingevent";function ln(a,d){Y.call(this,Me.Ma,a),this.size=d}k(ln,Y);function pt(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function St(){this.g=!0}St.prototype.xa=function(){this.g=!1};function Or(a,d,f,_,j,M){a.info(function(){if(a.g)if(M)for(var q="",_e=M.split("&"),st=0;st<_e.length;st++){var pe=_e[st].split("=");if(1<pe.length){var mt=pe[0];pe=pe[1];var gt=mt.split("_");q=2<=gt.length&&gt[1]=="type"?q+(mt+"="+pe+"&"):q+(mt+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+_+") [attempt "+j+"]: "+d+`
`+f+`
`+q})}function Fr(a,d,f,_,j,M,q){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+j+"]: "+d+`
`+f+`
`+M+" "+q})}function It(a,d,f,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+xi(a,f)+(_?" "+_:"")})}function zr(a,d){a.info(function(){return"TIMEOUT: "+d})}St.prototype.info=function(){};function xi(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var j=_[1];if(Array.isArray(j)&&!(1>j.length)){var M=j[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<j.length;q++)j[q]=""}}}}return Mr(f)}catch{return d}}var ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bu;function ga(){}k(ga,ys),ga.prototype.g=function(){return new XMLHttpRequest},ga.prototype.i=function(){return{}},Bu=new ga;function er(a,d,f,_){this.j=a,this.i=d,this.l=f,this.R=_||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zf}function Zf(){this.i=null,this.g="",this.h=!1}var ep={},$u={};function qu(a,d,f){a.L=1,a.v=wa(Ln(d)),a.m=f,a.P=!0,tp(a,null)}function tp(a,d){a.F=Date.now(),ya(a),a.A=Ln(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),mp(f.i,"t",_),a.C=0,f=a.j.J,a.h=new Zf,a.g=Dp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new En(v(a.Y,a,a.g),a.O)),d=a.U,f=a.g,_=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(ca[0]=j.toString()),j=ca);for(var M=0;M<j.length;M++){var q=Vn(f,j[M],_||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ft(),Or(a.i,a.u,a.A,a.l,a.R,a.m)}er.prototype.ca=function(a){a=a.target;const d=this.M;d&&On(a)==3?d.j():this.Y(a)},er.prototype.Y=function(a){try{if(a==this.g)e:{const gt=On(this.g);var d=this.g.Ba();const ws=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Ep(this.g)))){this.J||gt!=4||d==7||(d==8||0>=ws?ft(3):ft(2)),Hu(this);var f=this.g.Z();this.X=f;t:if(np(this)){var _=Ep(this.g);a="";var j=_.length,M=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),Ei(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(M&&d==j-1)});_.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,Fr(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,st=this.g;if((_e=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(_e)){var pe=_e;break t}}pe=null}if(f=pe)It(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wu(this,f);else{this.o=!1,this.s=3,ce(12),Ur(this),Ei(this);break e}}if(this.P){f=!0;let un;for(;!this.J&&this.C<q.length;)if(un=ww(this,q),un==$u){gt==4&&(this.s=4,ce(14),f=!1),It(this.i,this.l,null,"[Incomplete Response]");break}else if(un==ep){this.s=4,ce(15),It(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else It(this.i,this.l,un,null),Wu(this,un);if(np(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||q.length!=0||this.h.h||(this.s=1,ce(16),f=!1),this.o=this.o&&f,!f)It(this.i,this.l,q,"[Invalid Chunked Response]"),Ur(this),Ei(this);else if(0<q.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Ju(mt),mt.M=!0,ce(11))}}else It(this.i,this.l,q,null),Wu(this,q);gt==4&&Ur(this),this.o&&!this.J&&(gt==4?Ap(this.j,this):(this.o=!1,ya(this)))}else Lw(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Ur(this),Ei(this)}}}catch{}finally{}};function np(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ww(a,d){var f=a.C,_=d.indexOf(`
`,f);return _==-1?$u:(f=Number(d.substring(f,_)),isNaN(f)?ep:(_+=1,_+f>d.length?$u:(d=d.slice(_,_+f),a.C=_+f,d)))}er.prototype.cancel=function(){this.J=!0,Ur(this)};function ya(a){a.S=Date.now()+a.I,rp(a,a.I)}function rp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=pt(v(a.ba,a),d)}function Hu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}er.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(zr(this.i,this.A),this.L!=2&&(ft(),ce(17)),Ur(this),this.s=2,Ei(this)):rp(this,this.S-a)};function Ei(a){a.j.G==0||a.J||Ap(a.j,a)}function Ur(a){Hu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,da(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Wu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Ku(f.h,a))){if(!a.K&&Ku(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var j=_;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Ca(f),Sa(f);else break e;Xu(f),ce(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=pt(v(f.Za,f),6e3));if(1>=op(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else $r(f,11)}else if((a.K||f.g==a)&&Ca(f),!x(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let pe=j[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];const mt=pe[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));const gt=pe[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));const ws=pe[5];ws!=null&&typeof ws=="number"&&0<ws&&(_=1.5*ws,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const un=a.g;if(un){const ba=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var M=_.h;M.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Qu(M,M.h),M.h=null))}if(_.D){const Zu=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Zu&&(_.ya=Zu,xe(_.I,_.D,Zu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var q=a;if(_.qa=Pp(_,_.J?_.ia:null,_.W),q.K){ap(_.h,q);var _e=q,st=_.L;st&&(_e.I=st),_e.B&&(Hu(_e),ya(_e)),_.g=q}else Np(_);0<f.i.length&&Ia(f)}else pe[0]!="stop"&&pe[0]!="close"||$r(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?$r(f,7):Yu(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}ft(4)}catch{}}var xw=class{constructor(a,d){this.g=a,this.map=d}};function sp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ip(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function op(a){return a.h?1:a.g?a.g.size:0}function Ku(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Qu(a,d){a.g?a.g.add(d):a.h=d}function ap(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}sp.prototype.cancel=function(){if(this.i=lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function lp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return b(a.i)}function Ew(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,_=0;_<f;_++)d.push(a[_]);return d}d=[],f=0;for(_ in a)d[f++]=a[_];return d}function Tw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const _ in a)d[f++]=_;return d}}}function up(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Tw(a),_=Ew(a),j=_.length,M=0;M<j;M++)d.call(void 0,_[M],f&&f[M],a)}var cp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sw(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),j=null;if(0<=_){var M=a[f].substring(0,_);j=a[f].substring(_+1)}else M=a[f];d(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Br){this.h=a.h,va(this,a.j),this.o=a.o,this.g=a.g,_a(this,a.s),this.l=a.l;var d=a.i,f=new Ii;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),dp(this,f),this.m=a.m}else a&&(d=String(a).match(cp))?(this.h=!1,va(this,d[1]||"",!0),this.o=Ti(d[2]||""),this.g=Ti(d[3]||"",!0),_a(this,d[4]),this.l=Ti(d[5]||"",!0),dp(this,d[6]||"",!0),this.m=Ti(d[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Br.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Si(d,hp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Si(d,hp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Si(f,f.charAt(0)=="/"?Nw:Cw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Si(f,Aw)),a.join("")};function Ln(a){return new Br(a)}function va(a,d,f){a.j=f?Ti(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function _a(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function dp(a,d,f){d instanceof Ii?(a.i=d,Rw(a.i,a.h)):(f||(d=Si(d,bw)),a.i=new Ii(d,a.h))}function xe(a,d,f){a.i.set(d,f)}function wa(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ti(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Si(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Iw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Iw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hp=/[#\/\?@]/g,Cw=/[#\?:]/g,Nw=/[#\?]/g,bw=/[#\?@]/g,Aw=/#/g;function Ii(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function tr(a){a.g||(a.g=new Map,a.h=0,a.i&&Sw(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ii.prototype,t.add=function(a,d){tr(this),this.i=null,a=vs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function fp(a,d){tr(a),d=vs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function pp(a,d){return tr(a),d=vs(a,d),a.g.has(d)}t.forEach=function(a,d){tr(this),this.g.forEach(function(f,_){f.forEach(function(j){a.call(d,j,_,this)},this)},this)},t.na=function(){tr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let _=0;_<d.length;_++){const j=a[_];for(let M=0;M<j.length;M++)f.push(d[_])}return f},t.V=function(a){tr(this);let d=[];if(typeof a=="string")pp(this,a)&&(d=d.concat(this.g.get(vs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return tr(this),this.i=null,a=vs(this,a),pp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function mp(a,d,f){fp(a,d),0<f.length&&(a.i=null,a.g.set(vs(a,d),b(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var _=d[f];const M=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var j=M;q[_]!==""&&(j+="="+encodeURIComponent(String(q[_]))),a.push(j)}}return this.i=a.join("&")};function vs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Rw(a,d){d&&!a.j&&(tr(a),a.i=null,a.g.forEach(function(f,_){var j=_.toLowerCase();_!=j&&(fp(this,_),mp(this,j,f))},a)),a.j=d}function kw(a,d){const f=new St;if(l.Image){const _=new Image;_.onload=I(nr,f,"TestLoadImage: loaded",!0,d,_),_.onerror=I(nr,f,"TestLoadImage: error",!1,d,_),_.onabort=I(nr,f,"TestLoadImage: abort",!1,d,_),_.ontimeout=I(nr,f,"TestLoadImage: timeout",!1,d,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function Pw(a,d){const f=new St,_=new AbortController,j=setTimeout(()=>{_.abort(),nr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(M=>{clearTimeout(j),M.ok?nr(f,"TestPingServer: ok",!0,d):nr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),nr(f,"TestPingServer: error",!1,d)})}function nr(a,d,f,_,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),_(f)}catch{}}function Dw(){this.g=new Uu}function jw(a,d,f){const _=f||"";try{up(a,function(j,M){let q=j;h(j)&&(q=Mr(j)),d.push(_+M+"="+encodeURIComponent(q))})}catch(j){throw d.push(_+"type="+encodeURIComponent("_badmap")),j}}function xa(a){this.l=a.Ub||null,this.j=a.eb||!1}k(xa,ys),xa.prototype.g=function(){return new Ea(this.l,this.j)},xa.prototype.i=function(a){return function(){return a}}({});function Ea(a,d){Ge.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ea,Ge),t=Ea.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ni(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function gp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ci(this):Ni(this),this.readyState==3&&gp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ci(this))},t.Qa=function(a){this.g&&(this.response=a,Ci(this))},t.ga=function(){this.g&&Ci(this)};function Ci(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ni(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ni(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yp(a){let d="";return V(a,function(f,_){d+=_,d+=":",d+=f,d+=`\r
`}),d}function Gu(a,d,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=yp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):xe(a,d,f))}function De(a){Ge.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(De,Ge);var Vw=/^https?$/i,Mw=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bu.g(),this.v=this.o?fa(this.o):fa(Bu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(M){vp(this,M);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var j in _)f.set(j,_[j]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())f.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Mw,d,void 0))||_||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of f)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xp(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){vp(this,M)}};function vp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,_p(a),Ta(a)}function _p(a){a.A||(a.A=!0,Pe(a,"complete"),Pe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Pe(this,"complete"),Pe(this,"abort"),Ta(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wp(this):this.bb())},t.bb=function(){wp(this)};function wp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||On(a)!=4||a.Z()!=2)){if(a.u&&On(a)==4)Jn(a.Ea,0,a);else if(Pe(a,"readystatechange"),On(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var _;if(_=q===0){var j=String(a.D).match(cp)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),_=!Vw.test(j?j.toLowerCase():"")}f=_}if(f)Pe(a,"complete"),Pe(a,"success");else{a.m=6;try{var M=2<On(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",_p(a)}}finally{Ta(a)}}}}function Ta(a,d){if(a.g){xp(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Pe(a,"ready");try{f.onreadystatechange=_}catch{}}}function xp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),ha(d)}};function Ep(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Lw(a){const d={};a=(a.g&&2<=On(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(x(a[_]))continue;var f=N(a[_]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=d[j]||[];d[j]=M,M.push(f)}E(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Tp(a){this.Aa=0,this.i=[],this.j=new St,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,a),this.cb=bi("retryDelaySeedMs",1e4,a),this.Wa=bi("forwardChannelMaxRetries",2,a),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new sp(a&&a.concurrentRequestLimit),this.Da=new Dw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,_){ce(0),this.W=a,this.H=d||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=Pp(this,null,this.W),Ia(this)};function Yu(a){if(Sp(a),a.G==3){var d=a.U++,f=Ln(a.I);if(xe(f,"SID",a.K),xe(f,"RID",d),xe(f,"TYPE","terminate"),Ai(a,f),d=new er(a,a.j,d),d.L=2,d.v=wa(Ln(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=Dp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ya(d)}kp(a)}function Sa(a){a.g&&(Ju(a),a.g.cancel(),a.g=null)}function Sp(a){Sa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ca(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ia(a){if(!ip(a.h)&&!a.s){a.s=!0;var d=a.Ga;ue||K(),B||(ue(),B=!0),Q.add(d,a),a.B=0}}function Ow(a,d){return op(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=pt(v(a.Ga,a,d),Rp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new er(this,this.j,a);let M=this.o;if(this.S&&(M?(M=g(M),T(M,this.S)):M=this.S),this.m!==null||this.O||(j.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Cp(this,j,d),f=Ln(this.I),xe(f,"RID",a),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),Ai(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(yp(M)))+"&"+d:this.m&&Gu(f,this.m,M)),Qu(this.h,j),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",d),xe(f,"SID","null"),j.T=!0,qu(j,f,null)):qu(j,f,d),this.G=2}}else this.G==3&&(a?Ip(this,a):this.i.length==0||ip(this.h)||Ip(this))};function Ip(a,d){var f;d?f=d.l:f=a.U++;const _=Ln(a.I);xe(_,"SID",a.K),xe(_,"RID",f),xe(_,"AID",a.T),Ai(a,_),a.m&&a.o&&Gu(_,a.m,a.o),f=new er(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Cp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Qu(a.h,f),qu(f,_,d)}function Ai(a,d){a.H&&V(a.H,function(f,_){xe(d,_,f)}),a.l&&up({},function(f,_){xe(d,_,f)})}function Cp(a,d,f){f=Math.min(a.i.length,f);var _=a.l?v(a.l.Na,a.l,a):null;e:{var j=a.i;let M=-1;for(;;){const q=["count="+f];M==-1?0<f?(M=j[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let _e=!0;for(let st=0;st<f;st++){let pe=j[st].g;const mt=j[st].map;if(pe-=M,0>pe)M=Math.max(0,j[st].g-100),_e=!1;else try{jw(mt,q,"req"+pe+"_")}catch{_&&_(mt)}}if(_e){_=q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,_}function Np(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ue||K(),B||(ue(),B=!0),Q.add(d,a),a.v=0}}function Xu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=pt(v(a.Fa,a),Rp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,bp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=pt(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Sa(this),bp(this))};function Ju(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function bp(a){a.g=new er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Ln(a.qa);xe(d,"RID","rpc"),xe(d,"SID",a.K),xe(d,"AID",a.T),xe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(d,"TO",a.ja),xe(d,"TYPE","xmlhttp"),Ai(a,d),a.m&&a.o&&Gu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=wa(Ln(d)),f.m=null,f.P=!0,tp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Sa(this),Xu(this),ce(19))};function Ca(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Ap(a,d){var f=null;if(a.g==d){Ca(a),Ju(a),a.g=null;var _=2}else if(Ku(a.h,d))f=d.D,ap(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;_=rt(),Pe(_,new ln(_,f)),Ia(a)}else Np(a);else if(j=d.s,j==3||j==0&&0<d.X||!(_==1&&Ow(a,d)||_==2&&Xu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Rp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function $r(a,d){if(a.j.info("Error code "+d),d==2){var f=v(a.fb,a),_=a.Xa;const j=!_;_=new Br(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||va(_,"https"),wa(_),j?kw(_.toString(),f):Pw(_.toString(),f)}else ce(2);a.G=0,a.l&&a.l.sa(d),kp(a),Sp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function kp(a){if(a.G=0,a.ka=[],a.l){const d=lp(a.h);(d.length!=0||a.i.length!=0)&&(A(a.ka,d),A(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function Pp(a,d,f){var _=f instanceof Br?Ln(f):new Br(f);if(_.g!="")d&&(_.g=d+"."+_.g),_a(_,_.s);else{var j=l.location;_=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var M=new Br(null);_&&va(M,_),d&&(M.g=d),j&&_a(M,j),f&&(M.l=f),_=M}return f=a.D,d=a.ya,f&&d&&xe(_,f,d),xe(_,"VER",a.la),Ai(a,_),_}function Dp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new De(new xa({eb:f})):new De(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}t=jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Na(){}Na.prototype.g=function(a,d){return new Ut(a,d)};function Ut(a,d){Ge.call(this),this.g=new Tp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!x(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!x(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new _s(this)}k(Ut,Ge),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Yu(this.g)},Ut.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Mr(a),a=f);d.i.push(new xw(d.Ya++,a)),d.G==3&&Ia(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Yu(this.g),delete this.g,Ut.aa.N.call(this)};function Vp(a){Ue.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}k(Vp,Ue);function Mp(){nt.call(this),this.status=1}k(Mp,nt);function _s(a){this.g=a}k(_s,jp),_s.prototype.ua=function(){Pe(this.g,"a")},_s.prototype.ta=function(a){Pe(this.g,new Vp(a))},_s.prototype.sa=function(a){Pe(this.g,new Mp)},_s.prototype.ra=function(){Pe(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,r_=function(){return new Na},n_=function(){return rt()},t_=Me,Bd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ma.NO_ERROR=0,ma.TIMEOUT=8,ma.HTTP_ERROR=6,gl=ma,Jf.COMPLETE="complete",e_=Jf,pa.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,qi=pa,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,Zv=De}).apply(typeof Qa<"u"?Qa:typeof self<"u"?self:typeof window<"u"?window:{});const yg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Wv("@firebase/firestore");function Oi(){return is.logLevel}function G(t,...e){if(is.logLevel<=de.DEBUG){const n=e.map(ff);is.debug(`Firestore (${mi}): ${t}`,...n)}}function Gn(t,...e){if(is.logLevel<=de.ERROR){const n=e.map(ff);is.error(`Firestore (${mi}): ${t}`,...n)}}function ti(t,...e){if(is.logLevel<=de.WARN){const n=e.map(ff);is.warn(`Firestore (${mi}): ${t}`,...n)}}function ff(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${mi}) INTERNAL ASSERTION FAILED: `+t;throw Gn(e),new Error(e)}function ve(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class MI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LI{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new s_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new wt(e)}}class OI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new zI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Te(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Te(0,0))}static max(){return new ee(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Oo{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const $I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Oo{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return $I.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Se.fromString(e))}static fromName(e){return new X(Se.fromString(e).popFirst(5))}static empty(){return new X(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Se(e.slice()))}}function qI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Nr(s,X.empty(),e)}function HI(t){return new Nr(t.readTime,t.key,-1)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(ee.min(),X.empty(),-1)}static max(){return new Nr(ee.max(),X.empty(),-1)}}function WI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==KI)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function GI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pf.oe=-1;function bu(t){return t==null}function Zl(t){return t===0&&1/t==-1/0}function YI(t){return typeof t=="number"&&Number.isInteger(t)&&!Zl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}}class Ga{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _g(this.data.getIterator())}getIteratorFrom(e){return new _g(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class _g{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new qt([])}unionWith(e){let n=new ut(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new a_("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const XI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(ve(!!t),typeof t=="string"){let e=0;const n=XI.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gf(t){const e=t.mapValue.fields.__previous_value__;return mf(e)?gf(e):e}function Fo(t){const e=br(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class zo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mf(t)?4:eC(t)?9007199254740991:ZI(t)?10:11:Z()}function jn(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=br(s.timestampValue),l=br(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return os(s.bytesValue).isEqual(os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),l=Oe(i.doubleValue);return o===l?Zl(o)===Zl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ni(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(vg(o)!==vg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!jn(o[u],l[u])))return!1;return!0}(t,e);default:return Z()}}function Uo(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function ri(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Oe(i.integerValue||i.doubleValue),u=Oe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return wg(t.timestampValue,e.timestampValue);case 4:return wg(Fo(t),Fo(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const l=os(i),u=os(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=me(l[h],u[h]);if(p!==0)return p}return me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=me(Oe(i.latitude),Oe(o.latitude));return l!==0?l:me(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,p;const m=i.fields||{},v=o.fields||{},I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,k=(u=v.value)===null||u===void 0?void 0:u.arrayValue,b=me(((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0,((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0);return b!==0?b:xg(I,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ya.mapValue&&o===Ya.mapValue)return 0;if(i===Ya.mapValue)return 1;if(o===Ya.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const v=me(u[m],p[m]);if(v!==0)return v;const I=ri(l[u[m]],h[p[m]]);if(I!==0)return I}return me(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Z()}}function wg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=br(t),r=br(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function xg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ri(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function si(t){return $d(t)}function $d(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$d(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${$d(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function Eg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qd(t){return!!t&&"integerValue"in t}function yf(t){return!!t&&"arrayValue"in t}function Tg(t){return!!t&&"nullValue"in t}function Sg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function ZI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=oo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(oo(this.value))}}function l_(t){const e=[];return ds(t.fields,(n,r)=>{const s=new at([n]);if(yl(r)){const i=l_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Et(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.position=e,this.inclusive=n}}function Ig(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n="asc"){this.field=e,this.dir=n}}function tC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{}class qe extends u_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rC(e,n,r):n==="array-contains"?new oC(e,r):n==="in"?new aC(e,r):n==="not-in"?new lC(e,r):n==="array-contains-any"?new uC(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sC(e,r):new iC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ri(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends u_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _n(e,n)}matches(e){return c_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function c_(t){return t.op==="and"}function d_(t){return nC(t)&&c_(t)}function nC(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Hd(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+si(t.value);if(d_(t))return t.filters.map(e=>Hd(e)).join(",");{const e=t.filters.map(n=>Hd(n)).join(",");return`${t.op}(${e})`}}function h_(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof _n?function(r,s){return s instanceof _n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&h_(o,s.filters[l]),!0):!1}(t,e):void Z()}function f_(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${si(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(f_).join(" ,")+"}"}(t):"Filter"}class rC extends qe{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class sC extends qe{constructor(e,n){super(e,"in",n),this.keys=p_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iC extends qe{constructor(e,n){super(e,"not-in",n),this.keys=p_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class oC extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yf(n)&&Uo(n.arrayValue,this.value)}}class aC extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uo(this.value.arrayValue,n)}}class lC extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uo(this.value.arrayValue,n)}}class uC extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Ng(t,e=null,n=[],r=[],s=null,i=null,o=null){return new cC(t,e,n,r,s,i,o)}function vf(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>si(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>si(r)).join(",")),e.ue=n}return e.ue}function _f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cg(t.startAt,e.startAt)&&Cg(t.endAt,e.endAt)}function Wd(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dC(t,e,n,r,s,i,o,l){return new gi(t,e,n,r,s,i,o,l)}function wf(t){return new gi(t)}function bg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m_(t){return t.collectionGroup!==null}function ao(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ut(at.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Bo(i,r))}),n.has(at.keyField().canonicalString())||e.ce.push(new Bo(at.keyField(),r))}return e.ce}function An(t){const e=te(t);return e.le||(e.le=hC(e,ao(t))),e.le}function hC(t,e){if(t.limitType==="F")return Ng(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bo(s.field,i)});const n=t.endAt?new eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new eu(t.startAt.position,t.startAt.inclusive):null;return Ng(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kd(t,e){const n=t.filters.concat([e]);return new gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qd(t,e,n){return new gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Au(t,e){return _f(An(t),An(e))&&t.limitType===e.limitType}function g_(t){return`${vf(An(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>f_(s)).join(", ")}]`),bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>si(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>si(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Ru(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ao(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Ig(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,ao(r),s)||r.endAt&&!function(o,l,u){const h=Ig(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,ao(r),s))}(t,e)}function fC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y_(t){return(e,n)=>{let r=!1;for(const s of ao(t)){const i=pC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function pC(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?ri(u,h):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Re(X.comparator);function Yn(){return mC}const v_=new Re(X.comparator);function Hi(...t){let e=v_;for(const n of t)e=e.insert(n.key,n);return e}function __(t){let e=v_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return lo()}function w_(){return lo()}function lo(){return new yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const gC=new Re(X.comparator),yC=new ut(X.comparator);function ae(...t){let e=yC;for(const n of t)e=e.add(n);return e}const vC=new ut(me);function _C(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(e)?"-0":e}}function x_(t){return{integerValue:""+t}}function wC(t,e){return YI(e)?x_(e):xf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this._=void 0}}function xC(t,e,n){return t instanceof tu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&mf(i)&&(i=gf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof $o?T_(t,e):t instanceof qo?S_(t,e):function(s,i){const o=E_(s,i),l=Ag(o)+Ag(s.Pe);return qd(o)&&qd(s.Pe)?x_(l):xf(s.serializer,l)}(t,e)}function EC(t,e,n){return t instanceof $o?T_(t,e):t instanceof qo?S_(t,e):n}function E_(t,e){return t instanceof nu?function(r){return qd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class tu extends ku{}class $o extends ku{constructor(e){super(),this.elements=e}}function T_(t,e){const n=I_(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class qo extends ku{constructor(e){super(),this.elements=e}}function S_(t,e){let n=I_(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class nu extends ku{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ag(t){return Oe(t.integerValue||t.doubleValue)}function I_(t){return yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function TC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $o&&s instanceof $o||r instanceof qo&&s instanceof qo?ni(r.elements,s.elements,jn):r instanceof nu&&s instanceof nu?jn(r.Pe,s.Pe):r instanceof tu&&s instanceof tu}(t.transform,e.transform)}class SC{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pu{}function C_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ef(t.key,gn.none()):new ta(t.key,t.data,gn.none());{const n=t.data,r=Dt.empty();let s=new ut(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Dr(t.key,r,new qt(s.toArray()),gn.none())}}function IC(t,e,n){t instanceof ta?function(s,i,o){const l=s.value.clone(),u=kg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(s,i,o){if(!vl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=kg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(N_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function uo(t,e,n,r){return t instanceof ta?function(i,o,l,u){if(!vl(i.precondition,o))return l;const h=i.value.clone(),p=Pg(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(i,o,l,u){if(!vl(i.precondition,o))return l;const h=Pg(i.fieldTransforms,u,o),p=o.data;return p.setAll(N_(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return vl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function CC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=E_(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function Rg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ni(r,s,(i,o)=>TC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ta extends Pu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dr extends Pu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function N_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kg(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,EC(o,l,n[s]))}return r}function Pg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,xC(i,o,e))}return r}class Ef extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NC extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&IC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=uo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=uo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=w_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=C_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ni(this.mutations,e.mutations,(n,r)=>Rg(n,r))&&ni(this.baseMutations,e.baseMutations,(n,r)=>Rg(n,r))}}class Tf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return gC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Tf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,le;function kC(t){switch(t){default:return Z();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function b_(t){if(t===void 0)return Gn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Be.OK:return O.OK;case Be.CANCELLED:return O.CANCELLED;case Be.UNKNOWN:return O.UNKNOWN;case Be.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Be.INTERNAL:return O.INTERNAL;case Be.UNAVAILABLE:return O.UNAVAILABLE;case Be.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Be.NOT_FOUND:return O.NOT_FOUND;case Be.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Be.ABORTED:return O.ABORTED;case Be.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Be.DATA_LOSS:return O.DATA_LOSS;default:return Z()}}(le=Be||(Be={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Zr([4294967295,4294967295],0);function Dg(t){const e=PC().encode(t),n=new Jv;return n.update(e),new Uint8Array(n.digest())}function jg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([s,i],0)]}class Sf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Zr.fromNumber(r)));return s.compare(DC)===1&&(s=new Zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Dg(e),[r,s]=jg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Sf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Dg(e),[r,s]=jg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Du(ee.min(),s,new Re(me),Yn(),ae())}}class na{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new na(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class A_{constructor(e,n){this.targetId=e,this.me=n}}class R_{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vg{constructor(){this.fe=0,this.ge=Lg(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new na(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Lg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=Mg(),this.Qe=new Re(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Wd(i))if(r===0){const o=new X(i.path);this.Ue(n,o,Et.newNoDocument(o,ee.min()))}else ve(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=os(r).toUint8Array()}catch(u){if(u instanceof a_)return ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Sf(o,s,i)}catch(u){return ti(u instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Wd(l.target)){const u=new X(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Et.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Du(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=Mg(),this.Qe=new Re(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Mg(){return new Re(X.comparator)}function Lg(){return new Re(X.comparator)}const VC={asc:"ASCENDING",desc:"DESCENDING"},MC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LC={and:"AND",or:"OR"};class OC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gd(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FC(t,e){return ru(t,e.toTimestamp())}function Rn(t){return ve(!!t),ee.fromTimestamp(function(n){const r=br(n);return new Te(r.seconds,r.nanos)}(t))}function If(t,e){return Yd(t,e).canonicalString()}function Yd(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function P_(t){const e=Se.fromString(t);return ve(L_(e)),e}function Xd(t,e){return If(t.databaseId,e.path)}function jc(t,e){const n=P_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(j_(n))}function D_(t,e){return If(t.databaseId,e)}function zC(t){const e=P_(t);return e.length===4?Se.emptyPath():j_(e)}function Jd(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function j_(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Og(t,e,n){return{name:Xd(t,e),fields:n.value.mapValue.fields}}function UC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ve(p===void 0||typeof p=="string"),dt.fromBase64String(p||"")):(ve(p===void 0||p instanceof Buffer||p instanceof Uint8Array),dt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?O.UNKNOWN:b_(h.code);return new W(p,h.message||"")}(o);n=new R_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jc(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):ee.min(),l=new Dt({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new _l(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jc(t,r.document),i=r.readTime?Rn(r.readTime):ee.min(),o=Et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new _l([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jc(t,r.document),i=r.removedTargetIds||[];n=new _l([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new RC(s,i),l=r.targetId;n=new A_(l,o)}}return n}function BC(t,e){let n;if(e instanceof ta)n={update:Og(t,e.key,e.value)};else if(e instanceof Ef)n={delete:Xd(t,e.key)};else if(e instanceof Dr)n={update:Og(t,e.key,e.data),updateMask:XC(e.fieldMask)};else{if(!(e instanceof NC))return Z();n={verify:Xd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof tu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $o)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof nu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:FC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function $C(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(ee.min())&&(o=Rn(i)),new SC(o,s.transformResults||[])}(n,e))):[]}function qC(t,e){return{documents:[D_(t,e.path)]}}function HC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D_(t,s);const i=function(h){if(h.length!==0)return M_(_n.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:Ts(v.field),direction:QC(v.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Gd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function WC(t){let e=zC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const v=V_(m);return v instanceof _n&&d_(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(v=>function(k){return new Bo(Ss(k.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,bu(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,I=m.values||[];return new eu(I,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,I=m.values||[];return new eu(I,v)}(n.endAt)),dC(e,s,o,i,l,"F",u,h)}function KC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function V_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>V_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function QC(t){return VC[t]}function GC(t){return MC[t]}function YC(t){return LC[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function Ss(t){return at.fromServerFormat(t.fieldPath)}function M_(t){return t instanceof qe?function(n){if(n.op==="=="){if(Sg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(Tg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(Tg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:GC(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(s=>M_(s));return r.length===1?r[0]:{compositeFilter:{op:YC(n.op),filters:r}}}(t):Z()}function XC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function L_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.ct=e}}function ZC(t){const e=WC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.un=new t2}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Nr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class t2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ut(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ut(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ii(0)}static kn(){return new ii(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.changes=new yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&uo(r.mutation,s,qt.empty(),Te.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Hi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Yn();const o=lo(),l=function(){return lo()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Dr)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),uo(p.mutation,h,p.mutation.getFieldMask(),Te.now())):o.set(h.key,qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new r2(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=lo();let s=new Re((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||qt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=w_();p.forEach(v=>{if(!i.has(v)){const I=C_(n.get(v),r.get(v));I!==null&&m.set(v,I),i=i.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Yr());let l=-1,u=i;return o.next(h=>F.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ae())).next(p=>({batchId:l,changes:__(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Hi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Hi();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const h=function(m,v){return new gi(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Et.newInvalidDocument(p)))});let l=Hi();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&uo(p.mutation,h,qt.empty(),Te.now()),Ru(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ZC(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.overlays=new Re(X.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new X(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Yr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Yr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new AC(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this.Tr=new ut(Ye.Er),this.dr=new ut(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ye(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Se([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Se([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(Ye.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(me);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new X(i),0);let l=new ut(me);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ye(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.Mr=e,this.docs=function(){return new Re(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,l=new X(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||WI(HI(p),r)<=0||(s.has(p.key)||Ru(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new c2(this)}getSize(e){return F.resolve(this.size)}}class c2 extends n2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.persistence=e,this.Nr=new yi(n=>vf(n),_f),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cf,this.targetCount=0,this.kr=ii.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ii(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pf(0),this.Kr=!1,this.Kr=!0,this.$r=new a2,this.referenceDelegate=e(this),this.Ur=new d2(this),this.indexManager=new e2,this.remoteDocumentCache=function(s){return new u2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JC(n),this.Gr=new i2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new l2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new f2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class f2 extends QI{constructor(e){super(),this.currentSequenceNumber=e}}class Nf{constructor(e){this.persistence=e,this.Jr=new Cf,this.Yr=null}static Zr(e){return new Nf(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _S()?8:GI(yS())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new p2;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Oi()<=de.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Oi()<=de.DEBUG&&G("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Oi()<=de.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):F.resolve())}Yi(e,n){if(bg(n))return F.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qd(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Qd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return bg(n)||s.isEqual(ee.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Oi()<=de.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Es(n)),this.rs(e,o,n,qI(s,-1)).next(l=>l))})}ts(e,n){let r=new ut(y_(e));return n.forEach((s,i)=>{Ru(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Oi()<=de.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Ji.getDocumentsMatchingQuery(e,n,Nr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Re(me),this._s=new yi(i=>vf(i),_f),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function y2(t,e,n,r){return new g2(t,e,n,r)}async function O_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ae();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function v2(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,v=m.keys();let I=F.resolve();return v.forEach(k=>{I=I.next(()=>p.getEntry(u,k)).next(b=>{const A=h.docVersions.get(k);ve(A!==null),b.version.compareTo(A)<0&&(m.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),p.addEntry(b)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ae();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function F_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _2(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const v=s.get(m);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let I=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(dt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(m,I),function(b,A,w){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(v,I,p)&&l.push(n.Ur.updateTargetData(i,I))});let u=Yn(),h=ae();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(w2(i,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(ee.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function w2(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function x2(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function E2(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zd(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ea(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Fg(t,e,n){const r=te(t);let s=ee.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=te(u),v=m._s.get(p);return v!==void 0?F.resolve(m.os.get(v)):m.Ur.getTargetData(h,p)}(r,o,An(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ae())).next(l=>(T2(r,fC(e),l),{documents:l,Ts:i})))}function T2(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class zg{constructor(){this.activeTargetIds=_C()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S2{constructor(){this.so=new zg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa=null;function Vc(){return Xa===null?Xa=function(){return 268435456+Math.round(2147483648*Math.random())}():Xa++,"0x"+Xa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class b2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Vc(),u=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(p=>(G("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ti("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=C2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Vc();return new Promise((o,l)=>{const u=new Zv;u.setWithCredentials(!0),u.listenOnce(e_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gl.NO_ERROR:const p=u.getResponseJson();G(_t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case gl.TIMEOUT:G(_t,`RPC '${e}' ${i} timed out`),l(new W(O.DEADLINE_EXCEEDED,"Request time out"));break;case gl.HTTP_ERROR:const m=u.getStatus();if(G(_t,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const k=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(w)>=0?w:O.UNKNOWN}(I.status);l(new W(k,I.message))}else l(new W(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(O.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{G(_t,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);G(_t,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Vc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=r_(),l=n_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");G(_t,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let v=!1,I=!1;const k=new N2({Io:A=>{I?G(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(v||(G(_t,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),G(_t,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},To:()=>m.close()}),b=(A,w,x)=>{A.listen(w,S=>{try{x(S)}catch(D){setTimeout(()=>{throw D},0)}})};return b(m,qi.EventType.OPEN,()=>{I||(G(_t,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),b(m,qi.EventType.CLOSE,()=>{I||(I=!0,G(_t,`RPC '${e}' stream ${s} transport closed`),k.So())}),b(m,qi.EventType.ERROR,A=>{I||(I=!0,ti(_t,`RPC '${e}' stream ${s} transport errored:`,A),k.So(new W(O.UNAVAILABLE,"The operation could not be completed")))}),b(m,qi.EventType.MESSAGE,A=>{var w;if(!I){const x=A.data[0];ve(!!x);const S=x,D=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(D){G(_t,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let V=function(y){const T=Be[y];if(T!==void 0)return b_(T)}(L),E=D.message;V===void 0&&(V=O.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),I=!0,k.So(new W(V,E)),m.close()}else G(_t,`RPC '${e}' stream ${s} received:`,x),k.bo(x)}}),b(l,t_.STAT_EVENT,A=>{A.stat===Bd.PROXY?G(_t,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Bd.NOPROXY&&G(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function Mc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){return new OC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new z_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class A2 extends U_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=UC(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Rn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Jd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Wd(u)?{documents:qC(i,u)}:{query:HC(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=k_(i,o.resumeToken);const h=Gd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=ru(i,o.snapshotVersion.toTimestamp());const h=Gd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=KC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Jd(this.serializer),n.removeTarget=e,this.a_(n)}}class R2 extends U_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$C(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Jd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>BC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Yd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Yd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class P2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gn(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{hs(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=te(u);h.L_.add(4),await ra(h),h.q_.set("Unknown"),h.L_.delete(4),await Vu(h)}(this))})}),this.q_=new P2(r,s)}}async function Vu(t){if(hs(t))for(const e of t.B_)await e(!0)}async function ra(t){for(const e of t.B_)await e(!1)}function B_(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pf(n)?kf(n):vi(n).r_()&&Rf(n,e))}function Af(t,e){const n=te(t),r=vi(n);n.N_.delete(e),r.r_()&&$_(n,e),n.N_.size===0&&(r.r_()?r.o_():hs(n)&&n.q_.set("Unknown"))}function Rf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vi(t).A_(e)}function $_(t,e){t.Q_.xe(e),vi(t).R_(e)}function kf(t){t.Q_=new jC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vi(t).start(),t.q_.v_()}function Pf(t){return hs(t)&&!vi(t).n_()&&t.N_.size>0}function hs(t){return te(t).L_.size===0}function q_(t){t.Q_=void 0}async function j2(t){t.q_.set("Online")}async function V2(t){t.N_.forEach((e,n)=>{Rf(t,e)})}async function M2(t,e){q_(t),Pf(t)?(t.q_.M_(e),kf(t)):t.q_.set("Unknown")}async function L2(t,e,n){if(t.q_.set("Online"),e instanceof R_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await su(t,r)}else if(e instanceof _l?t.Q_.Ke(e):e instanceof A_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await F_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(dt.EMPTY_BYTE_STRING,p.snapshotVersion)),$_(i,u);const m=new hr(p.target,u,h,p.sequenceNumber);Rf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await su(t,r)}}async function su(t,e,n){if(!ea(e))throw e;t.L_.add(1),await ra(t),t.q_.set("Offline"),n||(n=()=>F_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vu(t)})}function H_(t,e){return e().catch(n=>su(t,n,e))}async function Mu(t){const e=te(t),n=Ar(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;O2(e);)try{const s=await x2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,F2(e,s)}catch(s){await su(e,s)}W_(e)&&K_(e)}function O2(t){return hs(t)&&t.O_.length<10}function F2(t,e){t.O_.push(e);const n=Ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function W_(t){return hs(t)&&!Ar(t).n_()&&t.O_.length>0}function K_(t){Ar(t).start()}async function z2(t){Ar(t).p_()}async function U2(t){const e=Ar(t);for(const n of t.O_)e.m_(n.mutations)}async function B2(t,e,n){const r=t.O_.shift(),s=Tf.from(r,e,n);await H_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mu(t)}async function $2(t,e){e&&Ar(t).V_&&await async function(r,s){if(function(o){return kC(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();Ar(r).s_(),await H_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mu(r)}}(t,e),W_(t)&&K_(t)}async function Bg(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=hs(n);n.L_.add(3),await ra(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vu(n)}async function q2(t,e){const n=te(t);e?(n.L_.delete(2),await Vu(n)):e||(n.L_.add(2),await ra(n),n.q_.set("Unknown"))}function vi(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new A2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:j2.bind(null,t),Ro:V2.bind(null,t),mo:M2.bind(null,t),d_:L2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Pf(t)?kf(t):t.q_.set("Unknown")):(await t.K_.stop(),q_(t))})),t.K_}function Ar(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new R2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:z2.bind(null,t),mo:$2.bind(null,t),f_:U2.bind(null,t),g_:B2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Mu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Df(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jf(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),ea(t))return new W(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Hi(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.W_=new Re(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oi{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new oi(e,n,Ws.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class W2{constructor(){this.queries=qg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=qg(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new W(O.ABORTED,"Firestore shutting down"))}}function qg(){return new yi(t=>g_(t),Au)}async function Q_(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new H2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=jf(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Vf(n)}async function G_(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function K2(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Vf(n)}function Q2(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Vf(t){t.Y_.forEach(e=>{e.next()})}var eh,Hg;(Hg=eh||(eh={})).ea="default",Hg.Cache="cache";class Y_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.key=e}}class J_{constructor(e){this.key=e}}class G2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=y_(e),this.Ra=new Ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new $g,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const v=s.get(p),I=Ru(this.query,m)?m:null,k=!!v&&this.mutatedKeys.has(v.key),b=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let A=!1;v&&I?v.data.isEqual(I.data)?k!==b&&(r.track({type:3,doc:I}),A=!0):this.ga(v,I)||(r.track({type:2,doc:I}),A=!0,(u&&this.Aa(I,u)>0||h&&this.Aa(I,h)<0)&&(l=!0)):!v&&I?(r.track({type:0,doc:I}),A=!0):v&&!I&&(r.track({type:1,doc:v}),A=!0,(u||h)&&(l=!0)),A&&(I?(o=o.add(I),i=b?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,k){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return b(I)-b(k)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new oi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $g,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new J_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new X_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Y2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class X2{constructor(e){this.key=e,this.va=!1}}class J2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new yi(l=>g_(l),Au),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(X.comparator),this.Na=new Map,this.La=new Cf,this.Ba={},this.ka=new Map,this.qa=ii.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Z2(t,e,n=!0){const r=sw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Z_(r,e,n,!0),s}async function eN(t,e){const n=sw(t);await Z_(n,e,!0,!1)}async function Z_(t,e,n,r){const s=await E2(t.localStore,An(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await tN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&B_(t.remoteStore,s),l}async function tN(t,e,n,r,s){t.Ka=(m,v,I)=>async function(b,A,w,x){let S=A.view.ma(w);S.ns&&(S=await Fg(b.localStore,A.query,!1).then(({documents:E})=>A.view.ma(E,S)));const D=x&&x.targetChanges.get(A.targetId),L=x&&x.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(S,b.isPrimaryClient,D,L);return Kg(b,A.targetId,V.wa),V.snapshot}(t,m,v,I);const i=await Fg(t.localStore,e,!0),o=new G2(e,i.Ts),l=o.ma(i.documents),u=na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Kg(t,n,h.wa);const p=new Y2(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function nN(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Au(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Af(r.remoteStore,s.targetId),th(r,s.targetId)}).catch(Zo)):(th(r,s.targetId),await Zd(r.localStore,s.targetId,!0))}async function rN(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Af(n.remoteStore,r.targetId))}async function sN(t,e,n){const r=dN(t);try{const s=await function(o,l){const u=te(o),h=Te.now(),p=l.reduce((I,k)=>I.add(k.key),ae());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=Yn(),b=ae();return u.cs.getEntries(I,p).next(A=>{k=A,k.forEach((w,x)=>{x.isValidDocument()||(b=b.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,k)).next(A=>{m=A;const w=[];for(const x of l){const S=CC(x,m.get(x.key).overlayedDocument);S!=null&&w.push(new Dr(x.key,S,l_(S.value.mapValue),gn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,h,w,l)}).next(A=>{v=A;const w=A.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(I,A.batchId,w)})}).then(()=>({batchId:v.batchId,changes:__(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Re(me)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await sa(r,s.changes),await Mu(r.remoteStore)}catch(s){const i=jf(s,"Failed to persist write");n.reject(i)}}async function ew(t,e){const n=te(t);try{const r=await _2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ve(o.va):s.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await sa(n,r,e)}catch(r){await Zo(r)}}function Wg(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(l)&&(h=!0)}),h&&Vf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iN(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Re(X.comparator);o=o.insert(i,Et.newNoDocument(i,ee.min()));const l=ae().add(i),u=new Du(ee.min(),new Map,new Re(me),o,l);await ew(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Mf(r)}else await Zd(r.localStore,e,!1).then(()=>th(r,e,n)).catch(Zo)}async function oN(t,e){const n=te(t),r=e.batch.batchId;try{const s=await v2(n.localStore,e);nw(n,r,null),tw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sa(n,s)}catch(s){await Zo(s)}}async function aN(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ve(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);nw(r,e,n),tw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sa(r,s)}catch(s){await Zo(s)}}function tw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nw(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function th(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||rw(t,r)})}function rw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Af(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mf(t))}function Kg(t,e,n){for(const r of n)r instanceof X_?(t.La.addReference(r.key,e),lN(t,r)):r instanceof J_?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||rw(t,r.key)):Z()}function lN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Mf(t))}function Mf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new X2(n)),t.Oa=t.Oa.insert(n,r),B_(t.remoteStore,new hr(An(wf(n.path)),r,"TargetPurposeLimboResolution",pf.oe))}}async function sa(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=bf.Wi(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const p=te(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(h,v=>F.forEach(v.$i,I=>p.persistence.referenceDelegate.addReference(m,v.targetId,I)).next(()=>F.forEach(v.Ui,I=>p.persistence.referenceDelegate.removeReference(m,v.targetId,I)))))}catch(m){if(!ea(m))throw m;G("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const I=p.os.get(v),k=I.snapshotVersion,b=I.withLastLimboFreeSnapshotVersion(k);p.os=p.os.insert(v,b)}}}(r.localStore,i))}async function uN(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await O_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new W(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sa(n,r.hs)}}function cN(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function sw(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ew.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iN.bind(null,e),e.Ca.d_=K2.bind(null,e.eventManager),e.Ca.$a=Q2.bind(null,e.eventManager),e}function dN(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aN.bind(null,e),e}class iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ju(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return y2(this.persistence,new m2,e.initialUser,this.serializer)}Ga(e){return new h2(Nf.Zr,this.serializer)}Wa(e){return new S2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iu.provider={build:()=>new iu};class nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uN.bind(null,this.syncEngine),await q2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new W2}()}createDatastore(e){const n=ju(e.databaseInfo.databaseId),r=function(i){return new b2(i)}(e.databaseInfo);return function(i,o,l,u){return new k2(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new D2(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wg(this.syncEngine,n,0),function(){return Ug.D()?new Ug:new I2}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,p){const m=new J2(s,i,o,l,u,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ra(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nh.provider={build:()=>new nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=wt.UNAUTHENTICATED,this.clientId=i_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await O_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fN(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Bg(e.remoteStore,s)),t._onlineComponents=e}async function fN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ti("Error using user provided cache. Falling back to memory cache: "+n),await Lc(t,new iu)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Lc(t,new iu);return t._offlineComponents}async function ow(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await Qg(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await Qg(t,new nh))),t._onlineComponents}function pN(t){return ow(t).then(e=>e.syncEngine)}async function rh(t){const e=await ow(t),n=e.eventManager;return n.onListen=Z2.bind(null,e.syncEngine),n.onUnlisten=nN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rN.bind(null,e.syncEngine),n}function mN(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const p=new iw({next:v=>{p.Za(),o.enqueueAndForget(()=>G_(i,m)),v.fromCache&&u.source==="server"?h.reject(new W(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new Y_(l,p,{includeMetadataChanges:!0,_a:!0});return Q_(i,m)}(await rh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e,n){if(!n)throw new W(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gN(t,e,n,r){if(e===!0&&r===!0)throw new W(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yg(t){if(!X.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xg(t){if(X.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lu(t);throw new W(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VI;switch(r.type){case"firstParty":return new FI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gg.get(n);r&&(G("ComponentProvider","Removing Datastore"),Gg.delete(n),r.terminate())}(this),Promise.resolve()}}function yN(t,e,n,r={}){var s;const i=(t=kn(t,Ou))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=wt.MOCK_USER;else{l=gS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new W(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new wt(h)}t._authCredentials=new MI(new s_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class Sr extends jr{constructor(e,n,r){super(e,n,wf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new X(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function Xt(t,e,...n){if(t=Dn(t),lw("collection","path",e),t instanceof Ou){const r=Se.fromString(e,...n);return Xg(r),new Sr(t,null,r)}{if(!(t instanceof Ot||t instanceof Sr))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Xg(r),new Sr(t.firestore,null,r)}}function Sn(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=i_.newId()),lw("doc","path",e),t instanceof Ou){const r=Se.fromString(e,...n);return Yg(r),new Ot(t,null,new X(r))}{if(!(t instanceof Ot||t instanceof Sr))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Yg(r),new Ot(t.firestore,t instanceof Sr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new z_(this,"async_queue_retry"),this.Vu=()=>{const r=Mc();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Mc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Mc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ea(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Df.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ey(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ls extends Ou{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zg(e),this._firestoreClient=void 0,await e}}}function vN(t,e){const n=typeof t=="object"?t:II(),r=typeof t=="string"?t:"(default)",s=xI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=pS("firestore");i&&yN(s,...i)}return s}function Lf(t){if(t._terminated)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_N(t),t._firestoreClient}function _N(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,p){return new JI(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,aw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new hN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(dt.fromBase64String(e))}catch(n){throw new W(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ai(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=/^__.*__$/;class xN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ta(e,this.data,n,this.fieldTransforms)}}class uw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Uf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Uf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ou(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cw(this.Cu)&&wN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class EN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ju(e)}Qu(e,n,r,s=!1){return new Uf({Cu:e,methodName:n,qu:r,path:at.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bf(t){const e=t._freezeSettings(),n=ju(t._databaseId);return new EN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TN(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);$f("Data must be an object, but it was:",o,r);const l=dw(r,o);let u,h;if(i.merge)u=new qt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const v=sh(e,m,n);if(!o.contains(v))throw new W(O.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);fw(p,v)||p.push(v)}u=new qt(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new xN(new Dt(l),u,h)}class zu extends Of{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zu}}function SN(t,e,n,r){const s=t.Qu(1,e,n);$f("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();ds(r,(u,h)=>{const p=qf(e,u,n);h=Dn(h);const m=s.Nu(p);if(h instanceof zu)i.push(p);else{const v=ia(h,m);v!=null&&(i.push(p),o.set(p,v))}});const l=new qt(i);return new uw(o,l,s.fieldTransforms)}function IN(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[sh(e,r,n)],u=[s];if(i.length%2!=0)throw new W(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(sh(e,i[v])),u.push(i[v+1]);const h=[],p=Dt.empty();for(let v=l.length-1;v>=0;--v)if(!fw(h,l[v])){const I=l[v];let k=u[v];k=Dn(k);const b=o.Nu(I);if(k instanceof zu)h.push(I);else{const A=ia(k,b);A!=null&&(h.push(I),p.set(I,A))}}const m=new qt(h);return new uw(p,m,o.fieldTransforms)}function CN(t,e,n,r=!1){return ia(n,t.Qu(r?4:3,e))}function ia(t,e){if(hw(t=Dn(t)))return $f("Unsupported field value:",e,t),dw(t,e);if(t instanceof Of)return function(r,s){if(!cw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=ia(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Te.fromDate(r);return{timestampValue:ru(s.serializer,i)}}if(r instanceof Te){const i=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(s.serializer,i)}}if(r instanceof Ff)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:k_(s.serializer,r._byteString)};if(r instanceof Ot){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:If(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof zf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return xf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Lu(r)}`)}(t,e)}function dw(t,e){const n={};return o_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,s)=>{const i=ia(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof Ff||t instanceof ai||t instanceof Ot||t instanceof Of||t instanceof zf)}function $f(t,e,n){if(!hw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Lu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sh(t,e,n){if((e=Dn(e))instanceof Fu)return e._internalPath;if(typeof e=="string")return qf(t,e);throw ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const NN=new RegExp("[~\\*/\\[\\]]");function qf(t,e,n){if(e.search(NN)>=0)throw ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fu(...e.split("."))._internalPath}catch{throw ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ou(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(O.INVALID_ARGUMENT,l+t+u)}function fw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bN extends pw{data(){return super.data()}}function Hf(t,e){return typeof e=="string"?qf(t,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wf{}class gw extends Wf{}function sr(t,e,...n){let r=[];e instanceof Wf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Qf).length,l=i.filter(u=>u instanceof Kf).length;if(o>1||o>0&&l>0)throw new W(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kf extends gw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kf(e,n,r)}_apply(e){const n=this._parse(e);return yw(e._query,n),new jr(e.firestore,e.converter,Kd(e._query,n))}_parse(e){const n=Bf(e.firestore);return function(i,o,l,u,h,p,m){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new W(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ny(m,p);const I=[];for(const k of m)I.push(ty(u,i,k));v={arrayValue:{values:I}}}else v=ty(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ny(m,p),v=CN(l,o,m,p==="in"||p==="not-in");return qe.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Qf extends Wf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)yw(o,u),o=Kd(o,u)}(e._query,n),new jr(e.firestore,e.converter,Kd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gf extends gw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bo(i,o)}(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new gi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ja(t,e="asc"){const n=e,r=Hf("orderBy",t);return Gf._create(r,n)}function ty(t,e,n){if(typeof(n=Dn(n))=="string"){if(n==="")throw new W(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m_(e)&&n.indexOf("/")!==-1)throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!X.isDocumentKey(r))throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eg(t,new X(r))}if(n instanceof Ot)return Eg(t,n._key);throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lu(n)}.`)}function ny(t,e){if(!Array.isArray(t)||t.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AN{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ds(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new zf(i)}convertGeoPoint(e){return new Ff(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fo(e));default:return null}}convertTimestamp(e){const n=br(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);ve(L_(r));const s=new zo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vw extends pw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wl extends vw{data(e={}){return super.data(e)}}class _w{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ki(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wl(this._firestore,this._userDataWriter,r.key,r,new Ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new wl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new wl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:kN(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class Yf extends AN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Za(t){t=kn(t,jr);const e=kn(t.firestore,ls),n=Lf(e),r=new Yf(e);return mw(t._query),mN(n,t._query).then(s=>new _w(e,r,t,s))}function Fi(t,e,n,...r){t=kn(t,Ot);const s=kn(t.firestore,ls),i=Bf(s);let o;return o=typeof(e=Dn(e))=="string"||e instanceof Fu?IN(i,"updateDoc",t._key,e,n,r):SN(i,"updateDoc",t._key,e),Xf(s,[o.toMutation(t._key,gn.exists(!0))])}function el(t){return Xf(kn(t.firestore,ls),[new Ef(t._key,gn.none())])}function tl(t,e){const n=kn(t.firestore,ls),r=Sn(t),s=RN(t.converter,e);return Xf(n,[TN(Bf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,gn.exists(!1))]).then(()=>r)}function nl(t,...e){var n,r,s;t=Dn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ey(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ey(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,h,p;if(t instanceof Ot)h=kn(t.firestore,ls),p=wf(t._key.path),u={next:m=>{e[o]&&e[o](PN(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=kn(t,jr);h=kn(m.firestore,ls),p=m._query;const v=new Yf(h);u={next:I=>{e[o]&&e[o](new _w(h,v,m,I))},error:e[o+1],complete:e[o+2]},mw(t._query)}return function(v,I,k,b){const A=new iw(b),w=new Y_(I,A,k);return v.asyncQueue.enqueueAndForget(async()=>Q_(await rh(v),w)),()=>{A.Za(),v.asyncQueue.enqueueAndForget(async()=>G_(await rh(v),w))}}(Lf(h),p,l,u)}function Xf(t,e){return function(r,s){const i=new Tr;return r.asyncQueue.enqueueAndForget(async()=>sN(await pN(r),s,i)),i.promise}(Lf(t),e)}function PN(t,e,n){const r=n.docs.get(e._key),s=new Yf(t);return new vw(t,s,e._key,r,new Ki(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){mi=s})(SI),Jl(new Mo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ls(new LI(r.getProvider("auth-internal")),new UI(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zo(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Hs(yg,"4.7.3",e),Hs(yg,"4.7.3","esm2017")})();var DN="firebase",jN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(DN,jN,"app");const VN={apiKey:"AIzaSyCkgUUr8CADydWb62Qdb8p8MHZ_TUkrCzE",authDomain:"sportsbox-result.firebaseapp.com",projectId:"sportsbox-result",storageBucket:"sportsbox-result.appspot.com",messagingSenderId:"1098188923070",appId:"1:1098188923070:web:b021c52a64965bf79dbeef",measurementId:"G-DR5V9BNFZ2"},MN=Gv(VN),Le=vN(MN),We={async getDemands(){try{const t=sr(Xt(Le,"demands"),Ja("createdAt","desc"));return(await Za(t)).docs.map(n=>{var r,s;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("수요처 데이터 로드 실패:",t),t}},async addDemand(t){try{const e=Te.now(),n={...t,email:t.email||"",createdAt:e,updatedAt:e};return{id:(await tl(Xt(Le,"demands"),n)).id,...t,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("수요처 추가 실패:",e),e}},async updateDemand(t,e){try{const n=Sn(Le,"demands",t);await Fi(n,{...e,updatedAt:Te.now()})}catch(n){throw console.error("수요처 수정 실패:",n),n}},async deleteDemand(t){try{await el(Sn(Le,"demands",t))}catch(e){throw console.error("수요처 삭제 실패:",e),e}},async getPerformances(){try{const t=sr(Xt(Le,"performances"),Ja("date","desc"));return(await Za(t)).docs.map(n=>{var r,s,i;return{id:n.id,...n.data(),date:((r=n.data().date)==null?void 0:r.toDate())||new Date,createdAt:((s=n.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((i=n.data().updatedAt)==null?void 0:i.toDate())||new Date}})}catch(t){throw console.error("실적 데이터 로드 실패:",t),t}},async addPerformance(t){try{const e=Te.now(),n=t.notes!==void 0&&t.notes!==null?t.notes.toString().trim():"";return{id:(await tl(Xt(Le,"performances"),{...t,notes:n,date:Te.fromDate(t.date),createdAt:e,updatedAt:e})).id,...t,notes:n,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("실적 추가 실패:",e),e}},async updatePerformance(t,e){try{const n=Sn(Le,"performances",t),r=e.notes!==void 0&&e.notes!==null?e.notes.toString().trim():void 0,s={...e,updatedAt:Te.now()};r!==void 0&&(s.notes=r),e.date&&(s.date=Te.fromDate(e.date)),await Fi(n,s)}catch(n){throw console.error("실적 수정 실패:",n),n}},async deletePerformance(t){try{await el(Sn(Le,"performances",t))}catch(e){throw console.error("실적 삭제 실패:",e),e}},subscribeToDemands(t){const e=sr(Xt(Le,"demands"),Ja("createdAt","desc"));return nl(e,n=>{const r=n.docs.map(s=>{var i,o;return{id:s.id,...s.data(),createdAt:((i=s.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=s.data().updatedAt)==null?void 0:o.toDate())||new Date}});t(r)})},subscribeToPerformances(t){const e=sr(Xt(Le,"performances"),Ja("date","desc"));return nl(e,n=>{const r=n.docs.map(s=>{var i,o,l;return{id:s.id,...s.data(),date:((i=s.data().date)==null?void 0:i.toDate())||new Date,createdAt:((o=s.data().createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((l=s.data().updatedAt)==null?void 0:l.toDate())||new Date}});t(r)})},async getBudgets(){try{const t=sr(Xt(Le,"budgets"));return(await Za(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 항목 데이터 로드 실패:",t),t}},async addBudget(t){try{return{id:(await tl(Xt(Le,"budgets"),t)).id,...t}}catch(e){throw console.error("예산 항목 추가 실패:",e),e}},async updateBudget(t,e){try{const n=Sn(Le,"budgets",t);await Fi(n,e)}catch(n){throw console.error("예산 항목 수정 실패:",n),n}},async deleteBudget(t){try{await el(Sn(Le,"budgets",t))}catch(e){throw console.error("예산 항목 삭제 실패:",e),e}},async updateBudgetOrder(t){const e=[];for(const n of t){const r=Sn(Le,"budgets",n.id);e.push(Fi(r,{order:n.order??0}))}await Promise.all(e)},subscribeToBudgets(t){const e=sr(Xt(Le,"budgets"));return nl(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async getBudgetUsages(){try{const t=sr(Xt(Le,"budgetUsages"));return(await Za(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 사용 내역 데이터 로드 실패:",t),t}},async addBudgetUsage(t){try{return{id:(await tl(Xt(Le,"budgetUsages"),t)).id,...t}}catch(e){throw console.error("예산 사용 내역 추가 실패:",e),e}},async updateBudgetUsage(t,e){try{const n=Sn(Le,"budgetUsages",t);await Fi(n,e)}catch(n){throw console.error("예산 사용 내역 수정 실패:",n),n}},async deleteBudgetUsage(t){try{await el(Sn(Le,"budgetUsages",t))}catch(e){throw console.error("예산 사용 내역 삭제 실패:",e),e}},subscribeToBudgetUsages(t){const e=sr(Xt(Le,"budgetUsages"));return nl(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})}},_i=()=>{const[t,e]=P.useState([]),[n,r]=P.useState([]),[s,i]=P.useState(!0),[o,l]=P.useState(null);return P.useEffect(()=>{let u=null,h=null;return(async()=>{try{i(!0),l(null),u=We.subscribeToDemands(m=>{e(m)}),h=We.subscribeToPerformances(m=>{r(m)}),i(!1)}catch(m){console.error("Firebase 데이터 초기화 실패:",m),l("데이터를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요."),i(!1)}})(),()=>{u&&u(),h&&h()}},[]),{demands:t,performances:n,loading:s,error:o,addDemand:We.addDemand,updateDemand:We.updateDemand,deleteDemand:We.deleteDemand,addPerformance:We.addPerformance,updatePerformance:We.updatePerformance,deletePerformance:We.deletePerformance}},ry=(t,e=[])=>{if(t.length===0)return{totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]};const n=t.reduce((b,A)=>b+(A.maleCount||0),0),r=t.reduce((b,A)=>b+(A.femaleCount||0),0),s=n+r,i=t.reduce((b,A)=>b+(A.promotionCount||0),0),l=new Set(t.map(b=>b.organizationName)).size,u=new Date,h=[];for(let b=11;b>=0;b--){const A=new Date(u.getFullYear(),u.getMonth()-b,1),w=A.toLocaleDateString("ko-KR",{month:"short",year:"2-digit"}),x=t.filter(V=>{if(!V.date)return!1;const E=new Date(V.date);return E.getMonth()===A.getMonth()&&E.getFullYear()===A.getFullYear()}),S=x.reduce((V,E)=>V+(E.maleCount||0),0),D=x.reduce((V,E)=>V+(E.femaleCount||0),0),L=x.reduce((V,E)=>V+(E.promotionCount||0),0);h.push({month:w,male:S,female:D,total:S+D,promotions:L})}const p=new Map;t.forEach(b=>{const A=p.get(b.organizationName)||{total:0,count:0,city:""},w=e.find(x=>x.organizationName===b.organizationName);p.set(b.organizationName,{total:A.total+(b.maleCount||0)+(b.femaleCount||0),count:A.count+1,city:(w==null?void 0:w.city)||A.city||""})});const m=Array.from(p.entries()).map(([b,A])=>({name:b,total:A.total,count:A.count,city:A.city})).sort((b,A)=>A.total-b.total),v=new Map;["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"].forEach(b=>{v.set(b,{total:0,count:0})}),t.forEach(b=>{const A=e.find(w=>w.organizationName===b.organizationName);if(A&&v.has(A.city)){const w=v.get(A.city);v.set(A.city,{total:w.total+(b.maleCount||0)+(b.femaleCount||0),count:w.count+1})}});const k=Array.from(v.entries()).map(([b,A])=>({name:b,total:A.total,count:A.count})).sort((b,A)=>A.total-b.total);return{totalMale:n,totalFemale:r,totalPeople:s,totalPromotions:i,totalOrganizations:l,monthlyData:h,organizationData:m,cityData:k}},sy=()=>{const{demands:t,performances:e}=_i(),[n,r]=P.useState({totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]}),[s,i]=P.useState([]),[o,l]=P.useState([]),[u,h]=P.useState(null),[p,m]=P.useState(""),[v,I]=P.useState(0),k=["과천시","광명시","광주시","군포시","김포시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","여주시","오산시","용인시","의왕시","이천시","평택시","하남시","화성시","양평군"],b=["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"],[A,w]=P.useState("전체"),[x,S]=P.useState(null),[D,L]=P.useState(!1);P.useEffect(()=>{const $=We.subscribeToBudgets(i),J=We.subscribeToBudgetUsages(l);return()=>{$(),J()}},[]);const[V,E]=P.useState({});P.useEffect(()=>{const $=e.filter(re=>!(V.startDate&&new Date(re.date)<V.startDate||V.endDate&&new Date(re.date)>V.endDate));o.filter(re=>!(V.startDate&&new Date(re.date)<V.startDate||V.endDate&&new Date(re.date)>V.endDate));const J=ry($,t);r({...J,totalOrganizations:t.length})},[t,e,V.startDate,V.endDate]);const g=$=>{h($.id),m($.name),I($.amount)},y=async $=>{await We.updateBudget($,{name:p,amount:v}),h(null)},T=async()=>{await We.addBudget({name:"",amount:0})},N=DE(PE(uf)),R=async $=>{const{active:J,over:re}=$;if(J.id!==re.id){const oe=s.findIndex(ne=>ne.id===J.id),et=s.findIndex(ne=>ne.id===re.id),tt=cf(s,oe,et).map((ne,Gt)=>({...ne,order:Gt}));await We.updateBudgetOrder(tt)}},C=o.filter($=>!(V.startDate&&new Date($.date)<V.startDate||V.endDate&&new Date($.date)>V.endDate)),ie=$=>C.filter(J=>J.budgetItemId===$).reduce((J,re)=>J+(Number(re.amount)||0),0),ke=async $=>{await We.deleteBudget($)};P.useEffect(()=>{const $=ry(e,t);r({...$,totalOrganizations:t.length})},[t,e]);const ze=s.reduce(($,J)=>$+(Number(J.amount)||0),0),ue=C.reduce(($,J)=>$+(Number(J.amount)||0),0),B=ze-ue,Q=ze>0?Math.round(ue/ze*1e3)/10:0,K=({title:$,value:J,icon:re,color:oe})=>c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:$}),c.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:J})]}),c.jsx("div",{className:`p-3 rounded-lg ${oe}`,children:c.jsx(re,{className:"w-6 h-6 text-white"})})]})}),fe=({data:$,onBarClick:J})=>{const re=Math.max(...$.map(oe=>oe.total),1);return c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"시/군별 참여 현황"}),c.jsx("div",{className:"flex gap-2 mb-4",children:["전체","남부","북부"].map(oe=>c.jsx("button",{className:`px-4 py-2 rounded-full border font-semibold transition-colors duration-200 ${A===oe?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>w(oe),children:oe},oe))}),$.length>0?c.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-96 overflow-y-auto",children:$.map((oe,et)=>c.jsxs("div",{className:`flex items-center space-x-4 p-3 bg-gray-50 rounded-lg transition cursor-pointer hover:shadow-md ${J?"hover:bg-blue-100":""}`,onClick:J?()=>J(oe.name):void 0,children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[70px] text-center",children:oe.name}),c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"bg-gray-200 rounded-full h-6 relative",children:c.jsx("div",{className:"bg-blue-500 h-6 rounded-full transition-all duration-500 ease-out flex items-center justify-end pr-2",style:{width:`${Math.max(oe.total/re*100,8)}%`},title:`${oe.count}회, ${oe.total.toLocaleString()}명`,children:c.jsxs("span",{className:"text-xs text-white font-medium",children:[oe.total.toLocaleString(),"명"]})})})}),c.jsxs("div",{className:"text-sm text-gray-600 font-mono min-w-[50px] text-right",children:[oe.count,"회"]})]},et))}):c.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"데이터가 없습니다"})]})},U=n.cityData.filter($=>A==="전체"?!0:A==="남부"?k.includes($.name):A==="북부"?b.includes($.name):!0),Y=n.organizationData.filter($=>$.city===x);return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"대시보드"}),c.jsx("p",{className:"text-gray-600",children:"수요처 및 실적 현황 개요"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c.jsx(K,{title:"등록 단체수",value:n.totalOrganizations.toString(),icon:Wm,color:"bg-blue-500"}),c.jsx(K,{title:"총 횟수",value:e.length.toString(),icon:bo,color:"bg-green-500"}),c.jsx(K,{title:"총 참여 인원",value:n.totalPeople.toLocaleString()+"명",icon:ei,color:"bg-purple-500"}),c.jsx(K,{title:"평균 참여 인원",value:e.length>0?Math.round(n.totalPeople/e.length).toLocaleString()+"명":"0명",icon:Rd,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[c.jsx(K,{title:"전체 예산액",value:ze.toLocaleString()+"원",icon:Rd,color:"bg-blue-500"}),c.jsx(K,{title:"전체 사용액",value:ue.toLocaleString()+"원",icon:ei,color:"bg-green-500"}),c.jsx(K,{title:"전체 잔액",value:B.toLocaleString()+"원",icon:Wm,color:"bg-gray-500"}),c.jsx(K,{title:"전체 집행율",value:Q+"%",icon:bo,color:"bg-orange-500"})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"시작 날짜"}),c.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:V.startDate?V.startDate.toISOString().split("T")[0]:"",onChange:$=>E(J=>({...J,startDate:$.target.value?new Date($.target.value):void 0}))}),c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"종료 날짜"}),c.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:V.endDate?V.endDate.toISOString().split("T")[0]:"",onChange:$=>E(J=>({...J,endDate:$.target.value?new Date($.target.value):void 0}))}),c.jsx("button",{className:"ml-2 px-3 py-1 bg-gray-100 rounded hover:bg-gray-200 text-sm",onClick:()=>E({}),children:"전체 초기화"})]})}),c.jsx("div",{className:"mb-8",children:c.jsx(fe,{data:U,onBarClick:$=>{S($),L(!0)}})}),c.jsx(LT,{sensors:N,collisionDetection:OE,onDragEnd:R,children:c.jsx(YT,{items:s.map($=>$.id),strategy:QT,children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 현황"}),c.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:T,children:"+ 예산 항목 추가"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-2 py-2 text-center"}),c.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"예산액"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"사용액"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"잔액"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"집행율(%)"}),c.jsx("th",{className:"px-2 py-2 text-center",children:"수정"}),c.jsx("th",{className:"px-2 py-2 text-center",children:"삭제"})]})}),c.jsx("tbody",{children:s.sort(($,J)=>($.order??0)-(J.order??0)).map($=>c.jsx(LN,{item:$,editingBudgetId:u,editingBudgetName:p,editingBudgetAmount:v,setEditingBudgetName:m,setEditingBudgetAmount:I,setEditingBudgetId:h,handleEditBudget:g,handleSaveBudget:y,handleDeleteBudget:ke,used:ie($.id),isDragging:!1},$.id))})]})})]})})}),D&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 relative animate-fadeIn",children:[c.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>L(!1),children:"×"}),c.jsxs("h3",{className:"text-2xl font-bold mb-4 text-blue-700",children:[x," 수요처별 참여 현황"]}),Y.length>0?c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsx("th",{className:"px-2 py-2 text-left",children:"수요처명"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"횟수"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"총 참여인원"})]})}),c.jsx("tbody",{children:Y.map(($,J)=>c.jsxs("tr",{className:"hover:bg-blue-50",children:[c.jsx("td",{className:"px-2 py-2 font-medium text-gray-900",children:$.name}),c.jsxs("td",{className:"px-2 py-2 text-right",children:[$.count,"회"]}),c.jsxs("td",{className:"px-2 py-2 text-right",children:[$.total.toLocaleString(),"명"]})]},J))})]}):c.jsx("div",{className:"text-gray-500 text-center py-8",children:"데이터가 없습니다"})]})})]})};function LN({item:t,editingBudgetId:e,editingBudgetName:n,editingBudgetAmount:r,setEditingBudgetName:s,setEditingBudgetAmount:i,setEditingBudgetId:o,handleEditBudget:l,handleSaveBudget:u,handleDeleteBudget:h,used:p,isDragging:m}){const{attributes:v,listeners:I,setNodeRef:k,transform:b,transition:A,isDragging:w}=rS({id:t.id}),x={transform:jo.Transform.toString(b),transition:A,background:w?"#e0f2fe":void 0},S=t.amount-p,D=t.amount>0?p/t.amount*100:0;return c.jsxs("tr",{ref:k,style:x,...v,children:[c.jsx("td",{className:"px-2 py-2 text-center cursor-grab",...I,children:c.jsx(mE,{className:"w-4 h-4 text-gray-400"})}),c.jsx("td",{className:"px-2 py-2 flex items-center gap-2",children:e===t.id?c.jsx("input",{className:"border rounded px-2 py-1 w-32",value:n,onChange:L=>s(L.target.value)}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:t.name}),t.region==="남부"&&c.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}),t.region==="북부"&&c.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"})]})}),c.jsx("td",{className:"px-2 py-2 text-right",children:e===t.id?c.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:r,onChange:L=>i(Number(L.target.value))}):t.amount.toLocaleString()}),c.jsx("td",{className:"px-2 py-2 text-right",children:p.toLocaleString()}),c.jsx("td",{className:"px-2 py-2 text-right",children:S.toLocaleString()}),c.jsx("td",{className:"px-2 py-2 text-right",children:D.toFixed(2)}),c.jsx("td",{className:"px-2 py-2 text-center",children:e===t.id?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"px-2 py-1 text-green-600 hover:underline",onClick:()=>u(t.id),children:"저장"}),c.jsx("button",{className:"px-2 py-1 text-gray-500 hover:underline",onClick:()=>o(null),children:"취소"})]}):c.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>l(t),children:"수정"})}),c.jsx("td",{className:"px-2 py-2 text-center",children:c.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>h(t.id),children:c.jsx(Tu,{className:"inline w-4 h-4"})})})]})}const ON=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));i.length>=4&&n.push({city:i[0]||"",organizationName:i[1]||"",contactPerson:i[2]||"",phoneNumber:i[3]||"",email:i[4]||""})}return n},FN=()=>{const t=`\uFEFF시/군,단체명,담당자명,연락처,이메일
수원시,예시 단체,홍길동,010-1234-5678,hong@example.com
성남시,샘플 그룹,김철수,010-9876-5432,kim@sample.org`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="수요처_등록_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},zN=t=>{let e=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,총인원,홍보횟수,메모
`;t.forEach(i=>{const o=(i.maleCount||0)+(i.femaleCount||0),l=i.date?i.date.toLocaleDateString("ko-KR"):"",u=i.notes||"",h=[l,`"${i.organizationName}"`,`"${i.city||""}"`,`"${i.program||"스포츠교실"}"`,i.maleCount||0,i.femaleCount||0,o,i.promotionCount||0,`"${u.replace(/"/g,'""')}"`].join(",");e+=h+`
`});const n=new Blob([e],{type:"text/csv;charset=utf-8"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`실적_데이터_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)},UN=()=>{const t=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,홍보횟수,메모
2024-01-15,예시 단체,수원시,스포츠교실,10,15,5,샘플 메모
2024-01-16,샘플 그룹,성남시,스포츠체험존,8,12,3,테스트 데이터
2024-01-17,테스트 단체,안양시,스포츠이벤트,5,10,2,이벤트 데이터`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="실적_업로드_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},BN=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));if(i.length>=8){const o=i[0];let l;try{o.includes("-")?l=new Date(o):o.includes("/")?l=new Date(o):l=new Date,isNaN(l.getTime())&&(l=new Date)}catch{l=new Date}n.push({date:l,organizationName:i[1]||"",city:i[2]||"",program:i[3]||"스포츠교실",maleCount:parseInt(i[4])||0,femaleCount:parseInt(i[5])||0,promotionCount:parseInt(i[6])||0,notes:i[7]||""})}}return n},oa=()=>{const[t,e]=P.useState([]),n=P.useCallback(s=>{const i=crypto.randomUUID(),o={...s,id:i,duration:s.duration||5e3};e(l=>[...l,o]),setTimeout(()=>{e(l=>l.filter(u=>u.id!==i))},o.duration)},[]),r=P.useCallback(s=>{e(i=>i.filter(o=>o.id!==s))},[]);return{toasts:t,addToast:n,removeToast:r}},$N=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],qN=()=>{const{addToast:t}=oa(),{addDemand:e}=_i(),n=P.useRef(null),[r,s]=P.useState("manual"),[i,o]=P.useState(!1),[l,u]=P.useState(!1),[h,p]=P.useState(!1),[m,v]=P.useState(!1),[I,k]=P.useState({success:0,error:0}),[b,A]=P.useState(!1),[w,x]=P.useState(!1),[S,D]=P.useState({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""}),L=R=>{const{name:C,value:ie}=R.target;D(ke=>({...ke,[C]:ie}))},V=async R=>{if(R.preventDefault(),!S.city||!S.organizationName||!S.contactPerson||!S.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}A(!0);try{await e({city:S.city,organizationName:S.organizationName,contactPerson:S.contactPerson,phoneNumber:S.phoneNumber,email:S.email||""}),u(!0),D({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""})}catch{t({type:"error",title:"등록 실패",message:"수요처 등록 중 오류가 발생했습니다"})}finally{A(!1)}},E=async R=>{x(!0);const C=new FileReader;C.onload=async ie=>{var ke;try{const ze=(ke=ie.target)==null?void 0:ke.result,ue=ON(ze);if(ue.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let B=0,Q=0;for(const K of ue)try{K.city&&K.organizationName&&K.contactPerson&&K.phoneNumber?(await e(K),B++):Q++}catch{Q++}k({success:B,error:Q}),v(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{x(!1)}},C.readAsText(R,"UTF-8")},g=R=>{R.preventDefault(),o(!1);const C=Array.from(R.dataTransfer.files);C.length>0&&E(C[0])},y=R=>{R.preventDefault(),o(!0)},T=R=>{R.preventDefault(),o(!1)},N=R=>{const C=R.target.files;C&&C.length>0&&E(C[0]),R.target.value=""};return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 등록"}),c.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 수요처를 등록하세요"})]}),c.jsx("div",{className:"border-b border-gray-200 mb-8",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsxs("button",{onClick:()=>s("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(wv,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),c.jsxs("button",{onClick:()=>s("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(Po,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),r==="manual"&&c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsxs("form",{onSubmit:V,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"시/군 *"}),c.jsxs("select",{id:"city",name:"city",value:S.city,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[c.jsx("option",{value:"",children:"시/군을 선택하세요"}),$N.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),c.jsx("input",{type:"text",id:"organizationName",name:"organizationName",value:S.organizationName,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"단체명을 입력하세요",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-gray-700 mb-2",children:"담당자명 *"}),c.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:S.contactPerson,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"담당자명을 입력하세요",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"연락처 *"}),c.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:S.phoneNumber,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"연락처를 입력하세요",required:!0})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일 (선택사항)"}),c.jsx("input",{type:"email",id:"email",name:"email",value:S.email,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"이메일 주소를 입력하세요"})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",disabled:b,children:b?c.jsxs(c.Fragment,{children:[c.jsx(Ro,{className:"w-4 h-4 mr-2 animate-spin"}),"등록 중..."]}):"수요처 등록"})})]})}),r==="bulk"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Hl,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),c.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 시/군, 단체명, 담당자명, 연락처, 이메일(선택)"}),c.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[c.jsxs("button",{onClick:FN,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(ef,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),c.jsxs("button",{onClick:()=>p(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(Zh,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:g,onDragOver:y,onDragLeave:T,children:w?c.jsxs(c.Fragment,{children:[c.jsx(Ro,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),c.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Po,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),c.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),c.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),c.jsx("input",{ref:n,type:"file",accept:".csv,.txt",onChange:N,className:"hidden"}),c.jsx("button",{onClick:()=>{var R;return(R=n.current)==null?void 0:R.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ao,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"등록 완료!"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"수요처가 성공적으로 등록되었습니다."}),c.jsx("button",{onClick:()=>u(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),m&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ao,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"업로드 완료!"}),c.jsxs("div",{className:"text-gray-600 mb-6",children:[c.jsx("p",{className:"mb-2",children:"파일 업로드가 완료되었습니다."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{children:"성공:"}),c.jsxs("span",{className:"font-semibold text-green-600",children:[I.success,"건"]})]}),I.error>0&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:"실패:"}),c.jsxs("span",{className:"font-semibold text-red-600",children:[I.error,"건"]})]})]})]}),c.jsx("button",{onClick:()=>v(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"CSV 파일 저장 방법"}),c.jsx("p",{className:"text-gray-600",children:"한글이 깨지지 않게 저장하는 방법을 안내합니다."})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 Microsoft Excel 사용시"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),c.jsxs("li",{children:["데이터 입력 완료 후 ",c.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),c.jsxs("li",{children:["파일 형식에서 ",c.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),c.jsx("li",{children:"파일명 입력 후 저장"}),c.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',c.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 Google Sheets 사용시"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"구글 시트에서 데이터 입력"}),c.jsxs("li",{children:[c.jsx("strong",{children:"파일 → 다운로드 → 쉼표로 구분된 값(.csv, 현재 시트)"})," 선택"]}),c.jsx("li",{children:"다운로드된 파일을 업로드"})]}),c.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:c.jsx("p",{className:"text-sm text-green-800",children:"구글 시트는 자동으로 UTF-8로 저장되어 한글 문제가 없습니다."})})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:()=>p(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},HN=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],WN=()=>{const{addToast:t}=oa(),{demands:e,updateDemand:n,deleteDemand:r}=_i(),[s,i]=P.useState(null),[o,l]=P.useState(""),[u,h]=P.useState({}),p=e.filter(A=>A.organizationName.toLowerCase().includes(o.toLowerCase())||A.city.toLowerCase().includes(o.toLowerCase())||A.contactPerson.toLowerCase().includes(o.toLowerCase())),m=A=>{i(A.id),h(A)},v=async()=>{if(!s||!u.city||!u.organizationName||!u.contactPerson||!u.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await n(s,u),i(null),h({}),t({type:"success",title:"수정 완료",message:"수요처 정보가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"수요처 정보 수정 중 오류가 발생했습니다"})}},I=()=>{i(null),h({})},k=async(A,w)=>{if(window.confirm(`"${w}"의 수요처 정보를 삭제하시겠습니까?`))try{await r(A),t({type:"success",title:"삭제 완료",message:"수요처 정보가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"수요처 정보 삭제 중 오류가 발생했습니다"})}},b=(A,w)=>{h(x=>({...x,[A]:w}))};return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 관리"}),c.jsx("p",{className:"text-gray-600",children:"등록된 수요처 정보를 조회, 수정, 삭제할 수 있습니다"})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative max-w-md",children:[c.jsx(xv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"수요처 검색...",value:o,onChange:A=>l(A.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"시/군"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"담당자"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"연락처"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"이메일"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"등록일"}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(A=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsxs("select",{value:u.city||"",onChange:w=>b("city",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"시/군 선택"}),HN.map(w=>c.jsx("option",{value:w,children:w},w))]}):c.jsx("span",{className:"text-sm text-gray-900",children:A.city})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"text",value:u.organizationName||"",onChange:w=>b("organizationName",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.organizationName})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"text",value:u.contactPerson||"",onChange:w=>b("contactPerson",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-900",children:A.contactPerson})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"tel",value:u.phoneNumber||"",onChange:w=>b("phoneNumber",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-900",children:A.phoneNumber})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"email",value:u.email||"",onChange:w=>b("email",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-500",children:A.email||"-"})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:"text-sm text-gray-500",children:A.createdAt.toLocaleDateString("ko-KR")})}),c.jsx("td",{className:"px-6 py-4 text-right",children:s===A.id?c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:v,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:c.jsx(ko,{className:"w-4 h-4"})}),c.jsx("button",{onClick:I,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:c.jsx(Su,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:()=>m(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:c.jsx(_v,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>k(A.id,A.organizationName),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:c.jsx(Tu,{className:"w-4 h-4"})})]})})]},A.id))})]})}),p.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:"검색 결과가 없습니다"})})]}),c.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",p.length,"건 표시"]})]})},KN=()=>{const{addToast:t}=oa(),{demands:e,addPerformance:n}=_i(),r=P.useRef(null),[s,i]=P.useState("manual"),[o,l]=P.useState(!1),[u,h]=P.useState(!1),[p,m]=P.useState(!1),[v,I]=P.useState(!1),[k,b]=P.useState({success:0,error:0}),[A,w]=P.useState(""),[x,S]=P.useState(!1),[D,L]=P.useState(!1),[V,E]=P.useState(!1),[g,y]=P.useState({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),T=Array.from(new Set(e.map(U=>U.organizationName))).sort(),N=T.filter(U=>U.toLowerCase().includes(A.toLowerCase())),R=e.find(U=>U.organizationName===g.organizationName),C=(R==null?void 0:R.city)||"",ie=U=>{const{name:Y,value:$}=U.target;y(J=>({...J,[Y]:$}))},ke=()=>{const U=parseInt(g.maleCount)||0,Y=parseInt(g.femaleCount)||0;return U+Y},ze=async U=>{if(U.preventDefault(),!g.date||!g.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const Y=parseInt(g.maleCount)||0,$=parseInt(g.femaleCount)||0,J=parseInt(g.promotionCount)||0;if(Y<0||$<0||J<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}L(!0);try{await n({date:new Date(g.date),organizationName:g.organizationName,city:C,program:g.program,maleCount:Y,femaleCount:$,promotionCount:J,notes:g.notes?g.notes.trim():""}),h(!0),y({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),w(""),S(!1)}catch{t({type:"error",title:"저장 실패",message:"실적 데이터 저장 중 오류가 발생했습니다"})}finally{L(!1)}},ue=async U=>{E(!0);const Y=new FileReader;Y.onload=async $=>{var J;try{const re=(J=$.target)==null?void 0:J.result,oe=BN(re);if(oe.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let et=0,tt=0;for(const ne of oe)try{ne.date&&ne.organizationName?(await n(ne),et++):tt++}catch{tt++}b({success:et,error:tt}),m(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{E(!1)}},Y.readAsText(U,"UTF-8")},B=U=>{U.preventDefault(),l(!1);const Y=Array.from(U.dataTransfer.files);Y.length>0&&ue(Y[0])},Q=U=>{U.preventDefault(),l(!0)},K=U=>{U.preventDefault(),l(!1)},fe=U=>{const Y=U.target.files;Y&&Y.length>0&&ue(Y[0]),U.target.value=""};return P.useEffect(()=>{const U=Y=>{Y.target.closest(".organization-dropdown")||S(!1)};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[]),c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 입력"}),c.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 실적 데이터를 등록하세요"})]}),c.jsx("div",{className:"border-b border-gray-200 mb-8",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsxs("button",{onClick:()=>i("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(ko,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),c.jsxs("button",{onClick:()=>i("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(Po,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),s==="manual"&&c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsxs("form",{onSubmit:ze,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),c.jsxs("div",{className:"relative",children:[c.jsx(bo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"date",id:"date",name:"date",value:g.date,onChange:ie,className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),c.jsxs("div",{className:"relative organization-dropdown",children:[c.jsx("input",{type:"text",placeholder:"단체명을 검색하세요...",value:A,onChange:U=>{w(U.target.value),S(!0)},onFocus:()=>S(!0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),g.organizationName&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx("button",{type:"button",onClick:()=>{y(U=>({...U,organizationName:""})),w("")},className:"text-gray-400 hover:text-gray-600",children:"×"})}),x&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:N.length>0?N.map(U=>c.jsx("button",{type:"button",onClick:()=>{y(Y=>({...Y,organizationName:U})),w(U),S(!1)},className:"w-full px-4 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none",children:U},U)):c.jsx("div",{className:"px-4 py-2 text-gray-500",children:"검색 결과가 없습니다"})})]}),T.length===0&&c.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"등록된 단체가 없습니다. 먼저 수요처를 등록해주세요."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"program",className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램 *"}),c.jsxs("select",{id:"program",name:"program",value:g.program,onChange:ie,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[c.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),c.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),c.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]}),g.organizationName&&c.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("span",{className:"font-medium",children:"선택된 단체:"})," ",g.organizationName,C&&` (${C})`]})}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[c.jsx(ei,{className:"w-5 h-5 mr-2 text-blue-600"}),"참여 인원"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"maleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"남성 인원"}),c.jsx("input",{type:"number",id:"maleCount",name:"maleCount",value:g.maleCount,onChange:ie,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"femaleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"여성 인원"}),c.jsx("input",{type:"number",id:"femaleCount",name:"femaleCount",value:g.femaleCount,onChange:ie,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"총 인원"}),c.jsxs("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:[ke().toLocaleString(),"명"]})]})]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"promotionCount",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[c.jsx(vv,{className:"w-4 h-4 mr-2 text-orange-500"}),"홍보 횟수"]}),c.jsx("input",{type:"number",id:"promotionCount",name:"promotionCount",value:g.promotionCount,onChange:ie,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"홍보 횟수를 입력하세요"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"메모 (선택사항)"}),c.jsx("textarea",{id:"notes",name:"notes",value:g.notes,onChange:ie,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"추가 메모를 입력하세요..."})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[D?c.jsx(Ro,{className:"w-4 h-4 mr-2 animate-spin"}):c.jsx(ko,{className:"w-4 h-4 mr-2"}),"실적 저장"]})})]})}),s==="bulk"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Hl,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),c.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 날짜, 단체명, 시군, 프로그램, 남성, 여성, 홍보횟수, 메모"}),c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"중요:"})," 날짜는 YYYY-MM-DD 형식으로 입력하세요 (예: 2024-01-15)"]})}),c.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[c.jsxs("button",{onClick:UN,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(ef,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),c.jsxs("button",{onClick:()=>I(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(Zh,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:B,onDragOver:Q,onDragLeave:K,children:V?c.jsxs(c.Fragment,{children:[c.jsx(Ro,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),c.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Po,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),c.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),c.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),c.jsx("input",{ref:r,type:"file",accept:".csv,.txt",onChange:fe,className:"hidden"}),c.jsx("button",{onClick:()=>{var U;return(U=r.current)==null?void 0:U.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),u&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ao,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"저장 완료!"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"실적 데이터가 성공적으로 저장되었습니다."}),c.jsx("button",{onClick:()=>{h(!1),y({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),w(""),S(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ao,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"일괄등록 완료!"}),c.jsxs("div",{className:"text-gray-600 mb-6",children:[c.jsx("p",{className:"mb-2",children:"실적 데이터 일괄등록이 완료되었습니다."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{children:"성공:"}),c.jsxs("span",{className:"font-semibold text-green-600",children:[k.success,"건"]})]}),k.error>0&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:"실패:"}),c.jsxs("span",{className:"font-semibold text-red-600",children:[k.error,"건"]})]})]})]}),c.jsx("button",{onClick:()=>m(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),v&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"실적 데이터 저장 방법"}),c.jsx("p",{className:"text-gray-600",children:"실적 데이터를 올바르게 저장하는 방법을 안내합니다."})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 수기 입력 방법"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"날짜를 선택하세요 (필수)"}),c.jsx("li",{children:"단체명을 검색하여 선택하세요 (필수)"}),c.jsx("li",{children:"프로그램 유형을 선택하세요 (스포츠교실/스포츠체험존/스포츠이벤트)"}),c.jsx("li",{children:"남성/여성 인원수를 입력하세요"}),c.jsx("li",{children:"홍보 횟수를 입력하세요 (선택사항)"}),c.jsx("li",{children:"메모를 입력하세요 (선택사항)"}),c.jsx("li",{children:'"실적 저장" 버튼을 클릭하세요'})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 CSV 파일 업로드 방법"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),c.jsxs("li",{children:["데이터 입력 완료 후 ",c.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),c.jsxs("li",{children:["파일 형식에서 ",c.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),c.jsx("li",{children:"파일명 입력 후 저장"}),c.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',c.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📅 날짜 형식"}),c.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"날짜는 반드시 YYYY-MM-DD 형식으로 입력해야 합니다:"}),c.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700",children:[c.jsx("li",{children:"올바른 형식: 2024-01-15, 2024-12-31"}),c.jsx("li",{children:"잘못된 형식: 2024/01/15, 2024.01.15, 01-15-2024"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"🔧 한글 깨짐 해결방법"}),c.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"파일 업로드 시 한글이 깨지는 경우:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-700",children:[c.jsx("li",{children:"엑셀에서 파일을 다시 열기"}),c.jsx("li",{children:"파일 → 다른 이름으로 저장"}),c.jsx("li",{children:'파일 형식에서 "CSV UTF-8(쉼표로 분리)" 선택'}),c.jsx("li",{children:"새로운 파일로 저장 후 업로드"})]})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:()=>I(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},QN=()=>{const{addToast:t}=oa(),{performances:e,demands:n,updatePerformance:r,deletePerformance:s}=_i(),[i,o]=P.useState([]),[l,u]=P.useState(null),[h,p]=P.useState({}),[m,v]=P.useState({}),[I,k]=P.useState(""),b=Array.from(new Set(n.map(y=>y.organizationName))).sort();P.useEffect(()=>{A()},[e,m,I]);const A=()=>{let y=[...e];m.startDate&&(y=y.filter(T=>T.date&&T.date>=m.startDate)),m.endDate&&(y=y.filter(T=>T.date&&T.date<=m.endDate)),m.organizationName&&(y=y.filter(T=>T.organizationName===m.organizationName)),m.program&&(y=y.filter(T=>T.program===m.program)),I&&(y=y.filter(T=>T.organizationName.toLowerCase().includes(I.toLowerCase())||T.notes&&T.notes.toLowerCase().includes(I.toLowerCase()))),y.sort((T,N)=>!T.date&&!N.date?0:T.date?N.date?N.date.getTime()-T.date.getTime():-1:1),o(y)},w=(y,T)=>{v(N=>({...N,[y]:T}))},x=()=>{v({}),k("")},S=y=>{u(y.id),p({...y,date:y.date})},D=async()=>{if(!l||!h.date||!h.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const y=h.maleCount||0,T=h.femaleCount||0,N=h.promotionCount||0;if(y<0||T<0||N<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await r(l,{...h,notes:h.notes?h.notes.trim():""}),u(null),p({}),t({type:"success",title:"수정 완료",message:"실적 데이터가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"실적 데이터 수정 중 오류가 발생했습니다"})}},L=()=>{u(null),p({})},V=async(y,T,N)=>{const R=N?N.toLocaleDateString("ko-KR"):"날짜 없음";if(window.confirm(`"${T}"의 ${R} 실적 데이터를 삭제하시겠습니까?`))try{await s(y),t({type:"success",title:"삭제 완료",message:"실적 데이터가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"실적 데이터 삭제 중 오류가 발생했습니다"})}},E=(y,T)=>{p(N=>({...N,[y]:T}))},g=()=>{if(i.length===0){t({type:"warning",title:"다운로드 불가",message:"다운로드할 데이터가 없습니다"});return}try{zN(i),t({type:"success",title:"다운로드 완료",message:"실적 데이터가 성공적으로 다운로드되었습니다"})}catch{t({type:"error",title:"다운로드 실패",message:"엑셀 파일 다운로드 중 오류가 발생했습니다"})}};return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 조회"}),c.jsx("p",{className:"text-gray-600",children:"등록된 실적 데이터를 조회하고 관리하세요"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[c.jsx(pE,{className:"w-5 h-5 mr-2"}),"필터"]}),c.jsx("button",{onClick:x,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"전체 초기화"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검색"}),c.jsxs("div",{className:"relative",children:[c.jsx(xv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c.jsx("input",{type:"text",placeholder:"검색어 입력...",value:I,onChange:y=>k(y.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 날짜"}),c.jsxs("div",{className:"relative",children:[c.jsx(bo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c.jsx("input",{type:"date",value:m.startDate?m.startDate.toISOString().split("T")[0]:"",onChange:y=>w("startDate",y.target.value?new Date(y.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 날짜"}),c.jsxs("div",{className:"relative",children:[c.jsx(bo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c.jsx("input",{type:"date",value:m.endDate?m.endDate.toISOString().split("T")[0]:"",onChange:y=>w("endDate",y.target.value?new Date(y.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명"}),c.jsxs("select",{value:m.organizationName||"",onChange:y=>w("organizationName",y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"전체 단체"}),b.map(y=>c.jsx("option",{value:y,children:y},y))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램"}),c.jsxs("select",{value:m.program||"",onChange:y=>w("program",y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"전체 프로그램"}),c.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),c.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),c.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"text-sm text-gray-500",children:["총 ",e.length,"건 중 ",i.length,"건 표시"]}),c.jsxs("button",{onClick:g,disabled:i.length===0,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[c.jsx(ef,{className:"w-4 h-4 mr-2"}),"엑셀 다운로드"]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-32",children:"날짜"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-48",children:"단체명"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-24",children:"시/군"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-32",children:"프로그램"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"남성"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"여성"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"총 인원"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-24",children:"홍보횟수"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 min-w-32",children:"메모"}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900 w-24",children:"작업"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(y=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 w-32",children:l===y.id?c.jsx("input",{type:"date",value:h.date?new Date(h.date).toISOString().split("T")[0]:"",onChange:T=>E("date",new Date(T.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-900",children:y.date?y.date.toLocaleDateString("ko-KR"):"날짜 없음"})}),c.jsx("td",{className:"px-6 py-4 w-48",children:l===y.id?c.jsxs("select",{value:h.organizationName||"",onChange:T=>E("organizationName",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"단체 선택"}),b.map(T=>c.jsx("option",{value:T,children:T},T))]}):c.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.organizationName})}),c.jsx("td",{className:"px-6 py-4 w-24",children:c.jsx("span",{className:"text-sm text-gray-600",children:y.city||"-"})}),c.jsx("td",{className:"px-6 py-4 w-32",children:l===y.id?c.jsxs("select",{value:h.program||y.program||"스포츠교실",onChange:T=>E("program",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),c.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),c.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]}):c.jsx("span",{className:"text-sm text-purple-600 font-medium",children:y.program||"스포츠교실"})}),c.jsx("td",{className:"px-6 py-4 w-20",children:l===y.id?c.jsx("input",{type:"number",value:h.maleCount||"",onChange:T=>E("maleCount",parseInt(T.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsxs("span",{className:"text-sm text-blue-600 font-mono flex items-center",children:[c.jsx(ei,{className:"w-4 h-4 mr-1"}),(y.maleCount||0).toLocaleString()]})}),c.jsx("td",{className:"px-6 py-4 w-20",children:l===y.id?c.jsx("input",{type:"number",value:h.femaleCount||"",onChange:T=>E("femaleCount",parseInt(T.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsxs("span",{className:"text-sm text-pink-600 font-mono flex items-center",children:[c.jsx(ei,{className:"w-4 h-4 mr-1"}),(y.femaleCount||0).toLocaleString()]})}),c.jsx("td",{className:"px-6 py-4 w-20",children:c.jsxs("span",{className:"text-sm text-gray-900 font-bold",children:[((y.maleCount||0)+(y.femaleCount||0)).toLocaleString(),"명"]})}),c.jsx("td",{className:"px-6 py-4 w-24",children:l===y.id?c.jsx("input",{type:"number",value:h.promotionCount||"",onChange:T=>E("promotionCount",parseInt(T.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsxs("span",{className:"text-sm text-orange-600 font-mono flex items-center",children:[c.jsx(vv,{className:"w-4 h-4 mr-1"}),(y.promotionCount||0).toLocaleString(),"회"]})}),c.jsx("td",{className:"px-6 py-4 min-w-32",children:l===y.id?c.jsx("textarea",{value:h.notes||"",onChange:T=>E("notes",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}):c.jsx("span",{className:"text-sm text-gray-500",children:y.notes||"-"})}),c.jsx("td",{className:"px-6 py-4 text-right w-24",children:l===y.id?c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:D,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:c.jsx(ko,{className:"w-4 h-4"})}),c.jsx("button",{onClick:L,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:c.jsx(Su,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:()=>S(y),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:c.jsx(_v,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>V(y.id,y.organizationName,y.date),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:c.jsx(Tu,{className:"w-4 h-4"})})]})})]},y.id))})]})}),i.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:e.length===0?"실적 데이터가 없습니다":"검색 조건에 맞는 데이터가 없습니다"})})]})]})},GN=({toast:t,onRemove:e})=>{const{type:n,title:r,message:s,duration:i=5e3}=t;P.useEffect(()=>{const u=setTimeout(()=>{e(t.id)},i);return()=>clearTimeout(u)},[t.id,i,e]);const o=()=>{switch(n){case"success":return c.jsx(Ao,{className:"w-5 h-5 text-green-500"});case"error":return c.jsx(Zh,{className:"w-5 h-5 text-red-500"});case"warning":return c.jsx(fE,{className:"w-5 h-5 text-orange-500"});case"info":return c.jsx(Km,{className:"w-5 h-5 text-blue-500"});default:return c.jsx(Km,{className:"w-5 h-5 text-blue-500"})}},l=()=>{switch(n){case"success":return"border-l-green-500";case"error":return"border-l-red-500";case"warning":return"border-l-orange-500";case"info":return"border-l-blue-500";default:return"border-l-blue-500"}};return c.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 ${l()} p-4 mb-3 max-w-md animate-slide-in`,children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:o()}),c.jsxs("div",{className:"ml-3 flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),c.jsx("p",{className:"text-sm text-gray-500",children:s})]}),c.jsx("button",{onClick:()=>e(t.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(Su,{className:"w-4 h-4"})})]})})},YN=({toasts:t,onRemove:e})=>c.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.map(n=>c.jsx(GN,{toast:n,onRemove:e},n.id))}),XN=()=>{const[t,e]=P.useState([]),[n,r]=P.useState([]),[s,i]=P.useState(null),[o,l]=P.useState({}),[u,h]=P.useState(""),p=t.filter(w=>w.name.includes(u)).sort((w,x)=>x.name.localeCompare(w.name,"ko")),m=n.sort((w,x)=>w.date&&x.date?new Date(x.date).getTime()-new Date(w.date).getTime():x.id.localeCompare(w.id));P.useEffect(()=>{const w=We.subscribeToBudgets(e),x=We.subscribeToBudgetUsages(r);return()=>{w(),x()}},[]);const v=async()=>{t[0]&&await We.addBudgetUsage({budgetItemId:t[0].id,description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},I=w=>{i(w.id),l({...w})},k=async()=>{s&&(await We.updateBudgetUsage(s,o),i(null),l({}))},b=async()=>{s&&(await We.deleteBudgetUsage(s),i(null),l({}))},A=(w,x)=>{l(S=>({...S,[w]:x}))};return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"예산 사용 내역"}),c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition",onClick:v,children:[c.jsx(wv,{className:"w-4 h-4"})," 내역 추가"]})]}),c.jsx("div",{className:"mb-4 flex gap-2",children:c.jsx("input",{type:"text",className:"border rounded px-3 py-2 w-64",placeholder:"예산명 검색...",value:u,onChange:w=>h(w.target.value)})}),c.jsx("div",{className:"grid gap-4",children:m.map(w=>{const x=s===w.id,S=t.find(D=>D.id===(x?o.budgetItemId:w.budgetItemId));return c.jsxs("div",{className:`rounded-xl shadow-md border border-gray-100 bg-white hover:shadow-lg transition cursor-pointer relative ${x?"ring-2 ring-blue-400":"hover:ring-1 hover:ring-blue-200"}`,onClick:()=>!x&&I(w),children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-6",children:[c.jsx("div",{className:"flex-1 min-w-[120px]",children:x?c.jsx("select",{className:"border rounded px-2 py-1 w-full",value:o.budgetItemId,onChange:D=>A("budgetItemId",D.target.value),children:p.map(D=>c.jsx("option",{value:D.id,children:D.name},D.id))}):c.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center gap-2",children:[(S==null?void 0:S.name)||"-",(S==null?void 0:S.region)==="남부"&&c.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}),(S==null?void 0:S.region)==="북부"&&c.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"})]})}),c.jsx("div",{className:"flex-1 min-w-[100px]",children:x?c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.description||"",onChange:D=>A("description",D.target.value)}):c.jsx("div",{className:"text-gray-800 truncate",title:w.description,children:w.description||"-"})}),c.jsx("div",{className:"flex-1 min-w-[80px]",children:x?c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.vendor||"",onChange:D=>A("vendor",D.target.value)}):c.jsx("div",{className:"text-gray-700 truncate",title:w.vendor,children:w.vendor||"-"})}),c.jsx("div",{className:"w-32 text-right",children:x?c.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full text-right",value:o.amount!==void 0&&o.amount!==null?Number(o.amount).toLocaleString():"",onChange:D=>{const L=D.target.value.replace(/,/g,"");isNaN(Number(L))||A("amount",Number(L))}}):c.jsxs("span",{className:"font-bold text-blue-700",children:[w.amount.toLocaleString(),"원"]})}),c.jsx("div",{className:"w-32 text-center",children:x?c.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:o.date||"",onChange:D=>A("date",D.target.value)}):c.jsx("span",{className:"text-gray-600",children:w.date||"-"})}),c.jsx("div",{className:"w-32 text-center",children:x?c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.paymentMethod||"",onChange:D=>A("paymentMethod",D.target.value)}):c.jsx("span",{className:"text-gray-600",children:w.paymentMethod||"-"})}),c.jsx("div",{className:"flex-1 min-w-[80px]",children:x?c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.note||"",onChange:D=>A("note",D.target.value)}):c.jsx("div",{className:"text-gray-500 truncate",title:w.note,children:w.note||"-"})}),x&&c.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center",children:[c.jsx("button",{className:"p-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:k,title:"저장",children:c.jsx(ko,{className:"w-5 h-5"})}),c.jsx("button",{className:"p-2 bg-gray-200 text-gray-700 rounded-full shadow hover:bg-gray-300 transition",onClick:()=>{i(null),l({})},title:"취소",children:c.jsx(Su,{className:"w-5 h-5"})})]})]}),x&&c.jsx("div",{className:"flex justify-end border-t pt-3 pb-2 px-6 bg-gray-50 rounded-b-xl",children:c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition",onClick:b,children:[c.jsx(Tu,{className:"w-4 h-4"})," 선택된 내역 삭제"]})})]},w.id)})})]})};function JN(){const[t,e]=P.useState("dashboard"),{toasts:n,addToast:r,removeToast:s}=oa(),{loading:i,error:o}=_i(),l=()=>{if(i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ro,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(o)return c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-800 font-medium mb-2",children:"연결 오류"}),c.jsx("p",{className:"text-red-600 text-sm",children:o}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"다시 시도"})]})});switch(t){case"dashboard":return c.jsx(sy,{});case"demand-register":return c.jsx(qN,{});case"demand-list":return c.jsx(WN,{});case"performance-input":return c.jsx(KN,{});case"performance-list":return c.jsx(QN,{});case"budget-usage":return c.jsx(XN,{});default:return c.jsx(sy,{})}};return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(yE,{currentPage:t,onPageChange:e,children:l()}),c.jsx(YN,{toasts:n,onRemove:s})]})}yv(document.getElementById("root")).render(c.jsx(P.StrictMode,{children:c.jsx(JN,{})}));
