(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var km={exports:{}},Ha={},Pm={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Us=Symbol.for("react.element"),s_=Symbol.for("react.portal"),o_=Symbol.for("react.fragment"),a_=Symbol.for("react.strict_mode"),l_=Symbol.for("react.profiler"),u_=Symbol.for("react.provider"),c_=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),d_=Symbol.for("react.suspense"),f_=Symbol.for("react.memo"),p_=Symbol.for("react.lazy"),xf=Symbol.iterator;function m_(t){return t===null||typeof t!="object"?null:(t=xf&&t[xf]||t["@@iterator"],typeof t=="function"?t:null)}var Dm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vm=Object.assign,bm={};function mi(t,e,n){this.props=t,this.context=e,this.refs=bm,this.updater=n||Dm}mi.prototype.isReactComponent={};mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jm(){}jm.prototype=mi.prototype;function Fc(t,e,n){this.props=t,this.context=e,this.refs=bm,this.updater=n||Dm}var Uc=Fc.prototype=new jm;Uc.constructor=Fc;Vm(Uc,mi.prototype);Uc.isPureReactComponent=!0;var Tf=Array.isArray,Mm=Object.prototype.hasOwnProperty,zc={current:null},Lm={key:!0,ref:!0,__self:!0,__source:!0};function Om(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Mm.call(e,r)&&!Lm.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Us,type:t,key:s,ref:a,props:i,_owner:zc.current}}function g_(t,e){return{$$typeof:Us,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Us}function y_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var If=/\/+/g;function $l(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y_(""+t.key):e.toString(36)}function Ho(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Us:case s_:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+$l(a,0):r,Tf(i)?(n="",t!=null&&(n=t.replace(If,"$&/")+"/"),Ho(i,e,n,"",function(h){return h})):i!=null&&(Bc(i)&&(i=g_(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(If,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Tf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+$l(s,l);a+=Ho(s,e,n,u,i)}else if(u=m_(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+$l(s,l++),a+=Ho(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vo(t,e,n){if(t==null)return t;var r=[],i=0;return Ho(t,r,"","",function(s){return e.call(n,s,i++)}),r}function v_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},Wo={transition:null},__={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:Wo,ReactCurrentOwner:zc};function Fm(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:vo,forEach:function(t,e,n){vo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vo(t,function(){e++}),e},toArray:function(t){return vo(t,function(e){return e})||[]},only:function(t){if(!Bc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=mi;Z.Fragment=o_;Z.Profiler=l_;Z.PureComponent=Fc;Z.StrictMode=a_;Z.Suspense=d_;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=__;Z.act=Fm;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=zc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Mm.call(e,u)&&!Lm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Us,type:t.type,key:i,ref:s,props:r,_owner:a}};Z.createContext=function(t){return t={$$typeof:c_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u_,_context:t},t.Consumer=t};Z.createElement=Om;Z.createFactory=function(t){var e=Om.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:h_,render:t}};Z.isValidElement=Bc;Z.lazy=function(t){return{$$typeof:p_,_payload:{_status:-1,_result:t},_init:v_}};Z.memo=function(t,e){return{$$typeof:f_,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Wo.transition;Wo.transition={};try{t()}finally{Wo.transition=e}};Z.unstable_act=Fm;Z.useCallback=function(t,e){return at.current.useCallback(t,e)};Z.useContext=function(t){return at.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return at.current.useDeferredValue(t)};Z.useEffect=function(t,e){return at.current.useEffect(t,e)};Z.useId=function(){return at.current.useId()};Z.useImperativeHandle=function(t,e,n){return at.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return at.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return at.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return at.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return at.current.useReducer(t,e,n)};Z.useRef=function(t){return at.current.useRef(t)};Z.useState=function(t){return at.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return at.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return at.current.useTransition()};Z.version="18.3.1";Pm.exports=Z;var G=Pm.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_=G,E_=Symbol.for("react.element"),x_=Symbol.for("react.fragment"),T_=Object.prototype.hasOwnProperty,I_=w_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S_={key:!0,ref:!0,__self:!0,__source:!0};function Um(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)T_.call(e,r)&&!S_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:E_,type:t,key:s,ref:a,props:i,_owner:I_.current}}Ha.Fragment=x_;Ha.jsx=Um;Ha.jsxs=Um;km.exports=Ha;var f=km.exports,zm={exports:{}},It={},Bm={exports:{}},$m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,$){var W=O.length;O.push($);e:for(;0<W;){var oe=W-1>>>1,ue=O[oe];if(0<i(ue,$))O[oe]=$,O[W]=ue,W=oe;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],W=O.pop();if(W!==$){O[0]=W;e:for(var oe=0,ue=O.length,Ie=ue>>>1;oe<Ie;){var Zt=2*(oe+1)-1,en=O[Zt],tn=Zt+1,nn=O[tn];if(0>i(en,W))tn<ue&&0>i(nn,en)?(O[oe]=nn,O[tn]=W,oe=tn):(O[oe]=en,O[Zt]=W,oe=Zt);else if(tn<ue&&0>i(nn,W))O[oe]=nn,O[tn]=W,oe=tn;else break e}}return $}function i(O,$){var W=O.sortIndex-$.sortIndex;return W!==0?W:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],m=1,y=null,_=3,S=!1,D=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(O){for(var $=n(h);$!==null;){if($.callback===null)r(h);else if($.startTime<=O)r(h),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(h)}}function b(O){if(N=!1,A(O),!D)if(n(u)!==null)D=!0,ut(U);else{var $=n(h);$!==null&&B(b,$.startTime-O)}}function U(O,$){D=!1,N&&(N=!1,T(p),p=-1),S=!0;var W=_;try{for(A($),y=n(u);y!==null&&(!(y.expirationTime>$)||O&&!C());){var oe=y.callback;if(typeof oe=="function"){y.callback=null,_=y.priorityLevel;var ue=oe(y.expirationTime<=$);$=t.unstable_now(),typeof ue=="function"?y.callback=ue:y===n(u)&&r(u),A($)}else r(u);y=n(u)}if(y!==null)var Ie=!0;else{var Zt=n(h);Zt!==null&&B(b,Zt.startTime-$),Ie=!1}return Ie}finally{y=null,_=W,S=!1}}var F=!1,w=null,p=-1,v=5,E=-1;function C(){return!(t.unstable_now()-E<v)}function k(){if(w!==null){var O=t.unstable_now();E=O;var $=!0;try{$=w(!0,O)}finally{$?I():(F=!1,w=null)}}else F=!1}var I;if(typeof x=="function")I=function(){x(k)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,yt=Le.port2;Le.port1.onmessage=k,I=function(){yt.postMessage(null)}}else I=function(){R(k,0)};function ut(O){w=O,F||(F=!0,I())}function B(O,$){p=R(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){D||S||(D=!0,ut(U))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(_){case 1:case 2:case 3:var $=3;break;default:$=_}var W=_;_=$;try{return O()}finally{_=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var W=_;_=O;try{return $()}finally{_=W}},t.unstable_scheduleCallback=function(O,$,W){var oe=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?oe+W:oe):W=oe,O){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=W+ue,O={id:m++,callback:$,priorityLevel:O,startTime:W,expirationTime:ue,sortIndex:-1},W>oe?(O.sortIndex=W,e(h,O),n(u)===null&&O===n(h)&&(N?(T(p),p=-1):N=!0,B(b,W-oe))):(O.sortIndex=ue,e(u,O),D||S||(D=!0,ut(U))),O},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(O){var $=_;return function(){var W=_;_=$;try{return O.apply(this,arguments)}finally{_=W}}}})($m);Bm.exports=$m;var A_=Bm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_=G,Tt=A_;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qm=new Set,fs={};function Tr(t,e){ti(t,e),ti(t+"Capture",e)}function ti(t,e){for(fs[t]=e,t=0;t<e.length;t++)qm.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=Object.prototype.hasOwnProperty,N_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sf={},Af={};function R_(t){return Tu.call(Af,t)?!0:Tu.call(Sf,t)?!1:N_.test(t)?Af[t]=!0:(Sf[t]=!0,!1)}function k_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P_(t,e,n,r){if(e===null||typeof e>"u"||k_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qe[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qe[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qe[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qe[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qe[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qe[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qe[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qe[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qe[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $c=/[\-:]([a-z])/g;function qc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($c,qc);qe[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($c,qc);qe[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($c,qc);qe[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qe[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});qe.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qe[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hc(t,e,n,r){var i=qe.hasOwnProperty(e)?qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(P_(e,n,i,r)&&(n=null),r||i===null?R_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _n=C_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_o=Symbol.for("react.element"),jr=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),Wc=Symbol.for("react.strict_mode"),Iu=Symbol.for("react.profiler"),Hm=Symbol.for("react.provider"),Wm=Symbol.for("react.context"),Qc=Symbol.for("react.forward_ref"),Su=Symbol.for("react.suspense"),Au=Symbol.for("react.suspense_list"),Kc=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Qm=Symbol.for("react.offscreen"),Cf=Symbol.iterator;function Li(t){return t===null||typeof t!="object"?null:(t=Cf&&t[Cf]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,ql;function Wi(t){if(ql===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ql=e&&e[1]||""}return`
`+ql+t}var Hl=!1;function Wl(t,e){if(!t||Hl)return"";Hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Hl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wi(t):""}function D_(t){switch(t.tag){case 5:return Wi(t.type);case 16:return Wi("Lazy");case 13:return Wi("Suspense");case 19:return Wi("SuspenseList");case 0:case 2:case 15:return t=Wl(t.type,!1),t;case 11:return t=Wl(t.type.render,!1),t;case 1:return t=Wl(t.type,!0),t;default:return""}}function Cu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mr:return"Fragment";case jr:return"Portal";case Iu:return"Profiler";case Wc:return"StrictMode";case Su:return"Suspense";case Au:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Wm:return(t.displayName||"Context")+".Consumer";case Hm:return(t._context.displayName||"Context")+".Provider";case Qc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kc:return e=t.displayName||null,e!==null?e:Cu(t.type)||"Memo";case Sn:e=t._payload,t=t._init;try{return Cu(t(e))}catch{}}return null}function V_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cu(e);case 8:return e===Wc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Km(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b_(t){var e=Km(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wo(t){t._valueTracker||(t._valueTracker=b_(t))}function Gm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Km(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function la(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nu(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ym(t,e){e=e.checked,e!=null&&Hc(t,"checked",e,!1)}function Ru(t,e){Ym(t,e);var n=qn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ku(t,e.type,n):e.hasOwnProperty("defaultValue")&&ku(t,e.type,qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ku(t,e,n){(e!=="number"||la(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qi=Array.isArray;function Qr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Pu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Qi(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qn(n)}}function Xm(t,e){var n=qn(e.value),r=qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Du(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eo,Zm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eo=Eo||document.createElement("div"),Eo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ps(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j_=["Webkit","ms","Moz","O"];Object.keys(es).forEach(function(t){j_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),es[e]=es[t]})});function eg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||es.hasOwnProperty(t)&&es[t]?(""+e).trim():e+"px"}function tg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var M_=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vu(t,e){if(e){if(M_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function bu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=null;function Gc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mu=null,Kr=null,Gr=null;function Df(t){if(t=$s(t)){if(typeof Mu!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Ya(e),Mu(t.stateNode,t.type,e))}}function ng(t){Kr?Gr?Gr.push(t):Gr=[t]:Kr=t}function rg(){if(Kr){var t=Kr,e=Gr;if(Gr=Kr=null,Df(t),e)for(t=0;t<e.length;t++)Df(e[t])}}function ig(t,e){return t(e)}function sg(){}var Ql=!1;function og(t,e,n){if(Ql)return t(e,n);Ql=!0;try{return ig(t,e,n)}finally{Ql=!1,(Kr!==null||Gr!==null)&&(sg(),rg())}}function ms(t,e){var n=t.stateNode;if(n===null)return null;var r=Ya(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Lu=!1;if(dn)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){Lu=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{Lu=!1}function L_(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var ts=!1,ua=null,ca=!1,Ou=null,O_={onError:function(t){ts=!0,ua=t}};function F_(t,e,n,r,i,s,a,l,u){ts=!1,ua=null,L_.apply(O_,arguments)}function U_(t,e,n,r,i,s,a,l,u){if(F_.apply(this,arguments),ts){if(ts){var h=ua;ts=!1,ua=null}else throw Error(L(198));ca||(ca=!0,Ou=h)}}function Ir(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ag(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vf(t){if(Ir(t)!==t)throw Error(L(188))}function z_(t){var e=t.alternate;if(!e){if(e=Ir(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vf(i),t;if(s===r)return Vf(i),e;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function lg(t){return t=z_(t),t!==null?ug(t):null}function ug(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ug(t);if(e!==null)return e;t=t.sibling}return null}var cg=Tt.unstable_scheduleCallback,bf=Tt.unstable_cancelCallback,B_=Tt.unstable_shouldYield,$_=Tt.unstable_requestPaint,Ae=Tt.unstable_now,q_=Tt.unstable_getCurrentPriorityLevel,Yc=Tt.unstable_ImmediatePriority,hg=Tt.unstable_UserBlockingPriority,ha=Tt.unstable_NormalPriority,H_=Tt.unstable_LowPriority,dg=Tt.unstable_IdlePriority,Wa=null,Wt=null;function W_(t){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Wa,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:G_,Q_=Math.log,K_=Math.LN2;function G_(t){return t>>>=0,t===0?32:31-(Q_(t)/K_|0)|0}var xo=64,To=4194304;function Ki(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function da(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Ki(l):(s&=a,s!==0&&(r=Ki(s)))}else a=n&~i,a!==0?r=Ki(a):s!==0&&(r=Ki(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ot(e),i=1<<n,r|=t[n],e&=~i;return r}function Y_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ot(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=Y_(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Fu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fg(){var t=xo;return xo<<=1,!(xo&4194240)&&(xo=64),t}function Kl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ot(e),t[e]=n}function J_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ot(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ot(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ae=0;function pg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mg,Jc,gg,yg,vg,Uu=!1,Io=[],Dn=null,Vn=null,bn=null,gs=new Map,ys=new Map,Cn=[],Z_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jf(t,e){switch(t){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":gs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(e.pointerId)}}function Fi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=$s(e),e!==null&&Jc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function e1(t,e,n,r,i){switch(e){case"focusin":return Dn=Fi(Dn,t,e,n,r,i),!0;case"dragenter":return Vn=Fi(Vn,t,e,n,r,i),!0;case"mouseover":return bn=Fi(bn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return gs.set(s,Fi(gs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ys.set(s,Fi(ys.get(s)||null,t,e,n,r,i)),!0}return!1}function _g(t){var e=ar(t.target);if(e!==null){var n=Ir(e);if(n!==null){if(e=n.tag,e===13){if(e=ag(n),e!==null){t.blockedOn=e,vg(t.priority,function(){gg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ju=r,n.target.dispatchEvent(r),ju=null}else return e=$s(n),e!==null&&Jc(e),t.blockedOn=n,!1;e.shift()}return!0}function Mf(t,e,n){Qo(t)&&n.delete(e)}function t1(){Uu=!1,Dn!==null&&Qo(Dn)&&(Dn=null),Vn!==null&&Qo(Vn)&&(Vn=null),bn!==null&&Qo(bn)&&(bn=null),gs.forEach(Mf),ys.forEach(Mf)}function Ui(t,e){t.blockedOn===e&&(t.blockedOn=null,Uu||(Uu=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,t1)))}function vs(t){function e(i){return Ui(i,t)}if(0<Io.length){Ui(Io[0],t);for(var n=1;n<Io.length;n++){var r=Io[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dn!==null&&Ui(Dn,t),Vn!==null&&Ui(Vn,t),bn!==null&&Ui(bn,t),gs.forEach(e),ys.forEach(e),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)_g(n),n.blockedOn===null&&Cn.shift()}var Yr=_n.ReactCurrentBatchConfig,fa=!0;function n1(t,e,n,r){var i=ae,s=Yr.transition;Yr.transition=null;try{ae=1,Zc(t,e,n,r)}finally{ae=i,Yr.transition=s}}function r1(t,e,n,r){var i=ae,s=Yr.transition;Yr.transition=null;try{ae=4,Zc(t,e,n,r)}finally{ae=i,Yr.transition=s}}function Zc(t,e,n,r){if(fa){var i=zu(t,e,n,r);if(i===null)iu(t,e,r,pa,n),jf(t,r);else if(e1(i,t,e,n,r))r.stopPropagation();else if(jf(t,r),e&4&&-1<Z_.indexOf(t)){for(;i!==null;){var s=$s(i);if(s!==null&&mg(s),s=zu(t,e,n,r),s===null&&iu(t,e,r,pa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else iu(t,e,r,null,n)}}var pa=null;function zu(t,e,n,r){if(pa=null,t=Gc(r),t=ar(t),t!==null)if(e=Ir(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ag(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pa=t,null}function wg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q_()){case Yc:return 1;case hg:return 4;case ha:case H_:return 16;case dg:return 536870912;default:return 16}default:return 16}}var Rn=null,eh=null,Ko=null;function Eg(){if(Ko)return Ko;var t,e=eh,n=e.length,r,i="value"in Rn?Rn.value:Rn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ko=i.slice(t,1<r?1-r:void 0)}function Go(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function So(){return!0}function Lf(){return!1}function St(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?So:Lf,this.isPropagationStopped=Lf,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),e}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},th=St(gi),Bs=we({},gi,{view:0,detail:0}),i1=St(Bs),Gl,Yl,zi,Qa=we({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zi&&(zi&&t.type==="mousemove"?(Gl=t.screenX-zi.screenX,Yl=t.screenY-zi.screenY):Yl=Gl=0,zi=t),Gl)},movementY:function(t){return"movementY"in t?t.movementY:Yl}}),Of=St(Qa),s1=we({},Qa,{dataTransfer:0}),o1=St(s1),a1=we({},Bs,{relatedTarget:0}),Xl=St(a1),l1=we({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=St(l1),c1=we({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h1=St(c1),d1=we({},gi,{data:0}),Ff=St(d1),f1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=m1[t])?!!e[t]:!1}function nh(){return g1}var y1=we({},Bs,{key:function(t){if(t.key){var e=f1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Go(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?p1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nh,charCode:function(t){return t.type==="keypress"?Go(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Go(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v1=St(y1),_1=we({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uf=St(_1),w1=we({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nh}),E1=St(w1),x1=we({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),T1=St(x1),I1=we({},Qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S1=St(I1),A1=[9,13,27,32],rh=dn&&"CompositionEvent"in window,ns=null;dn&&"documentMode"in document&&(ns=document.documentMode);var C1=dn&&"TextEvent"in window&&!ns,xg=dn&&(!rh||ns&&8<ns&&11>=ns),zf=" ",Bf=!1;function Tg(t,e){switch(t){case"keyup":return A1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ig(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lr=!1;function N1(t,e){switch(t){case"compositionend":return Ig(e);case"keypress":return e.which!==32?null:(Bf=!0,zf);case"textInput":return t=e.data,t===zf&&Bf?null:t;default:return null}}function R1(t,e){if(Lr)return t==="compositionend"||!rh&&Tg(t,e)?(t=Eg(),Ko=eh=Rn=null,Lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xg&&e.locale!=="ko"?null:e.data;default:return null}}var k1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $f(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k1[t.type]:e==="textarea"}function Sg(t,e,n,r){ng(r),e=ma(e,"onChange"),0<e.length&&(n=new th("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rs=null,_s=null;function P1(t){Mg(t,0)}function Ka(t){var e=Ur(t);if(Gm(e))return t}function D1(t,e){if(t==="change")return e}var Ag=!1;if(dn){var Jl;if(dn){var Zl="oninput"in document;if(!Zl){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),Zl=typeof qf.oninput=="function"}Jl=Zl}else Jl=!1;Ag=Jl&&(!document.documentMode||9<document.documentMode)}function Hf(){rs&&(rs.detachEvent("onpropertychange",Cg),_s=rs=null)}function Cg(t){if(t.propertyName==="value"&&Ka(_s)){var e=[];Sg(e,_s,t,Gc(t)),og(P1,e)}}function V1(t,e,n){t==="focusin"?(Hf(),rs=e,_s=n,rs.attachEvent("onpropertychange",Cg)):t==="focusout"&&Hf()}function b1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ka(_s)}function j1(t,e){if(t==="click")return Ka(e)}function M1(t,e){if(t==="input"||t==="change")return Ka(e)}function L1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zt=typeof Object.is=="function"?Object.is:L1;function ws(t,e){if(zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tu.call(e,i)||!zt(t[i],e[i]))return!1}return!0}function Wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qf(t,e){var n=Wf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wf(n)}}function Ng(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ng(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rg(){for(var t=window,e=la();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=la(t.document)}return e}function ih(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function O1(t){var e=Rg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ng(n.ownerDocument.documentElement,n)){if(r!==null&&ih(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Qf(n,s);var a=Qf(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F1=dn&&"documentMode"in document&&11>=document.documentMode,Or=null,Bu=null,is=null,$u=!1;function Kf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$u||Or==null||Or!==la(r)||(r=Or,"selectionStart"in r&&ih(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),is&&ws(is,r)||(is=r,r=ma(Bu,"onSelect"),0<r.length&&(e=new th("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Or)))}function Ao(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionend:Ao("Transition","TransitionEnd")},eu={},kg={};dn&&(kg=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function Ga(t){if(eu[t])return eu[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kg)return eu[t]=e[n];return t}var Pg=Ga("animationend"),Dg=Ga("animationiteration"),Vg=Ga("animationstart"),bg=Ga("transitionend"),jg=new Map,Gf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(t,e){jg.set(t,e),Tr(e,[t])}for(var tu=0;tu<Gf.length;tu++){var nu=Gf[tu],U1=nu.toLowerCase(),z1=nu[0].toUpperCase()+nu.slice(1);Gn(U1,"on"+z1)}Gn(Pg,"onAnimationEnd");Gn(Dg,"onAnimationIteration");Gn(Vg,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(bg,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function Yf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,U_(r,e,void 0,t),t.currentTarget=null}function Mg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Yf(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Yf(i,l,h),s=u}}}if(ca)throw t=Ou,ca=!1,Ou=null,t}function fe(t,e){var n=e[Ku];n===void 0&&(n=e[Ku]=new Set);var r=t+"__bubble";n.has(r)||(Lg(e,t,2,!1),n.add(r))}function ru(t,e,n){var r=0;e&&(r|=4),Lg(n,t,r,e)}var Co="_reactListening"+Math.random().toString(36).slice(2);function Es(t){if(!t[Co]){t[Co]=!0,qm.forEach(function(n){n!=="selectionchange"&&(B1.has(n)||ru(n,!1,t),ru(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Co]||(e[Co]=!0,ru("selectionchange",!1,e))}}function Lg(t,e,n,r){switch(wg(e)){case 1:var i=n1;break;case 4:i=r1;break;default:i=Zc}n=i.bind(null,e,n,t),i=void 0,!Lu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function iu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ar(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}og(function(){var h=s,m=Gc(n),y=[];e:{var _=jg.get(t);if(_!==void 0){var S=th,D=t;switch(t){case"keypress":if(Go(n)===0)break e;case"keydown":case"keyup":S=v1;break;case"focusin":D="focus",S=Xl;break;case"focusout":D="blur",S=Xl;break;case"beforeblur":case"afterblur":S=Xl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=o1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=E1;break;case Pg:case Dg:case Vg:S=u1;break;case bg:S=T1;break;case"scroll":S=i1;break;case"wheel":S=S1;break;case"copy":case"cut":case"paste":S=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Uf}var N=(e&4)!==0,R=!N&&t==="scroll",T=N?_!==null?_+"Capture":null:_;N=[];for(var x=h,A;x!==null;){A=x;var b=A.stateNode;if(A.tag===5&&b!==null&&(A=b,T!==null&&(b=ms(x,T),b!=null&&N.push(xs(x,b,A)))),R)break;x=x.return}0<N.length&&(_=new S(_,D,null,n,m),y.push({event:_,listeners:N}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",_&&n!==ju&&(D=n.relatedTarget||n.fromElement)&&(ar(D)||D[fn]))break e;if((S||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,S?(D=n.relatedTarget||n.toElement,S=h,D=D?ar(D):null,D!==null&&(R=Ir(D),D!==R||D.tag!==5&&D.tag!==6)&&(D=null)):(S=null,D=h),S!==D)){if(N=Of,b="onMouseLeave",T="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=Uf,b="onPointerLeave",T="onPointerEnter",x="pointer"),R=S==null?_:Ur(S),A=D==null?_:Ur(D),_=new N(b,x+"leave",S,n,m),_.target=R,_.relatedTarget=A,b=null,ar(m)===h&&(N=new N(T,x+"enter",D,n,m),N.target=A,N.relatedTarget=R,b=N),R=b,S&&D)t:{for(N=S,T=D,x=0,A=N;A;A=Pr(A))x++;for(A=0,b=T;b;b=Pr(b))A++;for(;0<x-A;)N=Pr(N),x--;for(;0<A-x;)T=Pr(T),A--;for(;x--;){if(N===T||T!==null&&N===T.alternate)break t;N=Pr(N),T=Pr(T)}N=null}else N=null;S!==null&&Xf(y,_,S,N,!1),D!==null&&R!==null&&Xf(y,R,D,N,!0)}}e:{if(_=h?Ur(h):window,S=_.nodeName&&_.nodeName.toLowerCase(),S==="select"||S==="input"&&_.type==="file")var U=D1;else if($f(_))if(Ag)U=M1;else{U=b1;var F=V1}else(S=_.nodeName)&&S.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(U=j1);if(U&&(U=U(t,h))){Sg(y,U,n,m);break e}F&&F(t,_,h),t==="focusout"&&(F=_._wrapperState)&&F.controlled&&_.type==="number"&&ku(_,"number",_.value)}switch(F=h?Ur(h):window,t){case"focusin":($f(F)||F.contentEditable==="true")&&(Or=F,Bu=h,is=null);break;case"focusout":is=Bu=Or=null;break;case"mousedown":$u=!0;break;case"contextmenu":case"mouseup":case"dragend":$u=!1,Kf(y,n,m);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":Kf(y,n,m)}var w;if(rh)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Lr?Tg(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(xg&&n.locale!=="ko"&&(Lr||p!=="onCompositionStart"?p==="onCompositionEnd"&&Lr&&(w=Eg()):(Rn=m,eh="value"in Rn?Rn.value:Rn.textContent,Lr=!0)),F=ma(h,p),0<F.length&&(p=new Ff(p,t,null,n,m),y.push({event:p,listeners:F}),w?p.data=w:(w=Ig(n),w!==null&&(p.data=w)))),(w=C1?N1(t,n):R1(t,n))&&(h=ma(h,"onBeforeInput"),0<h.length&&(m=new Ff("onBeforeInput","beforeinput",null,n,m),y.push({event:m,listeners:h}),m.data=w))}Mg(y,e)})}function xs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ma(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ms(t,n),s!=null&&r.unshift(xs(t,s,i)),s=ms(t,e),s!=null&&r.push(xs(t,s,i))),t=t.return}return r}function Pr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xf(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=ms(n,s),u!=null&&a.unshift(xs(n,u,l))):i||(u=ms(n,s),u!=null&&a.push(xs(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var $1=/\r\n?/g,q1=/\u0000|\uFFFD/g;function Jf(t){return(typeof t=="string"?t:""+t).replace($1,`
`).replace(q1,"")}function No(t,e,n){if(e=Jf(e),Jf(t)!==e&&n)throw Error(L(425))}function ga(){}var qu=null,Hu=null;function Wu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qu=typeof setTimeout=="function"?setTimeout:void 0,H1=typeof clearTimeout=="function"?clearTimeout:void 0,Zf=typeof Promise=="function"?Promise:void 0,W1=typeof queueMicrotask=="function"?queueMicrotask:typeof Zf<"u"?function(t){return Zf.resolve(null).then(t).catch(Q1)}:Qu;function Q1(t){setTimeout(function(){throw t})}function su(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vs(e)}function jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ep(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),Ht="__reactFiber$"+yi,Ts="__reactProps$"+yi,fn="__reactContainer$"+yi,Ku="__reactEvents$"+yi,K1="__reactListeners$"+yi,G1="__reactHandles$"+yi;function ar(t){var e=t[Ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[Ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ep(t);t!==null;){if(n=t[Ht])return n;t=ep(t)}return e}t=n,n=t.parentNode}return null}function $s(t){return t=t[Ht]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ur(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Ya(t){return t[Ts]||null}var Gu=[],zr=-1;function Yn(t){return{current:t}}function ge(t){0>zr||(t.current=Gu[zr],Gu[zr]=null,zr--)}function he(t,e){zr++,Gu[zr]=t.current,t.current=e}var Hn={},tt=Yn(Hn),ft=Yn(!1),pr=Hn;function ni(t,e){var n=t.type.contextTypes;if(!n)return Hn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pt(t){return t=t.childContextTypes,t!=null}function ya(){ge(ft),ge(tt)}function tp(t,e,n){if(tt.current!==Hn)throw Error(L(168));he(tt,e),he(ft,n)}function Og(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,V_(t)||"Unknown",i));return we({},n,r)}function va(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,pr=tt.current,he(tt,t),he(ft,ft.current),!0}function np(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=Og(t,e,pr),r.__reactInternalMemoizedMergedChildContext=t,ge(ft),ge(tt),he(tt,t)):ge(ft),he(ft,n)}var ln=null,Xa=!1,ou=!1;function Fg(t){ln===null?ln=[t]:ln.push(t)}function Y1(t){Xa=!0,Fg(t)}function Xn(){if(!ou&&ln!==null){ou=!0;var t=0,e=ae;try{var n=ln;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ln=null,Xa=!1}catch(i){throw ln!==null&&(ln=ln.slice(t+1)),cg(Yc,Xn),i}finally{ae=e,ou=!1}}return null}var Br=[],$r=0,_a=null,wa=0,Ct=[],Nt=0,mr=null,un=1,cn="";function ir(t,e){Br[$r++]=wa,Br[$r++]=_a,_a=t,wa=e}function Ug(t,e,n){Ct[Nt++]=un,Ct[Nt++]=cn,Ct[Nt++]=mr,mr=t;var r=un;t=cn;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var s=32-Ot(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,un=1<<32-Ot(e)+i|n<<i|r,cn=s+t}else un=1<<s|n<<i|r,cn=t}function sh(t){t.return!==null&&(ir(t,1),Ug(t,1,0))}function oh(t){for(;t===_a;)_a=Br[--$r],Br[$r]=null,wa=Br[--$r],Br[$r]=null;for(;t===mr;)mr=Ct[--Nt],Ct[Nt]=null,cn=Ct[--Nt],Ct[Nt]=null,un=Ct[--Nt],Ct[Nt]=null}var xt=null,wt=null,ye=!1,Lt=null;function zg(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xt=t,wt=jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xt=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mr!==null?{id:un,overflow:cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xt=t,wt=null,!0):!1;default:return!1}}function Yu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xu(t){if(ye){var e=wt;if(e){var n=e;if(!rp(t,e)){if(Yu(t))throw Error(L(418));e=jn(n.nextSibling);var r=xt;e&&rp(t,e)?zg(r,n):(t.flags=t.flags&-4097|2,ye=!1,xt=t)}}else{if(Yu(t))throw Error(L(418));t.flags=t.flags&-4097|2,ye=!1,xt=t}}}function ip(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xt=t}function Ro(t){if(t!==xt)return!1;if(!ye)return ip(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wu(t.type,t.memoizedProps)),e&&(e=wt)){if(Yu(t))throw Bg(),Error(L(418));for(;e;)zg(t,e),e=jn(e.nextSibling)}if(ip(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=xt?jn(t.stateNode.nextSibling):null;return!0}function Bg(){for(var t=wt;t;)t=jn(t.nextSibling)}function ri(){wt=xt=null,ye=!1}function ah(t){Lt===null?Lt=[t]:Lt.push(t)}var X1=_n.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function ko(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sp(t){var e=t._init;return e(t._payload)}function $g(t){function e(T,x){if(t){var A=T.deletions;A===null?(T.deletions=[x],T.flags|=16):A.push(x)}}function n(T,x){if(!t)return null;for(;x!==null;)e(T,x),x=x.sibling;return null}function r(T,x){for(T=new Map;x!==null;)x.key!==null?T.set(x.key,x):T.set(x.index,x),x=x.sibling;return T}function i(T,x){return T=Fn(T,x),T.index=0,T.sibling=null,T}function s(T,x,A){return T.index=A,t?(A=T.alternate,A!==null?(A=A.index,A<x?(T.flags|=2,x):A):(T.flags|=2,x)):(T.flags|=1048576,x)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,x,A,b){return x===null||x.tag!==6?(x=fu(A,T.mode,b),x.return=T,x):(x=i(x,A),x.return=T,x)}function u(T,x,A,b){var U=A.type;return U===Mr?m(T,x,A.props.children,b,A.key):x!==null&&(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Sn&&sp(U)===x.type)?(b=i(x,A.props),b.ref=Bi(T,x,A),b.return=T,b):(b=na(A.type,A.key,A.props,null,T.mode,b),b.ref=Bi(T,x,A),b.return=T,b)}function h(T,x,A,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=pu(A,T.mode,b),x.return=T,x):(x=i(x,A.children||[]),x.return=T,x)}function m(T,x,A,b,U){return x===null||x.tag!==7?(x=dr(A,T.mode,b,U),x.return=T,x):(x=i(x,A),x.return=T,x)}function y(T,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return x=fu(""+x,T.mode,A),x.return=T,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _o:return A=na(x.type,x.key,x.props,null,T.mode,A),A.ref=Bi(T,null,x),A.return=T,A;case jr:return x=pu(x,T.mode,A),x.return=T,x;case Sn:var b=x._init;return y(T,b(x._payload),A)}if(Qi(x)||Li(x))return x=dr(x,T.mode,A,null),x.return=T,x;ko(T,x)}return null}function _(T,x,A,b){var U=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return U!==null?null:l(T,x,""+A,b);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _o:return A.key===U?u(T,x,A,b):null;case jr:return A.key===U?h(T,x,A,b):null;case Sn:return U=A._init,_(T,x,U(A._payload),b)}if(Qi(A)||Li(A))return U!==null?null:m(T,x,A,b,null);ko(T,A)}return null}function S(T,x,A,b,U){if(typeof b=="string"&&b!==""||typeof b=="number")return T=T.get(A)||null,l(x,T,""+b,U);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _o:return T=T.get(b.key===null?A:b.key)||null,u(x,T,b,U);case jr:return T=T.get(b.key===null?A:b.key)||null,h(x,T,b,U);case Sn:var F=b._init;return S(T,x,A,F(b._payload),U)}if(Qi(b)||Li(b))return T=T.get(A)||null,m(x,T,b,U,null);ko(x,b)}return null}function D(T,x,A,b){for(var U=null,F=null,w=x,p=x=0,v=null;w!==null&&p<A.length;p++){w.index>p?(v=w,w=null):v=w.sibling;var E=_(T,w,A[p],b);if(E===null){w===null&&(w=v);break}t&&w&&E.alternate===null&&e(T,w),x=s(E,x,p),F===null?U=E:F.sibling=E,F=E,w=v}if(p===A.length)return n(T,w),ye&&ir(T,p),U;if(w===null){for(;p<A.length;p++)w=y(T,A[p],b),w!==null&&(x=s(w,x,p),F===null?U=w:F.sibling=w,F=w);return ye&&ir(T,p),U}for(w=r(T,w);p<A.length;p++)v=S(w,T,p,A[p],b),v!==null&&(t&&v.alternate!==null&&w.delete(v.key===null?p:v.key),x=s(v,x,p),F===null?U=v:F.sibling=v,F=v);return t&&w.forEach(function(C){return e(T,C)}),ye&&ir(T,p),U}function N(T,x,A,b){var U=Li(A);if(typeof U!="function")throw Error(L(150));if(A=U.call(A),A==null)throw Error(L(151));for(var F=U=null,w=x,p=x=0,v=null,E=A.next();w!==null&&!E.done;p++,E=A.next()){w.index>p?(v=w,w=null):v=w.sibling;var C=_(T,w,E.value,b);if(C===null){w===null&&(w=v);break}t&&w&&C.alternate===null&&e(T,w),x=s(C,x,p),F===null?U=C:F.sibling=C,F=C,w=v}if(E.done)return n(T,w),ye&&ir(T,p),U;if(w===null){for(;!E.done;p++,E=A.next())E=y(T,E.value,b),E!==null&&(x=s(E,x,p),F===null?U=E:F.sibling=E,F=E);return ye&&ir(T,p),U}for(w=r(T,w);!E.done;p++,E=A.next())E=S(w,T,p,E.value,b),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?p:E.key),x=s(E,x,p),F===null?U=E:F.sibling=E,F=E);return t&&w.forEach(function(k){return e(T,k)}),ye&&ir(T,p),U}function R(T,x,A,b){if(typeof A=="object"&&A!==null&&A.type===Mr&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case _o:e:{for(var U=A.key,F=x;F!==null;){if(F.key===U){if(U=A.type,U===Mr){if(F.tag===7){n(T,F.sibling),x=i(F,A.props.children),x.return=T,T=x;break e}}else if(F.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Sn&&sp(U)===F.type){n(T,F.sibling),x=i(F,A.props),x.ref=Bi(T,F,A),x.return=T,T=x;break e}n(T,F);break}else e(T,F);F=F.sibling}A.type===Mr?(x=dr(A.props.children,T.mode,b,A.key),x.return=T,T=x):(b=na(A.type,A.key,A.props,null,T.mode,b),b.ref=Bi(T,x,A),b.return=T,T=b)}return a(T);case jr:e:{for(F=A.key;x!==null;){if(x.key===F)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){n(T,x.sibling),x=i(x,A.children||[]),x.return=T,T=x;break e}else{n(T,x);break}else e(T,x);x=x.sibling}x=pu(A,T.mode,b),x.return=T,T=x}return a(T);case Sn:return F=A._init,R(T,x,F(A._payload),b)}if(Qi(A))return D(T,x,A,b);if(Li(A))return N(T,x,A,b);ko(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,x!==null&&x.tag===6?(n(T,x.sibling),x=i(x,A),x.return=T,T=x):(n(T,x),x=fu(A,T.mode,b),x.return=T,T=x),a(T)):n(T,x)}return R}var ii=$g(!0),qg=$g(!1),Ea=Yn(null),xa=null,qr=null,lh=null;function uh(){lh=qr=xa=null}function ch(t){var e=Ea.current;ge(Ea),t._currentValue=e}function Ju(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xr(t,e){xa=t,lh=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(lh!==t)if(t={context:t,memoizedValue:e,next:null},qr===null){if(xa===null)throw Error(L(308));qr=t,xa.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return e}var lr=null;function hh(t){lr===null?lr=[t]:lr.push(t)}function Hg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hh(e)):(n.next=i.next,i.next=n),e.interleaved=n,pn(t,r)}function pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var An=!1;function dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pn(t,n)}return i=r.interleaved,i===null?(e.next=e,hh(r)):(e.next=i.next,i.next=e),r.interleaved=e,pn(t,n)}function Yo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xc(t,n)}}function op(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ta(t,e,n,r){var i=t.updateQueue;An=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=u))}if(s!==null){var y=i.baseState;a=0,m=h=u=null,l=s;do{var _=l.lane,S=l.eventTime;if((r&_)===_){m!==null&&(m=m.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var D=t,N=l;switch(_=e,S=n,N.tag){case 1:if(D=N.payload,typeof D=="function"){y=D.call(S,y,_);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=N.payload,_=typeof D=="function"?D.call(S,y,_):D,_==null)break e;y=we({},y,_);break e;case 2:An=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else S={eventTime:S,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=S,u=y):m=m.next=S,a|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(m===null&&(u=y),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yr|=a,t.lanes=a,t.memoizedState=y}}function ap(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var qs={},Qt=Yn(qs),Is=Yn(qs),Ss=Yn(qs);function ur(t){if(t===qs)throw Error(L(174));return t}function fh(t,e){switch(he(Ss,e),he(Is,t),he(Qt,qs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Du(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Du(e,t)}ge(Qt),he(Qt,e)}function si(){ge(Qt),ge(Is),ge(Ss)}function Qg(t){ur(Ss.current);var e=ur(Qt.current),n=Du(e,t.type);e!==n&&(he(Is,t),he(Qt,n))}function ph(t){Is.current===t&&(ge(Qt),ge(Is))}var ve=Yn(0);function Ia(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var au=[];function mh(){for(var t=0;t<au.length;t++)au[t]._workInProgressVersionPrimary=null;au.length=0}var Xo=_n.ReactCurrentDispatcher,lu=_n.ReactCurrentBatchConfig,gr=0,_e=null,De=null,je=null,Sa=!1,ss=!1,As=0,J1=0;function Ge(){throw Error(L(321))}function gh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zt(t[n],e[n]))return!1;return!0}function yh(t,e,n,r,i,s){if(gr=s,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xo.current=t===null||t.memoizedState===null?nw:rw,t=n(r,i),ss){s=0;do{if(ss=!1,As=0,25<=s)throw Error(L(301));s+=1,je=De=null,e.updateQueue=null,Xo.current=iw,t=n(r,i)}while(ss)}if(Xo.current=Aa,e=De!==null&&De.next!==null,gr=0,je=De=_e=null,Sa=!1,e)throw Error(L(300));return t}function vh(){var t=As!==0;return As=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?_e.memoizedState=je=t:je=je.next=t,je}function Dt(){if(De===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=je===null?_e.memoizedState:je.next;if(e!==null)je=e,De=t;else{if(t===null)throw Error(L(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},je===null?_e.memoizedState=je=t:je=je.next=t}return je}function Cs(t,e){return typeof e=="function"?e(t):e}function uu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=De,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var m=h.lane;if((gr&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,_e.lanes|=m,yr|=m}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,zt(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,_e.lanes|=s,yr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);zt(s,e.memoizedState)||(dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Kg(){}function Gg(t,e){var n=_e,r=Dt(),i=e(),s=!zt(r.memoizedState,i);if(s&&(r.memoizedState=i,dt=!0),r=r.queue,_h(Jg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,Ns(9,Xg.bind(null,n,r,i,e),void 0,null),Me===null)throw Error(L(349));gr&30||Yg(n,e,i)}return i}function Yg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xg(t,e,n,r){e.value=n,e.getSnapshot=r,Zg(e)&&ey(t)}function Jg(t,e,n){return n(function(){Zg(e)&&ey(t)})}function Zg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zt(t,n)}catch{return!0}}function ey(t){var e=pn(t,1);e!==null&&Ft(e,t,1,-1)}function lp(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},e.queue=t,t=t.dispatch=tw.bind(null,_e,t),[e.memoizedState,t]}function Ns(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ty(){return Dt().memoizedState}function Jo(t,e,n,r){var i=qt();_e.flags|=t,i.memoizedState=Ns(1|e,n,void 0,r===void 0?null:r)}function Ja(t,e,n,r){var i=Dt();r=r===void 0?null:r;var s=void 0;if(De!==null){var a=De.memoizedState;if(s=a.destroy,r!==null&&gh(r,a.deps)){i.memoizedState=Ns(e,n,s,r);return}}_e.flags|=t,i.memoizedState=Ns(1|e,n,s,r)}function up(t,e){return Jo(8390656,8,t,e)}function _h(t,e){return Ja(2048,8,t,e)}function ny(t,e){return Ja(4,2,t,e)}function ry(t,e){return Ja(4,4,t,e)}function iy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sy(t,e,n){return n=n!=null?n.concat([t]):null,Ja(4,4,iy.bind(null,e,t),n)}function wh(){}function oy(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ay(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ly(t,e,n){return gr&21?(zt(n,e)||(n=fg(),_e.lanes|=n,yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function Z1(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=lu.transition;lu.transition={};try{t(!1),e()}finally{ae=n,lu.transition=r}}function uy(){return Dt().memoizedState}function ew(t,e,n){var r=On(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cy(t))hy(e,n);else if(n=Hg(t,e,n,r),n!==null){var i=ot();Ft(n,t,r,i),dy(n,e,r)}}function tw(t,e,n){var r=On(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cy(t))hy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,zt(l,a)){var u=e.interleaved;u===null?(i.next=i,hh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Hg(t,e,i,r),n!==null&&(i=ot(),Ft(n,t,r,i),dy(n,e,r))}}function cy(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function hy(t,e){ss=Sa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xc(t,n)}}var Aa={readContext:Pt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},nw={readContext:Pt,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:up,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jo(4194308,4,iy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jo(4,2,t,e)},useMemo:function(t,e){var n=qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ew.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:lp,useDebugValue:wh,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=lp(!1),e=t[0];return t=Z1.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,i=qt();if(ye){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Me===null)throw Error(L(349));gr&30||Yg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,up(Jg.bind(null,r,s,t),[t]),r.flags|=2048,Ns(9,Xg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qt(),e=Me.identifierPrefix;if(ye){var n=cn,r=un;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=As++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=J1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rw={readContext:Pt,useCallback:oy,useContext:Pt,useEffect:_h,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:ay,useReducer:uu,useRef:ty,useState:function(){return uu(Cs)},useDebugValue:wh,useDeferredValue:function(t){var e=Dt();return ly(e,De.memoizedState,t)},useTransition:function(){var t=uu(Cs)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Kg,useSyncExternalStore:Gg,useId:uy,unstable_isNewReconciler:!1},iw={readContext:Pt,useCallback:oy,useContext:Pt,useEffect:_h,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:ay,useReducer:cu,useRef:ty,useState:function(){return cu(Cs)},useDebugValue:wh,useDeferredValue:function(t){var e=Dt();return De===null?e.memoizedState=t:ly(e,De.memoizedState,t)},useTransition:function(){var t=cu(Cs)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:Kg,useSyncExternalStore:Gg,useId:uy,unstable_isNewReconciler:!1};function jt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Za={isMounted:function(t){return(t=t._reactInternals)?Ir(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ot(),i=On(t),s=hn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mn(t,s,i),e!==null&&(Ft(e,t,i,r),Yo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ot(),i=On(t),s=hn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mn(t,s,i),e!==null&&(Ft(e,t,i,r),Yo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),r=On(t),i=hn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mn(t,i,r),e!==null&&(Ft(e,t,r,n),Yo(e,t,r))}};function cp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!ws(n,r)||!ws(i,s):!0}function fy(t,e,n){var r=!1,i=Hn,s=e.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(i=pt(e)?pr:tt.current,r=e.contextTypes,s=(r=r!=null)?ni(t,i):Hn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Za,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function hp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Za.enqueueReplaceState(e,e.state,null)}function ec(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},dh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pt(s):(s=pt(e)?pr:tt.current,i.context=ni(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Za.enqueueReplaceState(i,i.state,null),Ta(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oi(t,e){try{var n="",r=e;do n+=D_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sw=typeof WeakMap=="function"?WeakMap:Map;function py(t,e,n){n=hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Na||(Na=!0,hc=r),tc(t,e)},n}function my(t,e,n){n=hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tc(t,e),typeof r!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function dp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_w.bind(null,t,e,n),e.then(t,t))}function fp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hn(-1,1),e.tag=2,Mn(n,e,1))),n.lanes|=1),t)}var ow=_n.ReactCurrentOwner,dt=!1;function it(t,e,n,r){e.child=t===null?qg(e,null,n,r):ii(e,t.child,n,r)}function mp(t,e,n,r,i){n=n.render;var s=e.ref;return Xr(e,i),r=yh(t,e,n,r,s,i),n=vh(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(ye&&n&&sh(e),e.flags|=1,it(t,e,r,i),e.child)}function gp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Nh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,gy(t,e,s,r,i)):(t=na(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:ws,n(a,r)&&t.ref===e.ref)return mn(t,e,i)}return e.flags|=1,t=Fn(s,r),t.ref=e.ref,t.return=e,e.child=t}function gy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ws(s,r)&&t.ref===e.ref)if(dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,mn(t,e,i)}return nc(t,e,n,r,i)}function yy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Wr,_t),_t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(Wr,_t),_t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(Wr,_t),_t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,he(Wr,_t),_t|=r;return it(t,e,i,n),e.child}function vy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nc(t,e,n,r,i){var s=pt(n)?pr:tt.current;return s=ni(e,s),Xr(e,i),n=yh(t,e,n,r,s,i),r=vh(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(ye&&r&&sh(e),e.flags|=1,it(t,e,n,i),e.child)}function yp(t,e,n,r,i){if(pt(n)){var s=!0;va(e)}else s=!1;if(Xr(e,i),e.stateNode===null)Zo(t,e),fy(e,n,r),ec(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Pt(h):(h=pt(n)?pr:tt.current,h=ni(e,h));var m=n.getDerivedStateFromProps,y=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&hp(e,a,r,h),An=!1;var _=e.memoizedState;a.state=_,Ta(e,r,a,i),u=e.memoizedState,l!==r||_!==u||ft.current||An?(typeof m=="function"&&(Zu(e,n,m,r),u=e.memoizedState),(l=An||cp(e,n,l,r,_,u,h))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Wg(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:jt(e.type,l),a.props=h,y=e.pendingProps,_=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pt(u):(u=pt(n)?pr:tt.current,u=ni(e,u));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||_!==u)&&hp(e,a,r,u),An=!1,_=e.memoizedState,a.state=_,Ta(e,r,a,i);var D=e.memoizedState;l!==y||_!==D||ft.current||An?(typeof S=="function"&&(Zu(e,n,S,r),D=e.memoizedState),(h=An||cp(e,n,h,r,_,D,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,D,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,D,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=D),a.props=r,a.state=D,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return rc(t,e,n,r,s,i)}function rc(t,e,n,r,i,s){vy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&np(e,n,!1),mn(t,e,s);r=e.stateNode,ow.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ii(e,t.child,null,s),e.child=ii(e,null,l,s)):it(t,e,l,s),e.memoizedState=r.state,i&&np(e,n,!0),e.child}function _y(t){var e=t.stateNode;e.pendingContext?tp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tp(t,e.context,!1),fh(t,e.containerInfo)}function vp(t,e,n,r,i){return ri(),ah(i),e.flags|=256,it(t,e,n,r),e.child}var ic={dehydrated:null,treeContext:null,retryLane:0};function sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function wy(t,e,n){var r=e.pendingProps,i=ve.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(ve,i&1),t===null)return Xu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=nl(a,r,0,null),t=dr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sc(n),e.memoizedState=ic,t):Eh(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return aw(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Fn(l,s):(s=dr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?sc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=ic,r}return s=t.child,t=s.sibling,r=Fn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Eh(t,e){return e=nl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Po(t,e,n,r){return r!==null&&ah(r),ii(e,t.child,null,n),t=Eh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aw(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=hu(Error(L(422))),Po(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nl({mode:"visible",children:r.children},i,0,null),s=dr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ii(e,t.child,null,a),e.child.memoizedState=sc(a),e.memoizedState=ic,s);if(!(e.mode&1))return Po(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(L(419)),r=hu(s,r,void 0),Po(t,e,a,r)}if(l=(a&t.childLanes)!==0,dt||l){if(r=Me,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pn(t,i),Ft(r,t,i,-1))}return Ch(),r=hu(Error(L(421))),Po(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ww.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wt=jn(i.nextSibling),xt=e,ye=!0,Lt=null,t!==null&&(Ct[Nt++]=un,Ct[Nt++]=cn,Ct[Nt++]=mr,un=t.id,cn=t.overflow,mr=e),e=Eh(e,r.children),e.flags|=4096,e)}function _p(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ju(t.return,e,n)}function du(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ey(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(it(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_p(t,n,e);else if(t.tag===19)_p(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ia(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),du(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ia(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}du(e,!0,n,null,s);break;case"together":du(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lw(t,e,n){switch(e.tag){case 3:_y(e),ri();break;case 5:Qg(e);break;case 1:pt(e.type)&&va(e);break;case 4:fh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(Ea,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?wy(t,e,n):(he(ve,ve.current&1),t=mn(t,e,n),t!==null?t.sibling:null);he(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ey(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,yy(t,e,n)}return mn(t,e,n)}var xy,oc,Ty,Iy;xy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oc=function(){};Ty=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ur(Qt.current);var s=null;switch(n){case"input":i=Nu(t,i),r=Nu(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=Pu(t,i),r=Pu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ga)}Vu(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(fs.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(fs.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&fe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Iy=function(t,e,n,r){n!==r&&(e.flags|=4)};function $i(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uw(t,e,n){var r=e.pendingProps;switch(oh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(e),null;case 1:return pt(e.type)&&ya(),Ye(e),null;case 3:return r=e.stateNode,si(),ge(ft),ge(tt),mh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ro(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lt!==null&&(pc(Lt),Lt=null))),oc(t,e),Ye(e),null;case 5:ph(e);var i=ur(Ss.current);if(n=e.type,t!==null&&e.stateNode!=null)Ty(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Ye(e),null}if(t=ur(Qt.current),Ro(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ht]=e,r[Ts]=s,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(i=0;i<Gi.length;i++)fe(Gi[i],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Nf(r,s),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fe("invalid",r);break;case"textarea":kf(r,s),fe("invalid",r)}Vu(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&No(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&No(r.textContent,l,t),i=["children",""+l]):fs.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&fe("scroll",r)}switch(n){case"input":wo(r),Rf(r,s,!0);break;case"textarea":wo(r),Pf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ga)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Ht]=e,t[Ts]=r,xy(t,e,!1,!1),e.stateNode=t;e:{switch(a=bu(n,r),n){case"dialog":fe("cancel",t),fe("close",t),i=r;break;case"iframe":case"object":case"embed":fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gi.length;i++)fe(Gi[i],t);i=r;break;case"source":fe("error",t),i=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),i=r;break;case"details":fe("toggle",t),i=r;break;case"input":Nf(t,r),i=Nu(t,r),fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),fe("invalid",t);break;case"textarea":kf(t,r),i=Pu(t,r),fe("invalid",t);break;default:i=r}Vu(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?tg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Zm(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ps(t,u):typeof u=="number"&&ps(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&fe("scroll",t):u!=null&&Hc(t,s,u,a))}switch(n){case"input":wo(t),Rf(t,r,!1);break;case"textarea":wo(t),Pf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ga)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ye(e),null;case 6:if(t&&e.stateNode!=null)Iy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=ur(Ss.current),ur(Qt.current),Ro(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ht]=e,(s=r.nodeValue!==n)&&(t=xt,t!==null))switch(t.tag){case 3:No(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ht]=e,e.stateNode=r}return Ye(e),null;case 13:if(ge(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&wt!==null&&e.mode&1&&!(e.flags&128))Bg(),ri(),e.flags|=98560,s=!1;else if(s=Ro(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[Ht]=e}else ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ye(e),s=!1}else Lt!==null&&(pc(Lt),Lt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Ve===0&&(Ve=3):Ch())),e.updateQueue!==null&&(e.flags|=4),Ye(e),null);case 4:return si(),oc(t,e),t===null&&Es(e.stateNode.containerInfo),Ye(e),null;case 10:return ch(e.type._context),Ye(e),null;case 17:return pt(e.type)&&ya(),Ye(e),null;case 19:if(ge(ve),s=e.memoizedState,s===null)return Ye(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)$i(s,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ia(t),a!==null){for(e.flags|=128,$i(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(ve,ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ae()>ai&&(e.flags|=128,r=!0,$i(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ia(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$i(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ye)return Ye(e),null}else 2*Ae()-s.renderingStartTime>ai&&n!==1073741824&&(e.flags|=128,r=!0,$i(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ae(),e.sibling=null,n=ve.current,he(ve,r?n&1|2:n&1),e):(Ye(e),null);case 22:case 23:return Ah(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_t&1073741824&&(Ye(e),e.subtreeFlags&6&&(e.flags|=8192)):Ye(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function cw(t,e){switch(oh(e),e.tag){case 1:return pt(e.type)&&ya(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return si(),ge(ft),ge(tt),mh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ph(e),null;case 13:if(ge(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(ve),null;case 4:return si(),null;case 10:return ch(e.type._context),null;case 22:case 23:return Ah(),null;case 24:return null;default:return null}}var Do=!1,Ze=!1,hw=typeof WeakSet=="function"?WeakSet:Set,q=null;function Hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function ac(t,e,n){try{n()}catch(r){Te(t,e,r)}}var wp=!1;function dw(t,e){if(qu=fa,t=Rg(),ih(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,m=0,y=t,_=null;t:for(;;){for(var S;y!==n||i!==0&&y.nodeType!==3||(l=a+i),y!==s||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(S=y.firstChild)!==null;)_=y,y=S;for(;;){if(y===t)break t;if(_===n&&++h===i&&(l=a),_===s&&++m===r&&(u=a),(S=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hu={focusedElem:t,selectionRange:n},fa=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var N=D.memoizedProps,R=D.memoizedState,T=e.stateNode,x=T.getSnapshotBeforeUpdate(e.elementType===e.type?N:jt(e.type,N),R);T.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(b){Te(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return D=wp,wp=!1,D}function os(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ac(e,n,s)}i=i.next}while(i!==r)}}function el(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sy(t){var e=t.alternate;e!==null&&(t.alternate=null,Sy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ht],delete e[Ts],delete e[Ku],delete e[K1],delete e[G1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ay(t){return t.tag===5||t.tag===3||t.tag===4}function Ep(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ay(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ga));else if(r!==4&&(t=t.child,t!==null))for(uc(t,e,n),t=t.sibling;t!==null;)uc(t,e,n),t=t.sibling}function cc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cc(t,e,n),t=t.sibling;t!==null;)cc(t,e,n),t=t.sibling}var Fe=null,Mt=!1;function Tn(t,e,n){for(n=n.child;n!==null;)Cy(t,e,n),n=n.sibling}function Cy(t,e,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Wa,n)}catch{}switch(n.tag){case 5:Ze||Hr(n,e);case 6:var r=Fe,i=Mt;Fe=null,Tn(t,e,n),Fe=r,Mt=i,Fe!==null&&(Mt?(t=Fe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(Mt?(t=Fe,n=n.stateNode,t.nodeType===8?su(t.parentNode,n):t.nodeType===1&&su(t,n),vs(t)):su(Fe,n.stateNode));break;case 4:r=Fe,i=Mt,Fe=n.stateNode.containerInfo,Mt=!0,Tn(t,e,n),Fe=r,Mt=i;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&ac(n,e,a),i=i.next}while(i!==r)}Tn(t,e,n);break;case 1:if(!Ze&&(Hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,Tn(t,e,n),Ze=r):Tn(t,e,n);break;default:Tn(t,e,n)}}function xp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hw),e.forEach(function(r){var i=Ew.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Fe=l.stateNode,Mt=!1;break e;case 3:Fe=l.stateNode.containerInfo,Mt=!0;break e;case 4:Fe=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(Fe===null)throw Error(L(160));Cy(s,a,i),Fe=null,Mt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Te(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ny(e,t),e=e.sibling}function Ny(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bt(e,t),$t(t),r&4){try{os(3,t,t.return),el(3,t)}catch(N){Te(t,t.return,N)}try{os(5,t,t.return)}catch(N){Te(t,t.return,N)}}break;case 1:bt(e,t),$t(t),r&512&&n!==null&&Hr(n,n.return);break;case 5:if(bt(e,t),$t(t),r&512&&n!==null&&Hr(n,n.return),t.flags&32){var i=t.stateNode;try{ps(i,"")}catch(N){Te(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ym(i,s),bu(l,a);var h=bu(l,s);for(a=0;a<u.length;a+=2){var m=u[a],y=u[a+1];m==="style"?tg(i,y):m==="dangerouslySetInnerHTML"?Zm(i,y):m==="children"?ps(i,y):Hc(i,m,y,h)}switch(l){case"input":Ru(i,s);break;case"textarea":Xm(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?Qr(i,!!s.multiple,S,!1):_!==!!s.multiple&&(s.defaultValue!=null?Qr(i,!!s.multiple,s.defaultValue,!0):Qr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ts]=s}catch(N){Te(t,t.return,N)}}break;case 6:if(bt(e,t),$t(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Te(t,t.return,N)}}break;case 3:if(bt(e,t),$t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vs(e.containerInfo)}catch(N){Te(t,t.return,N)}break;case 4:bt(e,t),$t(t);break;case 13:bt(e,t),$t(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ih=Ae())),r&4&&xp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(h=Ze)||m,bt(e,t),Ze=h):bt(e,t),$t(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(q=t,m=t.child;m!==null;){for(y=q=m;q!==null;){switch(_=q,S=_.child,_.tag){case 0:case 11:case 14:case 15:os(4,_,_.return);break;case 1:Hr(_,_.return);var D=_.stateNode;if(typeof D.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(N){Te(r,n,N)}}break;case 5:Hr(_,_.return);break;case 22:if(_.memoizedState!==null){Ip(y);continue}}S!==null?(S.return=_,q=S):Ip(y)}m=m.sibling}e:for(m=null,y=t;;){if(y.tag===5){if(m===null){m=y;try{i=y.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=eg("display",a))}catch(N){Te(t,t.return,N)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(N){Te(t,t.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:bt(e,t),$t(t),r&4&&xp(t);break;case 21:break;default:bt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ay(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ps(i,""),r.flags&=-33);var s=Ep(t);cc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Ep(t);uc(t,l,a);break;default:throw Error(L(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fw(t,e,n){q=t,Ry(t)}function Ry(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Do;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ze;l=Do;var h=Ze;if(Do=a,(Ze=u)&&!h)for(q=i;q!==null;)a=q,u=a.child,a.tag===22&&a.memoizedState!==null?Sp(i):u!==null?(u.return=a,q=u):Sp(i);for(;s!==null;)q=s,Ry(s),s=s.sibling;q=i,Do=l,Ze=h}Tp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Tp(t)}}function Tp(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||el(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ap(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ap(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&vs(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Ze||e.flags&512&&lc(e)}catch(_){Te(e,e.return,_)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Ip(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Sp(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{el(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Te(e,i,u)}}var s=e.return;try{lc(e)}catch(u){Te(e,s,u)}break;case 5:var a=e.return;try{lc(e)}catch(u){Te(e,a,u)}}}catch(u){Te(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var pw=Math.ceil,Ca=_n.ReactCurrentDispatcher,xh=_n.ReactCurrentOwner,kt=_n.ReactCurrentBatchConfig,re=0,Me=null,ke=null,Be=0,_t=0,Wr=Yn(0),Ve=0,Rs=null,yr=0,tl=0,Th=0,as=null,ct=null,Ih=0,ai=1/0,an=null,Na=!1,hc=null,Ln=null,Vo=!1,kn=null,Ra=0,ls=0,dc=null,ea=-1,ta=0;function ot(){return re&6?Ae():ea!==-1?ea:ea=Ae()}function On(t){return t.mode&1?re&2&&Be!==0?Be&-Be:X1.transition!==null?(ta===0&&(ta=fg()),ta):(t=ae,t!==0||(t=window.event,t=t===void 0?16:wg(t.type)),t):1}function Ft(t,e,n,r){if(50<ls)throw ls=0,dc=null,Error(L(185));zs(t,n,r),(!(re&2)||t!==Me)&&(t===Me&&(!(re&2)&&(tl|=n),Ve===4&&Nn(t,Be)),mt(t,r),n===1&&re===0&&!(e.mode&1)&&(ai=Ae()+500,Xa&&Xn()))}function mt(t,e){var n=t.callbackNode;X_(t,e);var r=da(t,t===Me?Be:0);if(r===0)n!==null&&bf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bf(n),e===1)t.tag===0?Y1(Ap.bind(null,t)):Fg(Ap.bind(null,t)),W1(function(){!(re&6)&&Xn()}),n=null;else{switch(pg(r)){case 1:n=Yc;break;case 4:n=hg;break;case 16:n=ha;break;case 536870912:n=dg;break;default:n=ha}n=Ly(n,ky.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ky(t,e){if(ea=-1,ta=0,re&6)throw Error(L(327));var n=t.callbackNode;if(Jr()&&t.callbackNode!==n)return null;var r=da(t,t===Me?Be:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ka(t,r);else{e=r;var i=re;re|=2;var s=Dy();(Me!==t||Be!==e)&&(an=null,ai=Ae()+500,hr(t,e));do try{yw();break}catch(l){Py(t,l)}while(!0);uh(),Ca.current=s,re=i,ke!==null?e=0:(Me=null,Be=0,e=Ve)}if(e!==0){if(e===2&&(i=Fu(t),i!==0&&(r=i,e=fc(t,i))),e===1)throw n=Rs,hr(t,0),Nn(t,r),mt(t,Ae()),n;if(e===6)Nn(t,r);else{if(i=t.current.alternate,!(r&30)&&!mw(i)&&(e=ka(t,r),e===2&&(s=Fu(t),s!==0&&(r=s,e=fc(t,s))),e===1))throw n=Rs,hr(t,0),Nn(t,r),mt(t,Ae()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:sr(t,ct,an);break;case 3:if(Nn(t,r),(r&130023424)===r&&(e=Ih+500-Ae(),10<e)){if(da(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Qu(sr.bind(null,t,ct,an),e);break}sr(t,ct,an);break;case 4:if(Nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ot(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pw(r/1960))-r,10<r){t.timeoutHandle=Qu(sr.bind(null,t,ct,an),r);break}sr(t,ct,an);break;case 5:sr(t,ct,an);break;default:throw Error(L(329))}}}return mt(t,Ae()),t.callbackNode===n?ky.bind(null,t):null}function fc(t,e){var n=as;return t.current.memoizedState.isDehydrated&&(hr(t,e).flags|=256),t=ka(t,e),t!==2&&(e=ct,ct=n,e!==null&&pc(e)),t}function pc(t){ct===null?ct=t:ct.push.apply(ct,t)}function mw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nn(t,e){for(e&=~Th,e&=~tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ot(e),r=1<<n;t[n]=-1,e&=~r}}function Ap(t){if(re&6)throw Error(L(327));Jr();var e=da(t,0);if(!(e&1))return mt(t,Ae()),null;var n=ka(t,e);if(t.tag!==0&&n===2){var r=Fu(t);r!==0&&(e=r,n=fc(t,r))}if(n===1)throw n=Rs,hr(t,0),Nn(t,e),mt(t,Ae()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sr(t,ct,an),mt(t,Ae()),null}function Sh(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(ai=Ae()+500,Xa&&Xn())}}function vr(t){kn!==null&&kn.tag===0&&!(re&6)&&Jr();var e=re;re|=1;var n=kt.transition,r=ae;try{if(kt.transition=null,ae=1,t)return t()}finally{ae=r,kt.transition=n,re=e,!(re&6)&&Xn()}}function Ah(){_t=Wr.current,ge(Wr)}function hr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,H1(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(oh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ya();break;case 3:si(),ge(ft),ge(tt),mh();break;case 5:ph(r);break;case 4:si();break;case 13:ge(ve);break;case 19:ge(ve);break;case 10:ch(r.type._context);break;case 22:case 23:Ah()}n=n.return}if(Me=t,ke=t=Fn(t.current,null),Be=_t=e,Ve=0,Rs=null,Th=tl=yr=0,ct=as=null,lr!==null){for(e=0;e<lr.length;e++)if(n=lr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}lr=null}return t}function Py(t,e){do{var n=ke;try{if(uh(),Xo.current=Aa,Sa){for(var r=_e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sa=!1}if(gr=0,je=De=_e=null,ss=!1,As=0,xh.current=null,n===null||n.return===null){Ve=1,Rs=e,ke=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=Be,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=l,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=fp(a);if(S!==null){S.flags&=-257,pp(S,a,l,s,e),S.mode&1&&dp(s,h,e),e=S,u=h;var D=e.updateQueue;if(D===null){var N=new Set;N.add(u),e.updateQueue=N}else D.add(u);break e}else{if(!(e&1)){dp(s,h,e),Ch();break e}u=Error(L(426))}}else if(ye&&l.mode&1){var R=fp(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),pp(R,a,l,s,e),ah(oi(u,l));break e}}s=u=oi(u,l),Ve!==4&&(Ve=2),as===null?as=[s]:as.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=py(s,u,e);op(s,T);break e;case 1:l=u;var x=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ln===null||!Ln.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=my(s,l,e);op(s,b);break e}}s=s.return}while(s!==null)}by(n)}catch(U){e=U,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function Dy(){var t=Ca.current;return Ca.current=Aa,t===null?Aa:t}function Ch(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Me===null||!(yr&268435455)&&!(tl&268435455)||Nn(Me,Be)}function ka(t,e){var n=re;re|=2;var r=Dy();(Me!==t||Be!==e)&&(an=null,hr(t,e));do try{gw();break}catch(i){Py(t,i)}while(!0);if(uh(),re=n,Ca.current=r,ke!==null)throw Error(L(261));return Me=null,Be=0,Ve}function gw(){for(;ke!==null;)Vy(ke)}function yw(){for(;ke!==null&&!B_();)Vy(ke)}function Vy(t){var e=My(t.alternate,t,_t);t.memoizedProps=t.pendingProps,e===null?by(t):ke=e,xh.current=null}function by(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cw(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,ke=null;return}}else if(n=uw(n,e,_t),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Ve===0&&(Ve=5)}function sr(t,e,n){var r=ae,i=kt.transition;try{kt.transition=null,ae=1,vw(t,e,n,r)}finally{kt.transition=i,ae=r}return null}function vw(t,e,n,r){do Jr();while(kn!==null);if(re&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(J_(t,s),t===Me&&(ke=Me=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vo||(Vo=!0,Ly(ha,function(){return Jr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kt.transition,kt.transition=null;var a=ae;ae=1;var l=re;re|=4,xh.current=null,dw(t,n),Ny(n,t),O1(Hu),fa=!!qu,Hu=qu=null,t.current=n,fw(n),$_(),re=l,ae=a,kt.transition=s}else t.current=n;if(Vo&&(Vo=!1,kn=t,Ra=i),s=t.pendingLanes,s===0&&(Ln=null),W_(n.stateNode),mt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Na)throw Na=!1,t=hc,hc=null,t;return Ra&1&&t.tag!==0&&Jr(),s=t.pendingLanes,s&1?t===dc?ls++:(ls=0,dc=t):ls=0,Xn(),null}function Jr(){if(kn!==null){var t=pg(Ra),e=kt.transition,n=ae;try{if(kt.transition=null,ae=16>t?16:t,kn===null)var r=!1;else{if(t=kn,kn=null,Ra=0,re&6)throw Error(L(331));var i=re;for(re|=4,q=t.current;q!==null;){var s=q,a=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var m=q;switch(m.tag){case 0:case 11:case 15:os(8,m,s)}var y=m.child;if(y!==null)y.return=m,q=y;else for(;q!==null;){m=q;var _=m.sibling,S=m.return;if(Sy(m),m===h){q=null;break}if(_!==null){_.return=S,q=_;break}q=S}}}var D=s.alternate;if(D!==null){var N=D.child;if(N!==null){D.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,q=a;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:os(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,q=T;break e}q=s.return}}var x=t.current;for(q=x;q!==null;){a=q;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,q=A;else e:for(a=x;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(U){Te(l,l.return,U)}if(l===a){q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,q=b;break e}q=l.return}}if(re=i,Xn(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Wa,t)}catch{}r=!0}return r}finally{ae=n,kt.transition=e}}return!1}function Cp(t,e,n){e=oi(n,e),e=py(t,e,1),t=Mn(t,e,1),e=ot(),t!==null&&(zs(t,1,e),mt(t,e))}function Te(t,e,n){if(t.tag===3)Cp(t,t,n);else for(;e!==null;){if(e.tag===3){Cp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ln===null||!Ln.has(r))){t=oi(n,t),t=my(e,t,1),e=Mn(e,t,1),t=ot(),e!==null&&(zs(e,1,t),mt(e,t));break}}e=e.return}}function _w(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&(Be&n)===n&&(Ve===4||Ve===3&&(Be&130023424)===Be&&500>Ae()-Ih?hr(t,0):Th|=n),mt(t,e)}function jy(t,e){e===0&&(t.mode&1?(e=To,To<<=1,!(To&130023424)&&(To=4194304)):e=1);var n=ot();t=pn(t,e),t!==null&&(zs(t,e,n),mt(t,n))}function ww(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jy(t,n)}function Ew(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),jy(t,n)}var My;My=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,lw(t,e,n);dt=!!(t.flags&131072)}else dt=!1,ye&&e.flags&1048576&&Ug(e,wa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zo(t,e),t=e.pendingProps;var i=ni(e,tt.current);Xr(e,n),i=yh(null,e,r,t,i,n);var s=vh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pt(r)?(s=!0,va(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dh(e),i.updater=Za,e.stateNode=i,i._reactInternals=e,ec(e,r,t,n),e=rc(null,e,r,!0,s,n)):(e.tag=0,ye&&s&&sh(e),it(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Tw(r),t=jt(r,t),i){case 0:e=nc(null,e,r,t,n);break e;case 1:e=yp(null,e,r,t,n);break e;case 11:e=mp(null,e,r,t,n);break e;case 14:e=gp(null,e,r,jt(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),nc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),yp(t,e,r,i,n);case 3:e:{if(_y(e),t===null)throw Error(L(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Wg(t,e),Ta(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oi(Error(L(423)),e),e=vp(t,e,r,n,i);break e}else if(r!==i){i=oi(Error(L(424)),e),e=vp(t,e,r,n,i);break e}else for(wt=jn(e.stateNode.containerInfo.firstChild),xt=e,ye=!0,Lt=null,n=qg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),r===i){e=mn(t,e,n);break e}it(t,e,r,n)}e=e.child}return e;case 5:return Qg(e),t===null&&Xu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Wu(r,i)?a=null:s!==null&&Wu(r,s)&&(e.flags|=32),vy(t,e),it(t,e,a,n),e.child;case 6:return t===null&&Xu(e),null;case 13:return wy(t,e,n);case 4:return fh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ii(e,null,r,n):it(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),mp(t,e,r,i,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,he(Ea,r._currentValue),r._currentValue=a,s!==null)if(zt(s.value,a)){if(s.children===i.children&&!ft.current){e=mn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=hn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ju(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(L(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ju(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}it(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xr(e,n),i=Pt(i),r=r(i),e.flags|=1,it(t,e,r,n),e.child;case 14:return r=e.type,i=jt(r,e.pendingProps),i=jt(r.type,i),gp(t,e,r,i,n);case 15:return gy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Zo(t,e),e.tag=1,pt(r)?(t=!0,va(e)):t=!1,Xr(e,n),fy(e,r,i),ec(e,r,i,n),rc(null,e,r,!0,t,n);case 19:return Ey(t,e,n);case 22:return yy(t,e,n)}throw Error(L(156,e.tag))};function Ly(t,e){return cg(t,e)}function xw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,r){return new xw(t,e,n,r)}function Nh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tw(t){if(typeof t=="function")return Nh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qc)return 11;if(t===Kc)return 14}return 2}function Fn(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function na(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Nh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Mr:return dr(n.children,i,s,e);case Wc:a=8,i|=8;break;case Iu:return t=Rt(12,n,e,i|2),t.elementType=Iu,t.lanes=s,t;case Su:return t=Rt(13,n,e,i),t.elementType=Su,t.lanes=s,t;case Au:return t=Rt(19,n,e,i),t.elementType=Au,t.lanes=s,t;case Qm:return nl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hm:a=10;break e;case Wm:a=9;break e;case Qc:a=11;break e;case Kc:a=14;break e;case Sn:a=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Rt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function dr(t,e,n,r){return t=Rt(7,t,r,e),t.lanes=n,t}function nl(t,e,n,r){return t=Rt(22,t,r,e),t.elementType=Qm,t.lanes=n,t.stateNode={isHidden:!1},t}function fu(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function pu(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Iw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rh(t,e,n,r,i,s,a,l,u){return t=new Iw(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dh(s),t}function Sw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Oy(t){if(!t)return Hn;t=t._reactInternals;e:{if(Ir(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(pt(n))return Og(t,n,e)}return e}function Fy(t,e,n,r,i,s,a,l,u){return t=Rh(n,r,!0,t,i,s,a,l,u),t.context=Oy(null),n=t.current,r=ot(),i=On(n),s=hn(r,i),s.callback=e??null,Mn(n,s,i),t.current.lanes=i,zs(t,i,r),mt(t,r),t}function rl(t,e,n,r){var i=e.current,s=ot(),a=On(i);return n=Oy(n),e.context===null?e.context=n:e.pendingContext=n,e=hn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mn(i,e,a),t!==null&&(Ft(t,i,a,s),Yo(t,i,a)),a}function Pa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Np(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kh(t,e){Np(t,e),(t=t.alternate)&&Np(t,e)}function Aw(){return null}var Uy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ph(t){this._internalRoot=t}il.prototype.render=Ph.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));rl(t,e,null,null)};il.prototype.unmount=Ph.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vr(function(){rl(null,t,null,null)}),e[fn]=null}};function il(t){this._internalRoot=t}il.prototype.unstable_scheduleHydration=function(t){if(t){var e=yg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cn.length&&e!==0&&e<Cn[n].priority;n++);Cn.splice(n,0,t),n===0&&_g(t)}};function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rp(){}function Cw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Pa(a);s.call(h)}}var a=Fy(e,r,t,0,null,!1,!1,"",Rp);return t._reactRootContainer=a,t[fn]=a.current,Es(t.nodeType===8?t.parentNode:t),vr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Pa(u);l.call(h)}}var u=Rh(t,0,!1,null,null,!1,!1,"",Rp);return t._reactRootContainer=u,t[fn]=u.current,Es(t.nodeType===8?t.parentNode:t),vr(function(){rl(e,u,n,r)}),u}function ol(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Pa(a);l.call(u)}}rl(e,a,t,i)}else a=Cw(n,e,t,i,r);return Pa(a)}mg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ki(e.pendingLanes);n!==0&&(Xc(e,n|1),mt(e,Ae()),!(re&6)&&(ai=Ae()+500,Xn()))}break;case 13:vr(function(){var r=pn(t,1);if(r!==null){var i=ot();Ft(r,t,1,i)}}),kh(t,1)}};Jc=function(t){if(t.tag===13){var e=pn(t,134217728);if(e!==null){var n=ot();Ft(e,t,134217728,n)}kh(t,134217728)}};gg=function(t){if(t.tag===13){var e=On(t),n=pn(t,e);if(n!==null){var r=ot();Ft(n,t,e,r)}kh(t,e)}};yg=function(){return ae};vg=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Mu=function(t,e,n){switch(e){case"input":if(Ru(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ya(r);if(!i)throw Error(L(90));Gm(r),Ru(r,i)}}}break;case"textarea":Xm(t,n);break;case"select":e=n.value,e!=null&&Qr(t,!!n.multiple,e,!1)}};ig=Sh;sg=vr;var Nw={usingClientEntryPoint:!1,Events:[$s,Ur,Ya,ng,rg,Sh]},qi={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rw={bundleType:qi.bundleType,version:qi.version,rendererPackageName:qi.rendererPackageName,rendererConfig:qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lg(t),t===null?null:t.stateNode},findFiberByHostInstance:qi.findFiberByHostInstance||Aw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{Wa=bo.inject(Rw),Wt=bo}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nw;It.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dh(e))throw Error(L(200));return Sw(t,e,null,n)};It.createRoot=function(t,e){if(!Dh(t))throw Error(L(299));var n=!1,r="",i=Uy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rh(t,1,!1,null,null,n,!1,r,i),t[fn]=e.current,Es(t.nodeType===8?t.parentNode:t),new Ph(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=lg(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return vr(t)};It.hydrate=function(t,e,n){if(!sl(e))throw Error(L(200));return ol(null,t,e,!0,n)};It.hydrateRoot=function(t,e,n){if(!Dh(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Uy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Fy(e,null,t,1,n??null,i,!1,s,a),t[fn]=e.current,Es(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new il(e)};It.render=function(t,e,n){if(!sl(e))throw Error(L(200));return ol(null,t,e,!1,n)};It.unmountComponentAtNode=function(t){if(!sl(t))throw Error(L(40));return t._reactRootContainer?(vr(function(){ol(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};It.unstable_batchedUpdates=Sh;It.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sl(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return ol(t,e,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function zy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zy)}catch(t){console.error(t)}}zy(),zm.exports=It;var kw=zm.exports,By,kp=kw;By=kp.createRoot,kp.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ce=(t,e)=>{const n=G.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:u,...h},m)=>G.createElement("svg",{ref:m,...Pw,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Dw(t)}`,l].join(" "),...h},[...e.map(([y,_])=>G.createElement(y,_)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=Ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=Ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Ce("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Uw=({children:t,currentPage:e,onPageChange:n})=>{const r=[{id:"dashboard",name:"대시보드",icon:qy},{id:"demand-register",name:"수요처 등록",icon:mc},{id:"demand-list",name:"수요처 관리",icon:Hy},{id:"performance-input",name:"실적 입력",icon:Fw},{id:"performance-list",name:"실적 조회",icon:ks}];return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[f.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:f.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"관리자 대시보드"})}),f.jsx("nav",{className:"mt-8",children:f.jsx("div",{className:"space-y-1 px-4",children:r.map(i=>{const s=i.icon;return f.jsxs("button",{onClick:()=>n(i.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${e===i.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[f.jsx(s,{className:"mr-3 h-5 w-5"}),i.name]},i.id)})})})]}),f.jsx("div",{className:"pl-64",children:f.jsx("main",{className:"p-8",children:t})})]})};var Dp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Xy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=s>>2,y=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,S=h&63;u||(S=64,a||(_=64)),r.push(n[m],n[y],n[_],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||y==null)throw new Bw;const _=s<<2|l>>4;if(r.push(_),h!==64){const S=l<<4&240|h>>2;if(r.push(S),y!==64){const D=h<<6&192|y;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $w=function(t){const e=Yy(t);return Xy.encodeByteArray(e,!0)},ba=function(t){return $w(t).replace(/\./g,"")},qw=function(t){try{return Xy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=()=>Hw().__FIREBASE_DEFAULTS__,Qw=()=>{if(typeof process>"u"||typeof Dp>"u")return;const t=Dp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Kw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qw(t[1]);return e&&JSON.parse(e)},jh=()=>{try{return Ww()||Qw()||Kw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gw=t=>{var e,n;return(n=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yw=t=>{const e=Gw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jy=()=>{var t;return(t=jh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ba(JSON.stringify(n)),ba(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eE(){var t;const e=(t=jh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tE(){return!eE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nE(){try{return typeof indexedDB=="object"}catch{return!1}}function rE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="FirebaseError";class vi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iE,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zy.prototype.create)}}class Zy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?sE(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new vi(i,l,r)}}function sE(t,e){return t.replace(oE,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oE=/\{\$([^}]+)}/g;function gc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Vp(s)&&Vp(a)){if(!gc(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Xw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uE(e))try{this.getOrInitializeService({instanceIdentifier:or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=or){return this.instances.has(e)}getOptions(e=or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=or){return this.component?this.component.multipleInstances?e:or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lE(t){return t===or?void 0:t}function uE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const hE={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},dE=ne.INFO,fE={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},pE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=fE[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e0{constructor(e){this.name=e,this._logLevel=dE,this._logHandler=pE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const mE=(t,e)=>e.some(n=>t instanceof n);let bp,jp;function gE(){return bp||(bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yE(){return jp||(jp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t0=new WeakMap,yc=new WeakMap,n0=new WeakMap,mu=new WeakMap,Mh=new WeakMap;function vE(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Un(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&t0.set(n,t)}).catch(()=>{}),Mh.set(e,t),e}function _E(t){if(yc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});yc.set(t,e)}let vc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wE(t){vc=t(vc)}function EE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gu(this),e,...n);return n0.set(r,e.sort?e.sort():[e]),Un(r)}:yE().includes(t)?function(...e){return t.apply(gu(this),e),Un(t0.get(this))}:function(...e){return Un(t.apply(gu(this),e))}}function xE(t){return typeof t=="function"?EE(t):(t instanceof IDBTransaction&&_E(t),mE(t,gE())?new Proxy(t,vc):t)}function Un(t){if(t instanceof IDBRequest)return vE(t);if(mu.has(t))return mu.get(t);const e=xE(t);return e!==t&&(mu.set(t,e),Mh.set(e,t)),e}const gu=t=>Mh.get(t);function TE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Un(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Un(a.result),u.oldVersion,u.newVersion,Un(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const IE=["get","getKey","getAll","getAllKeys","count"],SE=["put","add","delete","clear"],yu=new Map;function Mp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yu.get(e))return yu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=SE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IE.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return yu.set(e,s),s}wE(t=>({...t,get:(e,n,r)=>Mp(e,n)||t.get(e,n,r),has:(e,n)=>!!Mp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _c="@firebase/app",Lp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new e0("@firebase/app"),NE="@firebase/app-compat",RE="@firebase/analytics-compat",kE="@firebase/analytics",PE="@firebase/app-check-compat",DE="@firebase/app-check",VE="@firebase/auth",bE="@firebase/auth-compat",jE="@firebase/database",ME="@firebase/data-connect",LE="@firebase/database-compat",OE="@firebase/functions",FE="@firebase/functions-compat",UE="@firebase/installations",zE="@firebase/installations-compat",BE="@firebase/messaging",$E="@firebase/messaging-compat",qE="@firebase/performance",HE="@firebase/performance-compat",WE="@firebase/remote-config",QE="@firebase/remote-config-compat",KE="@firebase/storage",GE="@firebase/storage-compat",YE="@firebase/firestore",XE="@firebase/vertexai-preview",JE="@firebase/firestore-compat",ZE="firebase",ex="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="[DEFAULT]",tx={[_c]:"fire-core",[NE]:"fire-core-compat",[kE]:"fire-analytics",[RE]:"fire-analytics-compat",[DE]:"fire-app-check",[PE]:"fire-app-check-compat",[VE]:"fire-auth",[bE]:"fire-auth-compat",[jE]:"fire-rtdb",[ME]:"fire-data-connect",[LE]:"fire-rtdb-compat",[OE]:"fire-fn",[FE]:"fire-fn-compat",[UE]:"fire-iid",[zE]:"fire-iid-compat",[BE]:"fire-fcm",[$E]:"fire-fcm-compat",[qE]:"fire-perf",[HE]:"fire-perf-compat",[WE]:"fire-rc",[QE]:"fire-rc-compat",[KE]:"fire-gcs",[GE]:"fire-gcs-compat",[YE]:"fire-fst",[JE]:"fire-fst-compat",[XE]:"fire-vertex","fire-js":"fire-js",[ZE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new Map,nx=new Map,Ec=new Map;function Op(t,e){try{t.container.addComponent(e)}catch(n){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ma(t){const e=t.name;if(Ec.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;Ec.set(e,t);for(const n of ja.values())Op(n,t);for(const n of nx.values())Op(n,t);return!0}function rx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zn=new Zy("app","Firebase",ix);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=ex;function r0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zn.create("bad-app-name",{appName:String(i)});if(n||(n=Jy()),!n)throw zn.create("no-options");const s=ja.get(i);if(s){if(gc(n,s.options)&&gc(r,s.config))return s;throw zn.create("duplicate-app",{appName:i})}const a=new cE(i);for(const u of Ec.values())a.addComponent(u);const l=new sx(n,r,a);return ja.set(i,l),l}function ax(t=wc){const e=ja.get(t);if(!e&&t===wc&&Jy())return r0();if(!e)throw zn.create("no-app",{appName:t});return e}function Zr(t,e,n){var r;let i=(r=tx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(l.join(" "));return}Ma(new Ps(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="firebase-heartbeat-database",ux=1,Ds="firebase-heartbeat-store";let vu=null;function i0(){return vu||(vu=TE(lx,ux,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ds)}catch(n){console.warn(n)}}}}).catch(t=>{throw zn.create("idb-open",{originalErrorMessage:t.message})})),vu}async function cx(t){try{const n=(await i0()).transaction(Ds),r=await n.objectStore(Ds).get(s0(t));return await n.done,r}catch(e){if(e instanceof vi)gn.warn(e.message);else{const n=zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gn.warn(n.message)}}}async function Fp(t,e){try{const r=(await i0()).transaction(Ds,"readwrite");await r.objectStore(Ds).put(e,s0(t)),await r.done}catch(n){if(n instanceof vi)gn.warn(n.message);else{const r=zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gn.warn(r.message)}}}function s0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=1024,dx=30*24*60*60*1e3;class fx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Up();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=dx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Up(),{heartbeatsToSend:r,unsentEntries:i}=px(this._heartbeatsCache.heartbeats),s=ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return gn.warn(n),""}}}function Up(){return new Date().toISOString().substring(0,10)}function px(t,e=hx){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),zp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nE()?rE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zp(t){return ba(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t){Ma(new Ps("platform-logger",e=>new AE(e),"PRIVATE")),Ma(new Ps("heartbeat",e=>new fx(e),"PRIVATE")),Zr(_c,Lp,t),Zr(_c,Lp,"esm2017"),Zr("fire-js","")}gx("");var Bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fr,o0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,p){function v(){}v.prototype=p.prototype,w.D=p.prototype,w.prototype=new v,w.prototype.constructor=w,w.C=function(E,C,k){for(var I=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)I[Le-2]=arguments[Le];return p.prototype[C].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,p,v){v||(v=0);var E=Array(16);if(typeof p=="string")for(var C=0;16>C;++C)E[C]=p.charCodeAt(v++)|p.charCodeAt(v++)<<8|p.charCodeAt(v++)<<16|p.charCodeAt(v++)<<24;else for(C=0;16>C;++C)E[C]=p[v++]|p[v++]<<8|p[v++]<<16|p[v++]<<24;p=w.g[0],v=w.g[1],C=w.g[2];var k=w.g[3],I=p+(k^v&(C^k))+E[0]+3614090360&4294967295;p=v+(I<<7&4294967295|I>>>25),I=k+(C^p&(v^C))+E[1]+3905402710&4294967295,k=p+(I<<12&4294967295|I>>>20),I=C+(v^k&(p^v))+E[2]+606105819&4294967295,C=k+(I<<17&4294967295|I>>>15),I=v+(p^C&(k^p))+E[3]+3250441966&4294967295,v=C+(I<<22&4294967295|I>>>10),I=p+(k^v&(C^k))+E[4]+4118548399&4294967295,p=v+(I<<7&4294967295|I>>>25),I=k+(C^p&(v^C))+E[5]+1200080426&4294967295,k=p+(I<<12&4294967295|I>>>20),I=C+(v^k&(p^v))+E[6]+2821735955&4294967295,C=k+(I<<17&4294967295|I>>>15),I=v+(p^C&(k^p))+E[7]+4249261313&4294967295,v=C+(I<<22&4294967295|I>>>10),I=p+(k^v&(C^k))+E[8]+1770035416&4294967295,p=v+(I<<7&4294967295|I>>>25),I=k+(C^p&(v^C))+E[9]+2336552879&4294967295,k=p+(I<<12&4294967295|I>>>20),I=C+(v^k&(p^v))+E[10]+4294925233&4294967295,C=k+(I<<17&4294967295|I>>>15),I=v+(p^C&(k^p))+E[11]+2304563134&4294967295,v=C+(I<<22&4294967295|I>>>10),I=p+(k^v&(C^k))+E[12]+1804603682&4294967295,p=v+(I<<7&4294967295|I>>>25),I=k+(C^p&(v^C))+E[13]+4254626195&4294967295,k=p+(I<<12&4294967295|I>>>20),I=C+(v^k&(p^v))+E[14]+2792965006&4294967295,C=k+(I<<17&4294967295|I>>>15),I=v+(p^C&(k^p))+E[15]+1236535329&4294967295,v=C+(I<<22&4294967295|I>>>10),I=p+(C^k&(v^C))+E[1]+4129170786&4294967295,p=v+(I<<5&4294967295|I>>>27),I=k+(v^C&(p^v))+E[6]+3225465664&4294967295,k=p+(I<<9&4294967295|I>>>23),I=C+(p^v&(k^p))+E[11]+643717713&4294967295,C=k+(I<<14&4294967295|I>>>18),I=v+(k^p&(C^k))+E[0]+3921069994&4294967295,v=C+(I<<20&4294967295|I>>>12),I=p+(C^k&(v^C))+E[5]+3593408605&4294967295,p=v+(I<<5&4294967295|I>>>27),I=k+(v^C&(p^v))+E[10]+38016083&4294967295,k=p+(I<<9&4294967295|I>>>23),I=C+(p^v&(k^p))+E[15]+3634488961&4294967295,C=k+(I<<14&4294967295|I>>>18),I=v+(k^p&(C^k))+E[4]+3889429448&4294967295,v=C+(I<<20&4294967295|I>>>12),I=p+(C^k&(v^C))+E[9]+568446438&4294967295,p=v+(I<<5&4294967295|I>>>27),I=k+(v^C&(p^v))+E[14]+3275163606&4294967295,k=p+(I<<9&4294967295|I>>>23),I=C+(p^v&(k^p))+E[3]+4107603335&4294967295,C=k+(I<<14&4294967295|I>>>18),I=v+(k^p&(C^k))+E[8]+1163531501&4294967295,v=C+(I<<20&4294967295|I>>>12),I=p+(C^k&(v^C))+E[13]+2850285829&4294967295,p=v+(I<<5&4294967295|I>>>27),I=k+(v^C&(p^v))+E[2]+4243563512&4294967295,k=p+(I<<9&4294967295|I>>>23),I=C+(p^v&(k^p))+E[7]+1735328473&4294967295,C=k+(I<<14&4294967295|I>>>18),I=v+(k^p&(C^k))+E[12]+2368359562&4294967295,v=C+(I<<20&4294967295|I>>>12),I=p+(v^C^k)+E[5]+4294588738&4294967295,p=v+(I<<4&4294967295|I>>>28),I=k+(p^v^C)+E[8]+2272392833&4294967295,k=p+(I<<11&4294967295|I>>>21),I=C+(k^p^v)+E[11]+1839030562&4294967295,C=k+(I<<16&4294967295|I>>>16),I=v+(C^k^p)+E[14]+4259657740&4294967295,v=C+(I<<23&4294967295|I>>>9),I=p+(v^C^k)+E[1]+2763975236&4294967295,p=v+(I<<4&4294967295|I>>>28),I=k+(p^v^C)+E[4]+1272893353&4294967295,k=p+(I<<11&4294967295|I>>>21),I=C+(k^p^v)+E[7]+4139469664&4294967295,C=k+(I<<16&4294967295|I>>>16),I=v+(C^k^p)+E[10]+3200236656&4294967295,v=C+(I<<23&4294967295|I>>>9),I=p+(v^C^k)+E[13]+681279174&4294967295,p=v+(I<<4&4294967295|I>>>28),I=k+(p^v^C)+E[0]+3936430074&4294967295,k=p+(I<<11&4294967295|I>>>21),I=C+(k^p^v)+E[3]+3572445317&4294967295,C=k+(I<<16&4294967295|I>>>16),I=v+(C^k^p)+E[6]+76029189&4294967295,v=C+(I<<23&4294967295|I>>>9),I=p+(v^C^k)+E[9]+3654602809&4294967295,p=v+(I<<4&4294967295|I>>>28),I=k+(p^v^C)+E[12]+3873151461&4294967295,k=p+(I<<11&4294967295|I>>>21),I=C+(k^p^v)+E[15]+530742520&4294967295,C=k+(I<<16&4294967295|I>>>16),I=v+(C^k^p)+E[2]+3299628645&4294967295,v=C+(I<<23&4294967295|I>>>9),I=p+(C^(v|~k))+E[0]+4096336452&4294967295,p=v+(I<<6&4294967295|I>>>26),I=k+(v^(p|~C))+E[7]+1126891415&4294967295,k=p+(I<<10&4294967295|I>>>22),I=C+(p^(k|~v))+E[14]+2878612391&4294967295,C=k+(I<<15&4294967295|I>>>17),I=v+(k^(C|~p))+E[5]+4237533241&4294967295,v=C+(I<<21&4294967295|I>>>11),I=p+(C^(v|~k))+E[12]+1700485571&4294967295,p=v+(I<<6&4294967295|I>>>26),I=k+(v^(p|~C))+E[3]+2399980690&4294967295,k=p+(I<<10&4294967295|I>>>22),I=C+(p^(k|~v))+E[10]+4293915773&4294967295,C=k+(I<<15&4294967295|I>>>17),I=v+(k^(C|~p))+E[1]+2240044497&4294967295,v=C+(I<<21&4294967295|I>>>11),I=p+(C^(v|~k))+E[8]+1873313359&4294967295,p=v+(I<<6&4294967295|I>>>26),I=k+(v^(p|~C))+E[15]+4264355552&4294967295,k=p+(I<<10&4294967295|I>>>22),I=C+(p^(k|~v))+E[6]+2734768916&4294967295,C=k+(I<<15&4294967295|I>>>17),I=v+(k^(C|~p))+E[13]+1309151649&4294967295,v=C+(I<<21&4294967295|I>>>11),I=p+(C^(v|~k))+E[4]+4149444226&4294967295,p=v+(I<<6&4294967295|I>>>26),I=k+(v^(p|~C))+E[11]+3174756917&4294967295,k=p+(I<<10&4294967295|I>>>22),I=C+(p^(k|~v))+E[2]+718787259&4294967295,C=k+(I<<15&4294967295|I>>>17),I=v+(k^(C|~p))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+C&4294967295,w.g[3]=w.g[3]+k&4294967295}r.prototype.u=function(w,p){p===void 0&&(p=w.length);for(var v=p-this.blockSize,E=this.B,C=this.h,k=0;k<p;){if(C==0)for(;k<=v;)i(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<p;)if(E[C++]=w.charCodeAt(k++),C==this.blockSize){i(this,E),C=0;break}}else for(;k<p;)if(E[C++]=w[k++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=p},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;var v=8*this.o;for(p=w.length-8;p<w.length;++p)w[p]=v&255,v/=256;for(this.u(w),w=Array(16),p=v=0;4>p;++p)for(var E=0;32>E;E+=8)w[v++]=this.g[p]>>>E&255;return w};function s(w,p){var v=l;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=p(w)}function a(w,p){this.h=p;for(var v=[],E=!0,C=w.length-1;0<=C;C--){var k=w[C]|0;E&&k==p||(v[C]=k,E=!1)}this.g=v}var l={};function u(w){return-128<=w&&128>w?s(w,function(p){return new a([p|0],0>p?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return y;if(0>w)return R(h(-w));for(var p=[],v=1,E=0;w>=v;E++)p[E]=w/v|0,v*=4294967296;return new a(p,0)}function m(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return R(m(w.substring(1),p));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(p,8)),E=y,C=0;C<w.length;C+=8){var k=Math.min(8,w.length-C),I=parseInt(w.substring(C,C+k),p);8>k?(k=h(Math.pow(p,k)),E=E.j(k).add(h(I))):(E=E.j(v),E=E.add(h(I)))}return E}var y=u(0),_=u(1),S=u(16777216);t=a.prototype,t.m=function(){if(N(this))return-R(this).m();for(var w=0,p=1,v=0;v<this.g.length;v++){var E=this.i(v);w+=(0<=E?E:4294967296+E)*p,p*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D(this))return"0";if(N(this))return"-"+R(this).toString(w);for(var p=h(Math.pow(w,6)),v=this,E="";;){var C=b(v,p).g;v=T(v,C.j(p));var k=((0<v.g.length?v.g[0]:v.h)>>>0).toString(w);if(v=C,D(v))return k+E;for(;6>k.length;)k="0"+k;E=k+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function D(w){if(w.h!=0)return!1;for(var p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=T(this,w),N(w)?-1:D(w)?0:1};function R(w){for(var p=w.g.length,v=[],E=0;E<p;E++)v[E]=~w.g[E];return new a(v,~w.h).add(_)}t.abs=function(){return N(this)?R(this):this},t.add=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],E=0,C=0;C<=p;C++){var k=E+(this.i(C)&65535)+(w.i(C)&65535),I=(k>>>16)+(this.i(C)>>>16)+(w.i(C)>>>16);E=I>>>16,k&=65535,I&=65535,v[C]=I<<16|k}return new a(v,v[v.length-1]&-2147483648?-1:0)};function T(w,p){return w.add(R(p))}t.j=function(w){if(D(this)||D(w))return y;if(N(this))return N(w)?R(this).j(R(w)):R(R(this).j(w));if(N(w))return R(this.j(R(w)));if(0>this.l(S)&&0>w.l(S))return h(this.m()*w.m());for(var p=this.g.length+w.g.length,v=[],E=0;E<2*p;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<w.g.length;C++){var k=this.i(E)>>>16,I=this.i(E)&65535,Le=w.i(C)>>>16,yt=w.i(C)&65535;v[2*E+2*C]+=I*yt,x(v,2*E+2*C),v[2*E+2*C+1]+=k*yt,x(v,2*E+2*C+1),v[2*E+2*C+1]+=I*Le,x(v,2*E+2*C+1),v[2*E+2*C+2]+=k*Le,x(v,2*E+2*C+2)}for(E=0;E<p;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=p;E<2*p;E++)v[E]=0;return new a(v,0)};function x(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function A(w,p){this.g=w,this.h=p}function b(w,p){if(D(p))throw Error("division by zero");if(D(w))return new A(y,y);if(N(w))return p=b(R(w),p),new A(R(p.g),R(p.h));if(N(p))return p=b(w,R(p)),new A(R(p.g),p.h);if(30<w.g.length){if(N(w)||N(p))throw Error("slowDivide_ only works with positive integers.");for(var v=_,E=p;0>=E.l(w);)v=U(v),E=U(E);var C=F(v,1),k=F(E,1);for(E=F(E,2),v=F(v,2);!D(E);){var I=k.add(E);0>=I.l(w)&&(C=C.add(v),k=I),E=F(E,1),v=F(v,1)}return p=T(w,C.j(p)),new A(C,p)}for(C=y;0<=w.l(p);){for(v=Math.max(1,Math.floor(w.m()/p.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),k=h(v),I=k.j(p);N(I)||0<I.l(w);)v-=E,k=h(v),I=k.j(p);D(k)&&(k=_),C=C.add(k),w=T(w,I)}return new A(C,w)}t.A=function(w){return b(this,w).h},t.and=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],E=0;E<p;E++)v[E]=this.i(E)&w.i(E);return new a(v,this.h&w.h)},t.or=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],E=0;E<p;E++)v[E]=this.i(E)|w.i(E);return new a(v,this.h|w.h)},t.xor=function(w){for(var p=Math.max(this.g.length,w.g.length),v=[],E=0;E<p;E++)v[E]=this.i(E)^w.i(E);return new a(v,this.h^w.h)};function U(w){for(var p=w.g.length+1,v=[],E=0;E<p;E++)v[E]=w.i(E)<<1|w.i(E-1)>>>31;return new a(v,w.h)}function F(w,p){var v=p>>5;p%=32;for(var E=w.g.length-v,C=[],k=0;k<E;k++)C[k]=0<p?w.i(k+v)>>>p|w.i(k+v+1)<<32-p:w.i(k+v);return new a(C,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,fr=a}).apply(typeof Bp<"u"?Bp:typeof self<"u"?self:typeof window<"u"?window:{});var jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a0,Yi,l0,ra,xc,u0,c0,h0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof jo=="object"&&jo];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var P=o[g];if(!(P in d))break e;d=d[P]}o=o[o.length-1],g=d[o],c=c(g),c!=g&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var d=0,g=!1,P={next:function(){if(!g&&d<o.length){var V=d++;return{value:c(V,o[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function m(o,c,d){return o.call.apply(o.bind,arguments)}function y(o,c,d){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),o.apply(c,P)}}return function(){return o.apply(c,arguments)}}function _(o,c,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,_.apply(null,arguments)}function S(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function D(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(g,P,V){for(var z=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)z[ce-2]=arguments[ce];return c.prototype[P].apply(g,z)}}function N(o){const c=o.length;if(0<c){const d=Array(c);for(let g=0;g<c;g++)d[g]=o[g];return d}return[]}function R(o,c){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(u(g)){const P=o.length||0,V=g.length||0;o.length=P+V;for(let z=0;z<V;z++)o[P+z]=g[z]}else o.push(g)}}class T{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function x(o){return/^[\s\xa0]*$/.test(o)}function A(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function b(o){return b[" "](o),o}b[" "]=function(){};var U=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function F(o,c,d){for(const g in o)c.call(d,o[g],g,o)}function w(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function p(o){const c={};for(const d in o)c[d]=o[d];return c}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(o,c){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)o[d]=g[d];for(let V=0;V<v.length;V++)d=v[V],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function C(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function k(o){l.setTimeout(()=>{throw o},0)}function I(){var o=$;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Le{constructor(){this.h=this.g=null}add(c,d){const g=yt.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var yt=new T(()=>new ut,o=>o.reset());class ut{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let B,O=!1,$=new Le,W=()=>{const o=l.Promise.resolve(void 0);B=()=>{o.then(oe)}};var oe=()=>{for(var o;o=I();){try{o.h.call(o.g)}catch(d){k(d)}var c=yt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}O=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function en(o,c){if(Ie.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(U){e:{try{b(c.nodeName);var P=!0;break e}catch{}P=!1}P||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:tn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&en.aa.h.call(this)}}D(en,Ie);var tn={2:"touch",3:"pen",4:"mouse"};en.prototype.h=function(){en.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),Nv=0;function Rv(o,c,d,g,P){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=P,this.key=++Nv,this.da=this.fa=!1}function Zs(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function eo(o){this.src=o,this.g={},this.h=0}eo.prototype.add=function(o,c,d,g,P){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var z=El(o,c,g,P);return-1<z?(c=o[z],d||(c.fa=!1)):(c=new Rv(c,this.src,V,!!g,P),c.fa=d,o.push(c)),c};function wl(o,c){var d=c.type;if(d in o.g){var g=o.g[d],P=Array.prototype.indexOf.call(g,c,void 0),V;(V=0<=P)&&Array.prototype.splice.call(g,P,1),V&&(Zs(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function El(o,c,d,g){for(var P=0;P<o.length;++P){var V=o[P];if(!V.da&&V.listener==c&&V.capture==!!d&&V.ha==g)return P}return-1}var xl="closure_lm_"+(1e6*Math.random()|0),Tl={};function xd(o,c,d,g,P){if(Array.isArray(c)){for(var V=0;V<c.length;V++)xd(o,c[V],d,g,P);return null}return d=Sd(d),o&&o[nn]?o.K(c,d,h(g)?!!g.capture:!!g,P):kv(o,c,d,!1,g,P)}function kv(o,c,d,g,P,V){if(!c)throw Error("Invalid event type");var z=h(P)?!!P.capture:!!P,ce=Sl(o);if(ce||(o[xl]=ce=new eo(o)),d=ce.add(c,d,g,z,V),d.proxy)return d;if(g=Pv(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)Zt||(P=z),P===void 0&&(P=!1),o.addEventListener(c.toString(),g,P);else if(o.attachEvent)o.attachEvent(Id(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Pv(){function o(d){return c.call(o.src,o.listener,d)}const c=Dv;return o}function Td(o,c,d,g,P){if(Array.isArray(c))for(var V=0;V<c.length;V++)Td(o,c[V],d,g,P);else g=h(g)?!!g.capture:!!g,d=Sd(d),o&&o[nn]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],d=El(V,d,g,P),-1<d&&(Zs(V[d]),Array.prototype.splice.call(V,d,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=Sl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=El(c,d,g,P)),(d=-1<o?c[o]:null)&&Il(d))}function Il(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[nn])wl(c.i,o);else{var d=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(d,g,o.capture):c.detachEvent?c.detachEvent(Id(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=Sl(c))?(wl(d,o),d.h==0&&(d.src=null,c[xl]=null)):Zs(o)}}}function Id(o){return o in Tl?Tl[o]:Tl[o]="on"+o}function Dv(o,c){if(o.da)o=!0;else{c=new en(c,this);var d=o.listener,g=o.ha||o.src;o.fa&&Il(o),o=d.call(g,c)}return o}function Sl(o){return o=o[xl],o instanceof eo?o:null}var Al="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sd(o){return typeof o=="function"?o:(o[Al]||(o[Al]=function(c){return o.handleEvent(c)}),o[Al])}function We(){ue.call(this),this.i=new eo(this),this.M=this,this.F=null}D(We,ue),We.prototype[nn]=!0,We.prototype.removeEventListener=function(o,c,d,g){Td(this,o,c,d,g)};function nt(o,c){var d,g=o.F;if(g)for(d=[];g;g=g.F)d.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new Ie(c,o);else if(c instanceof Ie)c.target=c.target||o;else{var P=c;c=new Ie(g,o),E(c,P)}if(P=!0,d)for(var V=d.length-1;0<=V;V--){var z=c.g=d[V];P=to(z,g,!0,c)&&P}if(z=c.g=o,P=to(z,g,!0,c)&&P,P=to(z,g,!1,c)&&P,d)for(V=0;V<d.length;V++)z=c.g=d[V],P=to(z,g,!1,c)&&P}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],g=0;g<d.length;g++)Zs(d[g]);delete o.g[c],o.h--}}this.F=null},We.prototype.K=function(o,c,d,g){return this.i.add(String(o),c,!1,d,g)},We.prototype.L=function(o,c,d,g){return this.i.add(String(o),c,!0,d,g)};function to(o,c,d,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var P=!0,V=0;V<c.length;++V){var z=c[V];if(z&&!z.da&&z.capture==d){var ce=z.listener,Oe=z.ha||z.src;z.fa&&wl(o.i,z),P=ce.call(Oe,g)!==!1&&P}}return P&&!g.defaultPrevented}function Ad(o,c,d){if(typeof o=="function")d&&(o=_(o,d));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Cd(o){o.g=Ad(()=>{o.g=null,o.i&&(o.i=!1,Cd(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Vv extends ue{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Cd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(o){ue.call(this),this.h=o,this.g={}}D(Ii,ue);var Nd=[];function Rd(o){F(o.g,function(c,d){this.g.hasOwnProperty(d)&&Il(c)},o),o.g={}}Ii.prototype.N=function(){Ii.aa.N.call(this),Rd(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cl=l.JSON.stringify,bv=l.JSON.parse,jv=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Nl(){}Nl.prototype.h=null;function kd(o){return o.h||(o.h=o.i())}function Pd(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rl(){Ie.call(this,"d")}D(Rl,Ie);function kl(){Ie.call(this,"c")}D(kl,Ie);var er={},Dd=null;function no(){return Dd=Dd||new We}er.La="serverreachability";function Vd(o){Ie.call(this,er.La,o)}D(Vd,Ie);function Ai(o){const c=no();nt(c,new Vd(c))}er.STAT_EVENT="statevent";function bd(o,c){Ie.call(this,er.STAT_EVENT,o),this.stat=c}D(bd,Ie);function rt(o){const c=no();nt(c,new bd(c,o))}er.Ma="timingevent";function jd(o,c){Ie.call(this,er.Ma,o),this.size=c}D(jd,Ie);function Ci(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function Mv(o,c,d,g,P,V){o.info(function(){if(o.g)if(V)for(var z="",ce=V.split("&"),Oe=0;Oe<ce.length;Oe++){var ie=ce[Oe].split("=");if(1<ie.length){var Qe=ie[0];ie=ie[1];var Ke=Qe.split("_");z=2<=Ke.length&&Ke[1]=="type"?z+(Qe+"="+ie+"&"):z+(Qe+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+c+`
`+d+`
`+z})}function Lv(o,c,d,g,P,V,z){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+c+`
`+d+`
`+V+" "+z})}function Cr(o,c,d,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Fv(o,d)+(g?" "+g:"")})}function Ov(o,c){o.info(function(){return"TIMEOUT: "+c})}Ni.prototype.info=function(){};function Fv(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var g=d[o];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<P.length;z++)P[z]=""}}}}return Cl(d)}catch{return c}}var ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Md={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pl;function io(){}D(io,Nl),io.prototype.g=function(){return new XMLHttpRequest},io.prototype.i=function(){return{}},Pl=new io;function wn(o,c,d,g){this.j=o,this.i=c,this.l=d,this.R=g||1,this.U=new Ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ld}function Ld(){this.i=null,this.g="",this.h=!1}var Od={},Dl={};function Vl(o,c,d){o.L=1,o.v=lo(rn(c)),o.m=d,o.P=!0,Fd(o,null)}function Fd(o,c){o.F=Date.now(),so(o),o.A=rn(o.v);var d=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Zd(d.i,"t",g),o.C=0,d=o.j.J,o.h=new Ld,o.g=vf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new Vv(_(o.Y,o,o.g),o.O)),c=o.U,d=o.g,g=o.ca;var P="readystatechange";Array.isArray(P)||(P&&(Nd[0]=P.toString()),P=Nd);for(var V=0;V<P.length;V++){var z=xd(d,P[V],g||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?p(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ai(),Mv(o.i,o.u,o.A,o.l,o.R,o.m)}wn.prototype.ca=function(o){o=o.target;const c=this.M;c&&sn(o)==3?c.j():this.Y(o)},wn.prototype.Y=function(o){try{if(o==this.g)e:{const Ke=sn(this.g);var c=this.g.Ba();const kr=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||af(this.g)))){this.J||Ke!=4||c==7||(c==8||0>=kr?Ai(3):Ai(2)),bl(this);var d=this.g.Z();this.X=d;t:if(Ud(this)){var g=af(this.g);o="";var P=g.length,V=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tr(this),Ri(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<P;c++)this.h.h=!0,o+=this.h.i.decode(g[c],{stream:!(V&&c==P-1)});g.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=d==200,Lv(this.i,this.u,this.A,this.l,this.R,Ke,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,Oe=this.g;if((ce=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(ce)){var ie=ce;break t}}ie=null}if(d=ie)Cr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jl(this,d);else{this.o=!1,this.s=3,rt(12),tr(this),Ri(this);break e}}if(this.P){d=!0;let Vt;for(;!this.J&&this.C<z.length;)if(Vt=Uv(this,z),Vt==Dl){Ke==4&&(this.s=4,rt(14),d=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Od){this.s=4,rt(15),Cr(this.i,this.l,z,"[Invalid Chunk]"),d=!1;break}else Cr(this.i,this.l,Vt,null),jl(this,Vt);if(Ud(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||z.length!=0||this.h.h||(this.s=1,rt(16),d=!1),this.o=this.o&&d,!d)Cr(this.i,this.l,z,"[Invalid Chunked Response]"),tr(this),Ri(this);else if(0<z.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),zl(Qe),Qe.M=!0,rt(11))}}else Cr(this.i,this.l,z,null),jl(this,z);Ke==4&&tr(this),this.o&&!this.J&&(Ke==4?pf(this.j,this):(this.o=!1,so(this)))}else r_(this.g),d==400&&0<z.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),tr(this),Ri(this)}}}catch{}finally{}};function Ud(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Uv(o,c){var d=o.C,g=c.indexOf(`
`,d);return g==-1?Dl:(d=Number(c.substring(d,g)),isNaN(d)?Od:(g+=1,g+d>c.length?Dl:(c=c.slice(g,g+d),o.C=g+d,c)))}wn.prototype.cancel=function(){this.J=!0,tr(this)};function so(o){o.S=Date.now()+o.I,zd(o,o.I)}function zd(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ci(_(o.ba,o),c)}function bl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}wn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Ov(this.i,this.A),this.L!=2&&(Ai(),rt(17)),tr(this),this.s=2,Ri(this)):zd(this,this.S-o)};function Ri(o){o.j.G==0||o.J||pf(o.j,o)}function tr(o){bl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Rd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function jl(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Ml(d.h,o))){if(!o.K&&Ml(d.h,o)&&d.G==3){try{var g=d.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)mo(d),fo(d);else break e;Ul(d),rt(18)}}else d.za=P[1],0<d.za-d.T&&37500>P[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ci(_(d.Za,d),6e3));if(1>=qd(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else rr(d,11)}else if((o.K||d.g==o)&&mo(d),!x(c))for(P=d.Da.g.parse(c),c=0;c<P.length;c++){let ie=P[c];if(d.T=ie[0],ie=ie[1],d.G==2)if(ie[0]=="c"){d.K=ie[1],d.ia=ie[2];const Qe=ie[3];Qe!=null&&(d.la=Qe,d.j.info("VER="+d.la));const Ke=ie[4];Ke!=null&&(d.Aa=Ke,d.j.info("SVER="+d.Aa));const kr=ie[5];kr!=null&&typeof kr=="number"&&0<kr&&(g=1.5*kr,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Vt=o.g;if(Vt){const yo=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var V=g.h;V.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ll(V,V.h),V.h=null))}if(g.D){const Bl=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;Bl&&(g.ya=Bl,de(g.I,g.D,Bl))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var z=o;if(g.qa=yf(g,g.J?g.ia:null,g.W),z.K){Hd(g.h,z);var ce=z,Oe=g.L;Oe&&(ce.I=Oe),ce.B&&(bl(ce),so(ce)),g.g=z}else df(g);0<d.i.length&&po(d)}else ie[0]!="stop"&&ie[0]!="close"||rr(d,7);else d.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?rr(d,7):Fl(d):ie[0]!="noop"&&d.l&&d.l.ta(ie),d.v=0)}}Ai(4)}catch{}}var zv=class{constructor(o,c){this.g=o,this.map=c}};function Bd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $d(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function qd(o){return o.h?1:o.g?o.g.size:0}function Ml(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Ll(o,c){o.g?o.g.add(c):o.h=c}function Hd(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Bd.prototype.cancel=function(){if(this.i=Wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Wd(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return N(o.i)}function Bv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,g=0;g<d;g++)c.push(o[g]);return c}c=[],d=0;for(g in o)c[d++]=o[g];return c}function $v(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const g in o)c[d++]=g;return c}}}function Qd(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=$v(o),g=Bv(o),P=g.length,V=0;V<P;V++)c.call(void 0,g[V],d&&d[V],o)}var Kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qv(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var g=o[d].indexOf("="),P=null;if(0<=g){var V=o[d].substring(0,g);P=o[d].substring(g+1)}else V=o[d];c(V,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function nr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof nr){this.h=o.h,oo(this,o.j),this.o=o.o,this.g=o.g,ao(this,o.s),this.l=o.l;var c=o.i,d=new Di;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Gd(this,d),this.m=o.m}else o&&(c=String(o).match(Kd))?(this.h=!1,oo(this,c[1]||"",!0),this.o=ki(c[2]||""),this.g=ki(c[3]||"",!0),ao(this,c[4]),this.l=ki(c[5]||"",!0),Gd(this,c[6]||"",!0),this.m=ki(c[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}nr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Pi(c,Yd,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Pi(c,Yd,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Pi(d,d.charAt(0)=="/"?Qv:Wv,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Pi(d,Gv)),o.join("")};function rn(o){return new nr(o)}function oo(o,c,d){o.j=d?ki(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function ao(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Gd(o,c,d){c instanceof Di?(o.i=c,Yv(o.i,o.h)):(d||(c=Pi(c,Kv)),o.i=new Di(c,o.h))}function de(o,c,d){o.i.set(c,d)}function lo(o){return de(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ki(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Pi(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,Hv),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Hv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Yd=/[#\/\?@]/g,Wv=/[#\?:]/g,Qv=/[#\?]/g,Kv=/[#\?@]/g,Gv=/#/g;function Di(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function En(o){o.g||(o.g=new Map,o.h=0,o.i&&qv(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Di.prototype,t.add=function(o,c){En(this),this.i=null,o=Nr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function Xd(o,c){En(o),c=Nr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Jd(o,c){return En(o),c=Nr(o,c),o.g.has(c)}t.forEach=function(o,c){En(this),this.g.forEach(function(d,g){d.forEach(function(P){o.call(c,P,g,this)},this)},this)},t.na=function(){En(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let g=0;g<c.length;g++){const P=o[g];for(let V=0;V<P.length;V++)d.push(c[g])}return d},t.V=function(o){En(this);let c=[];if(typeof o=="string")Jd(this,o)&&(c=c.concat(this.g.get(Nr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return En(this),this.i=null,o=Nr(this,o),Jd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Zd(o,c,d){Xd(o,c),0<d.length&&(o.i=null,o.g.set(Nr(o,c),N(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var g=c[d];const V=encodeURIComponent(String(g)),z=this.V(g);for(g=0;g<z.length;g++){var P=V;z[g]!==""&&(P+="="+encodeURIComponent(String(z[g]))),o.push(P)}}return this.i=o.join("&")};function Nr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Yv(o,c){c&&!o.j&&(En(o),o.i=null,o.g.forEach(function(d,g){var P=g.toLowerCase();g!=P&&(Xd(this,g),Zd(this,P,d))},o)),o.j=c}function Xv(o,c){const d=new Ni;if(l.Image){const g=new Image;g.onload=S(xn,d,"TestLoadImage: loaded",!0,c,g),g.onerror=S(xn,d,"TestLoadImage: error",!1,c,g),g.onabort=S(xn,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=S(xn,d,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function Jv(o,c){const d=new Ni,g=new AbortController,P=setTimeout(()=>{g.abort(),xn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(V=>{clearTimeout(P),V.ok?xn(d,"TestPingServer: ok",!0,c):xn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),xn(d,"TestPingServer: error",!1,c)})}function xn(o,c,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function Zv(){this.g=new jv}function e_(o,c,d){const g=d||"";try{Qd(o,function(P,V){let z=P;h(P)&&(z=Cl(P)),c.push(g+V+"="+encodeURIComponent(z))})}catch(P){throw c.push(g+"type="+encodeURIComponent("_badmap")),P}}function uo(o){this.l=o.Ub||null,this.j=o.eb||!1}D(uo,Nl),uo.prototype.g=function(){return new co(this.l,this.j)},uo.prototype.i=function(o){return function(){return o}}({});function co(o,c){We.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(co,We),t=co.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,bi(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ef(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ef(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Vi(this):bi(this),this.readyState==3&&ef(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Vi(this))},t.Qa=function(o){this.g&&(this.response=o,Vi(this))},t.ga=function(){this.g&&Vi(this)};function Vi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,bi(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function bi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function tf(o){let c="";return F(o,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function Ol(o,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=tf(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):de(o,c,d))}function xe(o){We.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(xe,We);var t_=/^https?$/i,n_=["POST","PUT"];t=xe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pl.g(),this.v=this.o?kd(this.o):kd(Pl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){nf(this,V);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())d.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),P=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(n_,c,void 0))||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of d)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{of(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){nf(this,V)}};function nf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,rf(o),ho(o)}function rf(o){o.A||(o.A=!0,nt(o,"complete"),nt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,nt(this,"complete"),nt(this,"abort"),ho(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ho(this,!0)),xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sf(this):this.bb())},t.bb=function(){sf(this)};function sf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||sn(o)!=4||o.Z()!=2)){if(o.u&&sn(o)==4)Ad(o.Ea,0,o);else if(nt(o,"readystatechange"),sn(o)==4){o.h=!1;try{const z=o.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=z===0){var P=String(o.D).match(Kd)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),g=!t_.test(P?P.toLowerCase():"")}d=g}if(d)nt(o,"complete"),nt(o,"success");else{o.m=6;try{var V=2<sn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",rf(o)}}finally{ho(o)}}}}function ho(o,c){if(o.g){of(o);const d=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||nt(o,"ready");try{d.onreadystatechange=g}catch{}}}function of(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function sn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),bv(c)}};function af(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function r_(o){const c={};o=(o.g&&2<=sn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(x(o[g]))continue;var d=C(o[g]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=c[P]||[];c[P]=V,V.push(d)}w(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function lf(o){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ji("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ji("baseRetryDelayMs",5e3,o),this.cb=ji("retryDelaySeedMs",1e4,o),this.Wa=ji("forwardChannelMaxRetries",2,o),this.wa=ji("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Bd(o&&o.concurrentRequestLimit),this.Da=new Zv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lf.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,g){rt(0),this.W=o,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=yf(this,null,this.W),po(this)};function Fl(o){if(uf(o),o.G==3){var c=o.U++,d=rn(o.I);if(de(d,"SID",o.K),de(d,"RID",c),de(d,"TYPE","terminate"),Mi(o,d),c=new wn(o,o.j,c),c.L=2,c.v=lo(rn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=vf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),so(c)}gf(o)}function fo(o){o.g&&(zl(o),o.g.cancel(),o.g=null)}function uf(o){fo(o),o.u&&(l.clearTimeout(o.u),o.u=null),mo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function po(o){if(!$d(o.h)&&!o.s){o.s=!0;var c=o.Ga;B||W(),O||(B(),O=!0),$.add(c,o),o.B=0}}function i_(o,c){return qd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ci(_(o.Ga,o,c),mf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const P=new wn(this,this.j,o);let V=this.o;if(this.S&&(V?(V=p(V),E(V,this.S)):V=this.S),this.m!==null||this.O||(P.H=V,V=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=hf(this,P,c),d=rn(this.I),de(d,"RID",o),de(d,"CVER",22),this.D&&de(d,"X-HTTP-Session-Id",this.D),Mi(this,d),V&&(this.O?c="headers="+encodeURIComponent(String(tf(V)))+"&"+c:this.m&&Ol(d,this.m,V)),Ll(this.h,P),this.Ua&&de(d,"TYPE","init"),this.P?(de(d,"$req",c),de(d,"SID","null"),P.T=!0,Vl(P,d,null)):Vl(P,d,c),this.G=2}}else this.G==3&&(o?cf(this,o):this.i.length==0||$d(this.h)||cf(this))};function cf(o,c){var d;c?d=c.l:d=o.U++;const g=rn(o.I);de(g,"SID",o.K),de(g,"RID",d),de(g,"AID",o.T),Mi(o,g),o.m&&o.o&&Ol(g,o.m,o.o),d=new wn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=hf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ll(o.h,d),Vl(d,g,c)}function Mi(o,c){o.H&&F(o.H,function(d,g){de(c,g,d)}),o.l&&Qd({},function(d,g){de(c,g,d)})}function hf(o,c,d){d=Math.min(o.i.length,d);var g=o.l?_(o.l.Na,o.l,o):null;e:{var P=o.i;let V=-1;for(;;){const z=["count="+d];V==-1?0<d?(V=P[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let ce=!0;for(let Oe=0;Oe<d;Oe++){let ie=P[Oe].g;const Qe=P[Oe].map;if(ie-=V,0>ie)V=Math.max(0,P[Oe].g-100),ce=!1;else try{e_(Qe,z,"req"+ie+"_")}catch{g&&g(Qe)}}if(ce){g=z.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,g}function df(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;B||W(),O||(B(),O=!0),$.add(c,o),o.v=0}}function Ul(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ci(_(o.Fa,o),mf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,ff(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ci(_(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),fo(this),ff(this))};function zl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function ff(o){o.g=new wn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=rn(o.qa);de(c,"RID","rpc"),de(c,"SID",o.K),de(c,"AID",o.T),de(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&de(c,"TO",o.ja),de(c,"TYPE","xmlhttp"),Mi(o,c),o.m&&o.o&&Ol(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=lo(rn(c)),d.m=null,d.P=!0,Fd(d,o)}t.Za=function(){this.C!=null&&(this.C=null,fo(this),Ul(this),rt(19))};function mo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function pf(o,c){var d=null;if(o.g==c){mo(o),zl(o),o.g=null;var g=2}else if(Ml(o.h,c))d=c.D,Hd(o.h,c),g=1;else return;if(o.G!=0){if(c.o)if(g==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var P=o.B;g=no(),nt(g,new jd(g,d)),po(o)}else df(o);else if(P=c.s,P==3||P==0&&0<c.X||!(g==1&&i_(o,c)||g==2&&Ul(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),P){case 1:rr(o,5);break;case 4:rr(o,10);break;case 3:rr(o,6);break;default:rr(o,2)}}}function mf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function rr(o,c){if(o.j.info("Error code "+c),c==2){var d=_(o.fb,o),g=o.Xa;const P=!g;g=new nr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||oo(g,"https"),lo(g),P?Xv(g.toString(),d):Jv(g.toString(),d)}else rt(2);o.G=0,o.l&&o.l.sa(c),gf(o),uf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function gf(o){if(o.G=0,o.ka=[],o.l){const c=Wd(o.h);(c.length!=0||o.i.length!=0)&&(R(o.ka,c),R(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function yf(o,c,d){var g=d instanceof nr?rn(d):new nr(d);if(g.g!="")c&&(g.g=c+"."+g.g),ao(g,g.s);else{var P=l.location;g=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;var V=new nr(null);g&&oo(V,g),c&&(V.g=c),P&&ao(V,P),d&&(V.l=d),g=V}return d=o.D,c=o.ya,d&&c&&de(g,d,c),de(g,"VER",o.la),Mi(o,g),g}function vf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new xe(new uo({eb:d})):new xe(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _f(){}t=_f.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function go(){}go.prototype.g=function(o,c){return new vt(o,c)};function vt(o,c){We.call(this),this.g=new lf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!x(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!x(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Rr(this)}D(vt,We),vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){Fl(this.g)},vt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Cl(o),o=d);c.i.push(new zv(c.Ya++,o)),c.G==3&&po(c)},vt.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,vt.aa.N.call(this)};function wf(o){Rl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(wf,Rl);function Ef(){kl.call(this),this.status=1}D(Ef,kl);function Rr(o){this.g=o}D(Rr,_f),Rr.prototype.ua=function(){nt(this.g,"a")},Rr.prototype.ta=function(o){nt(this.g,new wf(o))},Rr.prototype.sa=function(o){nt(this.g,new Ef)},Rr.prototype.ra=function(){nt(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,h0=function(){return new go},c0=function(){return no()},u0=er,xc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ro.NO_ERROR=0,ro.TIMEOUT=8,ro.HTTP_ERROR=6,ra=ro,Md.COMPLETE="complete",l0=Md,Pd.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",We.prototype.listen=We.prototype.K,Yi=Pd,xe.prototype.listenOnce=xe.prototype.L,xe.prototype.getLastError=xe.prototype.Ka,xe.prototype.getLastErrorCode=xe.prototype.Ba,xe.prototype.getStatus=xe.prototype.Z,xe.prototype.getResponseJson=xe.prototype.Oa,xe.prototype.getResponseText=xe.prototype.oa,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Ha,a0=xe}).apply(typeof jo<"u"?jo:typeof self<"u"?self:typeof window<"u"?window:{});const $p="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new e0("@firebase/firestore");function Hi(){return _r.logLevel}function Q(t,...e){if(_r.logLevel<=ne.DEBUG){const n=e.map(Lh);_r.debug(`Firestore (${_i}): ${t}`,...n)}}function yn(t,...e){if(_r.logLevel<=ne.ERROR){const n=e.map(Lh);_r.error(`Firestore (${_i}): ${t}`,...n)}}function li(t,...e){if(_r.logLevel<=ne.WARN){const n=e.map(Lh);_r.warn(`Firestore (${_i}): ${t}`,...n)}}function Lh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: `+t;throw yn(e),new Error(e)}function le(t,e){t||Y()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class vx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _x{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new d0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Je(e)}}class wx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ex{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new xx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ix(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function ui(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pe.fromMillis(Date.now())}static fromDate(e){return pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new pe(0,0))}static max(){return new X(new pe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends Vs{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new me(n)}static emptyPath(){return new me([])}}const Sx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends Vs{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return Sx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(me.fromString(e))}static fromName(e){return new K(me.fromString(e).popFirst(5))}static empty(){return new K(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new me(e.slice()))}}function Ax(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new pe(n+1,0):new pe(n,r));return new Wn(i,K.empty(),e)}function Cx(t){return new Wn(t.readTime,t.key,-1)}class Wn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wn(X.min(),K.empty(),-1)}static max(){return new Wn(X.max(),K.empty(),-1)}}function Nx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==Rx)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(m=>{a[h]=m,++l,l===s&&r(a)},m=>i(m))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Px(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ws(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Oh.oe=-1;function al(t){return t==null}function La(t){return t===0&&1/t==-1/0}function Dx(t){return typeof t=="number"&&Number.isInteger(t)&&!La(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function p0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||Ue.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ue.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ue.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mo(this.root,e,this.comparator,!0)}}class Mo{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ue{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ue.RED,this.left=i??Ue.EMPTY,this.right=s??Ue.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ue(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ue.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ue.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Ue.EMPTY=null,Ue.RED=!0,Ue.BLACK=!1;Ue.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ue(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hp(this.data.getIterator())}getIteratorFrom(e){return new Hp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $e(this.comparator);return n.data=e,n}}class Hp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new Et([])}unionWith(e){let n=new $e(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Et(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ui(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new m0("Invalid base64 string: "+s):s}}(e);return new He(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new He(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const Vx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qn(t){if(le(!!t),typeof t=="string"){let e=0;const n=Vx.exec(t);if(le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wr(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uh(t){const e=t.mapValue.fields.__previous_value__;return Fh(e)?Uh(e):e}function bs(t){const e=Qn(t.mapValue.fields.__local_write_time__.timestampValue);return new pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,r,i,s,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class js{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new js("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof js&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Er(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fh(t)?4:Mx(t)?9007199254740991:jx(t)?10:11:Y()}function Jt(t,e){if(t===e)return!0;const n=Er(t);if(n!==Er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bs(t).isEqual(bs(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Qn(i.timestampValue),l=Qn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wr(i.bytesValue).isEqual(wr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Se(i.doubleValue),l=Se(s.doubleValue);return a===l?La(a)===La(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ui(t.arrayValue.values||[],e.arrayValue.values||[],Jt);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(qp(a)!==qp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Jt(a[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function Ms(t,e){return(t.values||[]).find(n=>Jt(n,e))!==void 0}function ci(t,e){if(t===e)return 0;const n=Er(t),r=Er(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Se(s.integerValue||s.doubleValue),u=Se(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Wp(t.timestampValue,e.timestampValue);case 4:return Wp(bs(t),bs(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,a){const l=wr(s),u=wr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const m=se(l[h],u[h]);if(m!==0)return m}return se(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=se(Se(s.latitude),Se(a.latitude));return l!==0?l:se(Se(s.longitude),Se(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qp(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,m;const y=s.fields||{},_=a.fields||{},S=(l=y.value)===null||l===void 0?void 0:l.arrayValue,D=(u=_.value)===null||u===void 0?void 0:u.arrayValue,N=se(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((m=D==null?void 0:D.values)===null||m===void 0?void 0:m.length)||0);return N!==0?N:Qp(S,D)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Lo.mapValue&&a===Lo.mapValue)return 0;if(s===Lo.mapValue)return 1;if(a===Lo.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let y=0;y<u.length&&y<m.length;++y){const _=se(u[y],m[y]);if(_!==0)return _;const S=ci(l[u[y]],h[m[y]]);if(S!==0)return S}return se(u.length,m.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Wp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Qn(t),r=Qn(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function Qp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ci(n[i],r[i]);if(s)return s}return se(n.length,r.length)}function hi(t){return Tc(t)}function Tc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Tc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Tc(n.fields[a])}`;return i+"}"}(t.mapValue):Y()}function Kp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ic(t){return!!t&&"integerValue"in t}function zh(t){return!!t&&"arrayValue"in t}function Gp(t){return!!t&&"nullValue"in t}function Yp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ia(t){return!!t&&"mapValue"in t}function jx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function us(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=us(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=us(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Mx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.value=e}static empty(){return new ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=us(n)}setAll(e){let n=ze.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=us(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ia(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Sr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ht(us(this.value))}}function g0(t){const e=[];return Sr(t.fields,(n,r)=>{const i=new ze([n]);if(ia(r)){const s=g0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Et(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new et(e,0,X.min(),X.min(),X.min(),ht.empty(),0)}static newFoundDocument(e,n,r,i){return new et(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new et(e,2,n,X.min(),X.min(),ht.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,X.min(),X.min(),ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.position=e,this.inclusive=n}}function Xp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=ci(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Jp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n="asc"){this.field=e,this.dir=n}}function Lx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{}class Pe extends y0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Fx(e,n,r):n==="array-contains"?new Bx(e,r):n==="in"?new $x(e,r):n==="not-in"?new qx(e,r):n==="array-contains-any"?new Hx(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ux(e,r):new zx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ci(n,this.value)):n!==null&&Er(this.value)===Er(n)&&this.matchesComparison(ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bt extends y0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bt(e,n)}matches(e){return v0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function v0(t){return t.op==="and"}function _0(t){return Ox(t)&&v0(t)}function Ox(t){for(const e of t.filters)if(e instanceof Bt)return!1;return!0}function Sc(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(_0(t))return t.filters.map(e=>Sc(e)).join(",");{const e=t.filters.map(n=>Sc(n)).join(",");return`${t.op}(${e})`}}function w0(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&Jt(r.value,i.value)}(t,e):t instanceof Bt?function(r,i){return i instanceof Bt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&w0(a,i.filters[l]),!0):!1}(t,e):void Y()}function E0(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${hi(n.value)}`}(t):t instanceof Bt?function(n){return n.op.toString()+" {"+n.getFilters().map(E0).join(" ,")+"}"}(t):"Filter"}class Fx extends Pe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ux extends Pe{constructor(e,n){super(e,"in",n),this.keys=x0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zx extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=x0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class Bx extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zh(n)&&Ms(n.arrayValue,this.value)}}class $x extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ms(this.value.arrayValue,n)}}class qx extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ms(this.value.arrayValue,n)}}class Hx extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ms(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function Zp(t,e=null,n=[],r=[],i=null,s=null,a=null){return new Wx(t,e,n,r,i,s,a)}function Bh(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hi(r)).join(",")),e.ue=n}return e.ue}function $h(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Lx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!w0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jp(t.startAt,e.startAt)&&Jp(t.endAt,e.endAt)}function Ac(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Qx(t,e,n,r,i,s,a,l){return new wi(t,e,n,r,i,s,a,l)}function qh(t){return new wi(t)}function em(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function T0(t){return t.collectionGroup!==null}function cs(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $e(ze.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ls(s,r))}),n.has(ze.keyField().canonicalString())||e.ce.push(new Ls(ze.keyField(),r))}return e.ce}function Kt(t){const e=J(t);return e.le||(e.le=Kx(e,cs(t))),e.le}function Kx(t,e){if(t.limitType==="F")return Zp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ls(i.field,s)});const n=t.endAt?new Oa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oa(t.startAt.position,t.startAt.inclusive):null;return Zp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cc(t,e){const n=t.filters.concat([e]);return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nc(t,e,n){return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ll(t,e){return $h(Kt(t),Kt(e))&&t.limitType===e.limitType}function I0(t){return`${Bh(Kt(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>E0(i)).join(", ")}]`),al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hi(i)).join(",")),`Target(${r})`}(Kt(t))}; limitType=${t.limitType})`}function ul(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of cs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=Xp(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,cs(r),i)||r.endAt&&!function(a,l,u){const h=Xp(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,cs(r),i))}(t,e)}function Gx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S0(t){return(e,n)=>{let r=!1;for(const i of cs(t)){const s=Yx(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Yx(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ci(u,h):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return p0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Ee(K.comparator);function vn(){return Xx}const A0=new Ee(K.comparator);function Xi(...t){let e=A0;for(const n of t)e=e.insert(n.key,n);return e}function C0(t){let e=A0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cr(){return hs()}function N0(){return hs()}function hs(){return new Ei(t=>t.toString(),(t,e)=>t.isEqual(e))}const Jx=new Ee(K.comparator),Zx=new $e(K.comparator);function ee(...t){let e=Zx;for(const n of t)e=e.add(n);return e}const eT=new $e(se);function tT(){return eT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:La(e)?"-0":e}}function R0(t){return{integerValue:""+t}}function nT(t,e){return Dx(e)?R0(e):Hh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this._=void 0}}function rT(t,e,n){return t instanceof Fa?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Fh(s)&&(s=Uh(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Os?P0(t,e):t instanceof Fs?D0(t,e):function(i,s){const a=k0(i,s),l=tm(a)+tm(i.Pe);return Ic(a)&&Ic(i.Pe)?R0(l):Hh(i.serializer,l)}(t,e)}function iT(t,e,n){return t instanceof Os?P0(t,e):t instanceof Fs?D0(t,e):n}function k0(t,e){return t instanceof Ua?function(r){return Ic(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Fa extends cl{}class Os extends cl{constructor(e){super(),this.elements=e}}function P0(t,e){const n=V0(e);for(const r of t.elements)n.some(i=>Jt(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fs extends cl{constructor(e){super(),this.elements=e}}function D0(t,e){let n=V0(e);for(const r of t.elements)n=n.filter(i=>!Jt(i,r));return{arrayValue:{values:n}}}class Ua extends cl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function tm(t){return Se(t.integerValue||t.doubleValue)}function V0(t){return zh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sT(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Os&&i instanceof Os||r instanceof Fs&&i instanceof Fs?ui(r.elements,i.elements,Jt):r instanceof Ua&&i instanceof Ua?Jt(r.Pe,i.Pe):r instanceof Fa&&i instanceof Fa}(t.transform,e.transform)}class oT{constructor(e,n){this.version=e,this.transformResults=n}}class Ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hl{}function b0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wh(t.key,Ut.none()):new Qs(t.key,t.data,Ut.none());{const n=t.data,r=ht.empty();let i=new $e(ze.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Jn(t.key,r,new Et(i.toArray()),Ut.none())}}function aT(t,e,n){t instanceof Qs?function(i,s,a){const l=i.value.clone(),u=rm(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Jn?function(i,s,a){if(!sa(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=rm(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(j0(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ds(t,e,n,r){return t instanceof Qs?function(s,a,l,u){if(!sa(s.precondition,a))return l;const h=s.value.clone(),m=im(s.fieldTransforms,u,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jn?function(s,a,l,u){if(!sa(s.precondition,a))return l;const h=im(s.fieldTransforms,u,a),m=a.data;return m.setAll(j0(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,a,l){return sa(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function lT(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=k0(r.transform,i||null);s!=null&&(n===null&&(n=ht.empty()),n.set(r.field,s))}return n||null}function nm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ui(r,i,(s,a)=>sT(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qs extends hl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jn extends hl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function j0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rm(t,e,n){const r=new Map;le(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,iT(a,l,n[i]))}return r}function im(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,rT(s,a,e))}return r}class Wh extends hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uT extends hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aT(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ds(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ds(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=N0();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=b0(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&ui(this.mutations,e.mutations,(n,r)=>nm(n,r))&&ui(this.baseMutations,e.baseMutations,(n,r)=>nm(n,r))}}class Qh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){le(e.mutations.length===r.length);let i=function(){return Jx}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Qh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,te;function fT(t){switch(t){default:return Y();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function M0(t){if(t===void 0)return yn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Re.OK:return j.OK;case Re.CANCELLED:return j.CANCELLED;case Re.UNKNOWN:return j.UNKNOWN;case Re.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Re.INTERNAL:return j.INTERNAL;case Re.UNAVAILABLE:return j.UNAVAILABLE;case Re.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Re.NOT_FOUND:return j.NOT_FOUND;case Re.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Re.ABORTED:return j.ABORTED;case Re.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Re.DATA_LOSS:return j.DATA_LOSS;default:return Y()}}(te=Re||(Re={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new fr([4294967295,4294967295],0);function sm(t){const e=pT().encode(t),n=new o0;return n.update(e),new Uint8Array(n.digest())}function om(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fr([n,r],0),new fr([i,s],0)]}class Kh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ji(`Invalid padding: ${n}`);if(r<0)throw new Ji(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ji(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ji(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=fr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(fr.fromNumber(r)));return i.compare(mT)===1&&(i=new fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=sm(e),[r,i]=om(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Kh(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=sm(e),[r,i]=om(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ji extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ks.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dl(X.min(),i,new Ee(se),vn(),ee())}}class Ks{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ks(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class L0{constructor(e,n){this.targetId=e,this.me=n}}class O0{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class am{constructor(){this.fe=0,this.ge=um(),this.pe=He.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Ks(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=um()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class gT{constructor(e){this.Le=e,this.Be=new Map,this.ke=vn(),this.qe=lm(),this.Qe=new Ee(se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ac(s))if(r===0){const a=new K(s.path);this.Ue(n,a,et.newNoDocument(a,X.min()))}else le(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=wr(r).toUint8Array()}catch(u){if(u instanceof m0)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Kh(a,i,s)}catch(u){return li(u instanceof Ji?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&Ac(l.target)){const u=new K(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,et.newNoDocument(u,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=ee();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new dl(e,n,this.Qe,this.ke,r);return this.ke=vn(),this.qe=lm(),this.Qe=new Ee(se),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new am,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $e(se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new am),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function lm(){return new Ee(K.comparator)}function um(){return new Ee(K.comparator)}const yT={asc:"ASCENDING",desc:"DESCENDING"},vT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_T={and:"AND",or:"OR"};class wT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rc(t,e){return t.useProto3Json||al(e)?e:{value:e}}function za(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ET(t,e){return za(t,e.toTimestamp())}function Gt(t){return le(!!t),X.fromTimestamp(function(n){const r=Qn(n);return new pe(r.seconds,r.nanos)}(t))}function Gh(t,e){return kc(t,e).canonicalString()}function kc(t,e){const n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function U0(t){const e=me.fromString(t);return le(H0(e)),e}function Pc(t,e){return Gh(t.databaseId,e.path)}function _u(t,e){const n=U0(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(B0(n))}function z0(t,e){return Gh(t.databaseId,e)}function xT(t){const e=U0(t);return e.length===4?me.emptyPath():B0(e)}function Dc(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B0(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cm(t,e,n){return{name:Pc(t,e),fields:n.value.mapValue.fields}}function TT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(le(m===void 0||typeof m=="string"),He.fromBase64String(m||"")):(le(m===void 0||m instanceof Buffer||m instanceof Uint8Array),He.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const m=h.code===void 0?j.UNKNOWN:M0(h.code);return new H(m,h.message||"")}(a);n=new O0(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_u(t,r.document.name),s=Gt(r.document.updateTime),a=r.document.createTime?Gt(r.document.createTime):X.min(),l=new ht({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(i,s,a,l),h=r.targetIds||[],m=r.removedTargetIds||[];n=new oa(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_u(t,r.document),s=r.readTime?Gt(r.readTime):X.min(),a=et.newNoDocument(i,s),l=r.removedTargetIds||[];n=new oa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_u(t,r.document),s=r.removedTargetIds||[];n=new oa([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new dT(i,s),l=r.targetId;n=new L0(l,a)}}return n}function IT(t,e){let n;if(e instanceof Qs)n={update:cm(t,e.key,e.value)};else if(e instanceof Wh)n={delete:Pc(t,e.key)};else if(e instanceof Jn)n={update:cm(t,e.key,e.data),updateMask:VT(e.fieldMask)};else{if(!(e instanceof uT))return Y();n={verify:Pc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof Fa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Os)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ua)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:ET(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function ST(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Gt(i.updateTime):Gt(s);return a.isEqual(X.min())&&(a=Gt(s)),new oT(a,i.transformResults||[])}(n,e))):[]}function AT(t,e){return{documents:[z0(t,e.path)]}}function CT(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=z0(t,i);const s=function(h){if(h.length!==0)return q0(Bt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(m=>function(_){return{field:Vr(_.field),direction:kT(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Rc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function NT(t){let e=xT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){le(r===1);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=function(y){const _=$0(y);return _ instanceof Bt&&_0(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(_=>function(D){return new Ls(br(D.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,al(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(y){const _=!!y.before,S=y.values||[];return new Oa(S,_)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const _=!y.before,S=y.values||[];return new Oa(S,_)}(n.endAt)),Qx(e,i,a,s,l,"F",u,h)}function RT(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=br(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=br(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=br(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=br(n.unaryFilter.field);return Pe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(br(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bt.create(n.compositeFilter.filters.map(r=>$0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function kT(t){return yT[t]}function PT(t){return vT[t]}function DT(t){return _T[t]}function Vr(t){return{fieldPath:t.canonicalString()}}function br(t){return ze.fromServerFormat(t.fieldPath)}function q0(t){return t instanceof Pe?function(n){if(n.op==="=="){if(Yp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NAN"}};if(Gp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NAN"}};if(Gp(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(n.field),op:PT(n.op),value:n.value}}}(t):t instanceof Bt?function(n){const r=n.getFilters().map(i=>q0(i));return r.length===1?r[0]:{compositeFilter:{op:DT(n.op),filters:r}}}(t):Y()}function VT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function H0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,i,s=X.min(),a=X.min(),l=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Pn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.ct=e}}function jT(t){const e=NT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.un=new LT}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Wn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Wn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class LT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $e(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new di(0)}static kn(){return new di(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.changes=new Ei(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ds(r.mutation,i,Et.empty(),pe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const i=cr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Xi();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=cr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=vn();const a=hs(),l=function(){return hs()}();return n.forEach((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Jn)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),ds(m.mutation,h,m.mutation.getFieldMask(),pe.now())):a.set(h.key,Et.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,m)=>a.set(h,m)),n.forEach((h,m)=>{var y;return l.set(h,new FT(m,(y=a.get(h))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=hs();let i=new Ee((a,l)=>a-l),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||Et.empty();m=l.applyToLocalView(h,m),r.set(u,m);const y=(i.get(l.batchId)||ee()).add(u);i=i.insert(l.batchId,y)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,m=u.value,y=N0();m.forEach(_=>{if(!s.has(_)){const S=b0(n.get(_),r.get(_));S!==null&&y.set(_,S),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(cr());let l=-1,u=s;return a.next(h=>M.forEach(h,(m,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),s.get(m)?M.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{u=u.insert(m,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ee())).next(m=>({batchId:l,changes:C0(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Xi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Xi();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const h=function(y,_){return new wi(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(m=>{m.forEach((y,_)=>{a=a.insert(y,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,et.newInvalidDocument(m)))});let l=Xi();return a.forEach((u,h)=>{const m=s.get(u);m!==void 0&&ds(m.mutation,h,Et.empty(),pe.now()),ul(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Gt(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:jT(i.bundledQuery),readTime:Gt(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.overlays=new Ee(K.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=cr(),s=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ee((h,m)=>h-m);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=cr(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const l=cr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>l.set(h,m)),!(l.size()>=i)););return M.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new hT(n,r));let s=this.Ir.get(n);s===void 0&&(s=ee(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.Tr=new $e(be.Er),this.dr=new $e(be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new me([])),r=new be(n,e),i=new be(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new me([])),r=new be(n,e),i=new be(n,e+1);let s=ee();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||se(e.wr,n.wr)}static Ar(e,n){return se(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new $e(be.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new cT(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new be(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $e(se);return n.forEach(i=>{const s=new be(i,0),a=new be(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const a=new be(new K(s),0);let l=new $e(se);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},a),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const s=new be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new be(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.Mr=e,this.docs=function(){return new Ee(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let r=vn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():et.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=vn();const a=n.path,l=new K(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Nx(Cx(m),r)<=0||(i.has(m.key)||ul(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new WT(this)}getSize(e){return M.resolve(this.size)}}class WT extends OT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.persistence=e,this.Nr=new Ei(n=>Bh(n),$h),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Yh,this.targetCount=0,this.kr=di.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new di(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Oh(0),this.Kr=!1,this.Kr=!0,this.$r=new $T,this.referenceDelegate=e(this),this.Ur=new QT(this),this.indexManager=new MT,this.remoteDocumentCache=function(i){return new HT(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new bT(n),this.Gr=new zT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qT(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new GT(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class GT extends kx{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.Jr=new Yh,this.Yr=null}static Zr(e){return new Xh(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ee(),i=ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Jh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tE()?8:Px(Zw())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new YT;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Hi()<=ne.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Hi()<=ne.DEBUG&&Q("QueryEngine","Query:",Dr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Hi()<=ne.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(n))):M.resolve())}Yi(e,n){if(em(n))return M.resolve(null);let r=Kt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Nc(n,null,"F"),r=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ee(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Nc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return em(n)||i.isEqual(X.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?M.resolve(null):(Hi()<=ne.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dr(n)),this.rs(e,a,n,Ax(i,-1)).next(l=>l))})}ts(e,n){let r=new $e(S0(e));return n.forEach((i,s)=>{ul(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Hi()<=ne.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Wn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ee(se),this._s=new Ei(s=>Bh(s),$h),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ZT(t,e,n,r){return new JT(t,e,n,r)}async function W0(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=ee();for(const h of i){a.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of s){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function eI(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,m){const y=h.batch,_=y.keys();let S=M.resolve();return _.forEach(D=>{S=S.next(()=>m.getEntry(u,D)).next(N=>{const R=h.docVersions.get(D);le(R!==null),N.version.compareTo(R)<0&&(y.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),m.addEntry(N)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Q0(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function tI(t,e){const n=J(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((m,y)=>{const _=i.get(y);if(!_)return;l.push(n.Ur.removeMatchingKeys(s,m.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(s,m.addedDocuments,y)));let S=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(He.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):m.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(m.resumeToken,r)),i=i.insert(y,S),function(N,R,T){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(_,S,m)&&l.push(n.Ur.updateTargetData(s,S))});let u=vn(),h=ee();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),l.push(nI(s,a,e.documentUpdates).next(m=>{u=m.Ps,h=m.Is})),!r.isEqual(X.min())){const m=n.Ur.getLastRemoteSnapshotVersion(s).next(y=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(m)}return M.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function nI(t,e,n){let r=ee(),i=ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=vn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function rI(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iI(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Pn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Vc(t,e,n){const r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ws(a))throw a;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function hm(t,e,n){const r=J(t);let i=X.min(),s=ee();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,m){const y=J(u),_=y._s.get(m);return _!==void 0?M.resolve(y.os.get(_)):y.Ur.getTargetData(h,m)}(r,a,Kt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:X.min(),n?s:ee())).next(l=>(sI(r,Gx(e),l),{documents:l,Ts:s})))}function sI(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class dm{constructor(){this.activeTargetIds=tT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oI{constructor(){this.so=new dm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo=null;function wu(){return Oo===null?Oo=function(){return 268435456+Math.round(2147483648*Math.random())}():Oo++,"0x"+Oo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class cI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=wu(),u=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(n,u,h,i).then(m=>(Q("RestConnection",`Received RPC '${n}' ${l}: `,m),m),m=>{throw li("RestConnection",`RPC '${n}' ${l} failed with error: `,m,"url: ",u,"request:",i),m})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_i}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=lI[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=wu();return new Promise((a,l)=>{const u=new a0;u.setWithCredentials(!0),u.listenOnce(l0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ra.NO_ERROR:const m=u.getResponseJson();Q(Xe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case ra.TIMEOUT:Q(Xe,`RPC '${e}' ${s} timed out`),l(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case ra.HTTP_ERROR:const y=u.getStatus();if(Q(Xe,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const S=_==null?void 0:_.error;if(S&&S.status&&S.message){const D=function(R){const T=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(S.status);l(new H(D,S.message))}else l(new H(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(j.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{Q(Xe,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Q(Xe,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=wu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=h0(),l=c0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=s.join("");Q(Xe,`Creating RPC '${e}' stream ${i}: ${m}`,u);const y=a.createWebChannel(m,u);let _=!1,S=!1;const D=new uI({Io:R=>{S?Q(Xe,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(_||(Q(Xe,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),Q(Xe,`RPC '${e}' stream ${i} sending:`,R),y.send(R))},To:()=>y.close()}),N=(R,T,x)=>{R.listen(T,A=>{try{x(A)}catch(b){setTimeout(()=>{throw b},0)}})};return N(y,Yi.EventType.OPEN,()=>{S||(Q(Xe,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),N(y,Yi.EventType.CLOSE,()=>{S||(S=!0,Q(Xe,`RPC '${e}' stream ${i} transport closed`),D.So())}),N(y,Yi.EventType.ERROR,R=>{S||(S=!0,li(Xe,`RPC '${e}' stream ${i} transport errored:`,R),D.So(new H(j.UNAVAILABLE,"The operation could not be completed")))}),N(y,Yi.EventType.MESSAGE,R=>{var T;if(!S){const x=R.data[0];le(!!x);const A=x,b=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(b){Q(Xe,`RPC '${e}' stream ${i} received error:`,b);const U=b.status;let F=function(v){const E=Re[v];if(E!==void 0)return M0(E)}(U),w=b.message;F===void 0&&(F=j.INTERNAL,w="Unknown error status: "+U+" with message "+b.message),S=!0,D.So(new H(F,w)),y.close()}else Q(Xe,`RPC '${e}' stream ${i} received:`,x),D.bo(x)}}),N(l,u0.STAT_EVENT,R=>{R.stat===xc.PROXY?Q(Xe,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===xc.NOPROXY&&Q(Xe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function Eu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){return new wT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,r,i,s,a,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new K0(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(yn(n.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hI extends G0{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=TT(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?Gt(a.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Dc(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Ac(u)?{documents:AT(s,u)}:{query:CT(s,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=F0(s,a.resumeToken);const h=Rc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=za(s,a.snapshotVersion.toTimestamp());const h=Rc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=RT(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Dc(this.serializer),n.removeTarget=e,this.a_(n)}}class dI extends G0{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ST(e.writeResults,e.commitTime),r=Gt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Dc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IT(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,kc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,kc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(j.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class pI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yn(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ar(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=J(u);h.L_.add(4),await Gs(h),h.q_.set("Unknown"),h.L_.delete(4),await pl(h)}(this))})}),this.q_=new pI(r,i)}}async function pl(t){if(Ar(t))for(const e of t.B_)await e(!0)}async function Gs(t){for(const e of t.B_)await e(!1)}function Y0(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),nd(n)?td(n):xi(n).r_()&&ed(n,e))}function Zh(t,e){const n=J(t),r=xi(n);n.N_.delete(e),r.r_()&&X0(n,e),n.N_.size===0&&(r.r_()?r.o_():Ar(n)&&n.q_.set("Unknown"))}function ed(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xi(t).A_(e)}function X0(t,e){t.Q_.xe(e),xi(t).R_(e)}function td(t){t.Q_=new gT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xi(t).start(),t.q_.v_()}function nd(t){return Ar(t)&&!xi(t).n_()&&t.N_.size>0}function Ar(t){return J(t).L_.size===0}function J0(t){t.Q_=void 0}async function gI(t){t.q_.set("Online")}async function yI(t){t.N_.forEach((e,n)=>{ed(t,e)})}async function vI(t,e){J0(t),nd(t)?(t.q_.M_(e),td(t)):t.q_.set("Unknown")}async function _I(t,e,n){if(t.q_.set("Online"),e instanceof O0&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ba(t,r)}else if(e instanceof oa?t.Q_.Ke(e):e instanceof L0?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await Q0(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=s.N_.get(h);m&&s.N_.set(h,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const m=s.N_.get(u);if(!m)return;s.N_.set(u,m.withResumeToken(He.EMPTY_BYTE_STRING,m.snapshotVersion)),X0(s,u);const y=new Pn(m.target,u,h,m.sequenceNumber);ed(s,y)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Ba(t,r)}}async function Ba(t,e,n){if(!Ws(e))throw e;t.L_.add(1),await Gs(t),t.q_.set("Offline"),n||(n=()=>Q0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pl(t)})}function Z0(t,e){return e().catch(n=>Ba(t,n,e))}async function ml(t){const e=J(t),n=Kn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wI(e);)try{const i=await rI(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,EI(e,i)}catch(i){await Ba(e,i)}ev(e)&&tv(e)}function wI(t){return Ar(t)&&t.O_.length<10}function EI(t,e){t.O_.push(e);const n=Kn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ev(t){return Ar(t)&&!Kn(t).n_()&&t.O_.length>0}function tv(t){Kn(t).start()}async function xI(t){Kn(t).p_()}async function TI(t){const e=Kn(t);for(const n of t.O_)e.m_(n.mutations)}async function II(t,e,n){const r=t.O_.shift(),i=Qh.from(r,e,n);await Z0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ml(t)}async function SI(t,e){e&&Kn(t).V_&&await async function(r,i){if(function(a){return fT(a)&&a!==j.ABORTED}(i.code)){const s=r.O_.shift();Kn(r).s_(),await Z0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ml(r)}}(t,e),ev(t)&&tv(t)}async function pm(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Ar(n);n.L_.add(3),await Gs(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pl(n)}async function AI(t,e){const n=J(t);e?(n.L_.delete(2),await pl(n)):e||(n.L_.add(2),await Gs(n),n.q_.set("Unknown"))}function xi(t){return t.K_||(t.K_=function(n,r,i){const s=J(n);return s.w_(),new hI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:gI.bind(null,t),Ro:yI.bind(null,t),mo:vI.bind(null,t),d_:_I.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),nd(t)?td(t):t.q_.set("Unknown")):(await t.K_.stop(),J0(t))})),t.K_}function Kn(t){return t.U_||(t.U_=function(n,r,i){const s=J(n);return s.w_(),new dI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xI.bind(null,t),mo:SI.bind(null,t),f_:TI.bind(null,t),g_:II.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ml(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new rd(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function id(t,e){if(yn("AsyncQueue",`${e}: ${t}`),Ws(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Xi(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new ei(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.W_=new Ee(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fi{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new fi(e,n,ei.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class NI{constructor(){this.queries=gm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=gm(),s.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function gm(){return new Ei(t=>I0(t),ll)}async function nv(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new CI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=id(a,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&sd(n)}async function rv(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RI(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&sd(n)}function kI(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function sd(t){t.Y_.forEach(e=>{e.next()})}var bc,ym;(ym=bc||(bc={})).ea="default",ym.Cache="cache";class iv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.key=e}}class ov{constructor(e){this.key=e}}class PI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=S0(e),this.Ra=new ei(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new mm,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const _=i.get(m),S=ul(this.query,y)?y:null,D=!!_&&this.mutatedKeys.has(_.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let R=!1;_&&S?_.data.isEqual(S.data)?D!==N&&(r.track({type:3,doc:S}),R=!0):this.ga(_,S)||(r.track({type:2,doc:S}),R=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(l=!0)):!_&&S?(r.track({type:0,doc:S}),R=!0):_&&!S&&(r.track({type:1,doc:_}),R=!0,(u||h)&&(l=!0)),R&&(S?(a=a.add(S),s=N?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((m,y)=>function(S,D){const N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return N(S)-N(D)}(m.type,y.type)||this.Aa(m.doc,y.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new fi(this.query,e.Ra,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ov(r))}),this.da.forEach(r=>{e.has(r)||n.push(new sv(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VI{constructor(e){this.key=e,this.va=!1}}class bI{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ei(l=>I0(l),ll),this.Ma=new Map,this.xa=new Set,this.Oa=new Ee(K.comparator),this.Na=new Map,this.La=new Yh,this.Ba={},this.ka=new Map,this.qa=di.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function jI(t,e,n=!0){const r=dv(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await av(r,e,n,!0),i}async function MI(t,e){const n=dv(t);await av(n,e,!0,!1)}async function av(t,e,n,r){const i=await iI(t.localStore,Kt(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await LI(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Y0(t.remoteStore,i),l}async function LI(t,e,n,r,i){t.Ka=(y,_,S)=>async function(N,R,T,x){let A=R.view.ma(T);A.ns&&(A=await hm(N.localStore,R.query,!1).then(({documents:w})=>R.view.ma(w,A)));const b=x&&x.targetChanges.get(R.targetId),U=x&&x.targetMismatches.get(R.targetId)!=null,F=R.view.applyChanges(A,N.isPrimaryClient,b,U);return _m(N,R.targetId,F.wa),F.snapshot}(t,y,_,S);const s=await hm(t.localStore,e,!0),a=new PI(e,s.Ts),l=a.ma(s.documents),u=Ks.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);_m(t,n,h.wa);const m=new DI(e,n,a);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function OI(t,e,n){const r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!ll(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zh(r.remoteStore,i.targetId),jc(r,i.targetId)}).catch(Hs)):(jc(r,i.targetId),await Vc(r.localStore,i.targetId,!0))}async function FI(t,e){const n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zh(n.remoteStore,r.targetId))}async function UI(t,e,n){const r=QI(t);try{const i=await function(a,l){const u=J(a),h=pe.now(),m=l.reduce((S,D)=>S.add(D.key),ee());let y,_;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=vn(),N=ee();return u.cs.getEntries(S,m).next(R=>{D=R,D.forEach((T,x)=>{x.isValidDocument()||(N=N.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,D)).next(R=>{y=R;const T=[];for(const x of l){const A=lT(x,y.get(x.key).overlayedDocument);A!=null&&T.push(new Jn(x.key,A,g0(A.value.mapValue),Ut.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,T,l)}).next(R=>{_=R;const T=R.applyToLocalDocumentSet(y,N);return u.documentOverlayCache.saveOverlays(S,R.batchId,T)})}).then(()=>({batchId:_.batchId,changes:C0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new Ee(se)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,i.batchId,n),await Ys(r,i.changes),await ml(r.remoteStore)}catch(i){const s=id(i,"Failed to persist write");n.reject(s)}}async function lv(t,e){const n=J(t);try{const r=await tI(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?le(a.va):i.removedDocuments.size>0&&(le(a.va),a.va=!1))}),await Ys(n,r,e)}catch(r){await Hs(r)}}function vm(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((m,y)=>{for(const _ of y.j_)_.Z_(l)&&(h=!0)}),h&&sd(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zI(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ee(K.comparator);a=a.insert(s,et.newNoDocument(s,X.min()));const l=ee().add(s),u=new dl(X.min(),new Map,new Ee(se),a,l);await lv(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),od(r)}else await Vc(r.localStore,e,!1).then(()=>jc(r,e,n)).catch(Hs)}async function BI(t,e){const n=J(t),r=e.batch.batchId;try{const i=await eI(n.localStore,e);cv(n,r,null),uv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ys(n,i)}catch(i){await Hs(i)}}async function $I(t,e,n){const r=J(t);try{const i=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,l).next(y=>(le(y!==null),m=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);cv(r,e,n),uv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ys(r,i)}catch(i){await Hs(i)}}function uv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function cv(t,e,n){const r=J(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function jc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||hv(t,r)})}function hv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Zh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),od(t))}function _m(t,e,n){for(const r of n)r instanceof sv?(t.La.addReference(r.key,e),qI(t,r)):r instanceof ov?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||hv(t,r.key)):Y()}function qI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),od(t))}function od(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(me.fromString(e)),r=t.qa.next();t.Na.set(r,new VI(n)),t.Oa=t.Oa.insert(n,r),Y0(t.remoteStore,new Pn(Kt(qh(n.path)),r,"TargetPurposeLimboResolution",Oh.oe))}}async function Ys(t,e,n){const r=J(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){i.push(h);const y=Jh.Wi(u.targetId,h);s.push(y)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(u,h){const m=J(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>M.forEach(h,_=>M.forEach(_.$i,S=>m.persistence.referenceDelegate.addReference(y,_.targetId,S)).next(()=>M.forEach(_.Ui,S=>m.persistence.referenceDelegate.removeReference(y,_.targetId,S)))))}catch(y){if(!Ws(y))throw y;Q("LocalStore","Failed to update sequence numbers: "+y)}for(const y of h){const _=y.targetId;if(!y.fromCache){const S=m.os.get(_),D=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(D);m.os=m.os.insert(_,N)}}}(r.localStore,s))}async function HI(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await W0(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(j.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ys(n,r.hs)}}function WI(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let i=ee();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function dv(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zI.bind(null,e),e.Ca.d_=RI.bind(null,e.eventManager),e.Ca.$a=kI.bind(null,e.eventManager),e}function QI(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$I.bind(null,e),e}class $a{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ZT(this.persistence,new XT,e.initialUser,this.serializer)}Ga(e){return new KT(Xh.Zr,this.serializer)}Wa(e){return new oI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$a.provider={build:()=>new $a};class Mc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HI.bind(null,this.syncEngine),await AI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NI}()}createDatastore(e){const n=fl(e.databaseInfo.databaseId),r=function(s){return new cI(s)}(e.databaseInfo);return function(s,a,l,u){return new fI(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new mI(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>vm(this.syncEngine,n,0),function(){return fm.D()?new fm:new aI}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,m){const y=new bI(i,s,a,l,u,h);return m&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);Q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Gs(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mc.provider={build:()=>new Mc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=f0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=id(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xu(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await W0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GI(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>pm(e.remoteStore,i)),t._onlineComponents=e}async function GI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await xu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),await xu(t,new $a)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await xu(t,new $a);return t._offlineComponents}async function pv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await wm(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await wm(t,new Mc))),t._onlineComponents}function YI(t){return pv(t).then(e=>e.syncEngine)}async function Lc(t){const e=await pv(t),n=e.eventManager;return n.onListen=jI.bind(null,e.syncEngine),n.onUnlisten=OI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=FI.bind(null,e.syncEngine),n}function XI(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const m=new fv({next:_=>{m.Za(),a.enqueueAndForget(()=>rv(s,y)),_.fromCache&&u.source==="server"?h.reject(new H(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),y=new iv(l,m,{includeMetadataChanges:!0,_a:!0});return nv(s,y)}(await Lc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JI(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xm(t){if(!K.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Tm(t){if(K.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gl(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Im({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Im(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yx;switch(r.type){case"firstParty":return new Ex(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Em.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Em.delete(n),r.terminate())}(this),Promise.resolve()}}function ZI(t,e,n,r={}){var i;const s=(t=Yt(t,yl))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Je.MOCK_USER;else{l=Jw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new H(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(h)}t._authCredentials=new vx(new d0(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zn(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}}class $n extends Zn{constructor(e,n,r){super(e,n,qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new K(e))}withConverter(e){return new $n(this.firestore,e,this._path)}}function At(t,e,...n){if(t=Xt(t),gv("collection","path",e),t instanceof yl){const r=me.fromString(e,...n);return Tm(r),new $n(t,null,r)}{if(!(t instanceof gt||t instanceof $n))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return Tm(r),new $n(t.firestore,null,r)}}function on(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=f0.newId()),gv("doc","path",e),t instanceof yl){const r=me.fromString(e,...n);return xm(r),new gt(t,null,new K(r))}{if(!(t instanceof gt||t instanceof $n))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return xm(r),new gt(t.firestore,t instanceof $n?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new K0(this,"async_queue_retry"),this.Vu=()=>{const r=Eu();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Eu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Eu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ws(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw yn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=rd.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Am(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class xr extends yl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Sm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sm(e),this._firestoreClient=void 0,await e}}}function eS(t,e){const n=typeof t=="object"?t:ax(),r=typeof t=="string"?t:"(default)",i=rx(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Yw("firestore");s&&ZI(i,...s)}return i}function ad(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tS(t),t._firestoreClient}function tS(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,m){return new bx(l,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,mv(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new KI(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(He.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pi(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=/^__.*__$/;class rS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qs(e,this.data,n,this.fieldTransforms)}}class yv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Jn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class hd{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vv(this.Cu)&&nS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fl(e)}Qu(e,n,r,i=!1){return new hd({Cu:e,methodName:n,qu:r,path:ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(t){const e=t._freezeSettings(),n=fl(t._databaseId);return new iS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sS(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);fd("Data must be an object, but it was:",a,r);const l=_v(r,a);let u,h;if(s.merge)u=new Et(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const y of s.mergeFields){const _=Oc(e,y,n);if(!a.contains(_))throw new H(j.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Ev(m,_)||m.push(_)}u=new Et(m),h=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=a.fieldTransforms;return new rS(new ht(l),u,h)}class _l extends ld{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _l}}function oS(t,e,n,r){const i=t.Qu(1,e,n);fd("Data must be an object, but it was:",i,r);const s=[],a=ht.empty();Sr(r,(u,h)=>{const m=pd(e,u,n);h=Xt(h);const y=i.Nu(m);if(h instanceof _l)s.push(m);else{const _=Xs(h,y);_!=null&&(s.push(m),a.set(m,_))}});const l=new Et(s);return new yv(a,l,i.fieldTransforms)}function aS(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[Oc(e,r,n)],u=[i];if(s.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)l.push(Oc(e,s[_])),u.push(s[_+1]);const h=[],m=ht.empty();for(let _=l.length-1;_>=0;--_)if(!Ev(h,l[_])){const S=l[_];let D=u[_];D=Xt(D);const N=a.Nu(S);if(D instanceof _l)h.push(S);else{const R=Xs(D,N);R!=null&&(h.push(S),m.set(S,R))}}const y=new Et(h);return new yv(m,y,a.fieldTransforms)}function lS(t,e,n,r=!1){return Xs(n,t.Qu(r?4:3,e))}function Xs(t,e){if(wv(t=Xt(t)))return fd("Unsupported field value:",e,t),_v(t,e);if(t instanceof ld)return function(r,i){if(!vv(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=Xs(l,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pe.fromDate(r);return{timestampValue:za(i.serializer,s)}}if(r instanceof pe){const s=new pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:za(i.serializer,s)}}if(r instanceof ud)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pi)return{bytesValue:F0(i.serializer,r._byteString)};if(r instanceof gt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Hh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${gl(r)}`)}(t,e)}function _v(t,e){const n={};return p0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(t,(r,i)=>{const s=Xs(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function wv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pe||t instanceof ud||t instanceof pi||t instanceof gt||t instanceof ld||t instanceof cd)}function fd(t,e,n){if(!wv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=gl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Oc(t,e,n){if((e=Xt(e))instanceof vl)return e._internalPath;if(typeof e=="string")return pd(t,e);throw qa("Field path arguments must be of type string or ",t,!1,void 0,n)}const uS=new RegExp("[~\\*/\\[\\]]");function pd(t,e,n){if(e.search(uS)>=0)throw qa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vl(...e.split("."))._internalPath}catch{throw qa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qa(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new H(j.INVALID_ARGUMENT,l+t+u)}function Ev(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cS extends xv{data(){return super.data()}}function md(t,e){return typeof e=="string"?pd(t,e):e instanceof vl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gd{}class Iv extends gd{}function In(t,e,...n){let r=[];e instanceof gd&&r.push(e),r=r.concat(n),function(s){const a=s.filter(u=>u instanceof vd).length,l=s.filter(u=>u instanceof yd).length;if(a>1||a>0&&l>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yd extends Iv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yd(e,n,r)}_apply(e){const n=this._parse(e);return Sv(e._query,n),new Zn(e.firestore,e.converter,Cc(e._query,n))}_parse(e){const n=dd(e.firestore);return function(s,a,l,u,h,m,y){let _;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Nm(y,m);const S=[];for(const D of y)S.push(Cm(u,s,D));_={arrayValue:{values:S}}}else _=Cm(u,s,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Nm(y,m),_=lS(l,a,y,m==="in"||m==="not-in");return Pe.create(h,m,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vd extends gd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const u of l)Sv(a,u),a=Cc(a,u)}(e._query,n),new Zn(e.firestore,e.converter,Cc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _d extends Iv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _d(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ls(s,a)}(e._query,this._field,this._direction);return new Zn(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new wi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Fo(t,e="asc"){const n=e,r=md("orderBy",t);return _d._create(r,n)}function Cm(t,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T0(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!K.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kp(t,new K(r))}if(n instanceof gt)return Kp(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gl(n)}.`)}function Nm(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sv(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hS{convertValue(e,n="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Sr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Se(a.doubleValue));return new cd(s)}convertGeoPoint(e){return new ud(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bs(e));default:return null}}convertTimestamp(e){const n=Qn(e);return new pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);le(H0(r));const i=new js(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||yn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Av extends xv{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new aa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(md("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class aa extends Av{data(e={}){return super.data(e)}}class Cv{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new aa(this._firestore,this._userDataWriter,r.key,r,new Zi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new aa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Zi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new aa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Zi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:fS(l.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class wd extends hS{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function Uo(t){t=Yt(t,Zn);const e=Yt(t.firestore,xr),n=ad(e),r=new wd(e);return Tv(t._query),XI(n,t._query).then(i=>new Cv(e,r,t,i))}function zo(t,e,n,...r){t=Yt(t,gt);const i=Yt(t.firestore,xr),s=dd(i);let a;return a=typeof(e=Xt(e))=="string"||e instanceof vl?aS(s,"updateDoc",t._key,e,n,r):oS(s,"updateDoc",t._key,e),Ed(i,[a.toMutation(t._key,Ut.exists(!0))])}function Bo(t){return Ed(Yt(t.firestore,xr),[new Wh(t._key,Ut.none())])}function $o(t,e){const n=Yt(t.firestore,xr),r=on(t),i=dS(t.converter,e);return Ed(n,[sS(dd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ut.exists(!1))]).then(()=>r)}function qo(t,...e){var n,r,i;t=Xt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Am(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Am(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let u,h,m;if(t instanceof gt)h=Yt(t.firestore,xr),m=qh(t._key.path),u={next:y=>{e[a]&&e[a](pS(h,t,y))},error:e[a+1],complete:e[a+2]};else{const y=Yt(t,Zn);h=Yt(y.firestore,xr),m=y._query;const _=new wd(h);u={next:S=>{e[a]&&e[a](new Cv(h,_,y,S))},error:e[a+1],complete:e[a+2]},Tv(t._query)}return function(_,S,D,N){const R=new fv(N),T=new iv(S,R,D);return _.asyncQueue.enqueueAndForget(async()=>nv(await Lc(_),T)),()=>{R.Za(),_.asyncQueue.enqueueAndForget(async()=>rv(await Lc(_),T))}}(ad(h),m,l,u)}function Ed(t,e){return function(r,i){const s=new Bn;return r.asyncQueue.enqueueAndForget(async()=>UI(await YI(r),i,s)),s.promise}(ad(t),e)}function pS(t,e,n){const r=n.docs.get(e._key),i=new wd(t);return new Av(t,i,e._key,r,new Zi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){_i=i})(ox),Ma(new Ps("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new xr(new _x(r.getProvider("auth-internal")),new Tx(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(h.options.projectId,m)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Zr($p,"4.7.3",e),Zr($p,"4.7.3","esm2017")})();var mS="firebase",gS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr(mS,gS,"app");const yS={apiKey:"AIzaSyCkgUUr8CADydWb62Qdb8p8MHZ_TUkrCzE",authDomain:"sportsbox-result.firebaseapp.com",projectId:"sportsbox-result",storageBucket:"sportsbox-result.appspot.com",messagingSenderId:"1098188923070",appId:"1:1098188923070:web:b021c52a64965bf79dbeef",measurementId:"G-DR5V9BNFZ2"},vS=r0(yS),Ne=eS(vS),st={async getDemands(){try{const t=In(At(Ne,"demands"),Fo("createdAt","desc"));return(await Uo(t)).docs.map(n=>{var r,i;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((i=n.data().updatedAt)==null?void 0:i.toDate())||new Date}})}catch(t){throw console.error("수요처 데이터 로드 실패:",t),t}},async addDemand(t){try{const e=pe.now(),n={...t,email:t.email||"",createdAt:e,updatedAt:e};return{id:(await $o(At(Ne,"demands"),n)).id,...t,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("수요처 추가 실패:",e),e}},async updateDemand(t,e){try{const n=on(Ne,"demands",t);await zo(n,{...e,updatedAt:pe.now()})}catch(n){throw console.error("수요처 수정 실패:",n),n}},async deleteDemand(t){try{await Bo(on(Ne,"demands",t))}catch(e){throw console.error("수요처 삭제 실패:",e),e}},async getPerformances(){try{const t=In(At(Ne,"performances"),Fo("date","desc"));return(await Uo(t)).docs.map(n=>{var r,i,s;return{id:n.id,...n.data(),date:((r=n.data().date)==null?void 0:r.toDate())||new Date,createdAt:((i=n.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("실적 데이터 로드 실패:",t),t}},async addPerformance(t){try{const e=pe.now(),n=t.notes!==void 0&&t.notes!==null?t.notes.toString().trim():"";return{id:(await $o(At(Ne,"performances"),{...t,notes:n,date:pe.fromDate(t.date),createdAt:e,updatedAt:e})).id,...t,notes:n,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("실적 추가 실패:",e),e}},async updatePerformance(t,e){try{const n=on(Ne,"performances",t),r=e.notes!==void 0&&e.notes!==null?e.notes.toString().trim():void 0,i={...e,updatedAt:pe.now()};r!==void 0&&(i.notes=r),e.date&&(i.date=pe.fromDate(e.date)),await zo(n,i)}catch(n){throw console.error("실적 수정 실패:",n),n}},async deletePerformance(t){try{await Bo(on(Ne,"performances",t))}catch(e){throw console.error("실적 삭제 실패:",e),e}},subscribeToDemands(t){const e=In(At(Ne,"demands"),Fo("createdAt","desc"));return qo(e,n=>{const r=n.docs.map(i=>{var s,a;return{id:i.id,...i.data(),createdAt:((s=i.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((a=i.data().updatedAt)==null?void 0:a.toDate())||new Date}});t(r)})},subscribeToPerformances(t){const e=In(At(Ne,"performances"),Fo("date","desc"));return qo(e,n=>{const r=n.docs.map(i=>{var s,a,l;return{id:i.id,...i.data(),date:((s=i.data().date)==null?void 0:s.toDate())||new Date,createdAt:((a=i.data().createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((l=i.data().updatedAt)==null?void 0:l.toDate())||new Date}});t(r)})},async getBudgets(){try{const t=In(At(Ne,"budgets"));return(await Uo(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 항목 데이터 로드 실패:",t),t}},async addBudget(t){try{return{id:(await $o(At(Ne,"budgets"),t)).id,...t}}catch(e){throw console.error("예산 항목 추가 실패:",e),e}},async updateBudget(t,e){try{const n=on(Ne,"budgets",t);await zo(n,e)}catch(n){throw console.error("예산 항목 수정 실패:",n),n}},async deleteBudget(t){try{await Bo(on(Ne,"budgets",t))}catch(e){throw console.error("예산 항목 삭제 실패:",e),e}},subscribeToBudgets(t){const e=In(At(Ne,"budgets"));return qo(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)})},async getBudgetUsages(){try{const t=In(At(Ne,"budgetUsages"));return(await Uo(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 사용 내역 데이터 로드 실패:",t),t}},async addBudgetUsage(t){try{return{id:(await $o(At(Ne,"budgetUsages"),t)).id,...t}}catch(e){throw console.error("예산 사용 내역 추가 실패:",e),e}},async updateBudgetUsage(t,e){try{const n=on(Ne,"budgetUsages",t);await zo(n,e)}catch(n){throw console.error("예산 사용 내역 수정 실패:",n),n}},async deleteBudgetUsage(t){try{await Bo(on(Ne,"budgetUsages",t))}catch(e){throw console.error("예산 사용 내역 삭제 실패:",e),e}},subscribeToBudgetUsages(t){const e=In(At(Ne,"budgetUsages"));return qo(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)})}},Ti=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),[i,s]=G.useState(!0),[a,l]=G.useState(null);return G.useEffect(()=>{let u=null,h=null;return(async()=>{try{s(!0),l(null),u=st.subscribeToDemands(y=>{e(y)}),h=st.subscribeToPerformances(y=>{r(y)}),s(!1)}catch(y){console.error("Firebase 데이터 초기화 실패:",y),l("데이터를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요."),s(!1)}})(),()=>{u&&u(),h&&h()}},[]),{demands:t,performances:n,loading:i,error:a,addDemand:st.addDemand,updateDemand:st.updateDemand,deleteDemand:st.deleteDemand,addPerformance:st.addPerformance,updatePerformance:st.updatePerformance,deletePerformance:st.deletePerformance}},_S=(t,e=[])=>{if(t.length===0)return{totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]};const n=t.reduce((N,R)=>N+(R.maleCount||0),0),r=t.reduce((N,R)=>N+(R.femaleCount||0),0),i=n+r,s=t.reduce((N,R)=>N+(R.promotionCount||0),0),l=new Set(t.map(N=>N.organizationName)).size,u=new Date,h=[];for(let N=11;N>=0;N--){const R=new Date(u.getFullYear(),u.getMonth()-N,1),T=R.toLocaleDateString("ko-KR",{month:"short",year:"2-digit"}),x=t.filter(F=>{if(!F.date)return!1;const w=new Date(F.date);return w.getMonth()===R.getMonth()&&w.getFullYear()===R.getFullYear()}),A=x.reduce((F,w)=>F+(w.maleCount||0),0),b=x.reduce((F,w)=>F+(w.femaleCount||0),0),U=x.reduce((F,w)=>F+(w.promotionCount||0),0);h.push({month:T,male:A,female:b,total:A+b,promotions:U})}const m=new Map;t.forEach(N=>{const R=m.get(N.organizationName)||{total:0,count:0,city:""},T=e.find(x=>x.organizationName===N.organizationName);m.set(N.organizationName,{total:R.total+(N.maleCount||0)+(N.femaleCount||0),count:R.count+1,city:(T==null?void 0:T.city)||R.city||""})});const y=Array.from(m.entries()).map(([N,R])=>({name:N,total:R.total,count:R.count,city:R.city})).sort((N,R)=>R.total-N.total),_=new Map;["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"].forEach(N=>{_.set(N,{total:0,count:0})}),t.forEach(N=>{const R=e.find(T=>T.organizationName===N.organizationName);if(R&&_.has(R.city)){const T=_.get(R.city);_.set(R.city,{total:T.total+(N.maleCount||0)+(N.femaleCount||0),count:T.count+1})}});const D=Array.from(_.entries()).map(([N,R])=>({name:N,total:R.total,count:R.count})).sort((N,R)=>R.total-N.total);return{totalMale:n,totalFemale:r,totalPeople:i,totalPromotions:s,totalOrganizations:l,monthlyData:h,organizationData:y,cityData:D}},Rm=()=>{const{demands:t,performances:e}=Ti(),[n,r]=G.useState({totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]}),[i,s]=G.useState([]),[a,l]=G.useState([]),[u,h]=G.useState(null),[m,y]=G.useState(""),[_,S]=G.useState(0),D=["과천시","광명시","광주시","군포시","김포시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","여주시","오산시","용인시","의왕시","이천시","평택시","하남시","화성시","양평군"],N=["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"],[R,T]=G.useState("전체"),[x,A]=G.useState(null),[b,U]=G.useState(!1);G.useEffect(()=>{const B=st.subscribeToBudgets(s),O=st.subscribeToBudgetUsages(l);return()=>{B(),O()}},[]);const F=B=>{h(B.id),y(B.name),S(B.amount)},w=async B=>{await st.updateBudget(B,{name:m,amount:_}),h(null)},p=async()=>{await st.addBudget({name:"",amount:0})},v=async()=>{i[0]&&await st.addBudgetUsage({budgetItemId:i[0].id,description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},E=async(B,O,$)=>{const W=a.find(oe=>oe.id===B);W&&await st.updateBudgetUsage(B,{...W,[O]:$})},C=async B=>{await st.deleteBudgetUsage(B)},k=B=>a.filter(O=>O.budgetItemId===B).reduce((O,$)=>O+(Number($.amount)||0),0);G.useEffect(()=>{const B=_S(e,t);r({...B,totalOrganizations:t.length})},[t,e]);const I=({title:B,value:O,icon:$,color:W})=>f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:B}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:O})]}),f.jsx("div",{className:`p-3 rounded-lg ${W}`,children:f.jsx($,{className:"w-6 h-6 text-white"})})]})}),Le=({data:B,onBarClick:O})=>{const $=Math.max(...B.map(W=>W.total),1);return f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"시/군별 참여 현황"}),f.jsx("div",{className:"flex gap-2 mb-4",children:["전체","남부","북부"].map(W=>f.jsx("button",{className:`px-4 py-2 rounded-full border font-semibold transition-colors duration-200 ${R===W?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>T(W),children:W},W))}),B.length>0?f.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-96 overflow-y-auto",children:B.map((W,oe)=>f.jsxs("div",{className:`flex items-center space-x-4 p-3 bg-gray-50 rounded-lg transition cursor-pointer hover:shadow-md ${O?"hover:bg-blue-100":""}`,onClick:O?()=>O(W.name):void 0,children:[f.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[70px] text-center",children:W.name}),f.jsx("div",{className:"flex-1",children:f.jsx("div",{className:"bg-gray-200 rounded-full h-6 relative",children:f.jsx("div",{className:"bg-blue-500 h-6 rounded-full transition-all duration-500 ease-out flex items-center justify-end pr-2",style:{width:`${Math.max(W.total/$*100,8)}%`},title:`${W.count}회, ${W.total.toLocaleString()}명`,children:f.jsxs("span",{className:"text-xs text-white font-medium",children:[W.total.toLocaleString(),"명"]})})})}),f.jsxs("div",{className:"text-sm text-gray-600 font-mono min-w-[50px] text-right",children:[W.count,"회"]})]},oe))}):f.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"데이터가 없습니다"})]})},yt=n.cityData.filter(B=>R==="전체"?!0:R==="남부"?D.includes(B.name):R==="북부"?N.includes(B.name):!0),ut=n.organizationData.filter(B=>B.city===x);return f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"대시보드"}),f.jsx("p",{className:"text-gray-600",children:"수요처 및 실적 현황 개요"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsx(I,{title:"등록 단체수",value:n.totalOrganizations.toString(),icon:bw,color:"bg-blue-500"}),f.jsx(I,{title:"총 횟수",value:e.length.toString(),icon:Da,color:"bg-green-500"}),f.jsx(I,{title:"총 참여 인원",value:n.totalPeople.toLocaleString()+"명",icon:ks,color:"bg-purple-500"}),f.jsx(I,{title:"평균 참여 인원",value:e.length>0?Math.round(n.totalPeople/e.length).toLocaleString()+"명":"0명",icon:qy,color:"bg-orange-500"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 현황"}),f.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:p,children:"+ 예산 항목 추가"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"예산액"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"사용액"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"잔액"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"집행율(%)"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"수정"})]})}),f.jsx("tbody",{children:i.map(B=>{const O=k(B.id),$=B.amount-O,W=B.amount>0?O/B.amount*100:0;return f.jsxs("tr",{className:"hover:bg-blue-50",children:[f.jsx("td",{className:"px-2 py-2",children:u===B.id?f.jsx("input",{className:"border rounded px-2 py-1 w-32",value:m,onChange:oe=>y(oe.target.value)}):f.jsx("span",{children:B.name})}),f.jsx("td",{className:"px-2 py-2 text-right",children:u===B.id?f.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:_,onChange:oe=>S(Number(oe.target.value))}):B.amount.toLocaleString()}),f.jsx("td",{className:"px-2 py-2 text-right",children:O.toLocaleString()}),f.jsx("td",{className:"px-2 py-2 text-right",children:$.toLocaleString()}),f.jsx("td",{className:"px-2 py-2 text-right",children:W.toFixed(2)}),f.jsx("td",{className:"px-2 py-2 text-center",children:u===B.id?f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"px-2 py-1 text-green-600 hover:underline",onClick:()=>w(B.id),children:"저장"}),f.jsx("button",{className:"px-2 py-1 text-gray-500 hover:underline",onClick:()=>h(null),children:"취소"})]}):f.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>F(B),children:"수정"})})]},B.id)})})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 내역"}),f.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:v,children:"+ 내역 추가"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),f.jsx("th",{className:"px-2 py-2 text-left",children:"적요"}),f.jsx("th",{className:"px-2 py-2 text-left",children:"채주"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"집행액"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"회계일자"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"결제방법"}),f.jsx("th",{className:"px-2 py-2 text-left",children:"비고"}),f.jsx("th",{className:"px-2 py-2 text-center",children:"삭제"})]})}),f.jsx("tbody",{children:a.map((B,O)=>f.jsxs("tr",{className:"hover:bg-blue-50",children:[f.jsx("td",{className:"px-2 py-2",children:f.jsx("select",{className:"border rounded px-2 py-1 w-32",value:B.budgetItemId,onChange:$=>E(B.id,"budgetItemId",$.target.value),children:i.map($=>f.jsx("option",{value:$.id,children:$.name},$.id))})}),f.jsx("td",{className:"px-2 py-2",children:f.jsx("input",{className:"border rounded px-2 py-1 w-32",value:B.description,onChange:$=>E(B.id,"description",$.target.value)})}),f.jsx("td",{className:"px-2 py-2",children:f.jsx("input",{className:"border rounded px-2 py-1 w-24",value:B.vendor,onChange:$=>E(B.id,"vendor",$.target.value)})}),f.jsx("td",{className:"px-2 py-2 text-right",children:f.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-20 text-right",value:B.amount,onChange:$=>E(B.id,"amount",Number($.target.value))})}),f.jsx("td",{className:"px-2 py-2 text-center",children:f.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-32",value:B.date,onChange:$=>E(B.id,"date",$.target.value)})}),f.jsx("td",{className:"px-2 py-2 text-center",children:f.jsx("input",{className:"border rounded px-2 py-1 w-20",value:B.paymentMethod,onChange:$=>E(B.id,"paymentMethod",$.target.value)})}),f.jsx("td",{className:"px-2 py-2",children:f.jsx("input",{className:"border rounded px-2 py-1 w-32",value:B.note||"",onChange:$=>E(B.id,"note",$.target.value)})}),f.jsx("td",{className:"px-2 py-2 text-center",children:f.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>C(B.id),children:"삭제"})})]},B.id))})]})})]}),f.jsx("div",{className:"mb-8",children:f.jsx(Le,{data:yt,onBarClick:B=>{A(B),U(!0)}})}),b&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 relative animate-fadeIn",children:[f.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>U(!1),children:"×"}),f.jsxs("h3",{className:"text-2xl font-bold mb-4 text-blue-700",children:[x," 수요처별 참여 현황"]}),ut.length>0?f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-gray-50",children:[f.jsx("th",{className:"px-2 py-2 text-left",children:"수요처명"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"횟수"}),f.jsx("th",{className:"px-2 py-2 text-right",children:"총 참여인원"})]})}),f.jsx("tbody",{children:ut.map((B,O)=>f.jsxs("tr",{className:"hover:bg-blue-50",children:[f.jsx("td",{className:"px-2 py-2 font-medium text-gray-900",children:B.name}),f.jsxs("td",{className:"px-2 py-2 text-right",children:[B.count,"회"]}),f.jsxs("td",{className:"px-2 py-2 text-right",children:[B.total.toLocaleString(),"명"]})]},O))})]}):f.jsx("div",{className:"text-gray-500 text-center py-8",children:"데이터가 없습니다"})]})})]})},wS=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const i=e[r].trim();if(!i)continue;const s=i.split(",").map(a=>a.trim().replace(/"/g,""));s.length>=4&&n.push({city:s[0]||"",organizationName:s[1]||"",contactPerson:s[2]||"",phoneNumber:s[3]||"",email:s[4]||""})}return n},ES=()=>{const t=`\uFEFF시/군,단체명,담당자명,연락처,이메일
수원시,예시 단체,홍길동,010-1234-5678,hong@example.com
성남시,샘플 그룹,김철수,010-9876-5432,kim@sample.org`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="수요처_등록_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},Js=()=>{const[t,e]=G.useState([]),n=G.useCallback(i=>{const s=crypto.randomUUID(),a={...i,id:s,duration:i.duration||5e3};e(l=>[...l,a]),setTimeout(()=>{e(l=>l.filter(u=>u.id!==s))},a.duration)},[]),r=G.useCallback(i=>{e(s=>s.filter(a=>a.id!==i))},[]);return{toasts:t,addToast:n,removeToast:r}},xS=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],TS=()=>{const{addToast:t}=Js(),{addDemand:e}=Ti(),n=G.useRef(null),[r,i]=G.useState("manual"),[s,a]=G.useState(!1),[l,u]=G.useState(!1),[h,m]=G.useState(!1),[y,_]=G.useState(!1),[S,D]=G.useState({success:0,error:0}),[N,R]=G.useState({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""}),T=p=>{const{name:v,value:E}=p.target;R(C=>({...C,[v]:E}))},x=async p=>{if(p.preventDefault(),!N.city||!N.organizationName||!N.contactPerson||!N.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await e({city:N.city,organizationName:N.organizationName,contactPerson:N.contactPerson,phoneNumber:N.phoneNumber,email:N.email||""}),u(!0),R({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""})}catch{t({type:"error",title:"등록 실패",message:"수요처 등록 중 오류가 발생했습니다"})}},A=async p=>{const v=new FileReader;v.onload=async E=>{var C;try{const k=(C=E.target)==null?void 0:C.result,I=wS(k);if(I.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let Le=0,yt=0;for(const ut of I)try{ut.city&&ut.organizationName&&ut.contactPerson&&ut.phoneNumber?(await e(ut),Le++):yt++}catch{yt++}D({success:Le,error:yt}),_(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}},v.readAsText(p,"UTF-8")},b=p=>{p.preventDefault(),a(!1);const v=Array.from(p.dataTransfer.files);v.length>0&&A(v[0])},U=p=>{p.preventDefault(),a(!0)},F=p=>{p.preventDefault(),a(!1)},w=p=>{const v=p.target.files;v&&v.length>0&&A(v[0]),p.target.value=""};return f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 등록"}),f.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 수요처를 등록하세요"})]}),f.jsx("div",{className:"border-b border-gray-200 mb-8",children:f.jsxs("nav",{className:"-mb-px flex space-x-8",children:[f.jsxs("button",{onClick:()=>i("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(Ow,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),f.jsxs("button",{onClick:()=>i("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(mc,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),r==="manual"&&f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:f.jsxs("form",{onSubmit:x,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"시/군 *"}),f.jsxs("select",{id:"city",name:"city",value:N.city,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[f.jsx("option",{value:"",children:"시/군을 선택하세요"}),xS.map(p=>f.jsx("option",{value:p,children:p},p))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),f.jsx("input",{type:"text",id:"organizationName",name:"organizationName",value:N.organizationName,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"단체명을 입력하세요",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-gray-700 mb-2",children:"담당자명 *"}),f.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:N.contactPerson,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"담당자명을 입력하세요",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"연락처 *"}),f.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:N.phoneNumber,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"연락처를 입력하세요",required:!0})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일 (선택사항)"}),f.jsx("input",{type:"email",id:"email",name:"email",value:N.email,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"이메일 주소를 입력하세요"})]})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"수요처 등록"})})]})}),r==="bulk"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(Hy,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),f.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 시/군, 단체명, 담당자명, 연락처, 이메일(선택)"}),f.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[f.jsxs("button",{onClick:ES,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[f.jsx(jw,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),f.jsxs("button",{onClick:()=>m(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[f.jsx($y,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:f.jsxs("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${s?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:b,onDragOver:U,onDragLeave:F,children:[f.jsx(mc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),f.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),f.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),f.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),f.jsx("input",{ref:n,type:"file",accept:".csv,.txt",onChange:w,className:"hidden"}),f.jsx("button",{onClick:()=>{var p;return(p=n.current)==null?void 0:p.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})]}),l&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Va,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"등록 완료!"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"수요처가 성공적으로 등록되었습니다."}),f.jsx("button",{onClick:()=>u(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),y&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Va,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"업로드 완료!"}),f.jsxs("div",{className:"text-gray-600 mb-6",children:[f.jsx("p",{className:"mb-2",children:"파일 업로드가 완료되었습니다."}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{children:"성공:"}),f.jsxs("span",{className:"font-semibold text-green-600",children:[S.success,"건"]})]}),S.error>0&&f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{children:"실패:"}),f.jsxs("span",{className:"font-semibold text-red-600",children:[S.error,"건"]})]})]})]}),f.jsx("button",{onClick:()=>_(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),h&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"CSV 파일 저장 방법"}),f.jsx("p",{className:"text-gray-600",children:"한글이 깨지지 않게 저장하는 방법을 안내합니다."})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 Microsoft Excel 사용시"}),f.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[f.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),f.jsxs("li",{children:["데이터 입력 완료 후 ",f.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),f.jsxs("li",{children:["파일 형식에서 ",f.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),f.jsx("li",{children:"파일명 입력 후 저장"}),f.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),f.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:f.jsxs("p",{className:"text-sm text-yellow-800",children:[f.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',f.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),f.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[f.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 Google Sheets 사용시"}),f.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[f.jsx("li",{children:"구글 시트에서 데이터 입력"}),f.jsxs("li",{children:[f.jsx("strong",{children:"파일 → 다운로드 → 쉼표로 구분된 값(.csv, 현재 시트)"})," 선택"]}),f.jsx("li",{children:"다운로드된 파일을 업로드"})]}),f.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:f.jsx("p",{className:"text-sm text-green-800",children:"구글 시트는 자동으로 UTF-8로 저장되어 한글 문제가 없습니다."})})]})]}),f.jsx("div",{className:"flex justify-end mt-6",children:f.jsx("button",{onClick:()=>m(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},IS=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],SS=()=>{const{addToast:t}=Js(),{demands:e,updateDemand:n,deleteDemand:r}=Ti(),[i,s]=G.useState(null),[a,l]=G.useState(""),[u,h]=G.useState({}),m=e.filter(R=>R.organizationName.toLowerCase().includes(a.toLowerCase())||R.city.toLowerCase().includes(a.toLowerCase())||R.contactPerson.toLowerCase().includes(a.toLowerCase())),y=R=>{s(R.id),h(R)},_=async()=>{if(!i||!u.city||!u.organizationName||!u.contactPerson||!u.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await n(i,u),s(null),h({}),t({type:"success",title:"수정 완료",message:"수요처 정보가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"수요처 정보 수정 중 오류가 발생했습니다"})}},S=()=>{s(null),h({})},D=async(R,T)=>{if(window.confirm(`"${T}"의 수요처 정보를 삭제하시겠습니까?`))try{await r(R),t({type:"success",title:"삭제 완료",message:"수요처 정보가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"수요처 정보 삭제 중 오류가 발생했습니다"})}},N=(R,T)=>{h(x=>({...x,[R]:T}))};return f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 관리"}),f.jsx("p",{className:"text-gray-600",children:"등록된 수요처 정보를 조회, 수정, 삭제할 수 있습니다"})]}),f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"relative max-w-md",children:[f.jsx(Ky,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"수요처 검색...",value:a,onChange:R=>l(R.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"시/군"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"담당자"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"연락처"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"이메일"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"등록일"}),f.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(R=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsxs("select",{value:u.city||"",onChange:T=>N("city",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"시/군 선택"}),IS.map(T=>f.jsx("option",{value:T,children:T},T))]}):f.jsx("span",{className:"text-sm text-gray-900",children:R.city})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"text",value:u.organizationName||"",onChange:T=>N("organizationName",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm font-medium text-gray-900",children:R.organizationName})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"text",value:u.contactPerson||"",onChange:T=>N("contactPerson",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-900",children:R.contactPerson})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"tel",value:u.phoneNumber||"",onChange:T=>N("phoneNumber",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-900",children:R.phoneNumber})}),f.jsx("td",{className:"px-6 py-4",children:i===R.id?f.jsx("input",{type:"email",value:u.email||"",onChange:T=>N("email",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-500",children:R.email||"-"})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:"text-sm text-gray-500",children:R.createdAt.toLocaleDateString("ko-KR")})}),f.jsx("td",{className:"px-6 py-4 text-right",children:i===R.id?f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:_,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:f.jsx(Vh,{className:"w-4 h-4"})}),f.jsx("button",{onClick:S,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:f.jsx(bh,{className:"w-4 h-4"})})]}):f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:()=>y(R),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:f.jsx(Qy,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>D(R.id,R.organizationName),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:f.jsx(Gy,{className:"w-4 h-4"})})]})})]},R.id))})]})}),m.length===0&&f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-gray-500",children:"검색 결과가 없습니다"})})]}),f.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",m.length,"건 표시"]})]})},AS=()=>{const{addToast:t}=Js(),{demands:e,addPerformance:n}=Ti(),[r,i]=G.useState(!1),[s,a]=G.useState({date:new Date().toISOString().split("T")[0],organizationName:"",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),l=Array.from(new Set(e.map(y=>y.organizationName))).sort(),u=y=>{const{name:_,value:S}=y.target;a(D=>({...D,[_]:S}))},h=()=>{const y=parseInt(s.maleCount)||0,_=parseInt(s.femaleCount)||0;return y+_},m=async y=>{if(y.preventDefault(),!s.date||!s.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const _=parseInt(s.maleCount)||0,S=parseInt(s.femaleCount)||0,D=parseInt(s.promotionCount)||0;if(_<0||S<0||D<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await n({date:new Date(s.date),organizationName:s.organizationName,maleCount:_,femaleCount:S,promotionCount:D,notes:s.notes?s.notes.trim():""}),i(!0),a({date:new Date().toISOString().split("T")[0],organizationName:"",maleCount:"",femaleCount:"",promotionCount:"",notes:""})}catch{t({type:"error",title:"저장 실패",message:"실적 데이터 저장 중 오류가 발생했습니다"})}};return f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 입력"}),f.jsx("p",{className:"text-gray-600",children:"단체별 실적 데이터를 기록하세요"})]}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:f.jsxs("form",{onSubmit:m,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),f.jsxs("div",{className:"relative",children:[f.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"date",id:"date",name:"date",value:s.date,onChange:u,className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),f.jsxs("select",{id:"organizationName",name:"organizationName",value:s.organizationName,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[f.jsx("option",{value:"",children:"단체를 선택하세요"}),l.map(y=>f.jsx("option",{value:y,children:y},y))]}),l.length===0&&f.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"등록된 단체가 없습니다. 먼저 수요처를 등록해주세요."})]})]}),f.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[f.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[f.jsx(ks,{className:"w-5 h-5 mr-2 text-blue-600"}),"참여 인원"]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"maleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"남성 인원"}),f.jsx("input",{type:"number",id:"maleCount",name:"maleCount",value:s.maleCount,onChange:u,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"femaleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"여성 인원"}),f.jsx("input",{type:"number",id:"femaleCount",name:"femaleCount",value:s.femaleCount,onChange:u,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"총 인원"}),f.jsxs("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:[h().toLocaleString(),"명"]})]})]})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"promotionCount",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[f.jsx(Wy,{className:"w-4 h-4 mr-2 text-orange-500"}),"홍보 횟수"]}),f.jsx("input",{type:"number",id:"promotionCount",name:"promotionCount",value:s.promotionCount,onChange:u,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"홍보 횟수를 입력하세요"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"메모 (선택사항)"}),f.jsx("textarea",{id:"notes",name:"notes",value:s.notes,onChange:u,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"추가 메모를 입력하세요..."})]}),f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[f.jsx(Vh,{className:"w-4 h-4 mr-2"}),"실적 저장"]})})]})}),r&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Va,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"저장 완료!"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"실적 데이터가 성공적으로 저장되었습니다."}),f.jsx("button",{onClick:()=>i(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})})]})},CS=()=>{const{addToast:t}=Js(),{performances:e,demands:n,updatePerformance:r,deletePerformance:i}=Ti(),[s,a]=G.useState([]),[l,u]=G.useState(null),[h,m]=G.useState({}),[y,_]=G.useState({}),[S,D]=G.useState(""),N=Array.from(new Set(n.map(p=>p.organizationName))).sort();G.useEffect(()=>{R()},[e,y,S]);const R=()=>{let p=[...e];y.startDate&&(p=p.filter(v=>v.date&&v.date>=y.startDate)),y.endDate&&(p=p.filter(v=>v.date&&v.date<=y.endDate)),y.organizationName&&(p=p.filter(v=>v.organizationName===y.organizationName)),S&&(p=p.filter(v=>v.organizationName.toLowerCase().includes(S.toLowerCase())||v.notes&&v.notes.toLowerCase().includes(S.toLowerCase()))),p.sort((v,E)=>!v.date&&!E.date?0:v.date?E.date?E.date.getTime()-v.date.getTime():-1:1),a(p)},T=(p,v)=>{_(E=>({...E,[p]:v}))},x=()=>{_({}),D("")},A=p=>{u(p.id),m({...p,date:p.date})},b=async()=>{if(!l||!h.date||!h.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const p=h.maleCount||0,v=h.femaleCount||0,E=h.promotionCount||0;if(p<0||v<0||E<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await r(l,{...h,notes:h.notes?h.notes.trim():""}),u(null),m({}),t({type:"success",title:"수정 완료",message:"실적 데이터가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"실적 데이터 수정 중 오류가 발생했습니다"})}},U=()=>{u(null),m({})},F=async(p,v,E)=>{const C=E?E.toLocaleDateString("ko-KR"):"날짜 없음";if(window.confirm(`"${v}"의 ${C} 실적 데이터를 삭제하시겠습니까?`))try{await i(p),t({type:"success",title:"삭제 완료",message:"실적 데이터가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"실적 데이터 삭제 중 오류가 발생했습니다"})}},w=(p,v)=>{m(E=>({...E,[p]:v}))};return f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 조회"}),f.jsx("p",{className:"text-gray-600",children:"등록된 실적 데이터를 조회하고 관리하세요"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[f.jsx(Mw,{className:"w-5 h-5 mr-2"}),"필터"]}),f.jsx("button",{onClick:x,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"전체 초기화"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검색"}),f.jsxs("div",{className:"relative",children:[f.jsx(Ky,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),f.jsx("input",{type:"text",placeholder:"검색어 입력...",value:S,onChange:p=>D(p.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 날짜"}),f.jsxs("div",{className:"relative",children:[f.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),f.jsx("input",{type:"date",value:y.startDate?y.startDate.toISOString().split("T")[0]:"",onChange:p=>T("startDate",p.target.value?new Date(p.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 날짜"}),f.jsxs("div",{className:"relative",children:[f.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),f.jsx("input",{type:"date",value:y.endDate?y.endDate.toISOString().split("T")[0]:"",onChange:p=>T("endDate",p.target.value?new Date(p.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명"}),f.jsxs("select",{value:y.organizationName||"",onChange:p=>T("organizationName",p.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"전체 단체"}),N.map(p=>f.jsx("option",{value:p,children:p},p))]})]})]})]}),f.jsxs("div",{className:"mb-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",s.length,"건 표시"]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"날짜"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"남성"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"여성"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"총 인원"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"홍보횟수"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"메모"}),f.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(p=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4",children:l===p.id?f.jsx("input",{type:"date",value:h.date?new Date(h.date).toISOString().split("T")[0]:"",onChange:v=>w("date",new Date(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsx("span",{className:"text-sm text-gray-900",children:p.date?p.date.toLocaleDateString("ko-KR"):"날짜 없음"})}),f.jsx("td",{className:"px-6 py-4",children:l===p.id?f.jsxs("select",{value:h.organizationName||"",onChange:v=>w("organizationName",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"단체 선택"}),N.map(v=>f.jsx("option",{value:v,children:v},v))]}):f.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.organizationName})}),f.jsx("td",{className:"px-6 py-4",children:l===p.id?f.jsx("input",{type:"number",value:h.maleCount||"",onChange:v=>w("maleCount",parseInt(v.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsxs("span",{className:"text-sm text-blue-600 font-mono flex items-center",children:[f.jsx(ks,{className:"w-4 h-4 mr-1"}),(p.maleCount||0).toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4",children:l===p.id?f.jsx("input",{type:"number",value:h.femaleCount||"",onChange:v=>w("femaleCount",parseInt(v.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsxs("span",{className:"text-sm text-pink-600 font-mono flex items-center",children:[f.jsx(ks,{className:"w-4 h-4 mr-1"}),(p.femaleCount||0).toLocaleString()]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("span",{className:"text-sm text-gray-900 font-bold",children:[((p.maleCount||0)+(p.femaleCount||0)).toLocaleString(),"명"]})}),f.jsx("td",{className:"px-6 py-4",children:l===p.id?f.jsx("input",{type:"number",value:h.promotionCount||"",onChange:v=>w("promotionCount",parseInt(v.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):f.jsxs("span",{className:"text-sm text-orange-600 font-mono flex items-center",children:[f.jsx(Wy,{className:"w-4 h-4 mr-1"}),(p.promotionCount||0).toLocaleString(),"회"]})}),f.jsx("td",{className:"px-6 py-4",children:l===p.id?f.jsx("textarea",{value:h.notes||"",onChange:v=>w("notes",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}):f.jsx("span",{className:"text-sm text-gray-500",children:p.notes||"-"})}),f.jsx("td",{className:"px-6 py-4 text-right",children:l===p.id?f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:b,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:f.jsx(Vh,{className:"w-4 h-4"})}),f.jsx("button",{onClick:U,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:f.jsx(bh,{className:"w-4 h-4"})})]}):f.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[f.jsx("button",{onClick:()=>A(p),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:f.jsx(Qy,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>F(p.id,p.organizationName,p.date),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:f.jsx(Gy,{className:"w-4 h-4"})})]})})]},p.id))})]})}),s.length===0&&f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-gray-500",children:e.length===0?"실적 데이터가 없습니다":"검색 조건에 맞는 데이터가 없습니다"})})]})]})},NS=({toast:t,onRemove:e})=>{const{type:n,title:r,message:i,duration:s=5e3}=t;G.useEffect(()=>{const u=setTimeout(()=>{e(t.id)},s);return()=>clearTimeout(u)},[t.id,s,e]);const a=()=>{switch(n){case"success":return f.jsx(Va,{className:"w-5 h-5 text-green-500"});case"error":return f.jsx($y,{className:"w-5 h-5 text-red-500"});case"warning":return f.jsx(Vw,{className:"w-5 h-5 text-orange-500"});case"info":return f.jsx(Pp,{className:"w-5 h-5 text-blue-500"});default:return f.jsx(Pp,{className:"w-5 h-5 text-blue-500"})}},l=()=>{switch(n){case"success":return"border-l-green-500";case"error":return"border-l-red-500";case"warning":return"border-l-orange-500";case"info":return"border-l-blue-500";default:return"border-l-blue-500"}};return f.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 ${l()} p-4 mb-3 max-w-md animate-slide-in`,children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:a()}),f.jsxs("div",{className:"ml-3 flex-1",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),f.jsx("p",{className:"text-sm text-gray-500",children:i})]}),f.jsx("button",{onClick:()=>e(t.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx(bh,{className:"w-4 h-4"})})]})})},RS=({toasts:t,onRemove:e})=>f.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.map(n=>f.jsx(NS,{toast:n,onRemove:e},n.id))});function kS(){const[t,e]=G.useState("dashboard"),{toasts:n,addToast:r,removeToast:i}=Js(),{loading:s,error:a}=Ti(),l=()=>{if(s)return f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Lw,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(a)return f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-red-800 font-medium mb-2",children:"연결 오류"}),f.jsx("p",{className:"text-red-600 text-sm",children:a}),f.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"다시 시도"})]})});switch(t){case"dashboard":return f.jsx(Rm,{});case"demand-register":return f.jsx(TS,{});case"demand-list":return f.jsx(SS,{});case"performance-input":return f.jsx(AS,{});case"performance-list":return f.jsx(CS,{});default:return f.jsx(Rm,{})}};return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(Uw,{currentPage:t,onPageChange:e,children:l()}),f.jsx(RS,{toasts:n,onRemove:i})]})}By(document.getElementById("root")).render(f.jsx(G.StrictMode,{children:f.jsx(kS,{})}));
