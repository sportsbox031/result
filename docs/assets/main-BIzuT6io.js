(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iy={exports:{}},lu={},oy={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=Symbol.for("react.element"),zx=Symbol.for("react.portal"),Ux=Symbol.for("react.fragment"),Bx=Symbol.for("react.strict_mode"),$x=Symbol.for("react.profiler"),qx=Symbol.for("react.provider"),Hx=Symbol.for("react.context"),Wx=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),Qx=Symbol.for("react.memo"),Gx=Symbol.for("react.lazy"),Lp=Symbol.iterator;function Yx(t){return t===null||typeof t!="object"?null:(t=Lp&&t[Lp]||t["@@iterator"],typeof t=="function"?t:null)}var ay={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ly=Object.assign,uy={};function ui(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ay}ui.prototype.isReactComponent={};ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cy(){}cy.prototype=ui.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||ay}var oh=ih.prototype=new cy;oh.constructor=ih;ly(oh,ui.prototype);oh.isPureReactComponent=!0;var Op=Array.isArray,dy=Object.prototype.hasOwnProperty,ah={current:null},hy={key:!0,ref:!0,__self:!0,__source:!0};function fy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dy.call(e,r)&&!hy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Wo,type:t,key:i,ref:o,props:s,_owner:ah.current}}function Xx(t,e){return{$$typeof:Wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wo}function Jx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fp=/\/+/g;function ec(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jx(""+t.key):e.toString(36)}function sl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wo:case zx:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ec(o,0):r,Op(s)?(n="",t!=null&&(n=t.replace(Fp,"$&/")+"/"),sl(s,e,n,"",function(h){return h})):s!=null&&(lh(s)&&(s=Xx(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Op(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+ec(i,l);o+=sl(i,e,n,u,s)}else if(u=Yx(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+ec(i,l++),o+=sl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ra(t,e,n){if(t==null)return t;var r=[],s=0;return sl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Zx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},il={transition:null},ew={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:il,ReactCurrentOwner:ah};function py(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Ra,forEach:function(t,e,n){Ra(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ra(t,function(){e++}),e},toArray:function(t){return Ra(t,function(e){return e})||[]},only:function(t){if(!lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=ui;se.Fragment=Ux;se.Profiler=$x;se.PureComponent=ih;se.StrictMode=Bx;se.Suspense=Kx;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ew;se.act=py;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ly({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ah.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)dy.call(e,u)&&!hy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Wo,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:Hx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qx,_context:t},t.Consumer=t};se.createElement=fy;se.createFactory=function(t){var e=fy.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Wx,render:t}};se.isValidElement=lh;se.lazy=function(t){return{$$typeof:Gx,_payload:{_status:-1,_result:t},_init:Zx}};se.memo=function(t,e){return{$$typeof:Qx,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=il.transition;il.transition={};try{t()}finally{il.transition=e}};se.unstable_act=py;se.useCallback=function(t,e){return Nt.current.useCallback(t,e)};se.useContext=function(t){return Nt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};se.useEffect=function(t,e){return Nt.current.useEffect(t,e)};se.useId=function(){return Nt.current.useId()};se.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Nt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};se.useRef=function(t){return Nt.current.useRef(t)};se.useState=function(t){return Nt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Nt.current.useTransition()};se.version="18.3.1";oy.exports=se;var P=oy.exports;const kt=Fx(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw=P,nw=Symbol.for("react.element"),rw=Symbol.for("react.fragment"),sw=Object.prototype.hasOwnProperty,iw=tw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ow={key:!0,ref:!0,__self:!0,__source:!0};function my(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sw.call(e,r)&&!ow.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nw,type:t,key:i,ref:o,props:s,_owner:iw.current}}lu.Fragment=rw;lu.jsx=my;lu.jsxs=my;iy.exports=lu;var c=iy.exports,gy={exports:{}},Kt={},yy={exports:{}},vy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var fe=K-1>>>1,U=B[fe];if(0<s(U,Q))B[fe]=Q,B[K]=U,K=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var fe=0,U=B.length,Y=U>>>1;fe<Y;){var $=2*(fe+1)-1,J=B[$],re=$+1,oe=B[re];if(0>s(J,K))re<U&&0>s(oe,J)?(B[fe]=oe,B[re]=K,fe=re):(B[fe]=J,B[$]=K,fe=$);else if(re<U&&0>s(oe,K))B[fe]=oe,B[re]=K,fe=re;else break e}}return Q}function s(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,g=null,v=3,S=!1,k=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=B)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function D(B){if(N=!1,I(B),!k)if(n(u)!==null)k=!0,ze(L);else{var Q=n(h);Q!==null&&ue(D,Q.startTime-B)}}function L(B,Q){k=!1,N&&(N=!1,E(m),m=-1),S=!0;var K=v;try{for(I(Q),g=n(u);g!==null&&(!(g.expirationTime>Q)||B&&!b());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,v=g.priorityLevel;var U=fe(g.expirationTime<=Q);Q=t.unstable_now(),typeof U=="function"?g.callback=U:g===n(u)&&r(u),I(Q)}else r(u);g=n(u)}if(g!==null)var Y=!0;else{var $=n(h);$!==null&&ue(D,$.startTime-Q),Y=!1}return Y}finally{g=null,v=K,S=!1}}var V=!1,w=null,m=-1,y=5,x=-1;function b(){return!(t.unstable_now()-x<y)}function R(){if(w!==null){var B=t.unstable_now();x=B;var Q=!0;try{Q=w(!0,B)}finally{Q?C():(V=!1,w=null)}}else V=!1}var C;if(typeof T=="function")C=function(){T(R)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ke=ie.port2;ie.port1.onmessage=R,C=function(){ke.postMessage(null)}}else C=function(){A(R,0)};function ze(B){w=B,V||(V=!0,C())}function ue(B,Q){m=A(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||S||(k=!0,ze(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var K=v;v=Q;try{return B()}finally{v=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=v;v=B;try{return Q()}finally{v=K}},t.unstable_scheduleCallback=function(B,Q,K){var fe=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?fe+K:fe):K=fe,B){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=K+U,B={id:p++,callback:Q,priorityLevel:B,startTime:K,expirationTime:U,sortIndex:-1},K>fe?(B.sortIndex=K,e(h,B),n(u)===null&&B===n(h)&&(N?(E(m),m=-1):N=!0,ue(D,K-fe))):(B.sortIndex=U,e(u,B),k||S||(k=!0,ze(L))),B},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(B){var Q=v;return function(){var K=v;v=Q;try{return B.apply(this,arguments)}finally{v=K}}}})(vy);yy.exports=vy;var aw=yy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw=P,Wt=aw;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _y=new Set,ho={};function us(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(ho[t]=e,t=0;t<e.length;t++)_y.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oc=Object.prototype.hasOwnProperty,uw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zp={},Up={};function cw(t){return Oc.call(Up,t)?!0:Oc.call(zp,t)?!1:uw.test(t)?Up[t]=!0:(zp[t]=!0,!1)}function dw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hw(t,e,n,r){if(e===null||typeof e>"u"||dw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,ch);ct[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,ch);ct[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,ch);ct[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function dh(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hw(e,n,s,r)&&(n=null),r||s===null?cw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=lw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ka=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),Fc=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),wy=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),zc=Symbol.for("react.suspense"),Uc=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),Ey=Symbol.for("react.offscreen"),Bp=Symbol.iterator;function ki(t){return t===null||typeof t!="object"?null:(t=Bp&&t[Bp]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,tc;function Ui(t){if(tc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tc=e&&e[1]||""}return`
`+tc+t}var nc=!1;function rc(t,e){if(!t||nc)return"";nc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{nc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ui(t):""}function fw(t){switch(t.tag){case 5:return Ui(t.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return t=rc(t.type,!1),t;case 11:return t=rc(t.type.render,!1),t;case 1:return t=rc(t.type,!0),t;default:return""}}function Bc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case Is:return"Portal";case Fc:return"Profiler";case hh:return"StrictMode";case zc:return"Suspense";case Uc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wy:return(t.displayName||"Context")+".Consumer";case xy:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Bc(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return Bc(t(e))}catch{}}return null}function pw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bc(e);case 8:return e===hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ty(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mw(t){var e=Ty(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pa(t){t._valueTracker||(t._valueTracker=mw(t))}function Sy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ty(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function El(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $c(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $p(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Iy(t,e){e=e.checked,e!=null&&dh(t,"checked",e,!1)}function qc(t,e){Iy(t,e);var n=Ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hc(t,e.type,Ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hc(t,e,n){(e!=="number"||El(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bi=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ir(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Bi(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ir(n)}}function Cy(t,e){var n=Ir(e.value),r=Ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function by(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?by(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,Ny=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gw=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(t){gw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gi[e]=Gi[t]})});function Ay(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gi.hasOwnProperty(t)&&Gi[t]?(""+e).trim():e+"px"}function Ry(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ay(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yw=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qc(t,e){if(e){if(yw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Gc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yc=null;function mh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xc=null,Fs=null,zs=null;function Kp(t){if(t=Go(t)){if(typeof Xc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=fu(e),Xc(t.stateNode,t.type,e))}}function ky(t){Fs?zs?zs.push(t):zs=[t]:Fs=t}function Py(){if(Fs){var t=Fs,e=zs;if(zs=Fs=null,Kp(t),e)for(t=0;t<e.length;t++)Kp(e[t])}}function Dy(t,e){return t(e)}function jy(){}var sc=!1;function Vy(t,e,n){if(sc)return t(e,n);sc=!0;try{return Dy(t,e,n)}finally{sc=!1,(Fs!==null||zs!==null)&&(jy(),Py())}}function po(t,e){var n=t.stateNode;if(n===null)return null;var r=fu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Jc=!1;if(qn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Jc=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Jc=!1}function vw(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Yi=!1,Tl=null,Sl=!1,Zc=null,_w={onError:function(t){Yi=!0,Tl=t}};function xw(t,e,n,r,s,i,o,l,u){Yi=!1,Tl=null,vw.apply(_w,arguments)}function ww(t,e,n,r,s,i,o,l,u){if(xw.apply(this,arguments),Yi){if(Yi){var h=Tl;Yi=!1,Tl=null}else throw Error(z(198));Sl||(Sl=!0,Zc=h)}}function cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function My(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qp(t){if(cs(t)!==t)throw Error(z(188))}function Ew(t){var e=t.alternate;if(!e){if(e=cs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qp(s),t;if(i===r)return Qp(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Ly(t){return t=Ew(t),t!==null?Oy(t):null}function Oy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Oy(t);if(e!==null)return e;t=t.sibling}return null}var Fy=Wt.unstable_scheduleCallback,Gp=Wt.unstable_cancelCallback,Tw=Wt.unstable_shouldYield,Sw=Wt.unstable_requestPaint,Fe=Wt.unstable_now,Iw=Wt.unstable_getCurrentPriorityLevel,gh=Wt.unstable_ImmediatePriority,zy=Wt.unstable_UserBlockingPriority,Il=Wt.unstable_NormalPriority,Cw=Wt.unstable_LowPriority,Uy=Wt.unstable_IdlePriority,uu=null,bn=null;function bw(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(uu,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Rw,Nw=Math.log,Aw=Math.LN2;function Rw(t){return t>>>=0,t===0?32:31-(Nw(t)/Aw|0)|0}var ja=64,Va=4194304;function $i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=$i(l):(i&=o,i!==0&&(r=$i(i)))}else o=n&~s,o!==0?r=$i(o):i!==0&&(r=$i(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pn(e),s=1<<n,r|=t[n],e&=~s;return r}function kw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=kw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function By(){var t=ja;return ja<<=1,!(ja&4194240)&&(ja=64),t}function ic(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ko(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function Dw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function $y(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qy,vh,Hy,Wy,Ky,td=!1,Ma=[],fr=null,pr=null,mr=null,mo=new Map,go=new Map,lr=[],jw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yp(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Go(e),e!==null&&vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Vw(t,e,n,r,s){switch(e){case"focusin":return fr=Di(fr,t,e,n,r,s),!0;case"dragenter":return pr=Di(pr,t,e,n,r,s),!0;case"mouseover":return mr=Di(mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return mo.set(i,Di(mo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,go.set(i,Di(go.get(i)||null,t,e,n,r,s)),!0}return!1}function Qy(t){var e=Kr(t.target);if(e!==null){var n=cs(e);if(n!==null){if(e=n.tag,e===13){if(e=My(n),e!==null){t.blockedOn=e,Ky(t.priority,function(){Hy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yc=r,n.target.dispatchEvent(r),Yc=null}else return e=Go(n),e!==null&&vh(e),t.blockedOn=n,!1;e.shift()}return!0}function Xp(t,e,n){ol(t)&&n.delete(e)}function Mw(){td=!1,fr!==null&&ol(fr)&&(fr=null),pr!==null&&ol(pr)&&(pr=null),mr!==null&&ol(mr)&&(mr=null),mo.forEach(Xp),go.forEach(Xp)}function ji(t,e){t.blockedOn===e&&(t.blockedOn=null,td||(td=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Mw)))}function yo(t){function e(s){return ji(s,t)}if(0<Ma.length){ji(Ma[0],t);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&ji(fr,t),pr!==null&&ji(pr,t),mr!==null&&ji(mr,t),mo.forEach(e),go.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)Qy(n),n.blockedOn===null&&lr.shift()}var Us=Xn.ReactCurrentBatchConfig,bl=!0;function Lw(t,e,n,r){var s=ye,i=Us.transition;Us.transition=null;try{ye=1,_h(t,e,n,r)}finally{ye=s,Us.transition=i}}function Ow(t,e,n,r){var s=ye,i=Us.transition;Us.transition=null;try{ye=4,_h(t,e,n,r)}finally{ye=s,Us.transition=i}}function _h(t,e,n,r){if(bl){var s=nd(t,e,n,r);if(s===null)mc(t,e,r,Nl,n),Yp(t,r);else if(Vw(s,t,e,n,r))r.stopPropagation();else if(Yp(t,r),e&4&&-1<jw.indexOf(t)){for(;s!==null;){var i=Go(s);if(i!==null&&qy(i),i=nd(t,e,n,r),i===null&&mc(t,e,r,Nl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else mc(t,e,r,null,n)}}var Nl=null;function nd(t,e,n,r){if(Nl=null,t=mh(r),t=Kr(t),t!==null)if(e=cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=My(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function Gy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iw()){case gh:return 1;case zy:return 4;case Il:case Cw:return 16;case Uy:return 536870912;default:return 16}default:return 16}}var cr=null,xh=null,al=null;function Yy(){if(al)return al;var t,e=xh,n=e.length,r,s="value"in cr?cr.value:cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return al=s.slice(t,1<r?1-r:void 0)}function ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function La(){return!0}function Jp(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?La:Jp,this.isPropagationStopped=Jp,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),e}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=Qt(ci),Qo=Ae({},ci,{view:0,detail:0}),Fw=Qt(Qo),oc,ac,Vi,cu=Ae({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vi&&(Vi&&t.type==="mousemove"?(oc=t.screenX-Vi.screenX,ac=t.screenY-Vi.screenY):ac=oc=0,Vi=t),oc)},movementY:function(t){return"movementY"in t?t.movementY:ac}}),Zp=Qt(cu),zw=Ae({},cu,{dataTransfer:0}),Uw=Qt(zw),Bw=Ae({},Qo,{relatedTarget:0}),lc=Qt(Bw),$w=Ae({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),qw=Qt($w),Hw=Ae({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ww=Qt(Hw),Kw=Ae({},ci,{data:0}),em=Qt(Kw),Qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yw[t])?!!e[t]:!1}function Eh(){return Xw}var Jw=Ae({},Qo,{key:function(t){if(t.key){var e=Qw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(t){return t.type==="keypress"?ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zw=Qt(Jw),e1=Ae({},cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tm=Qt(e1),t1=Ae({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),n1=Qt(t1),r1=Ae({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),s1=Qt(r1),i1=Ae({},cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=Qt(i1),a1=[9,13,27,32],Th=qn&&"CompositionEvent"in window,Xi=null;qn&&"documentMode"in document&&(Xi=document.documentMode);var l1=qn&&"TextEvent"in window&&!Xi,Xy=qn&&(!Th||Xi&&8<Xi&&11>=Xi),nm=" ",rm=!1;function Jy(t,e){switch(t){case"keyup":return a1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bs=!1;function u1(t,e){switch(t){case"compositionend":return Zy(e);case"keypress":return e.which!==32?null:(rm=!0,nm);case"textInput":return t=e.data,t===nm&&rm?null:t;default:return null}}function c1(t,e){if(bs)return t==="compositionend"||!Th&&Jy(t,e)?(t=Yy(),al=xh=cr=null,bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xy&&e.locale!=="ko"?null:e.data;default:return null}}var d1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!d1[t.type]:e==="textarea"}function e0(t,e,n,r){ky(r),e=Al(e,"onChange"),0<e.length&&(n=new wh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ji=null,vo=null;function h1(t){d0(t,0)}function du(t){var e=Rs(t);if(Sy(e))return t}function f1(t,e){if(t==="change")return e}var t0=!1;if(qn){var uc;if(qn){var cc="oninput"in document;if(!cc){var im=document.createElement("div");im.setAttribute("oninput","return;"),cc=typeof im.oninput=="function"}uc=cc}else uc=!1;t0=uc&&(!document.documentMode||9<document.documentMode)}function om(){Ji&&(Ji.detachEvent("onpropertychange",n0),vo=Ji=null)}function n0(t){if(t.propertyName==="value"&&du(vo)){var e=[];e0(e,vo,t,mh(t)),Vy(h1,e)}}function p1(t,e,n){t==="focusin"?(om(),Ji=e,vo=n,Ji.attachEvent("onpropertychange",n0)):t==="focusout"&&om()}function m1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return du(vo)}function g1(t,e){if(t==="click")return du(e)}function y1(t,e){if(t==="input"||t==="change")return du(e)}function v1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:v1;function _o(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Oc.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function am(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lm(t,e){var n=am(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=am(n)}}function r0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s0(){for(var t=window,e=El();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=El(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _1(t){var e=s0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r0(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lm(n,i);var o=lm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x1=qn&&"documentMode"in document&&11>=document.documentMode,Ns=null,rd=null,Zi=null,sd=!1;function um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sd||Ns==null||Ns!==El(r)||(r=Ns,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zi&&_o(Zi,r)||(Zi=r,r=Al(rd,"onSelect"),0<r.length&&(e=new wh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ns)))}function Oa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionend:Oa("Transition","TransitionEnd")},dc={},i0={};qn&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function hu(t){if(dc[t])return dc[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i0)return dc[t]=e[n];return t}var o0=hu("animationend"),a0=hu("animationiteration"),l0=hu("animationstart"),u0=hu("transitionend"),c0=new Map,cm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){c0.set(t,e),us(e,[t])}for(var hc=0;hc<cm.length;hc++){var fc=cm[hc],w1=fc.toLowerCase(),E1=fc[0].toUpperCase()+fc.slice(1);Rr(w1,"on"+E1)}Rr(o0,"onAnimationEnd");Rr(a0,"onAnimationIteration");Rr(l0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(u0,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ww(r,e,void 0,t),t.currentTarget=null}function d0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;dm(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;dm(s,l,h),i=u}}}if(Sl)throw t=Zc,Sl=!1,Zc=null,t}function Ee(t,e){var n=e[ud];n===void 0&&(n=e[ud]=new Set);var r=t+"__bubble";n.has(r)||(h0(e,t,2,!1),n.add(r))}function pc(t,e,n){var r=0;e&&(r|=4),h0(n,t,r,e)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Fa]){t[Fa]=!0,_y.forEach(function(n){n!=="selectionchange"&&(T1.has(n)||pc(n,!1,t),pc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fa]||(e[Fa]=!0,pc("selectionchange",!1,e))}}function h0(t,e,n,r){switch(Gy(e)){case 1:var s=Lw;break;case 4:s=Ow;break;default:s=_h}n=s.bind(null,e,n,t),s=void 0,!Jc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function mc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Kr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Vy(function(){var h=i,p=mh(n),g=[];e:{var v=c0.get(t);if(v!==void 0){var S=wh,k=t;switch(t){case"keypress":if(ll(n)===0)break e;case"keydown":case"keyup":S=Zw;break;case"focusin":k="focus",S=lc;break;case"focusout":k="blur",S=lc;break;case"beforeblur":case"afterblur":S=lc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Uw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=n1;break;case o0:case a0:case l0:S=qw;break;case u0:S=s1;break;case"scroll":S=Fw;break;case"wheel":S=o1;break;case"copy":case"cut":case"paste":S=Ww;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=tm}var N=(e&4)!==0,A=!N&&t==="scroll",E=N?v!==null?v+"Capture":null:v;N=[];for(var T=h,I;T!==null;){I=T;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,E!==null&&(D=po(T,E),D!=null&&N.push(wo(T,D,I)))),A)break;T=T.return}0<N.length&&(v=new S(v,k,null,n,p),g.push({event:v,listeners:N}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",v&&n!==Yc&&(k=n.relatedTarget||n.fromElement)&&(Kr(k)||k[Hn]))break e;if((S||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=h,k=k?Kr(k):null,k!==null&&(A=cs(k),k!==A||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=h),S!==k)){if(N=Zp,D="onMouseLeave",E="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(N=tm,D="onPointerLeave",E="onPointerEnter",T="pointer"),A=S==null?v:Rs(S),I=k==null?v:Rs(k),v=new N(D,T+"leave",S,n,p),v.target=A,v.relatedTarget=I,D=null,Kr(p)===h&&(N=new N(E,T+"enter",k,n,p),N.target=I,N.relatedTarget=A,D=N),A=D,S&&k)t:{for(N=S,E=k,T=0,I=N;I;I=ws(I))T++;for(I=0,D=E;D;D=ws(D))I++;for(;0<T-I;)N=ws(N),T--;for(;0<I-T;)E=ws(E),I--;for(;T--;){if(N===E||E!==null&&N===E.alternate)break t;N=ws(N),E=ws(E)}N=null}else N=null;S!==null&&hm(g,v,S,N,!1),k!==null&&A!==null&&hm(g,A,k,N,!0)}}e:{if(v=h?Rs(h):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var L=f1;else if(sm(v))if(t0)L=y1;else{L=m1;var V=p1}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(L=g1);if(L&&(L=L(t,h))){e0(g,L,n,p);break e}V&&V(t,v,h),t==="focusout"&&(V=v._wrapperState)&&V.controlled&&v.type==="number"&&Hc(v,"number",v.value)}switch(V=h?Rs(h):window,t){case"focusin":(sm(V)||V.contentEditable==="true")&&(Ns=V,rd=h,Zi=null);break;case"focusout":Zi=rd=Ns=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,um(g,n,p);break;case"selectionchange":if(x1)break;case"keydown":case"keyup":um(g,n,p)}var w;if(Th)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else bs?Jy(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Xy&&n.locale!=="ko"&&(bs||m!=="onCompositionStart"?m==="onCompositionEnd"&&bs&&(w=Yy()):(cr=p,xh="value"in cr?cr.value:cr.textContent,bs=!0)),V=Al(h,m),0<V.length&&(m=new em(m,t,null,n,p),g.push({event:m,listeners:V}),w?m.data=w:(w=Zy(n),w!==null&&(m.data=w)))),(w=l1?u1(t,n):c1(t,n))&&(h=Al(h,"onBeforeInput"),0<h.length&&(p=new em("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=w))}d0(g,e)})}function wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Al(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=po(t,n),i!=null&&r.unshift(wo(t,i,s)),i=po(t,e),i!=null&&r.push(wo(t,i,s))),t=t.return}return r}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=po(n,i),u!=null&&o.unshift(wo(n,u,l))):s||(u=po(n,i),u!=null&&o.push(wo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var S1=/\r\n?/g,I1=/\u0000|\uFFFD/g;function fm(t){return(typeof t=="string"?t:""+t).replace(S1,`
`).replace(I1,"")}function za(t,e,n){if(e=fm(e),fm(t)!==e&&n)throw Error(z(425))}function Rl(){}var id=null,od=null;function ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ld=typeof setTimeout=="function"?setTimeout:void 0,C1=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,b1=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(t){return pm.resolve(null).then(t).catch(N1)}:ld;function N1(t){setTimeout(function(){throw t})}function gc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),yo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yo(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),Cn="__reactFiber$"+di,Eo="__reactProps$"+di,Hn="__reactContainer$"+di,ud="__reactEvents$"+di,A1="__reactListeners$"+di,R1="__reactHandles$"+di;function Kr(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mm(t);t!==null;){if(n=t[Cn])return n;t=mm(t)}return e}t=n,n=t.parentNode}return null}function Go(t){return t=t[Cn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function fu(t){return t[Eo]||null}var cd=[],ks=-1;function kr(t){return{current:t}}function Ie(t){0>ks||(t.current=cd[ks],cd[ks]=null,ks--)}function xe(t,e){ks++,cd[ks]=t.current,t.current=e}var Cr={},Tt=kr(Cr),Vt=kr(!1),es=Cr;function Qs(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function kl(){Ie(Vt),Ie(Tt)}function gm(t,e,n){if(Tt.current!==Cr)throw Error(z(168));xe(Tt,e),xe(Vt,n)}function f0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,pw(t)||"Unknown",s));return Ae({},n,r)}function Pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,es=Tt.current,xe(Tt,t),xe(Vt,Vt.current),!0}function ym(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=f0(t,e,es),r.__reactInternalMemoizedMergedChildContext=t,Ie(Vt),Ie(Tt),xe(Tt,t)):Ie(Vt),xe(Vt,n)}var zn=null,pu=!1,yc=!1;function p0(t){zn===null?zn=[t]:zn.push(t)}function k1(t){pu=!0,p0(t)}function Pr(){if(!yc&&zn!==null){yc=!0;var t=0,e=ye;try{var n=zn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,pu=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Fy(gh,Pr),s}finally{ye=e,yc=!1}}return null}var Ps=[],Ds=0,Dl=null,jl=0,Zt=[],en=0,ts=null,Un=1,Bn="";function qr(t,e){Ps[Ds++]=jl,Ps[Ds++]=Dl,Dl=t,jl=e}function m0(t,e,n){Zt[en++]=Un,Zt[en++]=Bn,Zt[en++]=ts,ts=t;var r=Un;t=Bn;var s=32-pn(r)-1;r&=~(1<<s),n+=1;var i=32-pn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Un=1<<32-pn(e)+s|n<<s|r,Bn=i+t}else Un=1<<i|n<<s|r,Bn=t}function Ih(t){t.return!==null&&(qr(t,1),m0(t,1,0))}function Ch(t){for(;t===Dl;)Dl=Ps[--Ds],Ps[Ds]=null,jl=Ps[--Ds],Ps[Ds]=null;for(;t===ts;)ts=Zt[--en],Zt[en]=null,Bn=Zt[--en],Zt[en]=null,Un=Zt[--en],Zt[en]=null}var Ht=null,$t=null,Ce=!1,fn=null;function g0(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,$t=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ts!==null?{id:Un,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,$t=null,!0):!1;default:return!1}}function dd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hd(t){if(Ce){var e=$t;if(e){var n=e;if(!vm(t,e)){if(dd(t))throw Error(z(418));e=gr(n.nextSibling);var r=Ht;e&&vm(t,e)?g0(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Ht=t)}}else{if(dd(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ce=!1,Ht=t}}}function _m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function Ua(t){if(t!==Ht)return!1;if(!Ce)return _m(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ad(t.type,t.memoizedProps)),e&&(e=$t)){if(dd(t))throw y0(),Error(z(418));for(;e;)g0(t,e),e=gr(e.nextSibling)}if(_m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Ht?gr(t.stateNode.nextSibling):null;return!0}function y0(){for(var t=$t;t;)t=gr(t.nextSibling)}function Gs(){$t=Ht=null,Ce=!1}function bh(t){fn===null?fn=[t]:fn.push(t)}var P1=Xn.ReactCurrentBatchConfig;function Mi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ba(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xm(t){var e=t._init;return e(t._payload)}function v0(t){function e(E,T){if(t){var I=E.deletions;I===null?(E.deletions=[T],E.flags|=16):I.push(T)}}function n(E,T){if(!t)return null;for(;T!==null;)e(E,T),T=T.sibling;return null}function r(E,T){for(E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function s(E,T){return E=xr(E,T),E.index=0,E.sibling=null,E}function i(E,T,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<T?(E.flags|=2,T):I):(E.flags|=2,T)):(E.flags|=1048576,T)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,T,I,D){return T===null||T.tag!==6?(T=Sc(I,E.mode,D),T.return=E,T):(T=s(T,I),T.return=E,T)}function u(E,T,I,D){var L=I.type;return L===Cs?p(E,T,I.props.children,D,I.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ir&&xm(L)===T.type)?(D=s(T,I.props),D.ref=Mi(E,T,I),D.return=E,D):(D=ml(I.type,I.key,I.props,null,E.mode,D),D.ref=Mi(E,T,I),D.return=E,D)}function h(E,T,I,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=Ic(I,E.mode,D),T.return=E,T):(T=s(T,I.children||[]),T.return=E,T)}function p(E,T,I,D,L){return T===null||T.tag!==7?(T=Jr(I,E.mode,D,L),T.return=E,T):(T=s(T,I),T.return=E,T)}function g(E,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Sc(""+T,E.mode,I),T.return=E,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ka:return I=ml(T.type,T.key,T.props,null,E.mode,I),I.ref=Mi(E,null,T),I.return=E,I;case Is:return T=Ic(T,E.mode,I),T.return=E,T;case ir:var D=T._init;return g(E,D(T._payload),I)}if(Bi(T)||ki(T))return T=Jr(T,E.mode,I,null),T.return=E,T;Ba(E,T)}return null}function v(E,T,I,D){var L=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:l(E,T,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ka:return I.key===L?u(E,T,I,D):null;case Is:return I.key===L?h(E,T,I,D):null;case ir:return L=I._init,v(E,T,L(I._payload),D)}if(Bi(I)||ki(I))return L!==null?null:p(E,T,I,D,null);Ba(E,I)}return null}function S(E,T,I,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(I)||null,l(T,E,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ka:return E=E.get(D.key===null?I:D.key)||null,u(T,E,D,L);case Is:return E=E.get(D.key===null?I:D.key)||null,h(T,E,D,L);case ir:var V=D._init;return S(E,T,I,V(D._payload),L)}if(Bi(D)||ki(D))return E=E.get(I)||null,p(T,E,D,L,null);Ba(T,D)}return null}function k(E,T,I,D){for(var L=null,V=null,w=T,m=T=0,y=null;w!==null&&m<I.length;m++){w.index>m?(y=w,w=null):y=w.sibling;var x=v(E,w,I[m],D);if(x===null){w===null&&(w=y);break}t&&w&&x.alternate===null&&e(E,w),T=i(x,T,m),V===null?L=x:V.sibling=x,V=x,w=y}if(m===I.length)return n(E,w),Ce&&qr(E,m),L;if(w===null){for(;m<I.length;m++)w=g(E,I[m],D),w!==null&&(T=i(w,T,m),V===null?L=w:V.sibling=w,V=w);return Ce&&qr(E,m),L}for(w=r(E,w);m<I.length;m++)y=S(w,E,m,I[m],D),y!==null&&(t&&y.alternate!==null&&w.delete(y.key===null?m:y.key),T=i(y,T,m),V===null?L=y:V.sibling=y,V=y);return t&&w.forEach(function(b){return e(E,b)}),Ce&&qr(E,m),L}function N(E,T,I,D){var L=ki(I);if(typeof L!="function")throw Error(z(150));if(I=L.call(I),I==null)throw Error(z(151));for(var V=L=null,w=T,m=T=0,y=null,x=I.next();w!==null&&!x.done;m++,x=I.next()){w.index>m?(y=w,w=null):y=w.sibling;var b=v(E,w,x.value,D);if(b===null){w===null&&(w=y);break}t&&w&&b.alternate===null&&e(E,w),T=i(b,T,m),V===null?L=b:V.sibling=b,V=b,w=y}if(x.done)return n(E,w),Ce&&qr(E,m),L;if(w===null){for(;!x.done;m++,x=I.next())x=g(E,x.value,D),x!==null&&(T=i(x,T,m),V===null?L=x:V.sibling=x,V=x);return Ce&&qr(E,m),L}for(w=r(E,w);!x.done;m++,x=I.next())x=S(w,E,m,x.value,D),x!==null&&(t&&x.alternate!==null&&w.delete(x.key===null?m:x.key),T=i(x,T,m),V===null?L=x:V.sibling=x,V=x);return t&&w.forEach(function(R){return e(E,R)}),Ce&&qr(E,m),L}function A(E,T,I,D){if(typeof I=="object"&&I!==null&&I.type===Cs&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ka:e:{for(var L=I.key,V=T;V!==null;){if(V.key===L){if(L=I.type,L===Cs){if(V.tag===7){n(E,V.sibling),T=s(V,I.props.children),T.return=E,E=T;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ir&&xm(L)===V.type){n(E,V.sibling),T=s(V,I.props),T.ref=Mi(E,V,I),T.return=E,E=T;break e}n(E,V);break}else e(E,V);V=V.sibling}I.type===Cs?(T=Jr(I.props.children,E.mode,D,I.key),T.return=E,E=T):(D=ml(I.type,I.key,I.props,null,E.mode,D),D.ref=Mi(E,T,I),D.return=E,E=D)}return o(E);case Is:e:{for(V=I.key;T!==null;){if(T.key===V)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){n(E,T.sibling),T=s(T,I.children||[]),T.return=E,E=T;break e}else{n(E,T);break}else e(E,T);T=T.sibling}T=Ic(I,E.mode,D),T.return=E,E=T}return o(E);case ir:return V=I._init,A(E,T,V(I._payload),D)}if(Bi(I))return k(E,T,I,D);if(ki(I))return N(E,T,I,D);Ba(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(n(E,T.sibling),T=s(T,I),T.return=E,E=T):(n(E,T),T=Sc(I,E.mode,D),T.return=E,E=T),o(E)):n(E,T)}return A}var Ys=v0(!0),_0=v0(!1),Vl=kr(null),Ml=null,js=null,Nh=null;function Ah(){Nh=js=Ml=null}function Rh(t){var e=Vl.current;Ie(Vl),t._currentValue=e}function fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){Ml=t,Nh=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(Nh!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(Ml===null)throw Error(z(308));js=t,Ml.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Qr=null;function kh(t){Qr===null?Qr=[t]:Qr.push(t)}function x0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,kh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Ph(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wn(t,n)}return s=r.interleaved,s===null?(e.next=e,kh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wn(t,n)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function wm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ll(t,e,n,r){var s=t.updateQueue;or=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;o=0,p=h=u=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,N=l;switch(v=e,S=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){g=k.call(S,g,v);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,v=typeof k=="function"?k.call(S,g,v):k,v==null)break e;g=Ae({},g,v);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=S,u=g):p=p.next=S,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rs|=o,t.lanes=o,t.memoizedState=g}}function Em(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Yo={},Nn=kr(Yo),To=kr(Yo),So=kr(Yo);function Gr(t){if(t===Yo)throw Error(z(174));return t}function Dh(t,e){switch(xe(So,e),xe(To,t),xe(Nn,Yo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kc(e,t)}Ie(Nn),xe(Nn,e)}function Xs(){Ie(Nn),Ie(To),Ie(So)}function E0(t){Gr(So.current);var e=Gr(Nn.current),n=Kc(e,t.type);e!==n&&(xe(To,t),xe(Nn,n))}function jh(t){To.current===t&&(Ie(Nn),Ie(To))}var be=kr(0);function Ol(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vc=[];function Vh(){for(var t=0;t<vc.length;t++)vc[t]._workInProgressVersionPrimary=null;vc.length=0}var cl=Xn.ReactCurrentDispatcher,_c=Xn.ReactCurrentBatchConfig,ns=0,Ne=null,He=null,Xe=null,Fl=!1,eo=!1,Io=0,D1=0;function yt(){throw Error(z(321))}function Mh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function Lh(t,e,n,r,s,i){if(ns=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cl.current=t===null||t.memoizedState===null?L1:O1,t=n(r,s),eo){i=0;do{if(eo=!1,Io=0,25<=i)throw Error(z(301));i+=1,Xe=He=null,e.updateQueue=null,cl.current=F1,t=n(r,s)}while(eo)}if(cl.current=zl,e=He!==null&&He.next!==null,ns=0,Xe=He=Ne=null,Fl=!1,e)throw Error(z(300));return t}function Oh(){var t=Io!==0;return Io=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ne.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function sn(){if(He===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?Ne.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(z(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?Ne.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Co(t,e){return typeof e=="function"?e(t):e}function xc(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var p=h.lane;if((ns&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,o=r):u=u.next=g,Ne.lanes|=p,rs|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,yn(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,rs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wc(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yn(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function T0(){}function S0(t,e){var n=Ne,r=sn(),s=e(),i=!yn(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,Fh(b0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,bo(9,C0.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(z(349));ns&30||I0(n,e,s)}return s}function I0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function C0(t,e,n,r){e.value=n,e.getSnapshot=r,N0(e)&&A0(t)}function b0(t,e,n){return n(function(){N0(e)&&A0(t)})}function N0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function A0(t){var e=Wn(t,1);e!==null&&mn(e,t,1,-1)}function Tm(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=M1.bind(null,Ne,t),[e.memoizedState,t]}function bo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function R0(){return sn().memoizedState}function dl(t,e,n,r){var s=In();Ne.flags|=t,s.memoizedState=bo(1|e,n,void 0,r===void 0?null:r)}function mu(t,e,n,r){var s=sn();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&Mh(r,o.deps)){s.memoizedState=bo(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=bo(1|e,n,i,r)}function Sm(t,e){return dl(8390656,8,t,e)}function Fh(t,e){return mu(2048,8,t,e)}function k0(t,e){return mu(4,2,t,e)}function P0(t,e){return mu(4,4,t,e)}function D0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function j0(t,e,n){return n=n!=null?n.concat([t]):null,mu(4,4,D0.bind(null,e,t),n)}function zh(){}function V0(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function M0(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L0(t,e,n){return ns&21?(yn(n,e)||(n=By(),Ne.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function j1(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=_c.transition;_c.transition={};try{t(!1),e()}finally{ye=n,_c.transition=r}}function O0(){return sn().memoizedState}function V1(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},F0(t))z0(e,n);else if(n=x0(t,e,n,r),n!==null){var s=bt();mn(n,t,r,s),U0(n,e,r)}}function M1(t,e,n){var r=_r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(F0(t))z0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,yn(l,o)){var u=e.interleaved;u===null?(s.next=s,kh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=x0(t,e,s,r),n!==null&&(s=bt(),mn(n,t,r,s),U0(n,e,r))}}function F0(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function z0(t,e){eo=Fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var zl={readContext:rn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},L1={readContext:rn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:Sm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dl(4194308,4,D0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return dl(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V1.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:Tm,useDebugValue:zh,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=Tm(!1),e=t[0];return t=j1.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=In();if(Ce){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));ns&30||I0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sm(b0.bind(null,r,i,t),[t]),r.flags|=2048,bo(9,C0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=Ze.identifierPrefix;if(Ce){var n=Bn,r=Un;n=(r&~(1<<32-pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=D1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O1={readContext:rn,useCallback:V0,useContext:rn,useEffect:Fh,useImperativeHandle:j0,useInsertionEffect:k0,useLayoutEffect:P0,useMemo:M0,useReducer:xc,useRef:R0,useState:function(){return xc(Co)},useDebugValue:zh,useDeferredValue:function(t){var e=sn();return L0(e,He.memoizedState,t)},useTransition:function(){var t=xc(Co)[0],e=sn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:S0,useId:O0,unstable_isNewReconciler:!1},F1={readContext:rn,useCallback:V0,useContext:rn,useEffect:Fh,useImperativeHandle:j0,useInsertionEffect:k0,useLayoutEffect:P0,useMemo:M0,useReducer:wc,useRef:R0,useState:function(){return wc(Co)},useDebugValue:zh,useDeferredValue:function(t){var e=sn();return He===null?e.memoizedState=t:L0(e,He.memoizedState,t)},useTransition:function(){var t=wc(Co)[0],e=sn().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:S0,useId:O0,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gu={isMounted:function(t){return(t=t._reactInternals)?cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=_r(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(mn(e,t,s,r),ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=_r(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(mn(e,t,s,r),ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=_r(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(mn(e,t,r,n),ul(e,t,r))}};function Im(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_o(n,r)||!_o(s,i):!0}function B0(t,e,n){var r=!1,s=Cr,i=e.contextType;return typeof i=="object"&&i!==null?i=rn(i):(s=Mt(e)?es:Tt.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):Cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gu.enqueueReplaceState(e,e.state,null)}function md(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ph(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rn(i):(i=Mt(e)?es:Tt.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gu.enqueueReplaceState(s,s.state,null),Ll(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Js(t,e){try{var n="",r=e;do n+=fw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ec(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z1=typeof WeakMap=="function"?WeakMap:Map;function $0(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bl||(Bl=!0,Cd=r),gd(t,e)},n}function q0(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gd(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eE.bind(null,t,e,n),e.then(t,t))}function Nm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Am(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var U1=Xn.ReactCurrentOwner,jt=!1;function Ct(t,e,n,r){e.child=t===null?_0(e,null,n,r):Ys(e,t.child,n,r)}function Rm(t,e,n,r,s){n=n.render;var i=e.ref;return Bs(e,s),r=Lh(t,e,n,r,i,s),n=Oh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ce&&n&&Ih(e),e.flags|=1,Ct(t,e,r,s),e.child)}function km(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,H0(t,e,i,r,s)):(t=ml(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_o,n(o,r)&&t.ref===e.ref)return Kn(t,e,s)}return e.flags|=1,t=xr(i,r),t.ref=e.ref,t.return=e,e.child=t}function H0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_o(i,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Kn(t,e,s)}return yd(t,e,n,r,s)}function W0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Ms,Bt),Bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Ms,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xe(Ms,Bt),Bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xe(Ms,Bt),Bt|=r;return Ct(t,e,s,n),e.child}function K0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yd(t,e,n,r,s){var i=Mt(n)?es:Tt.current;return i=Qs(e,i),Bs(e,s),n=Lh(t,e,n,r,i,s),r=Oh(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ce&&r&&Ih(e),e.flags|=1,Ct(t,e,n,s),e.child)}function Pm(t,e,n,r,s){if(Mt(n)){var i=!0;Pl(e)}else i=!1;if(Bs(e,s),e.stateNode===null)hl(t,e),B0(e,n,r),md(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=rn(h):(h=Mt(n)?es:Tt.current,h=Qs(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Cm(e,o,r,h),or=!1;var v=e.memoizedState;o.state=v,Ll(e,r,o,s),u=e.memoizedState,l!==r||v!==u||Vt.current||or?(typeof p=="function"&&(pd(e,n,p,r),u=e.memoizedState),(l=or||Im(e,n,l,r,v,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,w0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:dn(e.type,l),o.props=h,g=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=Mt(n)?es:Tt.current,u=Qs(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||v!==u)&&Cm(e,o,r,u),or=!1,v=e.memoizedState,o.state=v,Ll(e,r,o,s);var k=e.memoizedState;l!==g||v!==k||Vt.current||or?(typeof S=="function"&&(pd(e,n,S,r),k=e.memoizedState),(h=or||Im(e,n,h,r,v,k,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return vd(t,e,n,r,i,s)}function vd(t,e,n,r,s,i){K0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ym(e,n,!1),Kn(t,e,i);r=e.stateNode,U1.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ys(e,t.child,null,i),e.child=Ys(e,null,l,i)):Ct(t,e,l,i),e.memoizedState=r.state,s&&ym(e,n,!0),e.child}function Q0(t){var e=t.stateNode;e.pendingContext?gm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gm(t,e.context,!1),Dh(t,e.containerInfo)}function Dm(t,e,n,r,s){return Gs(),bh(s),e.flags|=256,Ct(t,e,n,r),e.child}var _d={dehydrated:null,treeContext:null,retryLane:0};function xd(t){return{baseLanes:t,cachePool:null,transitions:null}}function G0(t,e,n){var r=e.pendingProps,s=be.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),xe(be,s&1),t===null)return hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_u(o,r,0,null),t=Jr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=xd(n),e.memoizedState=_d,t):Uh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return B1(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=xr(l,i):(i=Jr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?xd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_d,r}return i=t.child,t=i.sibling,r=xr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uh(t,e){return e=_u({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $a(t,e,n,r){return r!==null&&bh(r),Ys(e,t.child,null,n),t=Uh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function B1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ec(Error(z(422))),$a(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_u({mode:"visible",children:r.children},s,0,null),i=Jr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ys(e,t.child,null,o),e.child.memoizedState=xd(o),e.memoizedState=_d,i);if(!(e.mode&1))return $a(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Ec(i,r,void 0),$a(t,e,o,r)}if(l=(o&t.childLanes)!==0,jt||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wn(t,s),mn(r,t,s,-1))}return Kh(),r=Ec(Error(z(421))),$a(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=gr(s.nextSibling),Ht=e,Ce=!0,fn=null,t!==null&&(Zt[en++]=Un,Zt[en++]=Bn,Zt[en++]=ts,Un=t.id,Bn=t.overflow,ts=e),e=Uh(e,r.children),e.flags|=4096,e)}function jm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fd(t.return,e,n)}function Tc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Y0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ct(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jm(t,n,e);else if(t.tag===19)jm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ol(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Tc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ol(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Tc(e,!0,n,null,i);break;case"together":Tc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $1(t,e,n){switch(e.tag){case 3:Q0(e),Gs();break;case 5:E0(e);break;case 1:Mt(e.type)&&Pl(e);break;case 4:Dh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;xe(Vl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?G0(t,e,n):(xe(be,be.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);xe(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Y0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,W0(t,e,n)}return Kn(t,e,n)}var X0,wd,J0,Z0;X0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wd=function(){};J0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(Nn.current);var i=null;switch(n){case"input":s=$c(t,s),r=$c(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Wc(t,s),r=Wc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rl)}Qc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ho.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ho.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ee("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Z0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Li(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function q1(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Mt(e.type)&&kl(),vt(e),null;case 3:return r=e.stateNode,Xs(),Ie(Vt),Ie(Tt),Vh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(Ad(fn),fn=null))),wd(t,e),vt(e),null;case 5:jh(e);var s=Gr(So.current);if(n=e.type,t!==null&&e.stateNode!=null)J0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return vt(e),null}if(t=Gr(Nn.current),Ua(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[Eo]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<qi.length;s++)Ee(qi[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":$p(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Hp(r,i),Ee("invalid",r)}Qc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&za(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&za(r.textContent,l,t),s=["children",""+l]):ho.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Pa(r),qp(r,i,!0);break;case"textarea":Pa(r),Wp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Rl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=by(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[Eo]=r,X0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gc(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<qi.length;s++)Ee(qi[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":$p(t,r),s=$c(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Hp(t,r),s=Wc(t,r),Ee("invalid",t);break;default:s=r}Qc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Ry(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ny(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fo(t,u):typeof u=="number"&&fo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ho.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&dh(t,i,u,o))}switch(n){case"input":Pa(t),qp(t,r,!1);break;case"textarea":Pa(t),Wp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ir(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Os(t,!!r.multiple,i,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)Z0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Gr(So.current),Gr(Nn.current),Ua(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:za(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&za(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return vt(e),null;case 13:if(Ie(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&$t!==null&&e.mode&1&&!(e.flags&128))y0(),Gs(),e.flags|=98560,i=!1;else if(i=Ua(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Cn]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),i=!1}else fn!==null&&(Ad(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Qe===0&&(Qe=3):Kh())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Xs(),wd(t,e),t===null&&xo(e.stateNode.containerInfo),vt(e),null;case 10:return Rh(e.type._context),vt(e),null;case 17:return Mt(e.type)&&kl(),vt(e),null;case 19:if(Ie(be),i=e.memoizedState,i===null)return vt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Li(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ol(t),o!==null){for(e.flags|=128,Li(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Zs&&(e.flags|=128,r=!0,Li(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ol(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Li(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return vt(e),null}else 2*Fe()-i.renderingStartTime>Zs&&n!==1073741824&&(e.flags|=128,r=!0,Li(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=be.current,xe(be,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return Wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function H1(t,e){switch(Ch(e),e.tag){case 1:return Mt(e.type)&&kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),Ie(Vt),Ie(Tt),Vh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jh(e),null;case 13:if(Ie(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(be),null;case 4:return Xs(),null;case 10:return Rh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var qa=!1,wt=!1,W1=typeof WeakSet=="function"?WeakSet:Set,H=null;function Vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Ed(t,e,n){try{n()}catch(r){je(t,e,r)}}var Vm=!1;function K1(t,e){if(id=bl,t=s0(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,g=t,v=null;t:for(;;){for(var S;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(S=g.firstChild)!==null;)v=g,g=S;for(;;){if(g===t)break t;if(v===n&&++h===s&&(l=o),v===i&&++p===r&&(u=o),(S=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(od={focusedElem:t,selectionRange:n},bl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,A=k.memoizedState,E=e.stateNode,T=E.getSnapshotBeforeUpdate(e.elementType===e.type?N:dn(e.type,N),A);E.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=Vm,Vm=!1,k}function to(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ed(e,n,i)}s=s.next}while(s!==r)}}function yu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Td(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ev(t){var e=t.alternate;e!==null&&(t.alternate=null,ev(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[Eo],delete e[ud],delete e[A1],delete e[R1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tv(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rl));else if(r!==4&&(t=t.child,t!==null))for(Sd(t,e,n),t=t.sibling;t!==null;)Sd(t,e,n),t=t.sibling}function Id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Id(t,e,n),t=t.sibling;t!==null;)Id(t,e,n),t=t.sibling}var it=null,hn=!1;function rr(t,e,n){for(n=n.child;n!==null;)nv(t,e,n),n=n.sibling}function nv(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(uu,n)}catch{}switch(n.tag){case 5:wt||Vs(n,e);case 6:var r=it,s=hn;it=null,rr(t,e,n),it=r,hn=s,it!==null&&(hn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(hn?(t=it,n=n.stateNode,t.nodeType===8?gc(t.parentNode,n):t.nodeType===1&&gc(t,n),yo(t)):gc(it,n.stateNode));break;case 4:r=it,s=hn,it=n.stateNode.containerInfo,hn=!0,rr(t,e,n),it=r,hn=s;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ed(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!wt&&(Vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){je(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,rr(t,e,n),wt=r):rr(t,e,n);break;default:rr(t,e,n)}}function Lm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new W1),e.forEach(function(r){var s=nE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:it=l.stateNode,hn=!1;break e;case 3:it=l.stateNode.containerInfo,hn=!0;break e;case 4:it=l.stateNode.containerInfo,hn=!0;break e}l=l.return}if(it===null)throw Error(z(160));nv(i,o,s),it=null,hn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){je(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rv(e,t),e=e.sibling}function rv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),Tn(t),r&4){try{to(3,t,t.return),yu(3,t)}catch(N){je(t,t.return,N)}try{to(5,t,t.return)}catch(N){je(t,t.return,N)}}break;case 1:cn(e,t),Tn(t),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(cn(e,t),Tn(t),r&512&&n!==null&&Vs(n,n.return),t.flags&32){var s=t.stateNode;try{fo(s,"")}catch(N){je(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Iy(s,i),Gc(l,o);var h=Gc(l,i);for(o=0;o<u.length;o+=2){var p=u[o],g=u[o+1];p==="style"?Ry(s,g):p==="dangerouslySetInnerHTML"?Ny(s,g):p==="children"?fo(s,g):dh(s,p,g,h)}switch(l){case"input":qc(s,i);break;case"textarea":Cy(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Os(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?Os(s,!!i.multiple,i.defaultValue,!0):Os(s,!!i.multiple,i.multiple?[]:"",!1))}s[Eo]=i}catch(N){je(t,t.return,N)}}break;case 6:if(cn(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){je(t,t.return,N)}}break;case 3:if(cn(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yo(e.containerInfo)}catch(N){je(t,t.return,N)}break;case 4:cn(e,t),Tn(t);break;case 13:cn(e,t),Tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=Fe())),r&4&&Lm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(h=wt)||p,cn(e,t),wt=h):cn(e,t),Tn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(g=H=p;H!==null;){switch(v=H,S=v.child,v.tag){case 0:case 11:case 14:case 15:to(4,v,v.return);break;case 1:Vs(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(N){je(r,n,N)}}break;case 5:Vs(v,v.return);break;case 22:if(v.memoizedState!==null){Fm(g);continue}}S!==null?(S.return=v,H=S):Fm(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ay("display",o))}catch(N){je(t,t.return,N)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(N){je(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:cn(e,t),Tn(t),r&4&&Lm(t);break;case 21:break;default:cn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tv(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fo(s,""),r.flags&=-33);var i=Mm(t);Id(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Mm(t);Sd(t,l,o);break;default:throw Error(z(161))}}catch(u){je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Q1(t,e,n){H=t,sv(t)}function sv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||qa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||wt;l=qa;var h=wt;if(qa=o,(wt=u)&&!h)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?zm(s):u!==null?(u.return=o,H=u):zm(s);for(;i!==null;)H=i,sv(i),i=i.sibling;H=s,qa=l,wt=h}Om(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Om(t)}}function Om(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||yu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Em(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Em(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&yo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}wt||e.flags&512&&Td(e)}catch(v){je(e,e.return,v)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Fm(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function zm(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yu(4,e)}catch(u){je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){je(e,s,u)}}var i=e.return;try{Td(e)}catch(u){je(e,i,u)}break;case 5:var o=e.return;try{Td(e)}catch(u){je(e,o,u)}}}catch(u){je(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var G1=Math.ceil,Ul=Xn.ReactCurrentDispatcher,Bh=Xn.ReactCurrentOwner,nn=Xn.ReactCurrentBatchConfig,he=0,Ze=null,$e=null,lt=0,Bt=0,Ms=kr(0),Qe=0,No=null,rs=0,vu=0,$h=0,no=null,Pt=null,qh=0,Zs=1/0,Fn=null,Bl=!1,Cd=null,vr=null,Ha=!1,dr=null,$l=0,ro=0,bd=null,fl=-1,pl=0;function bt(){return he&6?Fe():fl!==-1?fl:fl=Fe()}function _r(t){return t.mode&1?he&2&&lt!==0?lt&-lt:P1.transition!==null?(pl===0&&(pl=By()),pl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:Gy(t.type)),t):1}function mn(t,e,n,r){if(50<ro)throw ro=0,bd=null,Error(z(185));Ko(t,n,r),(!(he&2)||t!==Ze)&&(t===Ze&&(!(he&2)&&(vu|=n),Qe===4&&ur(t,lt)),Lt(t,r),n===1&&he===0&&!(e.mode&1)&&(Zs=Fe()+500,pu&&Pr()))}function Lt(t,e){var n=t.callbackNode;Pw(t,e);var r=Cl(t,t===Ze?lt:0);if(r===0)n!==null&&Gp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gp(n),e===1)t.tag===0?k1(Um.bind(null,t)):p0(Um.bind(null,t)),b1(function(){!(he&6)&&Pr()}),n=null;else{switch($y(r)){case 1:n=gh;break;case 4:n=zy;break;case 16:n=Il;break;case 536870912:n=Uy;break;default:n=Il}n=hv(n,iv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iv(t,e){if(fl=-1,pl=0,he&6)throw Error(z(327));var n=t.callbackNode;if($s()&&t.callbackNode!==n)return null;var r=Cl(t,t===Ze?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var s=he;he|=2;var i=av();(Ze!==t||lt!==e)&&(Fn=null,Zs=Fe()+500,Xr(t,e));do try{J1();break}catch(l){ov(t,l)}while(!0);Ah(),Ul.current=i,he=s,$e!==null?e=0:(Ze=null,lt=0,e=Qe)}if(e!==0){if(e===2&&(s=ed(t),s!==0&&(r=s,e=Nd(t,s))),e===1)throw n=No,Xr(t,0),ur(t,r),Lt(t,Fe()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!Y1(s)&&(e=ql(t,r),e===2&&(i=ed(t),i!==0&&(r=i,e=Nd(t,i))),e===1))throw n=No,Xr(t,0),ur(t,r),Lt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Hr(t,Pt,Fn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=qh+500-Fe(),10<e)){if(Cl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ld(Hr.bind(null,t,Pt,Fn),e);break}Hr(t,Pt,Fn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G1(r/1960))-r,10<r){t.timeoutHandle=ld(Hr.bind(null,t,Pt,Fn),r);break}Hr(t,Pt,Fn);break;case 5:Hr(t,Pt,Fn);break;default:throw Error(z(329))}}}return Lt(t,Fe()),t.callbackNode===n?iv.bind(null,t):null}function Nd(t,e){var n=no;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=ql(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Ad(e)),t}function Ad(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function Y1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~$h,e&=~vu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),r=1<<n;t[n]=-1,e&=~r}}function Um(t){if(he&6)throw Error(z(327));$s();var e=Cl(t,0);if(!(e&1))return Lt(t,Fe()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=ed(t);r!==0&&(e=r,n=Nd(t,r))}if(n===1)throw n=No,Xr(t,0),ur(t,e),Lt(t,Fe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,Pt,Fn),Lt(t,Fe()),null}function Hh(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Zs=Fe()+500,pu&&Pr())}}function ss(t){dr!==null&&dr.tag===0&&!(he&6)&&$s();var e=he;he|=1;var n=nn.transition,r=ye;try{if(nn.transition=null,ye=1,t)return t()}finally{ye=r,nn.transition=n,he=e,!(he&6)&&Pr()}}function Wh(){Bt=Ms.current,Ie(Ms)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,C1(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kl();break;case 3:Xs(),Ie(Vt),Ie(Tt),Vh();break;case 5:jh(r);break;case 4:Xs();break;case 13:Ie(be);break;case 19:Ie(be);break;case 10:Rh(r.type._context);break;case 22:case 23:Wh()}n=n.return}if(Ze=t,$e=t=xr(t.current,null),lt=Bt=e,Qe=0,No=null,$h=vu=rs=0,Pt=no=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qr=null}return t}function ov(t,e){do{var n=$e;try{if(Ah(),cl.current=zl,Fl){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fl=!1}if(ns=0,Xe=He=Ne=null,eo=!1,Io=0,Bh.current=null,n===null||n.return===null){Qe=1,No=e,$e=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=lt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Nm(o);if(S!==null){S.flags&=-257,Am(S,o,l,i,e),S.mode&1&&bm(i,h,e),e=S,u=h;var k=e.updateQueue;if(k===null){var N=new Set;N.add(u),e.updateQueue=N}else k.add(u);break e}else{if(!(e&1)){bm(i,h,e),Kh();break e}u=Error(z(426))}}else if(Ce&&l.mode&1){var A=Nm(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Am(A,o,l,i,e),bh(Js(u,l));break e}}i=u=Js(u,l),Qe!==4&&(Qe=2),no===null?no=[i]:no.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=$0(i,u,e);wm(i,E);break e;case 1:l=u;var T=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(vr===null||!vr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=q0(i,l,e);wm(i,D);break e}}i=i.return}while(i!==null)}uv(n)}catch(L){e=L,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function av(){var t=Ul.current;return Ul.current=zl,t===null?zl:t}function Kh(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ze===null||!(rs&268435455)&&!(vu&268435455)||ur(Ze,lt)}function ql(t,e){var n=he;he|=2;var r=av();(Ze!==t||lt!==e)&&(Fn=null,Xr(t,e));do try{X1();break}catch(s){ov(t,s)}while(!0);if(Ah(),he=n,Ul.current=r,$e!==null)throw Error(z(261));return Ze=null,lt=0,Qe}function X1(){for(;$e!==null;)lv($e)}function J1(){for(;$e!==null&&!Tw();)lv($e)}function lv(t){var e=dv(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?uv(t):$e=e,Bh.current=null}function uv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=H1(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,$e=null;return}}else if(n=q1(n,e,Bt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Qe===0&&(Qe=5)}function Hr(t,e,n){var r=ye,s=nn.transition;try{nn.transition=null,ye=1,Z1(t,e,n,r)}finally{nn.transition=s,ye=r}return null}function Z1(t,e,n,r){do $s();while(dr!==null);if(he&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Dw(t,i),t===Ze&&($e=Ze=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,hv(Il,function(){return $s(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nn.transition,nn.transition=null;var o=ye;ye=1;var l=he;he|=4,Bh.current=null,K1(t,n),rv(n,t),_1(od),bl=!!id,od=id=null,t.current=n,Q1(n),Sw(),he=l,ye=o,nn.transition=i}else t.current=n;if(Ha&&(Ha=!1,dr=t,$l=s),i=t.pendingLanes,i===0&&(vr=null),bw(n.stateNode),Lt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Bl)throw Bl=!1,t=Cd,Cd=null,t;return $l&1&&t.tag!==0&&$s(),i=t.pendingLanes,i&1?t===bd?ro++:(ro=0,bd=t):ro=0,Pr(),null}function $s(){if(dr!==null){var t=$y($l),e=nn.transition,n=ye;try{if(nn.transition=null,ye=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,$l=0,he&6)throw Error(z(331));var s=he;for(he|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:to(8,p,i)}var g=p.child;if(g!==null)g.return=p,H=g;else for(;H!==null;){p=H;var v=p.sibling,S=p.return;if(ev(p),p===h){H=null;break}if(v!==null){v.return=S,H=v;break}H=S}}}var k=i.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,H=E;break e}H=i.return}}var T=t.current;for(H=T;H!==null;){o=H;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,H=I;else e:for(o=T;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yu(9,l)}}catch(L){je(l,l.return,L)}if(l===o){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(he=s,Pr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(uu,t)}catch{}r=!0}return r}finally{ye=n,nn.transition=e}}return!1}function Bm(t,e,n){e=Js(n,e),e=$0(t,e,1),t=yr(t,e,1),e=bt(),t!==null&&(Ko(t,1,e),Lt(t,e))}function je(t,e,n){if(t.tag===3)Bm(t,t,n);else for(;e!==null;){if(e.tag===3){Bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=Js(n,t),t=q0(e,t,1),e=yr(e,t,1),t=bt(),e!==null&&(Ko(e,1,t),Lt(e,t));break}}e=e.return}}function eE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(lt&n)===n&&(Qe===4||Qe===3&&(lt&130023424)===lt&&500>Fe()-qh?Xr(t,0):$h|=n),Lt(t,e)}function cv(t,e){e===0&&(t.mode&1?(e=Va,Va<<=1,!(Va&130023424)&&(Va=4194304)):e=1);var n=bt();t=Wn(t,e),t!==null&&(Ko(t,e,n),Lt(t,n))}function tE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cv(t,n)}function nE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),cv(t,n)}var dv;dv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,$1(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Ce&&e.flags&1048576&&m0(e,jl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hl(t,e),t=e.pendingProps;var s=Qs(e,Tt.current);Bs(e,n),s=Lh(null,e,r,t,s,n);var i=Oh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(i=!0,Pl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ph(e),s.updater=gu,e.stateNode=s,s._reactInternals=e,md(e,r,t,n),e=vd(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Ih(e),Ct(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sE(r),t=dn(r,t),s){case 0:e=yd(null,e,r,t,n);break e;case 1:e=Pm(null,e,r,t,n);break e;case 11:e=Rm(null,e,r,t,n);break e;case 14:e=km(null,e,r,dn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),yd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),Pm(t,e,r,s,n);case 3:e:{if(Q0(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,w0(t,e),Ll(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Js(Error(z(423)),e),e=Dm(t,e,r,n,s);break e}else if(r!==s){s=Js(Error(z(424)),e),e=Dm(t,e,r,n,s);break e}else for($t=gr(e.stateNode.containerInfo.firstChild),Ht=e,Ce=!0,fn=null,n=_0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),r===s){e=Kn(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return E0(e),t===null&&hd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ad(r,s)?o=null:i!==null&&ad(r,i)&&(e.flags|=32),K0(t,e),Ct(t,e,o,n),e.child;case 6:return t===null&&hd(e),null;case 13:return G0(t,e,n);case 4:return Dh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ys(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),Rm(t,e,r,s,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,xe(Vl,r._currentValue),r._currentValue=o,i!==null)if(yn(i.value,o)){if(i.children===s.children&&!Vt.current){e=Kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=$n(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),fd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ct(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bs(e,n),s=rn(s),r=r(s),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,s=dn(r,e.pendingProps),s=dn(r.type,s),km(t,e,r,s,n);case 15:return H0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),hl(t,e),e.tag=1,Mt(r)?(t=!0,Pl(e)):t=!1,Bs(e,n),B0(e,r,s),md(e,r,s,n),vd(null,e,r,!0,t,n);case 19:return Y0(t,e,n);case 22:return W0(t,e,n)}throw Error(z(156,e.tag))};function hv(t,e){return Fy(t,e)}function rE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new rE(t,e,n,r)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sE(t){if(typeof t=="function")return Qh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===ph)return 14}return 2}function xr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ml(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return Jr(n.children,s,i,e);case hh:o=8,s|=8;break;case Fc:return t=tn(12,n,e,s|2),t.elementType=Fc,t.lanes=i,t;case zc:return t=tn(13,n,e,s),t.elementType=zc,t.lanes=i,t;case Uc:return t=tn(19,n,e,s),t.elementType=Uc,t.lanes=i,t;case Ey:return _u(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xy:o=10;break e;case wy:o=9;break e;case fh:o=11;break e;case ph:o=14;break e;case ir:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=tn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jr(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function _u(t,e,n,r){return t=tn(22,t,r,e),t.elementType=Ey,t.lanes=n,t.stateNode={isHidden:!1},t}function Sc(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function Ic(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,r,s,i,o,l,u){return t=new iE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(i),t}function oE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fv(t){if(!t)return Cr;t=t._reactInternals;e:{if(cs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Mt(n))return f0(t,n,e)}return e}function pv(t,e,n,r,s,i,o,l,u){return t=Gh(n,r,!0,t,s,i,o,l,u),t.context=fv(null),n=t.current,r=bt(),s=_r(n),i=$n(r,s),i.callback=e??null,yr(n,i,s),t.current.lanes=s,Ko(t,s,r),Lt(t,r),t}function xu(t,e,n,r){var s=e.current,i=bt(),o=_r(s);return n=fv(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(mn(t,s,o,i),ul(t,s,o)),o}function Hl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $m(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yh(t,e){$m(t,e),(t=t.alternate)&&$m(t,e)}function aE(){return null}var mv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}wu.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));xu(t,e,null,null)};wu.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){xu(null,t,null,null)}),e[Hn]=null}};function wu(t){this._internalRoot=t}wu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&Qy(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Eu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qm(){}function lE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Hl(o);i.call(h)}}var o=pv(e,r,t,0,null,!1,!1,"",qm);return t._reactRootContainer=o,t[Hn]=o.current,xo(t.nodeType===8?t.parentNode:t),ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Hl(u);l.call(h)}}var u=Gh(t,0,!1,null,null,!1,!1,"",qm);return t._reactRootContainer=u,t[Hn]=u.current,xo(t.nodeType===8?t.parentNode:t),ss(function(){xu(e,u,n,r)}),u}function Tu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Hl(o);l.call(u)}}xu(e,o,t,s)}else o=lE(n,e,t,s,r);return Hl(o)}qy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$i(e.pendingLanes);n!==0&&(yh(e,n|1),Lt(e,Fe()),!(he&6)&&(Zs=Fe()+500,Pr()))}break;case 13:ss(function(){var r=Wn(t,1);if(r!==null){var s=bt();mn(r,t,1,s)}}),Yh(t,1)}};vh=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=bt();mn(e,t,134217728,n)}Yh(t,134217728)}};Hy=function(t){if(t.tag===13){var e=_r(t),n=Wn(t,e);if(n!==null){var r=bt();mn(n,t,e,r)}Yh(t,e)}};Wy=function(){return ye};Ky=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Xc=function(t,e,n){switch(e){case"input":if(qc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fu(r);if(!s)throw Error(z(90));Sy(r),qc(r,s)}}}break;case"textarea":Cy(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};Dy=Hh;jy=ss;var uE={usingClientEntryPoint:!1,Events:[Go,Rs,fu,ky,Py,Hh]},Oi={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cE={bundleType:Oi.bundleType,version:Oi.version,rendererPackageName:Oi.rendererPackageName,rendererConfig:Oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ly(t),t===null?null:t.stateNode},findFiberByHostInstance:Oi.findFiberByHostInstance||aE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{uu=Wa.inject(cE),bn=Wa}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uE;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(z(200));return oE(t,e,null,n)};Kt.createRoot=function(t,e){if(!Jh(t))throw Error(z(299));var n=!1,r="",s=mv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gh(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,xo(t.nodeType===8?t.parentNode:t),new Xh(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Ly(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return ss(t)};Kt.hydrate=function(t,e,n){if(!Eu(e))throw Error(z(200));return Tu(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Jh(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=mv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pv(e,null,t,1,n??null,s,!1,i,o),t[Hn]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wu(e)};Kt.render=function(t,e,n){if(!Eu(e))throw Error(z(200));return Tu(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Eu(t))throw Error(z(40));return t._reactRootContainer?(ss(function(){Tu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Hh;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Eu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Tu(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function gv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gv)}catch(t){console.error(t)}}gv(),gy.exports=Kt;var Ls=gy.exports,yv,Hm=Ls;yv=Hm.createRoot,Hm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...h},p)=>P.createElement("svg",{ref:p,...dE,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${hE(t)}`,l].join(" "),...h},[...e.map(([g,v])=>P.createElement(g,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=Ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Ve("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yE=({children:t,currentPage:e,onPageChange:n})=>{const r=[{id:"dashboard",name:"대시보드",icon:Rd},{id:"demand-register",name:"수요처 등록",icon:Po},{id:"demand-list",name:"수요처 관리",icon:Wl},{id:"performance-input",name:"실적 입력",icon:gE},{id:"performance-list",name:"실적 조회",icon:ti},{id:"budget-usage",name:"예산 사용 내역",icon:Wl}];return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[c.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:c.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"관리자 대시보드"})}),c.jsx("nav",{className:"mt-8",children:c.jsx("div",{className:"space-y-1 px-4",children:r.map(s=>{const i=s.icon;return c.jsxs("button",{onClick:()=>n(s.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${e===s.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[c.jsx(i,{className:"mr-3 h-5 w-5"}),s.name]},s.id)})})})]}),c.jsx("div",{className:"pl-64",children:c.jsx("main",{className:"p-8",children:t})})]})};function vE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return P.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Iu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function hi(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function tf(t){return"nodeType"in t}function Ft(t){var e,n;return t?hi(t)?t:tf(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function nf(t){const{Document:e}=Ft(t);return t instanceof e}function Xo(t){return hi(t)?!1:t instanceof Ft(t).HTMLElement}function Ev(t){return t instanceof Ft(t).SVGElement}function fi(t){return t?hi(t)?t.document:tf(t)?nf(t)?t:Xo(t)||Ev(t)?t.ownerDocument:document:document:document}const Pn=Iu?P.useLayoutEffect:P.useEffect;function rf(t){const e=P.useRef(t);return Pn(()=>{e.current=t}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function _E(){const t=P.useRef(null),e=P.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=P.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function jo(t,e){e===void 0&&(e=[t]);const n=P.useRef(t);return Pn(()=>{n.current!==t&&(n.current=t)},e),n}function Jo(t,e){const n=P.useRef();return P.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Kl(t){const e=rf(t),n=P.useRef(null),r=P.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function kd(t){const e=P.useRef();return P.useEffect(()=>{e.current=t},[t]),e.current}let Cc={};function Zo(t,e){return P.useMemo(()=>{if(e)return e;const n=Cc[t]==null?0:Cc[t]+1;return Cc[t]=n,t+"-"+n},[t,e])}function Tv(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[u,h]of l){const p=i[u];p!=null&&(i[u]=p+t*h)}return i},{...e})}}const qs=Tv(1),Ql=Tv(-1);function xE(t){return"clientX"in t&&"clientY"in t}function sf(t){if(!t)return!1;const{KeyboardEvent:e}=Ft(t.target);return e&&t instanceof e}function wE(t){if(!t)return!1;const{TouchEvent:e}=Ft(t.target);return e&&t instanceof e}function Pd(t){if(wE(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return xE(t)?{x:t.clientX,y:t.clientY}:null}const Vo=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Vo.Translate.toString(t),Vo.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Qm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function EE(t){return t.matches(Qm)?t:t.querySelector(Qm)}const TE={display:"none"};function SE(t){let{id:e,value:n}=t;return kt.createElement("div",{id:e,style:TE},n)}function IE(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return kt.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function CE(){const[t,e]=P.useState("");return{announce:P.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Sv=P.createContext(null);function bE(t){const e=P.useContext(Sv);P.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function NE(){const[t]=P.useState(()=>new Set),e=P.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[P.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const AE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},RE={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function kE(t){let{announcements:e=RE,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=AE}=t;const{announce:i,announcement:o}=CE(),l=Zo("DndLiveRegion"),[u,h]=P.useState(!1);if(P.useEffect(()=>{h(!0)},[]),bE(P.useMemo(()=>({onDragStart(g){let{active:v}=g;i(e.onDragStart({active:v}))},onDragMove(g){let{active:v,over:S}=g;e.onDragMove&&i(e.onDragMove({active:v,over:S}))},onDragOver(g){let{active:v,over:S}=g;i(e.onDragOver({active:v,over:S}))},onDragEnd(g){let{active:v,over:S}=g;i(e.onDragEnd({active:v,over:S}))},onDragCancel(g){let{active:v,over:S}=g;i(e.onDragCancel({active:v,over:S}))}}),[i,e])),!u)return null;const p=kt.createElement(kt.Fragment,null,kt.createElement(SE,{id:r,value:s.draggable}),kt.createElement(IE,{id:l,announcement:o}));return n?Ls.createPortal(p,n):p}var Ke;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ke||(Ke={}));function Gl(){}function PE(t,e){return P.useMemo(()=>({sensor:t,options:{}}),[t,e])}function DE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return P.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const vn=Object.freeze({x:0,y:0});function jE(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function VE(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function ME(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function LE(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Gm(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const OE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Gm(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const h=jE(Gm(u),s);i.push({id:l,data:{droppableContainer:o,value:h}})}}return i.sort(VE)};function FE(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const u=e.width*e.height,h=t.width*t.height,p=o*l,g=p/(u+h-p);return Number(g.toFixed(4))}return 0}const zE=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const u=FE(l,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(ME)};function UE(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Iv(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:vn}function BE(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const $E=BE(1);function qE(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function HE(t,e,n){const r=qE(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,u=t.left-o-(1-s)*parseFloat(n),h=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),p=s?t.width/s:t.width,g=i?t.height/i:t.height;return{width:p,height:g,top:h,right:u+p,bottom:h+g,left:u}}const WE={ignoreTransform:!1};function pi(t,e){e===void 0&&(e=WE);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Ft(t).getComputedStyle(t);h&&(n=HE(n,h,p))}const{top:r,left:s,width:i,height:o,bottom:l,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:u}}function Ym(t){return pi(t,{ignoreTransform:!0})}function KE(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function QE(t,e){return e===void 0&&(e=Ft(t).getComputedStyle(t)),e.position==="fixed"}function GE(t,e){e===void 0&&(e=Ft(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function of(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(nf(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Xo(s)||Ev(s)||n.includes(s))return n;const i=Ft(t).getComputedStyle(s);return s!==t&&GE(s,i)&&n.push(s),QE(s,i)?n:r(s.parentNode)}return t?r(t):n}function Cv(t){const[e]=of(t,1);return e??null}function bc(t){return!Iu||!t?null:hi(t)?t:tf(t)?nf(t)||t===fi(t).scrollingElement?window:Xo(t)?t:null:null}function bv(t){return hi(t)?t.scrollX:t.scrollLeft}function Nv(t){return hi(t)?t.scrollY:t.scrollTop}function Dd(t){return{x:bv(t),y:Nv(t)}}var Je;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Je||(Je={}));function Av(t){return!Iu||!t?!1:t===document.scrollingElement}function Rv(t){const e={x:0,y:0},n=Av(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const YE={x:.2,y:.2};function XE(t,e,n,r,s){let{top:i,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=YE);const{isTop:h,isBottom:p,isLeft:g,isRight:v}=Rv(t),S={x:0,y:0},k={x:0,y:0},N={height:e.height*s.y,width:e.width*s.x};return!h&&i<=e.top+N.height?(S.y=Je.Backward,k.y=r*Math.abs((e.top+N.height-i)/N.height)):!p&&u>=e.bottom-N.height&&(S.y=Je.Forward,k.y=r*Math.abs((e.bottom-N.height-u)/N.height)),!v&&l>=e.right-N.width?(S.x=Je.Forward,k.x=r*Math.abs((e.right-N.width-l)/N.width)):!g&&o<=e.left+N.width&&(S.x=Je.Backward,k.x=r*Math.abs((e.left+N.width-o)/N.width)),{direction:S,speed:k}}function JE(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function kv(t){return t.reduce((e,n)=>qs(e,Dd(n)),vn)}function ZE(t){return t.reduce((e,n)=>e+bv(n),0)}function eT(t){return t.reduce((e,n)=>e+Nv(n),0)}function tT(t,e){if(e===void 0&&(e=pi),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Cv(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const nT=[["x",["left","right"],ZE],["y",["top","bottom"],eT]];class af{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=of(n),s=kv(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of nT)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=l(r),p=s[i]-h;return this.rect[u]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class so{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function rT(t){const{EventTarget:e}=Ft(t);return t instanceof e?t:fi(t)}function Nc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Jt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Jt||(Jt={}));function Xm(t){t.preventDefault()}function sT(t){t.stopPropagation()}var ge;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ge||(ge={}));const Pv={start:[ge.Space,ge.Enter],cancel:[ge.Esc],end:[ge.Space,ge.Enter,ge.Tab]},iT=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ge.Right:return{...n,x:n.x+25};case ge.Left:return{...n,x:n.x-25};case ge.Down:return{...n,y:n.y+25};case ge.Up:return{...n,y:n.y-25}}};class Dv{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new so(fi(n)),this.windowListeners=new so(Ft(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Jt.Resize,this.handleCancel),this.windowListeners.add(Jt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Jt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&tT(r),n(vn)}handleKeyDown(e){if(sf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Pv,coordinateGetter:o=iT,scrollBehavior:l="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=r.current,p=h?{x:h.left,y:h.top}:vn;this.referenceCoordinates||(this.referenceCoordinates=p);const g=o(e,{active:n,context:r.current,currentCoordinates:p});if(g){const v=Ql(g,p),S={x:0,y:0},{scrollableAncestors:k}=r.current;for(const N of k){const A=e.code,{isTop:E,isRight:T,isLeft:I,isBottom:D,maxScroll:L,minScroll:V}=Rv(N),w=JE(N),m={x:Math.min(A===ge.Right?w.right-w.width/2:w.right,Math.max(A===ge.Right?w.left:w.left+w.width/2,g.x)),y:Math.min(A===ge.Down?w.bottom-w.height/2:w.bottom,Math.max(A===ge.Down?w.top:w.top+w.height/2,g.y))},y=A===ge.Right&&!T||A===ge.Left&&!I,x=A===ge.Down&&!D||A===ge.Up&&!E;if(y&&m.x!==g.x){const b=N.scrollLeft+v.x,R=A===ge.Right&&b<=L.x||A===ge.Left&&b>=V.x;if(R&&!v.y){N.scrollTo({left:b,behavior:l});return}R?S.x=N.scrollLeft-b:S.x=A===ge.Right?N.scrollLeft-L.x:N.scrollLeft-V.x,S.x&&N.scrollBy({left:-S.x,behavior:l});break}else if(x&&m.y!==g.y){const b=N.scrollTop+v.y,R=A===ge.Down&&b<=L.y||A===ge.Up&&b>=V.y;if(R&&!v.x){N.scrollTo({top:b,behavior:l});return}R?S.y=N.scrollTop-b:S.y=A===ge.Down?N.scrollTop-L.y:N.scrollTop-V.y,S.y&&N.scrollBy({top:-S.y,behavior:l});break}}this.handleMove(e,qs(Ql(g,this.referenceCoordinates),S))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dv.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Pv,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Jm(t){return!!(t&&"distance"in t)}function Zm(t){return!!(t&&"delay"in t)}class lf{constructor(e,n,r){var s;r===void 0&&(r=rT(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=fi(o),this.documentListeners=new so(this.document),this.listeners=new so(r),this.windowListeners=new so(Ft(o)),this.initialCoordinates=(s=Pd(i))!=null?s:vn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Jt.Resize,this.handleCancel),this.windowListeners.add(Jt.DragStart,Xm),this.windowListeners.add(Jt.VisibilityChange,this.handleCancel),this.windowListeners.add(Jt.ContextMenu,Xm),this.documentListeners.add(Jt.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Zm(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Jm(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Jt.Click,sT,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Jt.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const u=(n=Pd(e))!=null?n:vn,h=Ql(s,u);if(!r&&l){if(Jm(l)){if(l.tolerance!=null&&Nc(h,l.tolerance))return this.handleCancel();if(Nc(h,l.distance))return this.handleStart()}if(Zm(l)&&Nc(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ge.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const oT={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class uf extends lf{constructor(e){const{event:n}=e,r=fi(n.target);super(e,oT,r)}}uf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const aT={move:{name:"mousemove"},end:{name:"mouseup"}};var jd;(function(t){t[t.RightClick=2]="RightClick"})(jd||(jd={}));class lT extends lf{constructor(e){super(e,aT,fi(e.event.target))}}lT.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===jd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ac={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class uT extends lf{constructor(e){super(e,Ac)}static setup(){return window.addEventListener(Ac.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ac.move.name,e)};function e(){}}}uT.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var io;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(io||(io={}));var Yl;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yl||(Yl={}));function cT(t){let{acceleration:e,activator:n=io.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=Yl.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:p,delta:g,threshold:v}=t;const S=hT({delta:g,disabled:!i}),[k,N]=_E(),A=P.useRef({x:0,y:0}),E=P.useRef({x:0,y:0}),T=P.useMemo(()=>{switch(n){case io.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case io.DraggableRect:return s}},[n,s,u]),I=P.useRef(null),D=P.useCallback(()=>{const V=I.current;if(!V)return;const w=A.current.x*E.current.x,m=A.current.y*E.current.y;V.scrollBy(w,m)},[]),L=P.useMemo(()=>l===Yl.TreeOrder?[...h].reverse():h,[l,h]);P.useEffect(()=>{if(!i||!h.length||!T){N();return}for(const V of L){if((r==null?void 0:r(V))===!1)continue;const w=h.indexOf(V),m=p[w];if(!m)continue;const{direction:y,speed:x}=XE(V,m,T,e,v);for(const b of["x","y"])S[b][y[b]]||(x[b]=0,y[b]=0);if(x.x>0||x.y>0){N(),I.current=V,k(D,o),A.current=x,E.current=y;return}}A.current={x:0,y:0},E.current={x:0,y:0},N()},[e,D,r,N,i,o,JSON.stringify(T),JSON.stringify(S),k,h,L,p,JSON.stringify(v)])}const dT={x:{[Je.Backward]:!1,[Je.Forward]:!1},y:{[Je.Backward]:!1,[Je.Forward]:!1}};function hT(t){let{delta:e,disabled:n}=t;const r=kd(e);return Jo(s=>{if(n||!r||!s)return dT;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Je.Backward]:s.x[Je.Backward]||i.x===-1,[Je.Forward]:s.x[Je.Forward]||i.x===1},y:{[Je.Backward]:s.y[Je.Backward]||i.y===-1,[Je.Forward]:s.y[Je.Forward]||i.y===1}}},[n,e,r])}function fT(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Jo(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function pT(t,e){return P.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Mo;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Mo||(Mo={}));var Vd;(function(t){t.Optimized="optimized"})(Vd||(Vd={}));const eg=new Map;function mT(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=P.useState(null),{frequency:l,measure:u,strategy:h}=s,p=P.useRef(t),g=A(),v=jo(g),S=P.useCallback(function(E){E===void 0&&(E=[]),!v.current&&o(T=>T===null?E:T.concat(E.filter(I=>!T.includes(I))))},[v]),k=P.useRef(null),N=Jo(E=>{if(g&&!n)return eg;if(!E||E===eg||p.current!==t||i!=null){const T=new Map;for(let I of t){if(!I)continue;if(i&&i.length>0&&!i.includes(I.id)&&I.rect.current){T.set(I.id,I.rect.current);continue}const D=I.node.current,L=D?new af(u(D),D):null;I.rect.current=L,L&&T.set(I.id,L)}return T}return E},[t,i,n,g,u]);return P.useEffect(()=>{p.current=t},[t]),P.useEffect(()=>{g||S()},[n,g]),P.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),P.useEffect(()=>{g||typeof l!="number"||k.current!==null||(k.current=setTimeout(()=>{S(),k.current=null},l))},[l,g,S,...r]),{droppableRects:N,measureDroppableContainers:S,measuringScheduled:i!=null};function A(){switch(h){case Mo.Always:return!1;case Mo.BeforeDragging:return n;default:return!n}}}function jv(t,e){return Jo(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function gT(t,e){return jv(t,e)}function yT(t){let{callback:e,disabled:n}=t;const r=rf(e),s=P.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return P.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Cu(t){let{callback:e,disabled:n}=t;const r=rf(e),s=P.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return P.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function vT(t){return new af(pi(t),t)}function tg(t,e,n){e===void 0&&(e=vT);const[r,s]=P.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=u??n)!=null?h:null}const p=e(t);return JSON.stringify(u)===JSON.stringify(p)?u:p})}const o=yT({callback(u){if(t)for(const h of u){const{type:p,target:g}=h;if(p==="childList"&&g instanceof HTMLElement&&g.contains(t)){i();break}}}}),l=Cu({callback:i});return Pn(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function _T(t){const e=jv(t);return Iv(t,e)}const ng=[];function xT(t){const e=P.useRef(t),n=Jo(r=>t?r&&r!==ng&&t&&e.current&&t.parentNode===e.current.parentNode?r:of(t):ng,[t]);return P.useEffect(()=>{e.current=t},[t]),n}function wT(t){const[e,n]=P.useState(null),r=P.useRef(t),s=P.useCallback(i=>{const o=bc(i.target);o&&n(l=>l?(l.set(o,Dd(o)),new Map(l)):null)},[]);return P.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(u=>{const h=bc(u);return h?(h.addEventListener("scroll",s,{passive:!0}),[h,Dd(h)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(u=>{const h=bc(u);h==null||h.removeEventListener("scroll",s)})}},[s,t]),P.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>qs(i,o),vn):kv(t):vn,[t,e])}function rg(t,e){e===void 0&&(e=[]);const n=P.useRef(null);return P.useEffect(()=>{n.current=null},e),P.useEffect(()=>{const r=t!==vn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Ql(t,n.current):vn}function ET(t){P.useEffect(()=>{if(!Iu)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function TT(t,e){return P.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function Vv(t){return P.useMemo(()=>t?KE(t):null,[t])}const sg=[];function ST(t,e){e===void 0&&(e=pi);const[n]=t,r=Vv(n?Ft(n):null),[s,i]=P.useState(sg);function o(){i(()=>t.length?t.map(u=>Av(u)?r:new af(e(u),u)):sg)}const l=Cu({callback:o});return Pn(()=>{l==null||l.disconnect(),o(),t.forEach(u=>l==null?void 0:l.observe(u))},[t]),s}function IT(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Xo(e)?e:t}function CT(t){let{measure:e}=t;const[n,r]=P.useState(null),s=P.useCallback(h=>{for(const{target:p}of h)if(Xo(p)){r(g=>{const v=e(p);return g?{...g,width:v.width,height:v.height}:v});break}},[e]),i=Cu({callback:s}),o=P.useCallback(h=>{const p=IT(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),r(p?e(p):null)},[e,i]),[l,u]=Kl(o);return P.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const bT=[{sensor:uf,options:{}},{sensor:Dv,options:{}}],NT={current:{}},gl={draggable:{measure:Ym},droppable:{measure:Ym,strategy:Mo.WhileDragging,frequency:Vd.Optimized},dragOverlay:{measure:pi}};class oo extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const AT={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new oo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gl,measureDroppableContainers:Gl,windowRect:null,measuringScheduled:!1},RT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gl,draggableNodes:new Map,over:null,measureDroppableContainers:Gl},bu=P.createContext(RT),Mv=P.createContext(AT);function kT(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new oo}}}function PT(t,e){switch(e.type){case Ke.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ke.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ke.DragEnd:case Ke.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ke.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new oo(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Ke.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new oo(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Ke.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new oo(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function DT(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=P.useContext(bu),i=kd(r),o=kd(n==null?void 0:n.id);return P.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!sf(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:u,node:h}=l;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[u.current,h.current]){if(!p)continue;const g=EE(p);if(g){g.focus();break}}})}},[r,e,s,o,i]),null}function jT(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function VT(t){return P.useMemo(()=>({draggable:{...gl.draggable,...t==null?void 0:t.draggable},droppable:{...gl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...gl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function MT(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=P.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Pn(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=n(h),g=Iv(p,r);if(o||(g.x=0),l||(g.y=0),i.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const v=Cv(h);v&&v.scrollBy({top:g.y,left:g.x})}},[e,o,l,r,n])}const Lv=P.createContext({...vn,scaleX:1,scaleY:1});var ar;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ar||(ar={}));const LT=P.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:u=!0,children:h,sensors:p=bT,collisionDetection:g=zE,measuring:v,modifiers:S,...k}=e;const N=P.useReducer(PT,void 0,kT),[A,E]=N,[T,I]=NE(),[D,L]=P.useState(ar.Uninitialized),V=D===ar.Initialized,{draggable:{active:w,nodes:m,translate:y},droppable:{containers:x}}=A,b=w!=null?m.get(w):null,R=P.useRef({initial:null,translated:null}),C=P.useMemo(()=>{var Ue;return w!=null?{id:w,data:(Ue=b==null?void 0:b.data)!=null?Ue:NT,rect:R}:null},[w,b]),ie=P.useRef(null),[ke,ze]=P.useState(null),[ue,B]=P.useState(null),Q=jo(k,Object.values(k)),K=Zo("DndDescribedBy",o),fe=P.useMemo(()=>x.getEnabled(),[x]),U=VT(v),{droppableRects:Y,measureDroppableContainers:$,measuringScheduled:J}=mT(fe,{dragging:V,dependencies:[y.x,y.y],config:U.droppable}),re=fT(m,w),oe=P.useMemo(()=>ue?Pd(ue):null,[ue]),et=Lr(),tt=gT(re,U.draggable.measure);MT({activeNode:w!=null?m.get(w):null,config:et.layoutShiftCompensation,initialRect:tt,measure:U.draggable.measure});const ne=tg(re,U.draggable.measure,tt),Gt=tg(re?re.parentElement:null),Rt=P.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:x,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xn=x.getNodeFor((n=Rt.current.over)==null?void 0:n.id),zt=CT({measure:U.dragOverlay.measure}),wn=(r=zt.nodeRef.current)!=null?r:re,Vn=V?(s=zt.rect)!=null?s:ne:null,la=!!(zt.nodeRef.current&&zt.rect),ua=_T(la?null:ne),fs=Vv(wn?Ft(wn):null),Yt=xT(V?xn??re:null),Vr=ST(Yt),ps=jT(S,{transform:{x:y.x-ua.x,y:y.y-ua.y,scaleX:1,scaleY:1},activatorEvent:ue,active:C,activeNodeRect:ne,containerNodeRect:Gt,draggingNodeRect:Vn,over:Rt.current.over,overlayNodeRect:zt.rect,scrollableAncestors:Yt,scrollableAncestorRects:Vr,windowRect:fs}),ms=oe?qs(oe,y):null,gs=wT(Yt),ca=rg(gs),Ge=rg(gs,[ne]),Pe=qs(ps,ca),on=Vn?$E(Vn,ps):null,Jn=C&&on?g({active:C,collisionRect:on,droppableRects:Y,droppableContainers:fe,pointerCoordinates:ms}):null,wi=LE(Jn,"id"),[En,Zn]=P.useState(null),da=la?ps:qs(ps,Ge),ha=UE(da,(i=En==null?void 0:En.rect)!=null?i:null,ne),Mr=P.useRef(null),fa=P.useCallback((Ue,nt)=>{let{sensor:Me,options:an}=nt;if(ie.current==null)return;const rt=m.get(ie.current);if(!rt)return;const ht=Ue.nativeEvent,ft=new Me({active:ie.current,activeNode:rt,event:ht,options:an,context:Rt,onAbort(ce){if(!m.get(ce))return;const{onDragAbort:pt}=Q.current,St={id:ce};pt==null||pt(St),T({type:"onDragAbort",event:St})},onPending(ce,ln,pt,St){if(!m.get(ce))return;const{onDragPending:Fr}=Q.current,It={id:ce,constraint:ln,initialCoordinates:pt,offset:St};Fr==null||Fr(It),T({type:"onDragPending",event:It})},onStart(ce){const ln=ie.current;if(ln==null)return;const pt=m.get(ln);if(!pt)return;const{onDragStart:St}=Q.current,Or={activatorEvent:ht,active:{id:ln,data:pt.data,rect:R}};Ls.unstable_batchedUpdates(()=>{St==null||St(Or),L(ar.Initializing),E({type:Ke.DragStart,initialCoordinates:ce,active:ln}),T({type:"onDragStart",event:Or}),ze(Mr.current),B(ht)})},onMove(ce){E({type:Ke.DragMove,coordinates:ce})},onEnd:Mn(Ke.DragEnd),onCancel:Mn(Ke.DragCancel)});Mr.current=ft;function Mn(ce){return async function(){const{active:pt,collisions:St,over:Or,scrollAdjustedTranslate:Fr}=Rt.current;let It=null;if(pt&&Fr){const{cancelDrop:zr}=Q.current;It={activatorEvent:ht,active:pt,collisions:St,delta:Fr,over:Or},ce===Ke.DragEnd&&typeof zr=="function"&&await Promise.resolve(zr(It))&&(ce=Ke.DragCancel)}ie.current=null,Ls.unstable_batchedUpdates(()=>{E({type:ce}),L(ar.Uninitialized),Zn(null),ze(null),B(null),Mr.current=null;const zr=ce===Ke.DragEnd?"onDragEnd":"onDragCancel";if(It){const Ei=Q.current[zr];Ei==null||Ei(It),T({type:zr,event:It})}})}}},[m]),Uu=P.useCallback((Ue,nt)=>(Me,an)=>{const rt=Me.nativeEvent,ht=m.get(an);if(ie.current!==null||!ht||rt.dndKit||rt.defaultPrevented)return;const ft={active:ht};Ue(Me,nt.options,ft)===!0&&(rt.dndKit={capturedBy:nt.sensor},ie.current=an,fa(Me,nt))},[m,fa]),ys=pT(p,Uu);ET(p),Pn(()=>{ne&&D===ar.Initializing&&L(ar.Initialized)},[ne,D]),P.useEffect(()=>{const{onDragMove:Ue}=Q.current,{active:nt,activatorEvent:Me,collisions:an,over:rt}=Rt.current;if(!nt||!Me)return;const ht={active:nt,activatorEvent:Me,collisions:an,delta:{x:Pe.x,y:Pe.y},over:rt};Ls.unstable_batchedUpdates(()=>{Ue==null||Ue(ht),T({type:"onDragMove",event:ht})})},[Pe.x,Pe.y]),P.useEffect(()=>{const{active:Ue,activatorEvent:nt,collisions:Me,droppableContainers:an,scrollAdjustedTranslate:rt}=Rt.current;if(!Ue||ie.current==null||!nt||!rt)return;const{onDragOver:ht}=Q.current,ft=an.get(wi),Mn=ft&&ft.rect.current?{id:ft.id,rect:ft.rect.current,data:ft.data,disabled:ft.disabled}:null,ce={active:Ue,activatorEvent:nt,collisions:Me,delta:{x:rt.x,y:rt.y},over:Mn};Ls.unstable_batchedUpdates(()=>{Zn(Mn),ht==null||ht(ce),T({type:"onDragOver",event:ce})})},[wi]),Pn(()=>{Rt.current={activatorEvent:ue,active:C,activeNode:re,collisionRect:on,collisions:Jn,droppableRects:Y,draggableNodes:m,draggingNode:wn,draggingNodeRect:Vn,droppableContainers:x,over:En,scrollableAncestors:Yt,scrollAdjustedTranslate:Pe},R.current={initial:Vn,translated:on}},[C,re,Jn,on,m,wn,Vn,Y,x,En,Yt,Pe]),cT({...et,delta:y,draggingRect:on,pointerCoordinates:ms,scrollableAncestors:Yt,scrollableAncestorRects:Vr});const pa=P.useMemo(()=>({active:C,activeNode:re,activeNodeRect:ne,activatorEvent:ue,collisions:Jn,containerNodeRect:Gt,dragOverlay:zt,draggableNodes:m,droppableContainers:x,droppableRects:Y,over:En,measureDroppableContainers:$,scrollableAncestors:Yt,scrollableAncestorRects:Vr,measuringConfiguration:U,measuringScheduled:J,windowRect:fs}),[C,re,ne,ue,Jn,Gt,zt,m,x,Y,En,$,Yt,Vr,U,J,fs]),ma=P.useMemo(()=>({activatorEvent:ue,activators:ys,active:C,activeNodeRect:ne,ariaDescribedById:{draggable:K},dispatch:E,draggableNodes:m,over:En,measureDroppableContainers:$}),[ue,ys,C,ne,E,K,m,En,$]);return kt.createElement(Sv.Provider,{value:I},kt.createElement(bu.Provider,{value:ma},kt.createElement(Mv.Provider,{value:pa},kt.createElement(Lv.Provider,{value:ha},h)),kt.createElement(DT,{disabled:(l==null?void 0:l.restoreFocus)===!1})),kt.createElement(kE,{...l,hiddenTextDescribedById:K}));function Lr(){const Ue=(ke==null?void 0:ke.autoScrollEnabled)===!1,nt=typeof u=="object"?u.enabled===!1:u===!1,Me=V&&!Ue&&!nt;return typeof u=="object"?{...u,enabled:Me}:{enabled:Me}}}),OT=P.createContext(null),ig="button",FT="Draggable";function zT(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Zo(FT),{activators:o,activatorEvent:l,active:u,activeNodeRect:h,ariaDescribedById:p,draggableNodes:g,over:v}=P.useContext(bu),{role:S=ig,roleDescription:k="draggable",tabIndex:N=0}=s??{},A=(u==null?void 0:u.id)===e,E=P.useContext(A?Lv:OT),[T,I]=Kl(),[D,L]=Kl(),V=TT(o,e),w=jo(n);Pn(()=>(g.set(e,{id:e,key:i,node:T,activatorNode:D,data:w}),()=>{const y=g.get(e);y&&y.key===i&&g.delete(e)}),[g,e]);const m=P.useMemo(()=>({role:S,tabIndex:N,"aria-disabled":r,"aria-pressed":A&&S===ig?!0:void 0,"aria-roledescription":k,"aria-describedby":p.draggable}),[r,S,N,A,k,p.draggable]);return{active:u,activatorEvent:l,activeNodeRect:h,attributes:m,isDragging:A,listeners:r?void 0:V,node:T,over:v,setNodeRef:I,setActivatorNodeRef:L,transform:E}}function UT(){return P.useContext(Mv)}const BT="Droppable",$T={timeout:25};function qT(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Zo(BT),{active:o,dispatch:l,over:u,measureDroppableContainers:h}=P.useContext(bu),p=P.useRef({disabled:n}),g=P.useRef(!1),v=P.useRef(null),S=P.useRef(null),{disabled:k,updateMeasurementsFor:N,timeout:A}={...$T,...s},E=jo(N??r),T=P.useCallback(()=>{if(!g.current){g.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),S.current=null},A)},[A]),I=Cu({callback:T,disabled:k||!o}),D=P.useCallback((m,y)=>{I&&(y&&(I.unobserve(y),g.current=!1),m&&I.observe(m))},[I]),[L,V]=Kl(D),w=jo(e);return P.useEffect(()=>{!I||!L.current||(I.disconnect(),g.current=!1,I.observe(L.current))},[L,I]),P.useEffect(()=>(l({type:Ke.RegisterDroppable,element:{id:r,key:i,disabled:n,node:L,rect:v,data:w}}),()=>l({type:Ke.UnregisterDroppable,key:i,id:r})),[r]),P.useEffect(()=>{n!==p.current.disabled&&(l({type:Ke.SetDroppableDisabled,id:r,key:i,disabled:n}),p.current.disabled=n)},[r,i,n,l]),{active:o,rect:v,isOver:(u==null?void 0:u.id)===r,node:L,over:u,setNodeRef:V}}function cf(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function HT(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ka(t){return t!==null&&t>=0}function WT(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function KT(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Ov=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=cf(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Qa={scaleX:1,scaleY:1},QT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const h=i[o];return h?{x:0,y:n<o?h.top+h.height-(l.top+l.height):h.top-l.top,...Qa}:null}const u=GT(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-u,...Qa}:s<n&&s>=o?{x:0,y:l.height+u,...Qa}:{x:0,y:0,...Qa}};function GT(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Fv="Sortable",zv=kt.createContext({activeIndex:-1,containerId:Fv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ov,disabled:{draggable:!1,droppable:!1}});function YT(t){let{children:e,id:n,items:r,strategy:s=Ov,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:u,over:h,measureDroppableContainers:p}=UT(),g=Zo(Fv,n),v=l.rect!==null,S=P.useMemo(()=>r.map(V=>typeof V=="object"&&"id"in V?V.id:V),[r]),k=o!=null,N=o?S.indexOf(o.id):-1,A=h?S.indexOf(h.id):-1,E=P.useRef(S),T=!WT(S,E.current),I=A!==-1&&N===-1||T,D=KT(i);Pn(()=>{T&&k&&p(S)},[T,S,k,p]),P.useEffect(()=>{E.current=S},[S]);const L=P.useMemo(()=>({activeIndex:N,containerId:g,disabled:D,disableTransforms:I,items:S,overIndex:A,useDragOverlay:v,sortedRects:HT(S,u),strategy:s}),[N,g,D.draggable,D.droppable,I,S,A,u,v,s]);return kt.createElement(zv.Provider,{value:L},e)}const XT=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return cf(n,r,s).indexOf(e)},JT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:u,transition:h}=t;return!h||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===u},ZT={duration:200,easing:"ease"},Uv="transform",eS=Vo.Transition.toString({property:Uv,duration:0,easing:"linear"}),tS={roleDescription:"sortable"};function nS(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=P.useState(null),l=P.useRef(n);return Pn(()=>{if(!e&&n!==l.current&&r.current){const u=s.current;if(u){const h=pi(r.current,{ignoreTransform:!0}),p={x:u.left-h.left,y:u.top-h.top,scaleX:u.width/h.width,scaleY:u.height/h.height};(p.x||p.y)&&o(p)}}n!==l.current&&(l.current=n)},[e,n,r,s]),P.useEffect(()=>{i&&o(null)},[i]),i}function rS(t){let{animateLayoutChanges:e=JT,attributes:n,disabled:r,data:s,getNewIndex:i=XT,id:o,strategy:l,resizeObserverConfig:u,transition:h=ZT}=t;const{items:p,containerId:g,activeIndex:v,disabled:S,disableTransforms:k,sortedRects:N,overIndex:A,useDragOverlay:E,strategy:T}=P.useContext(zv),I=sS(r,S),D=p.indexOf(o),L=P.useMemo(()=>({sortable:{containerId:g,index:D,items:p},...s}),[g,s,D,p]),V=P.useMemo(()=>p.slice(p.indexOf(o)),[p,o]),{rect:w,node:m,isOver:y,setNodeRef:x}=qT({id:o,data:L,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:V,...u}}),{active:b,activatorEvent:R,activeNodeRect:C,attributes:ie,setNodeRef:ke,listeners:ze,isDragging:ue,over:B,setActivatorNodeRef:Q,transform:K}=zT({id:o,data:L,attributes:{...tS,...n},disabled:I.draggable}),fe=vE(x,ke),U=!!b,Y=U&&!k&&Ka(v)&&Ka(A),$=!E&&ue,J=$&&Y?K:null,oe=Y?J??(l??T)({rects:N,activeNodeRect:C,activeIndex:v,overIndex:A,index:D}):null,et=Ka(v)&&Ka(A)?i({id:o,items:p,activeIndex:v,overIndex:A}):D,tt=b==null?void 0:b.id,ne=P.useRef({activeId:tt,items:p,newIndex:et,containerId:g}),Gt=p!==ne.current.items,Rt=e({active:b,containerId:g,isDragging:ue,isSorting:U,id:o,index:D,items:p,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:h,wasDragging:ne.current.activeId!=null}),xn=nS({disabled:!Rt,index:D,node:m,rect:w});return P.useEffect(()=>{U&&ne.current.newIndex!==et&&(ne.current.newIndex=et),g!==ne.current.containerId&&(ne.current.containerId=g),p!==ne.current.items&&(ne.current.items=p)},[U,et,g,p]),P.useEffect(()=>{if(tt===ne.current.activeId)return;if(tt!=null&&ne.current.activeId==null){ne.current.activeId=tt;return}const wn=setTimeout(()=>{ne.current.activeId=tt},50);return()=>clearTimeout(wn)},[tt]),{active:b,activeIndex:v,attributes:ie,data:L,rect:w,index:D,newIndex:et,items:p,isOver:y,isSorting:U,isDragging:ue,listeners:ze,node:m,overIndex:A,over:B,setNodeRef:fe,setActivatorNodeRef:Q,setDroppableNodeRef:x,setDraggableNodeRef:ke,transform:xn??oe,transition:zt()};function zt(){if(xn||Gt&&ne.current.newIndex===D)return eS;if(!($&&!sf(R)||!h)&&(U||Rt))return Vo.Transition.toString({...h,property:Uv})}}function sS(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}ge.Down,ge.Right,ge.Up,ge.Left;var og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,g=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(v=64)),r.push(n[p],n[g],n[v],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||g==null)throw new oS;const v=i<<2|l>>4;if(r.push(v),h!==64){const S=l<<4&240|h>>2;if(r.push(S),g!==64){const k=h<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aS=function(t){const e=Bv(t);return $v.encodeByteArray(e,!0)},Xl=function(t){return aS(t).replace(/\./g,"")},lS=function(t){try{return $v.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=()=>uS().__FIREBASE_DEFAULTS__,dS=()=>{if(typeof process>"u"||typeof og>"u")return;const t=og.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lS(t[1]);return e&&JSON.parse(e)},df=()=>{try{return cS()||dS()||hS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fS=t=>{var e,n;return(n=(e=df())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pS=t=>{const e=fS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qv=()=>{var t;return(t=df())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xl(JSON.stringify(n)),Xl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vS(){var t;const e=(t=df())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _S(){return!vS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xS(){try{return typeof indexedDB=="object"}catch{return!1}}function wS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="FirebaseError";class mi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ES,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hv.prototype.create)}}class Hv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?TS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new mi(s,l,r)}}function TS(t,e){return t.replace(SS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SS=/\{\$([^}]+)}/g;function Md(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ag(i)&&ag(o)){if(!Md(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ag(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class Lo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bS(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(t){return t===Wr?void 0:t}function bS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const AS={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},RS=de.INFO,kS={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},PS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wv{constructor(e){this.name=e,this._logLevel=RS,this._logHandler=PS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const DS=(t,e)=>e.some(n=>t instanceof n);let lg,ug;function jS(){return lg||(lg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VS(){return ug||(ug=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kv=new WeakMap,Ld=new WeakMap,Qv=new WeakMap,Rc=new WeakMap,hf=new WeakMap;function MS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kv.set(n,t)}).catch(()=>{}),hf.set(e,t),e}function LS(t){if(Ld.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ld.set(t,e)}let Od={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ld.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OS(t){Od=t(Od)}function FS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kc(this),e,...n);return Qv.set(r,e.sort?e.sort():[e]),wr(r)}:VS().includes(t)?function(...e){return t.apply(kc(this),e),wr(Kv.get(this))}:function(...e){return wr(t.apply(kc(this),e))}}function zS(t){return typeof t=="function"?FS(t):(t instanceof IDBTransaction&&LS(t),DS(t,jS())?new Proxy(t,Od):t)}function wr(t){if(t instanceof IDBRequest)return MS(t);if(Rc.has(t))return Rc.get(t);const e=zS(t);return e!==t&&(Rc.set(t,e),hf.set(e,t)),e}const kc=t=>hf.get(t);function US(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wr(o.result),u.oldVersion,u.newVersion,wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const BS=["get","getKey","getAll","getAllKeys","count"],$S=["put","add","delete","clear"],Pc=new Map;function cg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pc.get(e))return Pc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$S.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Pc.set(e,i),i}OS(t=>({...t,get:(e,n,r)=>cg(e,n)||t.get(e,n,r),has:(e,n)=>!!cg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fd="@firebase/app",dg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Wv("@firebase/app"),WS="@firebase/app-compat",KS="@firebase/analytics-compat",QS="@firebase/analytics",GS="@firebase/app-check-compat",YS="@firebase/app-check",XS="@firebase/auth",JS="@firebase/auth-compat",ZS="@firebase/database",eI="@firebase/data-connect",tI="@firebase/database-compat",nI="@firebase/functions",rI="@firebase/functions-compat",sI="@firebase/installations",iI="@firebase/installations-compat",oI="@firebase/messaging",aI="@firebase/messaging-compat",lI="@firebase/performance",uI="@firebase/performance-compat",cI="@firebase/remote-config",dI="@firebase/remote-config-compat",hI="@firebase/storage",fI="@firebase/storage-compat",pI="@firebase/firestore",mI="@firebase/vertexai-preview",gI="@firebase/firestore-compat",yI="firebase",vI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",_I={[Fd]:"fire-core",[WS]:"fire-core-compat",[QS]:"fire-analytics",[KS]:"fire-analytics-compat",[YS]:"fire-app-check",[GS]:"fire-app-check-compat",[XS]:"fire-auth",[JS]:"fire-auth-compat",[ZS]:"fire-rtdb",[eI]:"fire-data-connect",[tI]:"fire-rtdb-compat",[nI]:"fire-fn",[rI]:"fire-fn-compat",[sI]:"fire-iid",[iI]:"fire-iid-compat",[oI]:"fire-fcm",[aI]:"fire-fcm-compat",[lI]:"fire-perf",[uI]:"fire-perf-compat",[cI]:"fire-rc",[dI]:"fire-rc-compat",[hI]:"fire-gcs",[fI]:"fire-gcs-compat",[pI]:"fire-fst",[gI]:"fire-fst-compat",[mI]:"fire-vertex","fire-js":"fire-js",[yI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,xI=new Map,Ud=new Map;function hg(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zl(t){const e=t.name;if(Ud.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Ud.set(e,t);for(const n of Jl.values())hg(n,t);for(const n of xI.values())hg(n,t);return!0}function wI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new Hv("app","Firebase",EI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=vI;function Gv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=qv()),!n)throw Er.create("no-options");const i=Jl.get(s);if(i){if(Md(n,i.options)&&Md(r,i.config))return i;throw Er.create("duplicate-app",{appName:s})}const o=new NS(s);for(const u of Ud.values())o.addComponent(u);const l=new TI(n,r,o);return Jl.set(s,l),l}function II(t=zd){const e=Jl.get(t);if(!e&&t===zd&&qv())return Gv();if(!e)throw Er.create("no-app",{appName:t});return e}function Hs(t,e,n){var r;let s=(r=_I[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(l.join(" "));return}Zl(new Lo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebase-heartbeat-database",bI=1,Oo="firebase-heartbeat-store";let Dc=null;function Yv(){return Dc||(Dc=US(CI,bI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),Dc}async function NI(t){try{const n=(await Yv()).transaction(Oo),r=await n.objectStore(Oo).get(Xv(t));return await n.done,r}catch(e){if(e instanceof mi)Qn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function fg(t,e){try{const r=(await Yv()).transaction(Oo,"readwrite");await r.objectStore(Oo).put(e,Xv(t)),await r.done}catch(n){if(n instanceof mi)Qn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function Xv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=1024,RI=30*24*60*60*1e3;class kI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=RI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pg(),{heartbeatsToSend:r,unsentEntries:s}=PI(this._heartbeatsCache.heartbeats),i=Xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function pg(){return new Date().toISOString().substring(0,10)}function PI(t,e=AI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xS()?wS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mg(t){return Xl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){Zl(new Lo("platform-logger",e=>new qS(e),"PRIVATE")),Zl(new Lo("heartbeat",e=>new kI(e),"PRIVATE")),Hs(Fd,dg,t),Hs(Fd,dg,"esm2017"),Hs("fire-js","")}jI("");var gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,Jv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,m){function y(){}y.prototype=m.prototype,w.D=m.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(x,b,R){for(var C=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)C[ie-2]=arguments[ie];return m.prototype[b].apply(x,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,m,y){y||(y=0);var x=Array(16);if(typeof m=="string")for(var b=0;16>b;++b)x[b]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(b=0;16>b;++b)x[b]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=w.g[0],y=w.g[1],b=w.g[2];var R=w.g[3],C=m+(R^y&(b^R))+x[0]+3614090360&4294967295;m=y+(C<<7&4294967295|C>>>25),C=R+(b^m&(y^b))+x[1]+3905402710&4294967295,R=m+(C<<12&4294967295|C>>>20),C=b+(y^R&(m^y))+x[2]+606105819&4294967295,b=R+(C<<17&4294967295|C>>>15),C=y+(m^b&(R^m))+x[3]+3250441966&4294967295,y=b+(C<<22&4294967295|C>>>10),C=m+(R^y&(b^R))+x[4]+4118548399&4294967295,m=y+(C<<7&4294967295|C>>>25),C=R+(b^m&(y^b))+x[5]+1200080426&4294967295,R=m+(C<<12&4294967295|C>>>20),C=b+(y^R&(m^y))+x[6]+2821735955&4294967295,b=R+(C<<17&4294967295|C>>>15),C=y+(m^b&(R^m))+x[7]+4249261313&4294967295,y=b+(C<<22&4294967295|C>>>10),C=m+(R^y&(b^R))+x[8]+1770035416&4294967295,m=y+(C<<7&4294967295|C>>>25),C=R+(b^m&(y^b))+x[9]+2336552879&4294967295,R=m+(C<<12&4294967295|C>>>20),C=b+(y^R&(m^y))+x[10]+4294925233&4294967295,b=R+(C<<17&4294967295|C>>>15),C=y+(m^b&(R^m))+x[11]+2304563134&4294967295,y=b+(C<<22&4294967295|C>>>10),C=m+(R^y&(b^R))+x[12]+1804603682&4294967295,m=y+(C<<7&4294967295|C>>>25),C=R+(b^m&(y^b))+x[13]+4254626195&4294967295,R=m+(C<<12&4294967295|C>>>20),C=b+(y^R&(m^y))+x[14]+2792965006&4294967295,b=R+(C<<17&4294967295|C>>>15),C=y+(m^b&(R^m))+x[15]+1236535329&4294967295,y=b+(C<<22&4294967295|C>>>10),C=m+(b^R&(y^b))+x[1]+4129170786&4294967295,m=y+(C<<5&4294967295|C>>>27),C=R+(y^b&(m^y))+x[6]+3225465664&4294967295,R=m+(C<<9&4294967295|C>>>23),C=b+(m^y&(R^m))+x[11]+643717713&4294967295,b=R+(C<<14&4294967295|C>>>18),C=y+(R^m&(b^R))+x[0]+3921069994&4294967295,y=b+(C<<20&4294967295|C>>>12),C=m+(b^R&(y^b))+x[5]+3593408605&4294967295,m=y+(C<<5&4294967295|C>>>27),C=R+(y^b&(m^y))+x[10]+38016083&4294967295,R=m+(C<<9&4294967295|C>>>23),C=b+(m^y&(R^m))+x[15]+3634488961&4294967295,b=R+(C<<14&4294967295|C>>>18),C=y+(R^m&(b^R))+x[4]+3889429448&4294967295,y=b+(C<<20&4294967295|C>>>12),C=m+(b^R&(y^b))+x[9]+568446438&4294967295,m=y+(C<<5&4294967295|C>>>27),C=R+(y^b&(m^y))+x[14]+3275163606&4294967295,R=m+(C<<9&4294967295|C>>>23),C=b+(m^y&(R^m))+x[3]+4107603335&4294967295,b=R+(C<<14&4294967295|C>>>18),C=y+(R^m&(b^R))+x[8]+1163531501&4294967295,y=b+(C<<20&4294967295|C>>>12),C=m+(b^R&(y^b))+x[13]+2850285829&4294967295,m=y+(C<<5&4294967295|C>>>27),C=R+(y^b&(m^y))+x[2]+4243563512&4294967295,R=m+(C<<9&4294967295|C>>>23),C=b+(m^y&(R^m))+x[7]+1735328473&4294967295,b=R+(C<<14&4294967295|C>>>18),C=y+(R^m&(b^R))+x[12]+2368359562&4294967295,y=b+(C<<20&4294967295|C>>>12),C=m+(y^b^R)+x[5]+4294588738&4294967295,m=y+(C<<4&4294967295|C>>>28),C=R+(m^y^b)+x[8]+2272392833&4294967295,R=m+(C<<11&4294967295|C>>>21),C=b+(R^m^y)+x[11]+1839030562&4294967295,b=R+(C<<16&4294967295|C>>>16),C=y+(b^R^m)+x[14]+4259657740&4294967295,y=b+(C<<23&4294967295|C>>>9),C=m+(y^b^R)+x[1]+2763975236&4294967295,m=y+(C<<4&4294967295|C>>>28),C=R+(m^y^b)+x[4]+1272893353&4294967295,R=m+(C<<11&4294967295|C>>>21),C=b+(R^m^y)+x[7]+4139469664&4294967295,b=R+(C<<16&4294967295|C>>>16),C=y+(b^R^m)+x[10]+3200236656&4294967295,y=b+(C<<23&4294967295|C>>>9),C=m+(y^b^R)+x[13]+681279174&4294967295,m=y+(C<<4&4294967295|C>>>28),C=R+(m^y^b)+x[0]+3936430074&4294967295,R=m+(C<<11&4294967295|C>>>21),C=b+(R^m^y)+x[3]+3572445317&4294967295,b=R+(C<<16&4294967295|C>>>16),C=y+(b^R^m)+x[6]+76029189&4294967295,y=b+(C<<23&4294967295|C>>>9),C=m+(y^b^R)+x[9]+3654602809&4294967295,m=y+(C<<4&4294967295|C>>>28),C=R+(m^y^b)+x[12]+3873151461&4294967295,R=m+(C<<11&4294967295|C>>>21),C=b+(R^m^y)+x[15]+530742520&4294967295,b=R+(C<<16&4294967295|C>>>16),C=y+(b^R^m)+x[2]+3299628645&4294967295,y=b+(C<<23&4294967295|C>>>9),C=m+(b^(y|~R))+x[0]+4096336452&4294967295,m=y+(C<<6&4294967295|C>>>26),C=R+(y^(m|~b))+x[7]+1126891415&4294967295,R=m+(C<<10&4294967295|C>>>22),C=b+(m^(R|~y))+x[14]+2878612391&4294967295,b=R+(C<<15&4294967295|C>>>17),C=y+(R^(b|~m))+x[5]+4237533241&4294967295,y=b+(C<<21&4294967295|C>>>11),C=m+(b^(y|~R))+x[12]+1700485571&4294967295,m=y+(C<<6&4294967295|C>>>26),C=R+(y^(m|~b))+x[3]+2399980690&4294967295,R=m+(C<<10&4294967295|C>>>22),C=b+(m^(R|~y))+x[10]+4293915773&4294967295,b=R+(C<<15&4294967295|C>>>17),C=y+(R^(b|~m))+x[1]+2240044497&4294967295,y=b+(C<<21&4294967295|C>>>11),C=m+(b^(y|~R))+x[8]+1873313359&4294967295,m=y+(C<<6&4294967295|C>>>26),C=R+(y^(m|~b))+x[15]+4264355552&4294967295,R=m+(C<<10&4294967295|C>>>22),C=b+(m^(R|~y))+x[6]+2734768916&4294967295,b=R+(C<<15&4294967295|C>>>17),C=y+(R^(b|~m))+x[13]+1309151649&4294967295,y=b+(C<<21&4294967295|C>>>11),C=m+(b^(y|~R))+x[4]+4149444226&4294967295,m=y+(C<<6&4294967295|C>>>26),C=R+(y^(m|~b))+x[11]+3174756917&4294967295,R=m+(C<<10&4294967295|C>>>22),C=b+(m^(R|~y))+x[2]+718787259&4294967295,b=R+(C<<15&4294967295|C>>>17),C=y+(R^(b|~m))+x[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(b+(C<<21&4294967295|C>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+R&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var y=m-this.blockSize,x=this.B,b=this.h,R=0;R<m;){if(b==0)for(;R<=y;)s(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<m;)if(x[b++]=w.charCodeAt(R++),b==this.blockSize){s(this,x),b=0;break}}else for(;R<m;)if(x[b++]=w[R++],b==this.blockSize){s(this,x),b=0;break}}this.h=b,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var y=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=y&255,y/=256;for(this.u(w),w=Array(16),m=y=0;4>m;++m)for(var x=0;32>x;x+=8)w[y++]=this.g[m]>>>x&255;return w};function i(w,m){var y=l;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=m(w)}function o(w,m){this.h=m;for(var y=[],x=!0,b=w.length-1;0<=b;b--){var R=w[b]|0;x&&R==m||(y[b]=R,x=!1)}this.g=y}var l={};function u(w){return-128<=w&&128>w?i(w,function(m){return new o([m|0],0>m?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return A(h(-w));for(var m=[],y=1,x=0;w>=y;x++)m[x]=w/y|0,y*=4294967296;return new o(m,0)}function p(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return A(p(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(m,8)),x=g,b=0;b<w.length;b+=8){var R=Math.min(8,w.length-b),C=parseInt(w.substring(b,b+R),m);8>R?(R=h(Math.pow(m,R)),x=x.j(R).add(h(C))):(x=x.j(y),x=x.add(h(C)))}return x}var g=u(0),v=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-A(this).m();for(var w=0,m=1,y=0;y<this.g.length;y++){var x=this.i(y);w+=(0<=x?x:4294967296+x)*m,m*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k(this))return"0";if(N(this))return"-"+A(this).toString(w);for(var m=h(Math.pow(w,6)),y=this,x="";;){var b=D(y,m).g;y=E(y,b.j(m));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=b,k(y))return R+x;for(;6>R.length;)R="0"+R;x=R+x}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function k(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=E(this,w),N(w)?-1:k(w)?0:1};function A(w){for(var m=w.g.length,y=[],x=0;x<m;x++)y[x]=~w.g[x];return new o(y,~w.h).add(v)}t.abs=function(){return N(this)?A(this):this},t.add=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],x=0,b=0;b<=m;b++){var R=x+(this.i(b)&65535)+(w.i(b)&65535),C=(R>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);x=C>>>16,R&=65535,C&=65535,y[b]=C<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function E(w,m){return w.add(A(m))}t.j=function(w){if(k(this)||k(w))return g;if(N(this))return N(w)?A(this).j(A(w)):A(A(this).j(w));if(N(w))return A(this.j(A(w)));if(0>this.l(S)&&0>w.l(S))return h(this.m()*w.m());for(var m=this.g.length+w.g.length,y=[],x=0;x<2*m;x++)y[x]=0;for(x=0;x<this.g.length;x++)for(var b=0;b<w.g.length;b++){var R=this.i(x)>>>16,C=this.i(x)&65535,ie=w.i(b)>>>16,ke=w.i(b)&65535;y[2*x+2*b]+=C*ke,T(y,2*x+2*b),y[2*x+2*b+1]+=R*ke,T(y,2*x+2*b+1),y[2*x+2*b+1]+=C*ie,T(y,2*x+2*b+1),y[2*x+2*b+2]+=R*ie,T(y,2*x+2*b+2)}for(x=0;x<m;x++)y[x]=y[2*x+1]<<16|y[2*x];for(x=m;x<2*m;x++)y[x]=0;return new o(y,0)};function T(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function I(w,m){this.g=w,this.h=m}function D(w,m){if(k(m))throw Error("division by zero");if(k(w))return new I(g,g);if(N(w))return m=D(A(w),m),new I(A(m.g),A(m.h));if(N(m))return m=D(w,A(m)),new I(A(m.g),m.h);if(30<w.g.length){if(N(w)||N(m))throw Error("slowDivide_ only works with positive integers.");for(var y=v,x=m;0>=x.l(w);)y=L(y),x=L(x);var b=V(y,1),R=V(x,1);for(x=V(x,2),y=V(y,2);!k(x);){var C=R.add(x);0>=C.l(w)&&(b=b.add(y),R=C),x=V(x,1),y=V(y,1)}return m=E(w,b.j(m)),new I(b,m)}for(b=g;0<=w.l(m);){for(y=Math.max(1,Math.floor(w.m()/m.m())),x=Math.ceil(Math.log(y)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),R=h(y),C=R.j(m);N(C)||0<C.l(w);)y-=x,R=h(y),C=R.j(m);k(R)&&(R=v),b=b.add(R),w=E(w,C)}return new I(b,w)}t.A=function(w){return D(this,w).h},t.and=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],x=0;x<m;x++)y[x]=this.i(x)&w.i(x);return new o(y,this.h&w.h)},t.or=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],x=0;x<m;x++)y[x]=this.i(x)|w.i(x);return new o(y,this.h|w.h)},t.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],x=0;x<m;x++)y[x]=this.i(x)^w.i(x);return new o(y,this.h^w.h)};function L(w){for(var m=w.g.length+1,y=[],x=0;x<m;x++)y[x]=w.i(x)<<1|w.i(x-1)>>>31;return new o(y,w.h)}function V(w,m){var y=m>>5;m%=32;for(var x=w.g.length-y,b=[],R=0;R<x;R++)b[R]=0<m?w.i(R+y)>>>m|w.i(R+y+1)<<32-m:w.i(R+y);return new o(b,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Zr=o}).apply(typeof gg<"u"?gg:typeof self<"u"?self:typeof window<"u"?window:{});var Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zv,Hi,e_,yl,Bd,t_,n_,r_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ga=="object"&&Ga];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var j=a[_];if(!(j in f))break e;f=f[j]}a=a[a.length-1],_=f[a],d=d(_),d!=_&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,_=!1,j={next:function(){if(!_&&f<a.length){var M=f++;return{value:d(M,a[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function g(a,d,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,_),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function v(a,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function S(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function k(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,j,M){for(var q=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)q[_e-2]=arguments[_e];return d.prototype[j].apply(_,q)}}function N(a){const d=a.length;if(0<d){const f=Array(d);for(let _=0;_<d;_++)f[_]=a[_];return f}return[]}function A(a,d){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const j=a.length||0,M=_.length||0;a.length=j+M;for(let q=0;q<M;q++)a[j+q]=_[q]}else a.push(_)}}class E{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function T(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function V(a,d,f){for(const _ in a)d.call(f,a[_],_,a)}function w(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function m(a){const d={};for(const f in a)d[f]=a[f];return d}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,d){let f,_;for(let j=1;j<arguments.length;j++){_=arguments[j];for(f in _)a[f]=_[f];for(let M=0;M<y.length;M++)f=y[M],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function b(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function R(a){l.setTimeout(()=>{throw a},0)}function C(){var a=Q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ie{constructor(){this.h=this.g=null}add(d,f){const _=ke.get();_.set(d,f),this.h?this.h.next=_:this.g=_,this.h=_}}var ke=new E(()=>new ze,a=>a.reset());class ze{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,B=!1,Q=new ie,K=()=>{const a=l.Promise.resolve(void 0);ue=()=>{a.then(fe)}};var fe=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){R(f)}var d=ke;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}B=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function J(a,d){if(Y.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{D(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:re[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&J.aa.h.call(this)}}k(J,Y);var re={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),et=0;function tt(a,d,f,_,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!_,this.ha=j,this.key=++et,this.da=this.fa=!1}function ne(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Gt(a){this.src=a,this.g={},this.h=0}Gt.prototype.add=function(a,d,f,_,j){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var q=xn(a,d,_,j);return-1<q?(d=a[q],f||(d.fa=!1)):(d=new tt(d,this.src,M,!!_,j),d.fa=f,a.push(d)),d};function Rt(a,d){var f=d.type;if(f in a.g){var _=a.g[f],j=Array.prototype.indexOf.call(_,d,void 0),M;(M=0<=j)&&Array.prototype.splice.call(_,j,1),M&&(ne(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function xn(a,d,f,_){for(var j=0;j<a.length;++j){var M=a[j];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==_)return j}return-1}var zt="closure_lm_"+(1e6*Math.random()|0),wn={};function Vn(a,d,f,_,j){if(Array.isArray(d)){for(var M=0;M<d.length;M++)Vn(a,d[M],f,_,j);return null}return f=ca(f),a&&a[oe]?a.K(d,f,h(_)?!!_.capture:!!_,j):la(a,d,f,!1,_,j)}function la(a,d,f,_,j,M){if(!d)throw Error("Invalid event type");var q=h(j)?!!j.capture:!!j,_e=ms(a);if(_e||(a[zt]=_e=new Gt(a)),f=_e.add(d,f,_,q,M),f.proxy)return f;if(_=ua(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)$||(j=q),j===void 0&&(j=!1),a.addEventListener(d.toString(),_,j);else if(a.attachEvent)a.attachEvent(Vr(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ua(){function a(f){return d.call(a.src,a.listener,f)}const d=ps;return a}function fs(a,d,f,_,j){if(Array.isArray(d))for(var M=0;M<d.length;M++)fs(a,d[M],f,_,j);else _=h(_)?!!_.capture:!!_,f=ca(f),a&&a[oe]?(a=a.i,d=String(d).toString(),d in a.g&&(M=a.g[d],f=xn(M,f,_,j),-1<f&&(ne(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete a.g[d],a.h--)))):a&&(a=ms(a))&&(d=a.g[d.toString()],a=-1,d&&(a=xn(d,f,_,j)),(f=-1<a?d[a]:null)&&Yt(f))}function Yt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[oe])Rt(d.i,a);else{var f=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(f,_,a.capture):d.detachEvent?d.detachEvent(Vr(f),_):d.addListener&&d.removeListener&&d.removeListener(_),(f=ms(d))?(Rt(f,a),f.h==0&&(f.src=null,d[zt]=null)):ne(a)}}}function Vr(a){return a in wn?wn[a]:wn[a]="on"+a}function ps(a,d){if(a.da)a=!0;else{d=new J(d,this);var f=a.listener,_=a.ha||a.src;a.fa&&Yt(a),a=f.call(_,d)}return a}function ms(a){return a=a[zt],a instanceof Gt?a:null}var gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ca(a){return typeof a=="function"?a:(a[gs]||(a[gs]=function(d){return a.handleEvent(d)}),a[gs])}function Ge(){U.call(this),this.i=new Gt(this),this.M=this,this.F=null}k(Ge,U),Ge.prototype[oe]=!0,Ge.prototype.removeEventListener=function(a,d,f,_){fs(this,a,d,f,_)};function Pe(a,d){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new Y(d,a);else if(d instanceof Y)d.target=d.target||a;else{var j=d;d=new Y(_,a),x(d,j)}if(j=!0,f)for(var M=f.length-1;0<=M;M--){var q=d.g=f[M];j=on(q,_,!0,d)&&j}if(q=d.g=a,j=on(q,_,!0,d)&&j,j=on(q,_,!1,d)&&j,f)for(M=0;M<f.length;M++)q=d.g=f[M],j=on(q,_,!1,d)&&j}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],_=0;_<f.length;_++)ne(f[_]);delete a.g[d],a.h--}}this.F=null},Ge.prototype.K=function(a,d,f,_){return this.i.add(String(a),d,!1,f,_)},Ge.prototype.L=function(a,d,f,_){return this.i.add(String(a),d,!0,f,_)};function on(a,d,f,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,M=0;M<d.length;++M){var q=d[M];if(q&&!q.da&&q.capture==f){var _e=q.listener,st=q.ha||q.src;q.fa&&Rt(a.i,q),j=_e.call(st,_)!==!1&&j}}return j&&!_.defaultPrevented}function Jn(a,d,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function wi(a){a.g=Jn(()=>{a.g=null,a.i&&(a.i=!1,wi(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class En extends U{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:wi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(a){U.call(this),this.h=a,this.g={}}k(Zn,U);var da=[];function ha(a){V(a.g,function(d,f){this.g.hasOwnProperty(f)&&Yt(d)},a),a.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),ha(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mr=l.JSON.stringify,fa=l.JSON.parse,Uu=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ys(){}ys.prototype.h=null;function pa(a){return a.h||(a.h=a.i())}function ma(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ue(){Y.call(this,"d")}k(Ue,Y);function nt(){Y.call(this,"c")}k(nt,Y);var Me={},an=null;function rt(){return an=an||new Ge}Me.La="serverreachability";function ht(a){Y.call(this,Me.La,a)}k(ht,Y);function ft(a){const d=rt();Pe(d,new ht(d))}Me.STAT_EVENT="statevent";function Mn(a,d){Y.call(this,Me.STAT_EVENT,a),this.stat=d}k(Mn,Y);function ce(a){const d=rt();Pe(d,new Mn(d,a))}Me.Ma="timingevent";function ln(a,d){Y.call(this,Me.Ma,a),this.size=d}k(ln,Y);function pt(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function St(){this.g=!0}St.prototype.xa=function(){this.g=!1};function Or(a,d,f,_,j,M){a.info(function(){if(a.g)if(M)for(var q="",_e=M.split("&"),st=0;st<_e.length;st++){var pe=_e[st].split("=");if(1<pe.length){var mt=pe[0];pe=pe[1];var gt=mt.split("_");q=2<=gt.length&&gt[1]=="type"?q+(mt+"="+pe+"&"):q+(mt+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+_+") [attempt "+j+"]: "+d+`
`+f+`
`+q})}function Fr(a,d,f,_,j,M,q){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+j+"]: "+d+`
`+f+`
`+M+" "+q})}function It(a,d,f,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ei(a,f)+(_?" "+_:"")})}function zr(a,d){a.info(function(){return"TIMEOUT: "+d})}St.prototype.info=function(){};function Ei(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var j=_[1];if(Array.isArray(j)&&!(1>j.length)){var M=j[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<j.length;q++)j[q]=""}}}}return Mr(f)}catch{return d}}var ga={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bu;function ya(){}k(ya,ys),ya.prototype.g=function(){return new XMLHttpRequest},ya.prototype.i=function(){return{}},Bu=new ya;function er(a,d,f,_){this.j=a,this.i=d,this.l=f,this.R=_||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zf}function Zf(){this.i=null,this.g="",this.h=!1}var ep={},$u={};function qu(a,d,f){a.L=1,a.v=wa(Ln(d)),a.m=f,a.P=!0,tp(a,null)}function tp(a,d){a.F=Date.now(),va(a),a.A=Ln(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),mp(f.i,"t",_),a.C=0,f=a.j.J,a.h=new Zf,a.g=Dp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new En(v(a.Y,a,a.g),a.O)),d=a.U,f=a.g,_=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(da[0]=j.toString()),j=da);for(var M=0;M<j.length;M++){var q=Vn(f,j[M],_||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ft(),Or(a.i,a.u,a.A,a.l,a.R,a.m)}er.prototype.ca=function(a){a=a.target;const d=this.M;d&&On(a)==3?d.j():this.Y(a)},er.prototype.Y=function(a){try{if(a==this.g)e:{const gt=On(this.g);var d=this.g.Ba();const xs=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Ep(this.g)))){this.J||gt!=4||d==7||(d==8||0>=xs?ft(3):ft(2)),Hu(this);var f=this.g.Z();this.X=f;t:if(np(this)){var _=Ep(this.g);a="";var j=_.length,M=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),Ti(this);var q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(_[d],{stream:!(M&&d==j-1)});_.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,Fr(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,st=this.g;if((_e=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(_e)){var pe=_e;break t}}pe=null}if(f=pe)It(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wu(this,f);else{this.o=!1,this.s=3,ce(12),Ur(this),Ti(this);break e}}if(this.P){f=!0;let un;for(;!this.J&&this.C<q.length;)if(un=xx(this,q),un==$u){gt==4&&(this.s=4,ce(14),f=!1),It(this.i,this.l,null,"[Incomplete Response]");break}else if(un==ep){this.s=4,ce(15),It(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else It(this.i,this.l,un,null),Wu(this,un);if(np(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||q.length!=0||this.h.h||(this.s=1,ce(16),f=!1),this.o=this.o&&f,!f)It(this.i,this.l,q,"[Invalid Chunked Response]"),Ur(this),Ti(this);else if(0<q.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Ju(mt),mt.M=!0,ce(11))}}else It(this.i,this.l,q,null),Wu(this,q);gt==4&&Ur(this),this.o&&!this.J&&(gt==4?Ap(this.j,this):(this.o=!1,va(this)))}else Lx(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Ur(this),Ti(this)}}}catch{}finally{}};function np(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function xx(a,d){var f=a.C,_=d.indexOf(`
`,f);return _==-1?$u:(f=Number(d.substring(f,_)),isNaN(f)?ep:(_+=1,_+f>d.length?$u:(d=d.slice(_,_+f),a.C=_+f,d)))}er.prototype.cancel=function(){this.J=!0,Ur(this)};function va(a){a.S=Date.now()+a.I,rp(a,a.I)}function rp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=pt(v(a.ba,a),d)}function Hu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}er.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(zr(this.i,this.A),this.L!=2&&(ft(),ce(17)),Ur(this),this.s=2,Ti(this)):rp(this,this.S-a)};function Ti(a){a.j.G==0||a.J||Ap(a.j,a)}function Ur(a){Hu(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ha(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Wu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Ku(f.h,a))){if(!a.K&&Ku(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var j=_;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ba(f),Ia(f);else break e;Xu(f),ce(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=pt(v(f.Za,f),6e3));if(1>=op(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else $r(f,11)}else if((a.K||f.g==a)&&ba(f),!T(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let pe=j[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];const mt=pe[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));const gt=pe[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));const xs=pe[5];xs!=null&&typeof xs=="number"&&0<xs&&(_=1.5*xs,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const un=a.g;if(un){const Aa=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Aa){var M=_.h;M.g||Aa.indexOf("spdy")==-1&&Aa.indexOf("quic")==-1&&Aa.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Qu(M,M.h),M.h=null))}if(_.D){const Zu=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Zu&&(_.ya=Zu,we(_.I,_.D,Zu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var q=a;if(_.qa=Pp(_,_.J?_.ia:null,_.W),q.K){ap(_.h,q);var _e=q,st=_.L;st&&(_e.I=st),_e.B&&(Hu(_e),va(_e)),_.g=q}else bp(_);0<f.i.length&&Ca(f)}else pe[0]!="stop"&&pe[0]!="close"||$r(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?$r(f,7):Yu(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}ft(4)}catch{}}var wx=class{constructor(a,d){this.g=a,this.map=d}};function sp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ip(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function op(a){return a.h?1:a.g?a.g.size:0}function Ku(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Qu(a,d){a.g?a.g.add(d):a.h=d}function ap(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}sp.prototype.cancel=function(){if(this.i=lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function lp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function Ex(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,_=0;_<f;_++)d.push(a[_]);return d}d=[],f=0;for(_ in a)d[f++]=a[_];return d}function Tx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const _ in a)d[f++]=_;return d}}}function up(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Tx(a),_=Ex(a),j=_.length,M=0;M<j;M++)d.call(void 0,_[M],f&&f[M],a)}var cp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sx(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),j=null;if(0<=_){var M=a[f].substring(0,_);j=a[f].substring(_+1)}else M=a[f];d(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Br){this.h=a.h,_a(this,a.j),this.o=a.o,this.g=a.g,xa(this,a.s),this.l=a.l;var d=a.i,f=new Ci;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),dp(this,f),this.m=a.m}else a&&(d=String(a).match(cp))?(this.h=!1,_a(this,d[1]||"",!0),this.o=Si(d[2]||""),this.g=Si(d[3]||"",!0),xa(this,d[4]),this.l=Si(d[5]||"",!0),dp(this,d[6]||"",!0),this.m=Si(d[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Br.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ii(d,hp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ii(d,hp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ii(f,f.charAt(0)=="/"?bx:Cx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ii(f,Ax)),a.join("")};function Ln(a){return new Br(a)}function _a(a,d,f){a.j=f?Si(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function xa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function dp(a,d,f){d instanceof Ci?(a.i=d,Rx(a.i,a.h)):(f||(d=Ii(d,Nx)),a.i=new Ci(d,a.h))}function we(a,d,f){a.i.set(d,f)}function wa(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Si(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ii(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Ix),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ix(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hp=/[#\/\?@]/g,Cx=/[#\?:]/g,bx=/[#\?]/g,Nx=/[#\?@]/g,Ax=/#/g;function Ci(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function tr(a){a.g||(a.g=new Map,a.h=0,a.i&&Sx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ci.prototype,t.add=function(a,d){tr(this),this.i=null,a=vs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function fp(a,d){tr(a),d=vs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function pp(a,d){return tr(a),d=vs(a,d),a.g.has(d)}t.forEach=function(a,d){tr(this),this.g.forEach(function(f,_){f.forEach(function(j){a.call(d,j,_,this)},this)},this)},t.na=function(){tr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let _=0;_<d.length;_++){const j=a[_];for(let M=0;M<j.length;M++)f.push(d[_])}return f},t.V=function(a){tr(this);let d=[];if(typeof a=="string")pp(this,a)&&(d=d.concat(this.g.get(vs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return tr(this),this.i=null,a=vs(this,a),pp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function mp(a,d,f){fp(a,d),0<f.length&&(a.i=null,a.g.set(vs(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var _=d[f];const M=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var j=M;q[_]!==""&&(j+="="+encodeURIComponent(String(q[_]))),a.push(j)}}return this.i=a.join("&")};function vs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Rx(a,d){d&&!a.j&&(tr(a),a.i=null,a.g.forEach(function(f,_){var j=_.toLowerCase();_!=j&&(fp(this,_),mp(this,j,f))},a)),a.j=d}function kx(a,d){const f=new St;if(l.Image){const _=new Image;_.onload=S(nr,f,"TestLoadImage: loaded",!0,d,_),_.onerror=S(nr,f,"TestLoadImage: error",!1,d,_),_.onabort=S(nr,f,"TestLoadImage: abort",!1,d,_),_.ontimeout=S(nr,f,"TestLoadImage: timeout",!1,d,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function Px(a,d){const f=new St,_=new AbortController,j=setTimeout(()=>{_.abort(),nr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(M=>{clearTimeout(j),M.ok?nr(f,"TestPingServer: ok",!0,d):nr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),nr(f,"TestPingServer: error",!1,d)})}function nr(a,d,f,_,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),_(f)}catch{}}function Dx(){this.g=new Uu}function jx(a,d,f){const _=f||"";try{up(a,function(j,M){let q=j;h(j)&&(q=Mr(j)),d.push(_+M+"="+encodeURIComponent(q))})}catch(j){throw d.push(_+"type="+encodeURIComponent("_badmap")),j}}function Ea(a){this.l=a.Ub||null,this.j=a.eb||!1}k(Ea,ys),Ea.prototype.g=function(){return new Ta(this.l,this.j)},Ea.prototype.i=function(a){return function(){return a}}({});function Ta(a,d){Ge.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ta,Ge),t=Ta.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ni(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function gp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?bi(this):Ni(this),this.readyState==3&&gp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,bi(this))},t.Qa=function(a){this.g&&(this.response=a,bi(this))},t.ga=function(){this.g&&bi(this)};function bi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ni(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ni(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yp(a){let d="";return V(a,function(f,_){d+=_,d+=":",d+=f,d+=`\r
`}),d}function Gu(a,d,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=yp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):we(a,d,f))}function De(a){Ge.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(De,Ge);var Vx=/^https?$/i,Mx=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bu.g(),this.v=this.o?pa(this.o):pa(Bu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(M){vp(this,M);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var j in _)f.set(j,_[j]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())f.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Mx,d,void 0))||_||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of f)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wp(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){vp(this,M)}};function vp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,_p(a),Sa(a)}function _p(a){a.A||(a.A=!0,Pe(a,"complete"),Pe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Pe(this,"complete"),Pe(this,"abort"),Sa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xp(this):this.bb())},t.bb=function(){xp(this)};function xp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||On(a)!=4||a.Z()!=2)){if(a.u&&On(a)==4)Jn(a.Ea,0,a);else if(Pe(a,"readystatechange"),On(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var _;if(_=q===0){var j=String(a.D).match(cp)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),_=!Vx.test(j?j.toLowerCase():"")}f=_}if(f)Pe(a,"complete"),Pe(a,"success");else{a.m=6;try{var M=2<On(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",_p(a)}}finally{Sa(a)}}}}function Sa(a,d){if(a.g){wp(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Pe(a,"ready");try{f.onreadystatechange=_}catch{}}}function wp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),fa(d)}};function Ep(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Lx(a){const d={};a=(a.g&&2<=On(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(T(a[_]))continue;var f=b(a[_]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=d[j]||[];d[j]=M,M.push(f)}w(d,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Tp(a){this.Aa=0,this.i=[],this.j=new St,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ai("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ai("baseRetryDelayMs",5e3,a),this.cb=Ai("retryDelaySeedMs",1e4,a),this.Wa=Ai("forwardChannelMaxRetries",2,a),this.wa=Ai("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new sp(a&&a.concurrentRequestLimit),this.Da=new Dx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,_){ce(0),this.W=a,this.H=d||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=Pp(this,null,this.W),Ca(this)};function Yu(a){if(Sp(a),a.G==3){var d=a.U++,f=Ln(a.I);if(we(f,"SID",a.K),we(f,"RID",d),we(f,"TYPE","terminate"),Ri(a,f),d=new er(a,a.j,d),d.L=2,d.v=wa(Ln(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=Dp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),va(d)}kp(a)}function Ia(a){a.g&&(Ju(a),a.g.cancel(),a.g=null)}function Sp(a){Ia(a),a.u&&(l.clearTimeout(a.u),a.u=null),ba(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ca(a){if(!ip(a.h)&&!a.s){a.s=!0;var d=a.Ga;ue||K(),B||(ue(),B=!0),Q.add(d,a),a.B=0}}function Ox(a,d){return op(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=pt(v(a.Ga,a,d),Rp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new er(this,this.j,a);let M=this.o;if(this.S&&(M?(M=m(M),x(M,this.S)):M=this.S),this.m!==null||this.O||(j.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Cp(this,j,d),f=Ln(this.I),we(f,"RID",a),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),Ri(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(yp(M)))+"&"+d:this.m&&Gu(f,this.m,M)),Qu(this.h,j),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),j.T=!0,qu(j,f,null)):qu(j,f,d),this.G=2}}else this.G==3&&(a?Ip(this,a):this.i.length==0||ip(this.h)||Ip(this))};function Ip(a,d){var f;d?f=d.l:f=a.U++;const _=Ln(a.I);we(_,"SID",a.K),we(_,"RID",f),we(_,"AID",a.T),Ri(a,_),a.m&&a.o&&Gu(_,a.m,a.o),f=new er(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Cp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Qu(a.h,f),qu(f,_,d)}function Ri(a,d){a.H&&V(a.H,function(f,_){we(d,_,f)}),a.l&&up({},function(f,_){we(d,_,f)})}function Cp(a,d,f){f=Math.min(a.i.length,f);var _=a.l?v(a.l.Na,a.l,a):null;e:{var j=a.i;let M=-1;for(;;){const q=["count="+f];M==-1?0<f?(M=j[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let _e=!0;for(let st=0;st<f;st++){let pe=j[st].g;const mt=j[st].map;if(pe-=M,0>pe)M=Math.max(0,j[st].g-100),_e=!1;else try{jx(mt,q,"req"+pe+"_")}catch{_&&_(mt)}}if(_e){_=q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,_}function bp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ue||K(),B||(ue(),B=!0),Q.add(d,a),a.v=0}}function Xu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=pt(v(a.Fa,a),Rp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Np(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=pt(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Ia(this),Np(this))};function Ju(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Np(a){a.g=new er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Ln(a.qa);we(d,"RID","rpc"),we(d,"SID",a.K),we(d,"AID",a.T),we(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(d,"TO",a.ja),we(d,"TYPE","xmlhttp"),Ri(a,d),a.m&&a.o&&Gu(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=wa(Ln(d)),f.m=null,f.P=!0,tp(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ia(this),Xu(this),ce(19))};function ba(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Ap(a,d){var f=null;if(a.g==d){ba(a),Ju(a),a.g=null;var _=2}else if(Ku(a.h,d))f=d.D,ap(a.h,d),_=1;else return;if(a.G!=0){if(d.o)if(_==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;_=rt(),Pe(_,new ln(_,f)),Ca(a)}else bp(a);else if(j=d.s,j==3||j==0&&0<d.X||!(_==1&&Ox(a,d)||_==2&&Xu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Rp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function $r(a,d){if(a.j.info("Error code "+d),d==2){var f=v(a.fb,a),_=a.Xa;const j=!_;_=new Br(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_a(_,"https"),wa(_),j?kx(_.toString(),f):Px(_.toString(),f)}else ce(2);a.G=0,a.l&&a.l.sa(d),kp(a),Sp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function kp(a){if(a.G=0,a.ka=[],a.l){const d=lp(a.h);(d.length!=0||a.i.length!=0)&&(A(a.ka,d),A(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Pp(a,d,f){var _=f instanceof Br?Ln(f):new Br(f);if(_.g!="")d&&(_.g=d+"."+_.g),xa(_,_.s);else{var j=l.location;_=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var M=new Br(null);_&&_a(M,_),d&&(M.g=d),j&&xa(M,j),f&&(M.l=f),_=M}return f=a.D,d=a.ya,f&&d&&we(_,f,d),we(_,"VER",a.la),Ri(a,_),_}function Dp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new De(new Ea({eb:f})):new De(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}t=jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Na(){}Na.prototype.g=function(a,d){return new Ut(a,d)};function Ut(a,d){Ge.call(this),this.g=new Tp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!T(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!T(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new _s(this)}k(Ut,Ge),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Yu(this.g)},Ut.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Mr(a),a=f);d.i.push(new wx(d.Ya++,a)),d.G==3&&Ca(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Yu(this.g),delete this.g,Ut.aa.N.call(this)};function Vp(a){Ue.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}k(Vp,Ue);function Mp(){nt.call(this),this.status=1}k(Mp,nt);function _s(a){this.g=a}k(_s,jp),_s.prototype.ua=function(){Pe(this.g,"a")},_s.prototype.ta=function(a){Pe(this.g,new Vp(a))},_s.prototype.sa=function(a){Pe(this.g,new Mp)},_s.prototype.ra=function(){Pe(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,r_=function(){return new Na},n_=function(){return rt()},t_=Me,Bd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ga.NO_ERROR=0,ga.TIMEOUT=8,ga.HTTP_ERROR=6,yl=ga,Jf.COMPLETE="complete",e_=Jf,ma.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,Hi=ma,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,Zv=De}).apply(typeof Ga<"u"?Ga:typeof self<"u"?self:typeof window<"u"?window:{});const yg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Wv("@firebase/firestore");function Fi(){return is.logLevel}function G(t,...e){if(is.logLevel<=de.DEBUG){const n=e.map(ff);is.debug(`Firestore (${gi}): ${t}`,...n)}}function Gn(t,...e){if(is.logLevel<=de.ERROR){const n=e.map(ff);is.error(`Firestore (${gi}): ${t}`,...n)}}function ni(t,...e){if(is.logLevel<=de.WARN){const n=e.map(ff);is.warn(`Firestore (${gi}): ${t}`,...n)}}function ff(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${gi}) INTERNAL ASSERTION FAILED: `+t;throw Gn(e),new Error(e)}function ve(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class MI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LI{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new s_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new xt(e)}}class OI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new zI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function ri(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Te(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Te(0,0))}static max(){return new ee(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Fo{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const $I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Fo{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return $I.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Se.fromString(e))}static fromName(e){return new X(Se.fromString(e).popFirst(5))}static empty(){return new X(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Se(e.slice()))}}function qI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new br(s,X.empty(),e)}function HI(t){return new br(t.readTime,t.key,-1)}class br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new br(ee.min(),X.empty(),-1)}static max(){return new br(ee.max(),X.empty(),-1)}}function WI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==KI)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function GI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pf.oe=-1;function Nu(t){return t==null}function eu(t){return t===0&&1/t==-1/0}function YI(t){return typeof t=="number"&&Number.isInteger(t)&&!eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}}class Ya{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _g(this.data.getIterator())}getIteratorFrom(e){return new _g(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class _g{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new qt([])}unionWith(e){let n=new ut(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new a_("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const XI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=XI.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gf(t){const e=t.mapValue.fields.__previous_value__;return mf(e)?gf(e):e}function zo(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Uo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mf(t)?4:e2(t)?9007199254740991:ZI(t)?10:11:Z()}function jn(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zo(t).isEqual(zo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Nr(s.timestampValue),l=Nr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return os(s.bytesValue).isEqual(os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),l=Oe(i.doubleValue);return o===l?eu(o)===eu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ri(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(vg(o)!==vg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!jn(o[u],l[u])))return!1;return!0}(t,e);default:return Z()}}function Bo(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function si(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Oe(i.integerValue||i.doubleValue),u=Oe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return xg(t.timestampValue,e.timestampValue);case 4:return xg(zo(t),zo(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const l=os(i),u=os(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=me(l[h],u[h]);if(p!==0)return p}return me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=me(Oe(i.latitude),Oe(o.latitude));return l!==0?l:me(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,p;const g=i.fields||{},v=o.fields||{},S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=(u=v.value)===null||u===void 0?void 0:u.arrayValue,N=me(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:wg(S,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Xa.mapValue&&o===Xa.mapValue)return 0;if(i===Xa.mapValue)return 1;if(o===Xa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const v=me(u[g],p[g]);if(v!==0)return v;const S=si(l[u[g]],h[p[g]]);if(S!==0)return S}return me(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Z()}}function xg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Nr(t),r=Nr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function wg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=si(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function ii(t){return $d(t)}function $d(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$d(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${$d(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function Eg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qd(t){return!!t&&"integerValue"in t}function yf(t){return!!t&&"arrayValue"in t}function Tg(t){return!!t&&"nullValue"in t}function Sg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vl(t){return!!t&&"mapValue"in t}function ZI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ao(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function e2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ao(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];vl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(ao(this.value))}}function l_(t){const e=[];return ds(t.fields,(n,r)=>{const s=new at([n]);if(vl(r)){const i=l_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Et(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.position=e,this.inclusive=n}}function Ig(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=si(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n="asc"){this.field=e,this.dir=n}}function t2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{}class qe extends u_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r2(e,n,r):n==="array-contains"?new o2(e,r):n==="in"?new a2(e,r):n==="not-in"?new l2(e,r):n==="array-contains-any"?new u2(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s2(e,r):new i2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(si(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends u_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _n(e,n)}matches(e){return c_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function c_(t){return t.op==="and"}function d_(t){return n2(t)&&c_(t)}function n2(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Hd(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+ii(t.value);if(d_(t))return t.filters.map(e=>Hd(e)).join(",");{const e=t.filters.map(n=>Hd(n)).join(",");return`${t.op}(${e})`}}function h_(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof _n?function(r,s){return s instanceof _n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&h_(o,s.filters[l]),!0):!1}(t,e):void Z()}function f_(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${ii(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(f_).join(" ,")+"}"}(t):"Filter"}class r2 extends qe{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class s2 extends qe{constructor(e,n){super(e,"in",n),this.keys=p_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i2 extends qe{constructor(e,n){super(e,"not-in",n),this.keys=p_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class o2 extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yf(n)&&Bo(n.arrayValue,this.value)}}class a2 extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bo(this.value.arrayValue,n)}}class l2 extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bo(this.value.arrayValue,n)}}class u2 extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function bg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new c2(t,e,n,r,s,i,o)}function vf(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Nu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ii(r)).join(",")),e.ue=n}return e.ue}function _f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cg(t.startAt,e.startAt)&&Cg(t.endAt,e.endAt)}function Wd(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function d2(t,e,n,r,s,i,o,l){return new yi(t,e,n,r,s,i,o,l)}function xf(t){return new yi(t)}function Ng(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m_(t){return t.collectionGroup!==null}function lo(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ut(at.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $o(i,r))}),n.has(at.keyField().canonicalString())||e.ce.push(new $o(at.keyField(),r))}return e.ce}function An(t){const e=te(t);return e.le||(e.le=h2(e,lo(t))),e.le}function h2(t,e){if(t.limitType==="F")return bg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $o(s.field,i)});const n=t.endAt?new tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tu(t.startAt.position,t.startAt.inclusive):null;return bg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kd(t,e){const n=t.filters.concat([e]);return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qd(t,e,n){return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Au(t,e){return _f(An(t),An(e))&&t.limitType===e.limitType}function g_(t){return`${vf(An(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>f_(s)).join(", ")}]`),Nu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ii(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Ru(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of lo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Ig(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,lo(r),s)||r.endAt&&!function(o,l,u){const h=Ig(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,lo(r),s))}(t,e)}function f2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y_(t){return(e,n)=>{let r=!1;for(const s of lo(t)){const i=p2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function p2(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?si(u,h):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new Re(X.comparator);function Yn(){return m2}const v_=new Re(X.comparator);function Wi(...t){let e=v_;for(const n of t)e=e.insert(n.key,n);return e}function __(t){let e=v_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return uo()}function x_(){return uo()}function uo(){return new vi(t=>t.toString(),(t,e)=>t.isEqual(e))}const g2=new Re(X.comparator),y2=new ut(X.comparator);function ae(...t){let e=y2;for(const n of t)e=e.add(n);return e}const v2=new ut(me);function _2(){return v2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function w_(t){return{integerValue:""+t}}function x2(t,e){return YI(e)?w_(e):wf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this._=void 0}}function w2(t,e,n){return t instanceof nu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&mf(i)&&(i=gf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof qo?T_(t,e):t instanceof Ho?S_(t,e):function(s,i){const o=E_(s,i),l=Ag(o)+Ag(s.Pe);return qd(o)&&qd(s.Pe)?w_(l):wf(s.serializer,l)}(t,e)}function E2(t,e,n){return t instanceof qo?T_(t,e):t instanceof Ho?S_(t,e):n}function E_(t,e){return t instanceof ru?function(r){return qd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nu extends ku{}class qo extends ku{constructor(e){super(),this.elements=e}}function T_(t,e){const n=I_(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ho extends ku{constructor(e){super(),this.elements=e}}function S_(t,e){let n=I_(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class ru extends ku{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ag(t){return Oe(t.integerValue||t.doubleValue)}function I_(t){return yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function T2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qo&&s instanceof qo||r instanceof Ho&&s instanceof Ho?ri(r.elements,s.elements,jn):r instanceof ru&&s instanceof ru?jn(r.Pe,s.Pe):r instanceof nu&&s instanceof nu}(t.transform,e.transform)}class S2{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pu{}function C_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ef(t.key,gn.none()):new na(t.key,t.data,gn.none());{const n=t.data,r=Dt.empty();let s=new ut(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Dr(t.key,r,new qt(s.toArray()),gn.none())}}function I2(t,e,n){t instanceof na?function(s,i,o){const l=s.value.clone(),u=kg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(s,i,o){if(!_l(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=kg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(b_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function co(t,e,n,r){return t instanceof na?function(i,o,l,u){if(!_l(i.precondition,o))return l;const h=i.value.clone(),p=Pg(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(i,o,l,u){if(!_l(i.precondition,o))return l;const h=Pg(i.fieldTransforms,u,o),p=o.data;return p.setAll(b_(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return _l(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function C2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=E_(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function Rg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ri(r,s,(i,o)=>T2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class na extends Pu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dr extends Pu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function b_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kg(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,E2(o,l,n[s]))}return r}function Pg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,w2(i,o,e))}return r}class Ef extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b2 extends Pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&I2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=x_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=C_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ri(this.mutations,e.mutations,(n,r)=>Rg(n,r))&&ri(this.baseMutations,e.baseMutations,(n,r)=>Rg(n,r))}}class Tf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return g2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Tf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,le;function k2(t){switch(t){default:return Z();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function N_(t){if(t===void 0)return Gn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Be.OK:return O.OK;case Be.CANCELLED:return O.CANCELLED;case Be.UNKNOWN:return O.UNKNOWN;case Be.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Be.INTERNAL:return O.INTERNAL;case Be.UNAVAILABLE:return O.UNAVAILABLE;case Be.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Be.NOT_FOUND:return O.NOT_FOUND;case Be.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Be.ABORTED:return O.ABORTED;case Be.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Be.DATA_LOSS:return O.DATA_LOSS;default:return Z()}}(le=Be||(Be={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new Zr([4294967295,4294967295],0);function Dg(t){const e=P2().encode(t),n=new Jv;return n.update(e),new Uint8Array(n.digest())}function jg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([s,i],0)]}class Sf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ki(`Invalid padding: ${n}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Zr.fromNumber(r)));return s.compare(D2)===1&&(s=new Zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Dg(e),[r,s]=jg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Sf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Dg(e),[r,s]=jg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ra.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Du(ee.min(),s,new Re(me),Yn(),ae())}}class ra{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ra(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class A_{constructor(e,n){this.targetId=e,this.me=n}}class R_{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vg{constructor(){this.fe=0,this.ge=Lg(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new ra(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Lg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class j2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=Mg(),this.Qe=new Re(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Wd(i))if(r===0){const o=new X(i.path);this.Ue(n,o,Et.newNoDocument(o,ee.min()))}else ve(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=os(r).toUint8Array()}catch(u){if(u instanceof a_)return ni("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Sf(o,s,i)}catch(u){return ni(u instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Wd(l.target)){const u=new X(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Et.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Du(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=Mg(),this.Qe=new Re(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Mg(){return new Re(X.comparator)}function Lg(){return new Re(X.comparator)}const V2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L2={and:"AND",or:"OR"};class O2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gd(t,e){return t.useProto3Json||Nu(e)?e:{value:e}}function su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F2(t,e){return su(t,e.toTimestamp())}function Rn(t){return ve(!!t),ee.fromTimestamp(function(n){const r=Nr(n);return new Te(r.seconds,r.nanos)}(t))}function If(t,e){return Yd(t,e).canonicalString()}function Yd(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function P_(t){const e=Se.fromString(t);return ve(L_(e)),e}function Xd(t,e){return If(t.databaseId,e.path)}function jc(t,e){const n=P_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(j_(n))}function D_(t,e){return If(t.databaseId,e)}function z2(t){const e=P_(t);return e.length===4?Se.emptyPath():j_(e)}function Jd(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function j_(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Og(t,e,n){return{name:Xd(t,e),fields:n.value.mapValue.fields}}function U2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(ve(p===void 0||typeof p=="string"),dt.fromBase64String(p||"")):(ve(p===void 0||p instanceof Buffer||p instanceof Uint8Array),dt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?O.UNKNOWN:N_(h.code);return new W(p,h.message||"")}(o);n=new R_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jc(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):ee.min(),l=new Dt({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new xl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jc(t,r.document),i=r.readTime?Rn(r.readTime):ee.min(),o=Et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new xl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jc(t,r.document),i=r.removedTargetIds||[];n=new xl([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new R2(s,i),l=r.targetId;n=new A_(l,o)}}return n}function B2(t,e){let n;if(e instanceof na)n={update:Og(t,e.key,e.value)};else if(e instanceof Ef)n={delete:Xd(t,e.key)};else if(e instanceof Dr)n={update:Og(t,e.key,e.data),updateMask:X2(e.fieldMask)};else{if(!(e instanceof b2))return Z();n={verify:Xd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof nu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ho)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ru)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:F2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function $2(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(ee.min())&&(o=Rn(i)),new S2(o,s.transformResults||[])}(n,e))):[]}function q2(t,e){return{documents:[D_(t,e.path)]}}function H2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D_(t,s);const i=function(h){if(h.length!==0)return M_(_n.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:Ts(v.field),direction:Q2(v.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Gd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function W2(t){let e=z2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const v=V_(g);return v instanceof _n&&d_(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(v=>function(k){return new $o(Ss(k.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(g){let v;return v=typeof g=="object"?g.value:g,Nu(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){const v=!!g.before,S=g.values||[];return new tu(S,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,S=g.values||[];return new tu(S,v)}(n.endAt)),d2(e,s,o,i,l,"F",u,h)}function K2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function V_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ss(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ss(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ss(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ss(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(Ss(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>V_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function Q2(t){return V2[t]}function G2(t){return M2[t]}function Y2(t){return L2[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function Ss(t){return at.fromServerFormat(t.fieldPath)}function M_(t){return t instanceof qe?function(n){if(n.op==="=="){if(Sg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(Tg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(Tg(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:G2(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(s=>M_(s));return r.length===1?r[0]:{compositeFilter:{op:Y2(n.op),filters:r}}}(t):Z()}function X2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function L_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.ct=e}}function Z2(t){const e=W2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.un=new tC}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(br.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(br.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class tC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ut(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ut(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new oi(0)}static kn(){return new oi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.changes=new vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&co(r.mutation,s,qt.empty(),Te.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Wi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Yn();const o=uo(),l=function(){return uo()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Dr)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),co(p.mutation,h,p.mutation.getFieldMask(),Te.now())):o.set(h.key,qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return l.set(h,new rC(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=uo();let s=new Re((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||qt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const g=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,g=x_();p.forEach(v=>{if(!i.has(v)){const S=C_(n.get(v),r.get(v));S!==null&&g.set(v,S),i=i.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Yr());let l=-1,u=i;return o.next(h=>F.forEach(h,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ae())).next(p=>({batchId:l,changes:__(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Wi();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const h=function(g,v){return new yi(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Et.newInvalidDocument(p)))});let l=Wi();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&co(p.mutation,h,qt.empty(),Te.now()),Ru(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Z2(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.overlays=new Re(X.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Yr(),i=n.length+1,o=new X(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Yr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Yr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new A2(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this.Tr=new ut(Ye.Er),this.dr=new ut(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ye(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Se([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Se([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(Ye.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new N2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(me);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new X(i),0);let l=new ut(me);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ye(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.Mr=e,this.docs=function(){return new Re(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,l=new X(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||WI(HI(p),r)<=0||(s.has(p.key)||Ru(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cC(this)}getSize(e){return F.resolve(this.size)}}class cC extends nC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.persistence=e,this.Nr=new vi(n=>vf(n),_f),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cf,this.targetCount=0,this.kr=oi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new oi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pf(0),this.Kr=!1,this.Kr=!0,this.$r=new aC,this.referenceDelegate=e(this),this.Ur=new dC(this),this.indexManager=new eC,this.remoteDocumentCache=function(s){return new uC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new J2(n),this.Gr=new iC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new lC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new fC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class fC extends QI{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.Jr=new Cf,this.Yr=null}static Zr(e){return new bf(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Nf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _S()?8:GI(yS())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new pC;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Fi()<=de.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Fi()<=de.DEBUG&&G("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Fi()<=de.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):F.resolve())}Yi(e,n){if(Ng(n))return F.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qd(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Qd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return Ng(n)||s.isEqual(ee.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Fi()<=de.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Es(n)),this.rs(e,o,n,qI(s,-1)).next(l=>l))})}ts(e,n){let r=new ut(y_(e));return n.forEach((s,i)=>{Ru(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Fi()<=de.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Ji.getDocumentsMatchingQuery(e,n,br.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Re(me),this._s=new vi(i=>vf(i),_f),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function yC(t,e,n,r){return new gC(t,e,n,r)}async function O_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ae();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function vC(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const g=h.batch,v=g.keys();let S=F.resolve();return v.forEach(k=>{S=S.next(()=>p.getEntry(u,k)).next(N=>{const A=h.docVersions.get(k);ve(A!==null),N.version.compareTo(A)<0&&(g.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ae();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function F_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _C(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,g)=>{const v=s.get(g);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,g)));let S=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(dt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(g,S),function(N,A,E){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(v,S,p)&&l.push(n.Ur.updateTargetData(i,S))});let u=Yn(),h=ae();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(xC(i,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(ee.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function xC(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function wC(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EC(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zd(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ta(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Fg(t,e,n){const r=te(t);let s=ee.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const g=te(u),v=g._s.get(p);return v!==void 0?F.resolve(g.os.get(v)):g.Ur.getTargetData(h,p)}(r,o,An(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ae())).next(l=>(TC(r,f2(e),l),{documents:l,Ts:i})))}function TC(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class zg{constructor(){this.activeTargetIds=_2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SC{constructor(){this.so=new zg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja=null;function Vc(){return Ja===null?Ja=function(){return 268435456+Math.round(2147483648*Math.random())}():Ja++,"0x"+Ja.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class NC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Vc(),u=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(p=>(G("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ni("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=CC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Vc();return new Promise((o,l)=>{const u=new Zv;u.setWithCredentials(!0),u.listenOnce(e_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case yl.NO_ERROR:const p=u.getResponseJson();G(_t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case yl.TIMEOUT:G(_t,`RPC '${e}' ${i} timed out`),l(new W(O.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:const g=u.getStatus();if(G(_t,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const k=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(E)>=0?E:O.UNKNOWN}(S.status);l(new W(k,S.message))}else l(new W(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(O.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{G(_t,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);G(_t,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Vc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=r_(),l=n_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");G(_t,`Creating RPC '${e}' stream ${s}: ${p}`,u);const g=o.createWebChannel(p,u);let v=!1,S=!1;const k=new bC({Io:A=>{S?G(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(v||(G(_t,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),G(_t,`RPC '${e}' stream ${s} sending:`,A),g.send(A))},To:()=>g.close()}),N=(A,E,T)=>{A.listen(E,I=>{try{T(I)}catch(D){setTimeout(()=>{throw D},0)}})};return N(g,Hi.EventType.OPEN,()=>{S||(G(_t,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),N(g,Hi.EventType.CLOSE,()=>{S||(S=!0,G(_t,`RPC '${e}' stream ${s} transport closed`),k.So())}),N(g,Hi.EventType.ERROR,A=>{S||(S=!0,ni(_t,`RPC '${e}' stream ${s} transport errored:`,A),k.So(new W(O.UNAVAILABLE,"The operation could not be completed")))}),N(g,Hi.EventType.MESSAGE,A=>{var E;if(!S){const T=A.data[0];ve(!!T);const I=T,D=I.error||((E=I[0])===null||E===void 0?void 0:E.error);if(D){G(_t,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let V=function(y){const x=Be[y];if(x!==void 0)return N_(x)}(L),w=D.message;V===void 0&&(V=O.INTERNAL,w="Unknown error status: "+L+" with message "+D.message),S=!0,k.So(new W(V,w)),g.close()}else G(_t,`RPC '${e}' stream ${s} received:`,T),k.bo(T)}}),N(l,t_.STAT_EVENT,A=>{A.stat===Bd.PROXY?G(_t,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Bd.NOPROXY&&G(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function Mc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){return new O2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new z_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AC extends U_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=U2(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Rn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Jd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Wd(u)?{documents:q2(i,u)}:{query:H2(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=k_(i,o.resumeToken);const h=Gd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=su(i,o.snapshotVersion.toTimestamp());const h=Gd(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=K2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Jd(this.serializer),n.removeTarget=e,this.a_(n)}}class RC extends U_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$2(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Jd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>B2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Yd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Yd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class PC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gn(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{hs(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=te(u);h.L_.add(4),await sa(h),h.q_.set("Unknown"),h.L_.delete(4),await Vu(h)}(this))})}),this.q_=new PC(r,s)}}async function Vu(t){if(hs(t))for(const e of t.B_)await e(!0)}async function sa(t){for(const e of t.B_)await e(!1)}function B_(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pf(n)?kf(n):_i(n).r_()&&Rf(n,e))}function Af(t,e){const n=te(t),r=_i(n);n.N_.delete(e),r.r_()&&$_(n,e),n.N_.size===0&&(r.r_()?r.o_():hs(n)&&n.q_.set("Unknown"))}function Rf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_i(t).A_(e)}function $_(t,e){t.Q_.xe(e),_i(t).R_(e)}function kf(t){t.Q_=new j2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_i(t).start(),t.q_.v_()}function Pf(t){return hs(t)&&!_i(t).n_()&&t.N_.size>0}function hs(t){return te(t).L_.size===0}function q_(t){t.Q_=void 0}async function jC(t){t.q_.set("Online")}async function VC(t){t.N_.forEach((e,n)=>{Rf(t,e)})}async function MC(t,e){q_(t),Pf(t)?(t.q_.M_(e),kf(t)):t.q_.set("Unknown")}async function LC(t,e,n){if(t.q_.set("Online"),e instanceof R_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await iu(t,r)}else if(e instanceof xl?t.Q_.Ke(e):e instanceof A_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await F_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(dt.EMPTY_BYTE_STRING,p.snapshotVersion)),$_(i,u);const g=new hr(p.target,u,h,p.sequenceNumber);Rf(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await iu(t,r)}}async function iu(t,e,n){if(!ta(e))throw e;t.L_.add(1),await sa(t),t.q_.set("Offline"),n||(n=()=>F_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vu(t)})}function H_(t,e){return e().catch(n=>iu(t,n,e))}async function Mu(t){const e=te(t),n=Ar(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;OC(e);)try{const s=await wC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,FC(e,s)}catch(s){await iu(e,s)}W_(e)&&K_(e)}function OC(t){return hs(t)&&t.O_.length<10}function FC(t,e){t.O_.push(e);const n=Ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function W_(t){return hs(t)&&!Ar(t).n_()&&t.O_.length>0}function K_(t){Ar(t).start()}async function zC(t){Ar(t).p_()}async function UC(t){const e=Ar(t);for(const n of t.O_)e.m_(n.mutations)}async function BC(t,e,n){const r=t.O_.shift(),s=Tf.from(r,e,n);await H_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mu(t)}async function $C(t,e){e&&Ar(t).V_&&await async function(r,s){if(function(o){return k2(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();Ar(r).s_(),await H_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mu(r)}}(t,e),W_(t)&&K_(t)}async function Bg(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=hs(n);n.L_.add(3),await sa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vu(n)}async function qC(t,e){const n=te(t);e?(n.L_.delete(2),await Vu(n)):e||(n.L_.add(2),await sa(n),n.q_.set("Unknown"))}function _i(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new AC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:jC.bind(null,t),Ro:VC.bind(null,t),mo:MC.bind(null,t),d_:LC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Pf(t)?kf(t):t.q_.set("Unknown")):(await t.K_.stop(),q_(t))})),t.K_}function Ar(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new RC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zC.bind(null,t),mo:$C.bind(null,t),f_:UC.bind(null,t),g_:BC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Mu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Df(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jf(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),ta(t))return new W(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Wi(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.W_=new Re(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ai{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ai(e,n,Ws.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WC{constructor(){this.queries=qg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=qg(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new W(O.ABORTED,"Firestore shutting down"))}}function qg(){return new vi(t=>g_(t),Au)}async function Q_(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new HC,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=jf(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Vf(n)}async function G_(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KC(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Vf(n)}function QC(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Vf(t){t.Y_.forEach(e=>{e.next()})}var eh,Hg;(Hg=eh||(eh={})).ea="default",Hg.Cache="cache";class Y_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ai(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ai.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.key=e}}class J_{constructor(e){this.key=e}}class GC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=y_(e),this.Ra=new Ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new $g,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const v=s.get(p),S=Ru(this.query,g)?g:null,k=!!v&&this.mutatedKeys.has(v.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let A=!1;v&&S?v.data.isEqual(S.data)?k!==N&&(r.track({type:3,doc:S}),A=!0):this.ga(v,S)||(r.track({type:2,doc:S}),A=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(l=!0)):!v&&S?(r.track({type:0,doc:S}),A=!0):v&&!S&&(r.track({type:1,doc:v}),A=!0,(u||h)&&(l=!0)),A&&(S?(o=o.add(S),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(S,k){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return N(S)-N(k)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new ai(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $g,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new J_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new X_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ai.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class YC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XC{constructor(e){this.key=e,this.va=!1}}class JC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vi(l=>g_(l),Au),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(X.comparator),this.Na=new Map,this.La=new Cf,this.Ba={},this.ka=new Map,this.qa=oi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ZC(t,e,n=!0){const r=sx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Z_(r,e,n,!0),s}async function eb(t,e){const n=sx(t);await Z_(n,e,!0,!1)}async function Z_(t,e,n,r){const s=await EC(t.localStore,An(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await tb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&B_(t.remoteStore,s),l}async function tb(t,e,n,r,s){t.Ka=(g,v,S)=>async function(N,A,E,T){let I=A.view.ma(E);I.ns&&(I=await Fg(N.localStore,A.query,!1).then(({documents:w})=>A.view.ma(w,I)));const D=T&&T.targetChanges.get(A.targetId),L=T&&T.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(I,N.isPrimaryClient,D,L);return Kg(N,A.targetId,V.wa),V.snapshot}(t,g,v,S);const i=await Fg(t.localStore,e,!0),o=new GC(e,i.Ts),l=o.ma(i.documents),u=ra.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);Kg(t,n,h.wa);const p=new YC(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function nb(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Au(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Af(r.remoteStore,s.targetId),th(r,s.targetId)}).catch(ea)):(th(r,s.targetId),await Zd(r.localStore,s.targetId,!0))}async function rb(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Af(n.remoteStore,r.targetId))}async function sb(t,e,n){const r=db(t);try{const s=await function(o,l){const u=te(o),h=Te.now(),p=l.reduce((S,k)=>S.add(k.key),ae());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let k=Yn(),N=ae();return u.cs.getEntries(S,p).next(A=>{k=A,k.forEach((E,T)=>{T.isValidDocument()||(N=N.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,k)).next(A=>{g=A;const E=[];for(const T of l){const I=C2(T,g.get(T.key).overlayedDocument);I!=null&&E.push(new Dr(T.key,I,l_(I.value.mapValue),gn.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,E,l)}).next(A=>{v=A;const E=A.applyToLocalDocumentSet(g,N);return u.documentOverlayCache.saveOverlays(S,A.batchId,E)})}).then(()=>({batchId:v.batchId,changes:__(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Re(me)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await ia(r,s.changes),await Mu(r.remoteStore)}catch(s){const i=jf(s,"Failed to persist write");n.reject(i)}}async function ex(t,e){const n=te(t);try{const r=await _C(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ve(o.va):s.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await ia(n,r,e)}catch(r){await ea(r)}}function Wg(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let h=!1;u.queries.forEach((p,g)=>{for(const v of g.j_)v.Z_(l)&&(h=!0)}),h&&Vf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ib(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Re(X.comparator);o=o.insert(i,Et.newNoDocument(i,ee.min()));const l=ae().add(i),u=new Du(ee.min(),new Map,new Re(me),o,l);await ex(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Mf(r)}else await Zd(r.localStore,e,!1).then(()=>th(r,e,n)).catch(ea)}async function ob(t,e){const n=te(t),r=e.batch.batchId;try{const s=await vC(n.localStore,e);nx(n,r,null),tx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ia(n,s)}catch(s){await ea(s)}}async function ab(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ve(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);nx(r,e,n),tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ia(r,s)}catch(s){await ea(s)}}function tx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nx(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function th(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||rx(t,r)})}function rx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Af(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mf(t))}function Kg(t,e,n){for(const r of n)r instanceof X_?(t.La.addReference(r.key,e),lb(t,r)):r instanceof J_?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||rx(t,r.key)):Z()}function lb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Mf(t))}function Mf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new XC(n)),t.Oa=t.Oa.insert(n,r),B_(t.remoteStore,new hr(An(xf(n.path)),r,"TargetPurposeLimboResolution",pf.oe))}}async function ia(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=Nf.Wi(u.targetId,h);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const p=te(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(h,v=>F.forEach(v.$i,S=>p.persistence.referenceDelegate.addReference(g,v.targetId,S)).next(()=>F.forEach(v.Ui,S=>p.persistence.referenceDelegate.removeReference(g,v.targetId,S)))))}catch(g){if(!ta(g))throw g;G("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const S=p.os.get(v),k=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(k);p.os=p.os.insert(v,N)}}}(r.localStore,i))}async function ub(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await O_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new W(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ia(n,r.hs)}}function cb(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function sx(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ib.bind(null,e),e.Ca.d_=KC.bind(null,e.eventManager),e.Ca.$a=QC.bind(null,e.eventManager),e}function db(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ob.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ab.bind(null,e),e}class ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ju(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return yC(this.persistence,new mC,e.initialUser,this.serializer)}Ga(e){return new hC(bf.Zr,this.serializer)}Wa(e){return new SC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ou.provider={build:()=>new ou};class nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ub.bind(null,this.syncEngine),await qC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WC}()}createDatastore(e){const n=ju(e.databaseInfo.databaseId),r=function(i){return new NC(i)}(e.databaseInfo);return function(i,o,l,u){return new kC(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new DC(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wg(this.syncEngine,n,0),function(){return Ug.D()?new Ug:new IC}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,p){const g=new JC(s,i,o,l,u,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await sa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nh.provider={build:()=>new nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=xt.UNAUTHENTICATED,this.clientId=i_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await O_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fb(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Bg(e.remoteStore,s)),t._onlineComponents=e}async function fb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ni("Error using user provided cache. Falling back to memory cache: "+n),await Lc(t,new ou)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Lc(t,new ou);return t._offlineComponents}async function ox(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await Qg(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await Qg(t,new nh))),t._onlineComponents}function pb(t){return ox(t).then(e=>e.syncEngine)}async function rh(t){const e=await ox(t),n=e.eventManager;return n.onListen=ZC.bind(null,e.syncEngine),n.onUnlisten=nb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rb.bind(null,e.syncEngine),n}function mb(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const p=new ix({next:v=>{p.Za(),o.enqueueAndForget(()=>G_(i,g)),v.fromCache&&u.source==="server"?h.reject(new W(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new Y_(l,p,{includeMetadataChanges:!0,_a:!0});return Q_(i,g)}(await rh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t,e,n){if(!n)throw new W(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gb(t,e,n,r){if(e===!0&&r===!0)throw new W(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yg(t){if(!X.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xg(t){if(X.isDocumentKey(t))throw new W(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lu(t);throw new W(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VI;switch(r.type){case"firstParty":return new FI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gg.get(n);r&&(G("ComponentProvider","Removing Datastore"),Gg.delete(n),r.terminate())}(this),Promise.resolve()}}function yb(t,e,n,r={}){var s;const i=(t=kn(t,Ou))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=xt.MOCK_USER;else{l=gS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new W(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new xt(h)}t._authCredentials=new MI(new s_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class Sr extends jr{constructor(e,n,r){super(e,n,xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new X(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function Xt(t,e,...n){if(t=Dn(t),lx("collection","path",e),t instanceof Ou){const r=Se.fromString(e,...n);return Xg(r),new Sr(t,null,r)}{if(!(t instanceof Ot||t instanceof Sr))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Xg(r),new Sr(t.firestore,null,r)}}function Sn(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=i_.newId()),lx("doc","path",e),t instanceof Ou){const r=Se.fromString(e,...n);return Yg(r),new Ot(t,null,new X(r))}{if(!(t instanceof Ot||t instanceof Sr))throw new W(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Yg(r),new Ot(t.firestore,t instanceof Sr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new z_(this,"async_queue_retry"),this.Vu=()=>{const r=Mc();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Mc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Mc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ta(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Df.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ey(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ls extends Ou{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zg(e),this._firestoreClient=void 0,await e}}}function vb(t,e){const n=typeof t=="object"?t:II(),r=typeof t=="string"?t:"(default)",s=wI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=pS("firestore");i&&yb(s,...i)}return s}function Lf(t){if(t._terminated)throw new W(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_b(t),t._firestoreClient}function _b(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,p){return new JI(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,ax(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new hb(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(dt.fromBase64String(e))}catch(n){throw new W(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new li(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=/^__.*__$/;class wb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new na(e,this.data,n,this.fieldTransforms)}}class ux{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Uf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Uf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return au(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cx(this.Cu)&&xb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Eb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ju(e)}Qu(e,n,r,s=!1){return new Uf({Cu:e,methodName:n,qu:r,path:at.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bf(t){const e=t._freezeSettings(),n=ju(t._databaseId);return new Eb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tb(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);$f("Data must be an object, but it was:",o,r);const l=dx(r,o);let u,h;if(i.merge)u=new qt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const v=sh(e,g,n);if(!o.contains(v))throw new W(O.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);fx(p,v)||p.push(v)}u=new qt(p),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new wb(new Dt(l),u,h)}class zu extends Of{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zu}}function Sb(t,e,n,r){const s=t.Qu(1,e,n);$f("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();ds(r,(u,h)=>{const p=qf(e,u,n);h=Dn(h);const g=s.Nu(p);if(h instanceof zu)i.push(p);else{const v=oa(h,g);v!=null&&(i.push(p),o.set(p,v))}});const l=new qt(i);return new ux(o,l,s.fieldTransforms)}function Ib(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[sh(e,r,n)],u=[s];if(i.length%2!=0)throw new W(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(sh(e,i[v])),u.push(i[v+1]);const h=[],p=Dt.empty();for(let v=l.length-1;v>=0;--v)if(!fx(h,l[v])){const S=l[v];let k=u[v];k=Dn(k);const N=o.Nu(S);if(k instanceof zu)h.push(S);else{const A=oa(k,N);A!=null&&(h.push(S),p.set(S,A))}}const g=new qt(h);return new ux(p,g,o.fieldTransforms)}function Cb(t,e,n,r=!1){return oa(n,t.Qu(r?4:3,e))}function oa(t,e){if(hx(t=Dn(t)))return $f("Unsupported field value:",e,t),dx(t,e);if(t instanceof Of)return function(r,s){if(!cx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=oa(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return x2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Te.fromDate(r);return{timestampValue:su(s.serializer,i)}}if(r instanceof Te){const i=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:su(s.serializer,i)}}if(r instanceof Ff)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:k_(s.serializer,r._byteString)};if(r instanceof Ot){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:If(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof zf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return wf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Lu(r)}`)}(t,e)}function dx(t,e){const n={};return o_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,s)=>{const i=oa(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof Ff||t instanceof li||t instanceof Ot||t instanceof Of||t instanceof zf)}function $f(t,e,n){if(!hx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Lu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sh(t,e,n){if((e=Dn(e))instanceof Fu)return e._internalPath;if(typeof e=="string")return qf(t,e);throw au("Field path arguments must be of type string or ",t,!1,void 0,n)}const bb=new RegExp("[~\\*/\\[\\]]");function qf(t,e,n){if(e.search(bb)>=0)throw au(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fu(...e.split("."))._internalPath}catch{throw au(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function au(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(O.INVALID_ARGUMENT,l+t+u)}function fx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Nb extends px{data(){return super.data()}}function Hf(t,e){return typeof e=="string"?qf(t,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wf{}class gx extends Wf{}function sr(t,e,...n){let r=[];e instanceof Wf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Qf).length,l=i.filter(u=>u instanceof Kf).length;if(o>1||o>0&&l>0)throw new W(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kf extends gx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kf(e,n,r)}_apply(e){const n=this._parse(e);return yx(e._query,n),new jr(e.firestore,e.converter,Kd(e._query,n))}_parse(e){const n=Bf(e.firestore);return function(i,o,l,u,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new W(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ny(g,p);const S=[];for(const k of g)S.push(ty(u,i,k));v={arrayValue:{values:S}}}else v=ty(u,i,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ny(g,p),v=Cb(l,o,g,p==="in"||p==="not-in");return qe.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Qf extends Wf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)yx(o,u),o=Kd(o,u)}(e._query,n),new jr(e.firestore,e.converter,Kd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gf extends gx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $o(i,o)}(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new yi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Za(t,e="asc"){const n=e,r=Hf("orderBy",t);return Gf._create(r,n)}function ty(t,e,n){if(typeof(n=Dn(n))=="string"){if(n==="")throw new W(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m_(e)&&n.indexOf("/")!==-1)throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!X.isDocumentKey(r))throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eg(t,new X(r))}if(n instanceof Ot)return Eg(t,n._key);throw new W(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lu(n)}.`)}function ny(t,e){if(!Array.isArray(t)||t.length===0)throw new W(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ab{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ds(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new zf(i)}convertGeoPoint(e){return new Ff(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zo(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);ve(L_(r));const s=new Uo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vx extends px{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wl extends vx{data(e={}){return super.data(e)}}class _x{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wl(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new wl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Qi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new wl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Qi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:kb(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class Yf extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function el(t){t=kn(t,jr);const e=kn(t.firestore,ls),n=Lf(e),r=new Yf(e);return mx(t._query),mb(n,t._query).then(s=>new _x(e,r,t,s))}function zi(t,e,n,...r){t=kn(t,Ot);const s=kn(t.firestore,ls),i=Bf(s);let o;return o=typeof(e=Dn(e))=="string"||e instanceof Fu?Ib(i,"updateDoc",t._key,e,n,r):Sb(i,"updateDoc",t._key,e),Xf(s,[o.toMutation(t._key,gn.exists(!0))])}function tl(t){return Xf(kn(t.firestore,ls),[new Ef(t._key,gn.none())])}function nl(t,e){const n=kn(t.firestore,ls),r=Sn(t),s=Rb(t.converter,e);return Xf(n,[Tb(Bf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,gn.exists(!1))]).then(()=>r)}function rl(t,...e){var n,r,s;t=Dn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ey(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ey(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(s=g.complete)===null||s===void 0?void 0:s.bind(g)}let u,h,p;if(t instanceof Ot)h=kn(t.firestore,ls),p=xf(t._key.path),u={next:g=>{e[o]&&e[o](Pb(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=kn(t,jr);h=kn(g.firestore,ls),p=g._query;const v=new Yf(h);u={next:S=>{e[o]&&e[o](new _x(h,v,g,S))},error:e[o+1],complete:e[o+2]},mx(t._query)}return function(v,S,k,N){const A=new ix(N),E=new Y_(S,A,k);return v.asyncQueue.enqueueAndForget(async()=>Q_(await rh(v),E)),()=>{A.Za(),v.asyncQueue.enqueueAndForget(async()=>G_(await rh(v),E))}}(Lf(h),p,l,u)}function Xf(t,e){return function(r,s){const i=new Tr;return r.asyncQueue.enqueueAndForget(async()=>sb(await pb(r),s,i)),i.promise}(Lf(t),e)}function Pb(t,e,n){const r=n.docs.get(e._key),s=new Yf(t);return new vx(t,s,e._key,r,new Qi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){gi=s})(SI),Zl(new Lo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ls(new LI(r.getProvider("auth-internal")),new UI(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Hs(yg,"4.7.3",e),Hs(yg,"4.7.3","esm2017")})();var Db="firebase",jb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(Db,jb,"app");const Vb={apiKey:"AIzaSyCkgUUr8CADydWb62Qdb8p8MHZ_TUkrCzE",authDomain:"sportsbox-result.firebaseapp.com",projectId:"sportsbox-result",storageBucket:"sportsbox-result.appspot.com",messagingSenderId:"1098188923070",appId:"1:1098188923070:web:b021c52a64965bf79dbeef",measurementId:"G-DR5V9BNFZ2"},Mb=Gv(Vb),Le=vb(Mb),We={async getDemands(){try{const t=sr(Xt(Le,"demands"),Za("createdAt","desc"));return(await el(t)).docs.map(n=>{var r,s;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("수요처 데이터 로드 실패:",t),t}},async addDemand(t){try{const e=Te.now(),n={...t,email:t.email||"",createdAt:e,updatedAt:e};return{id:(await nl(Xt(Le,"demands"),n)).id,...t,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("수요처 추가 실패:",e),e}},async updateDemand(t,e){try{const n=Sn(Le,"demands",t);await zi(n,{...e,updatedAt:Te.now()})}catch(n){throw console.error("수요처 수정 실패:",n),n}},async deleteDemand(t){try{await tl(Sn(Le,"demands",t))}catch(e){throw console.error("수요처 삭제 실패:",e),e}},async getPerformances(){try{const t=sr(Xt(Le,"performances"),Za("date","desc"));return(await el(t)).docs.map(n=>{var r,s,i;return{id:n.id,...n.data(),date:((r=n.data().date)==null?void 0:r.toDate())||new Date,createdAt:((s=n.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((i=n.data().updatedAt)==null?void 0:i.toDate())||new Date}})}catch(t){throw console.error("실적 데이터 로드 실패:",t),t}},async addPerformance(t){try{const e=Te.now(),n=t.notes!==void 0&&t.notes!==null?t.notes.toString().trim():"";return{id:(await nl(Xt(Le,"performances"),{...t,notes:n,date:Te.fromDate(t.date),createdAt:e,updatedAt:e})).id,...t,notes:n,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("실적 추가 실패:",e),e}},async updatePerformance(t,e){try{const n=Sn(Le,"performances",t),r=e.notes!==void 0&&e.notes!==null?e.notes.toString().trim():void 0,s={...e,updatedAt:Te.now()};r!==void 0&&(s.notes=r),e.date&&(s.date=Te.fromDate(e.date)),await zi(n,s)}catch(n){throw console.error("실적 수정 실패:",n),n}},async deletePerformance(t){try{await tl(Sn(Le,"performances",t))}catch(e){throw console.error("실적 삭제 실패:",e),e}},subscribeToDemands(t){const e=sr(Xt(Le,"demands"),Za("createdAt","desc"));return rl(e,n=>{const r=n.docs.map(s=>{var i,o;return{id:s.id,...s.data(),createdAt:((i=s.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=s.data().updatedAt)==null?void 0:o.toDate())||new Date}});t(r)})},subscribeToPerformances(t){const e=sr(Xt(Le,"performances"),Za("date","desc"));return rl(e,n=>{const r=n.docs.map(s=>{var i,o,l;return{id:s.id,...s.data(),date:((i=s.data().date)==null?void 0:i.toDate())||new Date,createdAt:((o=s.data().createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((l=s.data().updatedAt)==null?void 0:l.toDate())||new Date}});t(r)})},async getBudgets(){try{const t=sr(Xt(Le,"budgets"));return(await el(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 항목 데이터 로드 실패:",t),t}},async addBudget(t){try{return{id:(await nl(Xt(Le,"budgets"),t)).id,...t}}catch(e){throw console.error("예산 항목 추가 실패:",e),e}},async updateBudget(t,e){try{const n=Sn(Le,"budgets",t);await zi(n,e)}catch(n){throw console.error("예산 항목 수정 실패:",n),n}},async deleteBudget(t){try{await tl(Sn(Le,"budgets",t))}catch(e){throw console.error("예산 항목 삭제 실패:",e),e}},async updateBudgetOrder(t){const e=[];for(const n of t){const r=Sn(Le,"budgets",n.id);e.push(zi(r,{order:n.order??0}))}await Promise.all(e)},subscribeToBudgets(t){const e=sr(Xt(Le,"budgets"));return rl(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async getBudgetUsages(){try{const t=sr(Xt(Le,"budgetUsages"));return(await el(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 사용 내역 데이터 로드 실패:",t),t}},async addBudgetUsage(t){try{return{id:(await nl(Xt(Le,"budgetUsages"),t)).id,...t}}catch(e){throw console.error("예산 사용 내역 추가 실패:",e),e}},async updateBudgetUsage(t,e){try{const n=Sn(Le,"budgetUsages",t);await zi(n,e)}catch(n){throw console.error("예산 사용 내역 수정 실패:",n),n}},async deleteBudgetUsage(t){try{await tl(Sn(Le,"budgetUsages",t))}catch(e){throw console.error("예산 사용 내역 삭제 실패:",e),e}},subscribeToBudgetUsages(t){const e=sr(Xt(Le,"budgetUsages"));return rl(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})}},xi=()=>{const[t,e]=P.useState([]),[n,r]=P.useState([]),[s,i]=P.useState(!0),[o,l]=P.useState(null);return P.useEffect(()=>{let u=null,h=null;return(async()=>{try{i(!0),l(null),u=We.subscribeToDemands(g=>{e(g)}),h=We.subscribeToPerformances(g=>{r(g)}),i(!1)}catch(g){console.error("Firebase 데이터 초기화 실패:",g),l("데이터를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요."),i(!1)}})(),()=>{u&&u(),h&&h()}},[]),{demands:t,performances:n,loading:s,error:o,addDemand:We.addDemand,updateDemand:We.updateDemand,deleteDemand:We.deleteDemand,addPerformance:We.addPerformance,updatePerformance:We.updatePerformance,deletePerformance:We.deletePerformance}},ry=(t,e=[])=>{if(t.length===0)return{totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]};const n=t.reduce((N,A)=>N+(A.maleCount||0),0),r=t.reduce((N,A)=>N+(A.femaleCount||0),0),s=n+r,i=t.reduce((N,A)=>N+(A.promotionCount||0),0),l=new Set(t.map(N=>N.organizationName)).size,u=new Date,h=[];for(let N=11;N>=0;N--){const A=new Date(u.getFullYear(),u.getMonth()-N,1),E=A.toLocaleDateString("ko-KR",{month:"short",year:"2-digit"}),T=t.filter(V=>{if(!V.date)return!1;const w=new Date(V.date);return w.getMonth()===A.getMonth()&&w.getFullYear()===A.getFullYear()}),I=T.reduce((V,w)=>V+(w.maleCount||0),0),D=T.reduce((V,w)=>V+(w.femaleCount||0),0),L=T.reduce((V,w)=>V+(w.promotionCount||0),0);h.push({month:E,male:I,female:D,total:I+D,promotions:L})}const p=new Map;t.forEach(N=>{const A=p.get(N.organizationName)||{total:0,count:0,city:""},E=e.find(T=>T.organizationName===N.organizationName);p.set(N.organizationName,{total:A.total+(N.maleCount||0)+(N.femaleCount||0),count:A.count+1,city:(E==null?void 0:E.city)||A.city||""})});const g=Array.from(p.entries()).map(([N,A])=>({name:N,total:A.total,count:A.count,city:A.city})).sort((N,A)=>A.total-N.total),v=new Map;["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"].forEach(N=>{v.set(N,{total:0,count:0})}),t.forEach(N=>{const A=e.find(E=>E.organizationName===N.organizationName);if(A&&v.has(A.city)){const E=v.get(A.city);v.set(A.city,{total:E.total+(N.maleCount||0)+(N.femaleCount||0),count:E.count+1})}});const k=Array.from(v.entries()).map(([N,A])=>({name:N,total:A.total,count:A.count})).sort((N,A)=>A.total-N.total);return{totalMale:n,totalFemale:r,totalPeople:s,totalPromotions:i,totalOrganizations:l,monthlyData:h,organizationData:g,cityData:k}},sy=()=>{const{demands:t,performances:e}=xi(),[n,r]=P.useState({totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]}),[s,i]=P.useState([]),[o,l]=P.useState([]),[u,h]=P.useState(null),[p,g]=P.useState(""),[v,S]=P.useState(0),k=["과천시","광명시","광주시","군포시","김포시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","여주시","오산시","용인시","의왕시","이천시","평택시","하남시","화성시","양평군"],N=["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"],[A,E]=P.useState("전체"),[T,I]=P.useState(null),[D,L]=P.useState(!1);P.useEffect(()=>{const $=We.subscribeToBudgets(i),J=We.subscribeToBudgetUsages(l);return()=>{$(),J()}},[]);const[V,w]=P.useState({});P.useEffect(()=>{const $=e.filter(re=>!(V.startDate&&new Date(re.date)<V.startDate||V.endDate&&new Date(re.date)>V.endDate));o.filter(re=>!(V.startDate&&new Date(re.date)<V.startDate||V.endDate&&new Date(re.date)>V.endDate));const J=ry($,t);r({...J,totalOrganizations:t.length})},[t,e,V.startDate,V.endDate]);const m=$=>{h($.id),g($.name),S($.amount)},y=async $=>{await We.updateBudget($,{name:p,amount:v}),h(null)},x=async()=>{await We.addBudget({name:"",amount:0})},b=DE(PE(uf)),R=async $=>{const{active:J,over:re}=$;if(J.id!==re.id){const oe=s.findIndex(ne=>ne.id===J.id),et=s.findIndex(ne=>ne.id===re.id),tt=cf(s,oe,et).map((ne,Gt)=>({...ne,order:Gt}));await We.updateBudgetOrder(tt)}},C=o.filter($=>!(V.startDate&&new Date($.date)<V.startDate||V.endDate&&new Date($.date)>V.endDate)),ie=$=>C.filter(J=>J.budgetItemId===$).reduce((J,re)=>J+(Number(re.amount)||0),0),ke=async $=>{await We.deleteBudget($)};P.useEffect(()=>{const $=ry(e,t);r({...$,totalOrganizations:t.length})},[t,e]);const ze=s.reduce(($,J)=>$+(Number(J.amount)||0),0),ue=C.reduce(($,J)=>$+(Number(J.amount)||0),0),B=ze-ue,Q=ze>0?Math.round(ue/ze*1e3)/10:0,K=({title:$,value:J,icon:re,color:oe})=>c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:$}),c.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:J})]}),c.jsx("div",{className:`p-3 rounded-lg ${oe}`,children:c.jsx(re,{className:"w-6 h-6 text-white"})})]})}),fe=({data:$,onBarClick:J})=>{const re=Math.max(...$.map(oe=>oe.total),1);return c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"시/군별 참여 현황"}),c.jsx("div",{className:"flex gap-2 mb-4",children:["전체","남부","북부"].map(oe=>c.jsx("button",{className:`px-4 py-2 rounded-full border font-semibold transition-colors duration-200 ${A===oe?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>E(oe),children:oe},oe))}),$.length>0?c.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-96 overflow-y-auto",children:$.map((oe,et)=>c.jsxs("div",{className:`flex items-center space-x-4 p-3 bg-gray-50 rounded-lg transition cursor-pointer hover:shadow-md ${J?"hover:bg-blue-100":""}`,onClick:J?()=>J(oe.name):void 0,children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 min-w-[70px] text-center",children:oe.name}),c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"bg-gray-200 rounded-full h-6 relative",children:c.jsx("div",{className:"bg-blue-500 h-6 rounded-full transition-all duration-500 ease-out flex items-center justify-end pr-2",style:{width:`${Math.max(oe.total/re*100,8)}%`},title:`${oe.count}회, ${oe.total.toLocaleString()}명`,children:c.jsxs("span",{className:"text-xs text-white font-medium",children:[oe.total.toLocaleString(),"명"]})})})}),c.jsxs("div",{className:"text-sm text-gray-600 font-mono min-w-[50px] text-right",children:[oe.count,"회"]})]},et))}):c.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"데이터가 없습니다"})]})},U=n.cityData.filter($=>A==="전체"?!0:A==="남부"?k.includes($.name):A==="북부"?N.includes($.name):!0),Y=n.organizationData.filter($=>$.city===T);return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"대시보드"}),c.jsx("p",{className:"text-gray-600",children:"수요처 및 실적 현황 개요"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c.jsx(K,{title:"등록 단체수",value:n.totalOrganizations.toString(),icon:Wm,color:"bg-blue-500"}),c.jsx(K,{title:"총 횟수",value:e.length.toString(),icon:Ao,color:"bg-green-500"}),c.jsx(K,{title:"총 참여 인원",value:n.totalPeople.toLocaleString()+"명",icon:ti,color:"bg-purple-500"}),c.jsx(K,{title:"평균 참여 인원",value:e.length>0?Math.round(n.totalPeople/e.length).toLocaleString()+"명":"0명",icon:Rd,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[c.jsx(K,{title:"전체 예산액",value:ze.toLocaleString()+"원",icon:Rd,color:"bg-blue-500"}),c.jsx(K,{title:"전체 사용액",value:ue.toLocaleString()+"원",icon:ti,color:"bg-green-500"}),c.jsx(K,{title:"전체 잔액",value:B.toLocaleString()+"원",icon:Wm,color:"bg-gray-500"}),c.jsx(K,{title:"전체 집행율",value:Q+"%",icon:Ao,color:"bg-orange-500"})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"시작 날짜"}),c.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:V.startDate?V.startDate.toISOString().split("T")[0]:"",onChange:$=>w(J=>({...J,startDate:$.target.value?new Date($.target.value):void 0}))}),c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"종료 날짜"}),c.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:V.endDate?V.endDate.toISOString().split("T")[0]:"",onChange:$=>w(J=>({...J,endDate:$.target.value?new Date($.target.value):void 0}))}),c.jsx("button",{className:"ml-2 px-3 py-1 bg-gray-100 rounded hover:bg-gray-200 text-sm",onClick:()=>w({}),children:"전체 초기화"})]})}),c.jsx("div",{className:"mb-8",children:c.jsx(fe,{data:U,onBarClick:$=>{I($),L(!0)}})}),c.jsx(LT,{sensors:b,collisionDetection:OE,onDragEnd:R,children:c.jsx(YT,{items:s.map($=>$.id),strategy:QT,children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"예산 사용 현황"}),c.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:x,children:"+ 예산 항목 추가"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-2 py-2 text-center"}),c.jsx("th",{className:"px-2 py-2 text-left",children:"예산명"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"예산액"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"사용액"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"잔액"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"집행율(%)"}),c.jsx("th",{className:"px-2 py-2 text-center",children:"수정"}),c.jsx("th",{className:"px-2 py-2 text-center",children:"삭제"})]})}),c.jsx("tbody",{children:s.sort(($,J)=>($.order??0)-(J.order??0)).map($=>c.jsx(Lb,{item:$,editingBudgetId:u,editingBudgetName:p,editingBudgetAmount:v,setEditingBudgetName:g,setEditingBudgetAmount:S,setEditingBudgetId:h,handleEditBudget:m,handleSaveBudget:y,handleDeleteBudget:ke,used:ie($.id),isDragging:!1},$.id))})]})})]})})}),D&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 relative animate-fadeIn",children:[c.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>L(!1),children:"×"}),c.jsxs("h3",{className:"text-2xl font-bold mb-4 text-blue-700",children:[T," 수요처별 참여 현황"]}),Y.length>0?c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsx("th",{className:"px-2 py-2 text-left",children:"수요처명"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"횟수"}),c.jsx("th",{className:"px-2 py-2 text-right",children:"총 참여인원"})]})}),c.jsx("tbody",{children:Y.map(($,J)=>c.jsxs("tr",{className:"hover:bg-blue-50",children:[c.jsx("td",{className:"px-2 py-2 font-medium text-gray-900",children:$.name}),c.jsxs("td",{className:"px-2 py-2 text-right",children:[$.count,"회"]}),c.jsxs("td",{className:"px-2 py-2 text-right",children:[$.total.toLocaleString(),"명"]})]},J))})]}):c.jsx("div",{className:"text-gray-500 text-center py-8",children:"데이터가 없습니다"})]})})]})};function Lb({item:t,editingBudgetId:e,editingBudgetName:n,editingBudgetAmount:r,setEditingBudgetName:s,setEditingBudgetAmount:i,setEditingBudgetId:o,handleEditBudget:l,handleSaveBudget:u,handleDeleteBudget:h,used:p,isDragging:g}){const{attributes:v,listeners:S,setNodeRef:k,transform:N,transition:A,isDragging:E}=rS({id:t.id}),T={transform:Vo.Transform.toString(N),transition:A,background:E?"#e0f2fe":void 0},I=t.amount-p,D=t.amount>0?p/t.amount*100:0;return c.jsxs("tr",{ref:k,style:T,...v,children:[c.jsx("td",{className:"px-2 py-2 text-center cursor-grab",...S,children:c.jsx(mE,{className:"w-4 h-4 text-gray-400"})}),c.jsx("td",{className:"px-2 py-2 flex items-center gap-2",children:e===t.id?c.jsx("input",{className:"border rounded px-2 py-1 w-32",value:n,onChange:L=>s(L.target.value)}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:t.name}),t.region==="남부"&&c.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}),t.region==="북부"&&c.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"})]})}),c.jsx("td",{className:"px-2 py-2 text-right",children:e===t.id?c.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:r,onChange:L=>i(Number(L.target.value))}):t.amount.toLocaleString()}),c.jsx("td",{className:"px-2 py-2 text-right",children:p.toLocaleString()}),c.jsx("td",{className:"px-2 py-2 text-right",children:I.toLocaleString()}),c.jsx("td",{className:"px-2 py-2 text-right",children:D.toFixed(2)}),c.jsx("td",{className:"px-2 py-2 text-center",children:e===t.id?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"px-2 py-1 text-green-600 hover:underline",onClick:()=>u(t.id),children:"저장"}),c.jsx("button",{className:"px-2 py-1 text-gray-500 hover:underline",onClick:()=>o(null),children:"취소"})]}):c.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>l(t),children:"수정"})}),c.jsx("td",{className:"px-2 py-2 text-center",children:c.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>h(t.id),children:c.jsx(Su,{className:"inline w-4 h-4"})})})]})}const Ob=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));i.length>=4&&n.push({city:i[0]||"",organizationName:i[1]||"",contactPerson:i[2]||"",phoneNumber:i[3]||"",email:i[4]||""})}return n},Fb=()=>{const t=`\uFEFF시/군,단체명,담당자명,연락처,이메일
수원시,예시 단체,홍길동,010-1234-5678,hong@example.com
성남시,샘플 그룹,김철수,010-9876-5432,kim@sample.org`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="수요처_등록_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},zb=t=>{let e=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,총인원,홍보횟수,메모
`;t.forEach(i=>{const o=(i.maleCount||0)+(i.femaleCount||0),l=i.date?i.date.toLocaleDateString("ko-KR"):"",u=i.notes||"",h=[l,`"${i.organizationName}"`,`"${i.city||""}"`,`"${i.program||"스포츠교실"}"`,i.maleCount||0,i.femaleCount||0,o,i.promotionCount||0,`"${u.replace(/"/g,'""')}"`].join(",");e+=h+`
`});const n=new Blob([e],{type:"text/csv;charset=utf-8"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`실적_데이터_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)},Ub=()=>{const t=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,홍보횟수,메모
2024-01-15,예시 단체,수원시,스포츠교실,10,15,5,샘플 메모
2024-01-16,샘플 그룹,성남시,스포츠체험존,8,12,3,테스트 데이터
2024-01-17,테스트 단체,안양시,스포츠이벤트,5,10,2,이벤트 데이터`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="실적_업로드_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},Bb=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));if(i.length>=8){const o=i[0];let l;try{o.includes("-")?l=new Date(o):o.includes("/")?l=new Date(o):l=new Date,isNaN(l.getTime())&&(l=new Date)}catch{l=new Date}n.push({date:l,organizationName:i[1]||"",city:i[2]||"",program:i[3]||"스포츠교실",maleCount:parseInt(i[4])||0,femaleCount:parseInt(i[5])||0,promotionCount:parseInt(i[6])||0,notes:i[7]||""})}}return n},aa=()=>{const[t,e]=P.useState([]),n=P.useCallback(s=>{const i=crypto.randomUUID(),o={...s,id:i,duration:s.duration||5e3};e(l=>[...l,o]),setTimeout(()=>{e(l=>l.filter(u=>u.id!==i))},o.duration)},[]),r=P.useCallback(s=>{e(i=>i.filter(o=>o.id!==s))},[]);return{toasts:t,addToast:n,removeToast:r}},$b=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],qb=()=>{const{addToast:t}=aa(),{addDemand:e}=xi(),n=P.useRef(null),[r,s]=P.useState("manual"),[i,o]=P.useState(!1),[l,u]=P.useState(!1),[h,p]=P.useState(!1),[g,v]=P.useState(!1),[S,k]=P.useState({success:0,error:0}),[N,A]=P.useState(!1),[E,T]=P.useState(!1),[I,D]=P.useState({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""}),L=R=>{const{name:C,value:ie}=R.target;D(ke=>({...ke,[C]:ie}))},V=async R=>{if(R.preventDefault(),!I.city||!I.organizationName||!I.contactPerson||!I.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}A(!0);try{await e({city:I.city,organizationName:I.organizationName,contactPerson:I.contactPerson,phoneNumber:I.phoneNumber,email:I.email||""}),u(!0),D({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""})}catch{t({type:"error",title:"등록 실패",message:"수요처 등록 중 오류가 발생했습니다"})}finally{A(!1)}},w=async R=>{T(!0);const C=new FileReader;C.onload=async ie=>{var ke;try{const ze=(ke=ie.target)==null?void 0:ke.result,ue=Ob(ze);if(ue.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let B=0,Q=0;for(const K of ue)try{K.city&&K.organizationName&&K.contactPerson&&K.phoneNumber?(await e(K),B++):Q++}catch{Q++}k({success:B,error:Q}),v(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{T(!1)}},C.readAsText(R,"UTF-8")},m=R=>{R.preventDefault(),o(!1);const C=Array.from(R.dataTransfer.files);C.length>0&&w(C[0])},y=R=>{R.preventDefault(),o(!0)},x=R=>{R.preventDefault(),o(!1)},b=R=>{const C=R.target.files;C&&C.length>0&&w(C[0]),R.target.value=""};return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 등록"}),c.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 수요처를 등록하세요"})]}),c.jsx("div",{className:"border-b border-gray-200 mb-8",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsxs("button",{onClick:()=>s("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(xv,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),c.jsxs("button",{onClick:()=>s("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(Po,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),r==="manual"&&c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsxs("form",{onSubmit:V,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"시/군 *"}),c.jsxs("select",{id:"city",name:"city",value:I.city,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[c.jsx("option",{value:"",children:"시/군을 선택하세요"}),$b.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),c.jsx("input",{type:"text",id:"organizationName",name:"organizationName",value:I.organizationName,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"단체명을 입력하세요",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-gray-700 mb-2",children:"담당자명 *"}),c.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:I.contactPerson,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"담당자명을 입력하세요",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"연락처 *"}),c.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:I.phoneNumber,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"연락처를 입력하세요",required:!0})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일 (선택사항)"}),c.jsx("input",{type:"email",id:"email",name:"email",value:I.email,onChange:L,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"이메일 주소를 입력하세요"})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",disabled:N,children:N?c.jsxs(c.Fragment,{children:[c.jsx(ko,{className:"w-4 h-4 mr-2 animate-spin"}),"등록 중..."]}):"수요처 등록"})})]})}),r==="bulk"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Wl,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),c.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 시/군, 단체명, 담당자명, 연락처, 이메일(선택)"}),c.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[c.jsxs("button",{onClick:Fb,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(ef,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),c.jsxs("button",{onClick:()=>p(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(Zh,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:m,onDragOver:y,onDragLeave:x,children:E?c.jsxs(c.Fragment,{children:[c.jsx(ko,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),c.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Po,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),c.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),c.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),c.jsx("input",{ref:n,type:"file",accept:".csv,.txt",onChange:b,className:"hidden"}),c.jsx("button",{onClick:()=>{var R;return(R=n.current)==null?void 0:R.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ro,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"등록 완료!"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"수요처가 성공적으로 등록되었습니다."}),c.jsx("button",{onClick:()=>u(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),g&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ro,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"업로드 완료!"}),c.jsxs("div",{className:"text-gray-600 mb-6",children:[c.jsx("p",{className:"mb-2",children:"파일 업로드가 완료되었습니다."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{children:"성공:"}),c.jsxs("span",{className:"font-semibold text-green-600",children:[S.success,"건"]})]}),S.error>0&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:"실패:"}),c.jsxs("span",{className:"font-semibold text-red-600",children:[S.error,"건"]})]})]})]}),c.jsx("button",{onClick:()=>v(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"CSV 파일 저장 방법"}),c.jsx("p",{className:"text-gray-600",children:"한글이 깨지지 않게 저장하는 방법을 안내합니다."})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 Microsoft Excel 사용시"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),c.jsxs("li",{children:["데이터 입력 완료 후 ",c.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),c.jsxs("li",{children:["파일 형식에서 ",c.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),c.jsx("li",{children:"파일명 입력 후 저장"}),c.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',c.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 Google Sheets 사용시"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"구글 시트에서 데이터 입력"}),c.jsxs("li",{children:[c.jsx("strong",{children:"파일 → 다운로드 → 쉼표로 구분된 값(.csv, 현재 시트)"})," 선택"]}),c.jsx("li",{children:"다운로드된 파일을 업로드"})]}),c.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:c.jsx("p",{className:"text-sm text-green-800",children:"구글 시트는 자동으로 UTF-8로 저장되어 한글 문제가 없습니다."})})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:()=>p(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},Hb=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],Wb=()=>{const{addToast:t}=aa(),{demands:e,updateDemand:n,deleteDemand:r}=xi(),[s,i]=P.useState(null),[o,l]=P.useState(""),[u,h]=P.useState({}),p=e.filter(A=>A.organizationName.toLowerCase().includes(o.toLowerCase())||A.city.toLowerCase().includes(o.toLowerCase())||A.contactPerson.toLowerCase().includes(o.toLowerCase())),g=A=>{i(A.id),h(A)},v=async()=>{if(!s||!u.city||!u.organizationName||!u.contactPerson||!u.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await n(s,u),i(null),h({}),t({type:"success",title:"수정 완료",message:"수요처 정보가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"수요처 정보 수정 중 오류가 발생했습니다"})}},S=()=>{i(null),h({})},k=async(A,E)=>{if(window.confirm(`"${E}"의 수요처 정보를 삭제하시겠습니까?`))try{await r(A),t({type:"success",title:"삭제 완료",message:"수요처 정보가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"수요처 정보 삭제 중 오류가 발생했습니다"})}},N=(A,E)=>{h(T=>({...T,[A]:E}))};return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 관리"}),c.jsx("p",{className:"text-gray-600",children:"등록된 수요처 정보를 조회, 수정, 삭제할 수 있습니다"})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative max-w-md",children:[c.jsx(wv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"수요처 검색...",value:o,onChange:A=>l(A.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"시/군"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"단체명"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"담당자"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"연락처"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"이메일"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900",children:"등록일"}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"작업"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(A=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsxs("select",{value:u.city||"",onChange:E=>N("city",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"시/군 선택"}),Hb.map(E=>c.jsx("option",{value:E,children:E},E))]}):c.jsx("span",{className:"text-sm text-gray-900",children:A.city})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"text",value:u.organizationName||"",onChange:E=>N("organizationName",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.organizationName})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"text",value:u.contactPerson||"",onChange:E=>N("contactPerson",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-900",children:A.contactPerson})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"tel",value:u.phoneNumber||"",onChange:E=>N("phoneNumber",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-900",children:A.phoneNumber})}),c.jsx("td",{className:"px-6 py-4",children:s===A.id?c.jsx("input",{type:"email",value:u.email||"",onChange:E=>N("email",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-500",children:A.email||"-"})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:"text-sm text-gray-500",children:A.createdAt.toLocaleDateString("ko-KR")})}),c.jsx("td",{className:"px-6 py-4 text-right",children:s===A.id?c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:v,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:c.jsx(ei,{className:"w-4 h-4"})}),c.jsx("button",{onClick:S,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:c.jsx(Do,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:()=>g(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:c.jsx(_v,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>k(A.id,A.organizationName),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:c.jsx(Su,{className:"w-4 h-4"})})]})})]},A.id))})]})}),p.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:"검색 결과가 없습니다"})})]}),c.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["총 ",e.length,"건 중 ",p.length,"건 표시"]})]})},Kb=()=>{const{addToast:t}=aa(),{demands:e,addPerformance:n}=xi(),r=P.useRef(null),[s,i]=P.useState("manual"),[o,l]=P.useState(!1),[u,h]=P.useState(!1),[p,g]=P.useState(!1),[v,S]=P.useState(!1),[k,N]=P.useState({success:0,error:0}),[A,E]=P.useState(""),[T,I]=P.useState(!1),[D,L]=P.useState(!1),[V,w]=P.useState(!1),[m,y]=P.useState({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),x=Array.from(new Set(e.map(U=>U.organizationName))).sort(),b=x.filter(U=>U.toLowerCase().includes(A.toLowerCase())),R=e.find(U=>U.organizationName===m.organizationName),C=(R==null?void 0:R.city)||"",ie=U=>{const{name:Y,value:$}=U.target;y(J=>({...J,[Y]:$}))},ke=()=>{const U=parseInt(m.maleCount)||0,Y=parseInt(m.femaleCount)||0;return U+Y},ze=async U=>{if(U.preventDefault(),!m.date||!m.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const Y=parseInt(m.maleCount)||0,$=parseInt(m.femaleCount)||0,J=parseInt(m.promotionCount)||0;if(Y<0||$<0||J<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}L(!0);try{await n({date:new Date(m.date),organizationName:m.organizationName,city:C,program:m.program,maleCount:Y,femaleCount:$,promotionCount:J,notes:m.notes?m.notes.trim():""}),h(!0),y({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),E(""),I(!1)}catch{t({type:"error",title:"저장 실패",message:"실적 데이터 저장 중 오류가 발생했습니다"})}finally{L(!1)}},ue=async U=>{w(!0);const Y=new FileReader;Y.onload=async $=>{var J;try{const re=(J=$.target)==null?void 0:J.result,oe=Bb(re);if(oe.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let et=0,tt=0;for(const ne of oe)try{ne.date&&ne.organizationName?(await n(ne),et++):tt++}catch{tt++}N({success:et,error:tt}),g(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{w(!1)}},Y.readAsText(U,"UTF-8")},B=U=>{U.preventDefault(),l(!1);const Y=Array.from(U.dataTransfer.files);Y.length>0&&ue(Y[0])},Q=U=>{U.preventDefault(),l(!0)},K=U=>{U.preventDefault(),l(!1)},fe=U=>{const Y=U.target.files;Y&&Y.length>0&&ue(Y[0]),U.target.value=""};return P.useEffect(()=>{const U=Y=>{Y.target.closest(".organization-dropdown")||I(!1)};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[]),c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 입력"}),c.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 실적 데이터를 등록하세요"})]}),c.jsx("div",{className:"border-b border-gray-200 mb-8",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsxs("button",{onClick:()=>i("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(ei,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),c.jsxs("button",{onClick:()=>i("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(Po,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),s==="manual"&&c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsxs("form",{onSubmit:ze,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),c.jsxs("div",{className:"relative",children:[c.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"date",id:"date",name:"date",value:m.date,onChange:ie,className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),c.jsxs("div",{className:"relative organization-dropdown",children:[c.jsx("input",{type:"text",placeholder:"단체명을 검색하세요...",value:A,onChange:U=>{E(U.target.value),I(!0)},onFocus:()=>I(!0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),m.organizationName&&c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c.jsx("button",{type:"button",onClick:()=>{y(U=>({...U,organizationName:""})),E("")},className:"text-gray-400 hover:text-gray-600",children:"×"})}),T&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:b.length>0?b.map(U=>c.jsx("button",{type:"button",onClick:()=>{y(Y=>({...Y,organizationName:U})),E(U),I(!1)},className:"w-full px-4 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none",children:U},U)):c.jsx("div",{className:"px-4 py-2 text-gray-500",children:"검색 결과가 없습니다"})})]}),x.length===0&&c.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"등록된 단체가 없습니다. 먼저 수요처를 등록해주세요."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"program",className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램 *"}),c.jsxs("select",{id:"program",name:"program",value:m.program,onChange:ie,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[c.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),c.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),c.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]}),m.organizationName&&c.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("span",{className:"font-medium",children:"선택된 단체:"})," ",m.organizationName,C&&` (${C})`]})}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[c.jsx(ti,{className:"w-5 h-5 mr-2 text-blue-600"}),"참여 인원"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"maleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"남성 인원"}),c.jsx("input",{type:"number",id:"maleCount",name:"maleCount",value:m.maleCount,onChange:ie,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"femaleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"여성 인원"}),c.jsx("input",{type:"number",id:"femaleCount",name:"femaleCount",value:m.femaleCount,onChange:ie,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"총 인원"}),c.jsxs("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:[ke().toLocaleString(),"명"]})]})]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"promotionCount",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[c.jsx(vv,{className:"w-4 h-4 mr-2 text-orange-500"}),"홍보 횟수"]}),c.jsx("input",{type:"number",id:"promotionCount",name:"promotionCount",value:m.promotionCount,onChange:ie,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"홍보 횟수를 입력하세요"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"메모 (선택사항)"}),c.jsx("textarea",{id:"notes",name:"notes",value:m.notes,onChange:ie,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"추가 메모를 입력하세요..."})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[D?c.jsx(ko,{className:"w-4 h-4 mr-2 animate-spin"}):c.jsx(ei,{className:"w-4 h-4 mr-2"}),"실적 저장"]})})]})}),s==="bulk"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Wl,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),c.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 날짜, 단체명, 시군, 프로그램, 남성, 여성, 홍보횟수, 메모"}),c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"중요:"})," 날짜는 YYYY-MM-DD 형식으로 입력하세요 (예: 2024-01-15)"]})}),c.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[c.jsxs("button",{onClick:Ub,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(ef,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),c.jsxs("button",{onClick:()=>S(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[c.jsx(Zh,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),c.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:c.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:B,onDragOver:Q,onDragLeave:K,children:V?c.jsxs(c.Fragment,{children:[c.jsx(ko,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),c.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Po,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),c.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),c.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),c.jsx("input",{ref:r,type:"file",accept:".csv,.txt",onChange:fe,className:"hidden"}),c.jsx("button",{onClick:()=>{var U;return(U=r.current)==null?void 0:U.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),u&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ro,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"저장 완료!"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"실적 데이터가 성공적으로 저장되었습니다."}),c.jsx("button",{onClick:()=>{h(!1),y({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),E(""),I(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Ro,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"일괄등록 완료!"}),c.jsxs("div",{className:"text-gray-600 mb-6",children:[c.jsx("p",{className:"mb-2",children:"실적 데이터 일괄등록이 완료되었습니다."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{children:"성공:"}),c.jsxs("span",{className:"font-semibold text-green-600",children:[k.success,"건"]})]}),k.error>0&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:"실패:"}),c.jsxs("span",{className:"font-semibold text-red-600",children:[k.error,"건"]})]})]})]}),c.jsx("button",{onClick:()=>g(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),v&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"실적 데이터 저장 방법"}),c.jsx("p",{className:"text-gray-600",children:"실적 데이터를 올바르게 저장하는 방법을 안내합니다."})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 수기 입력 방법"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"날짜를 선택하세요 (필수)"}),c.jsx("li",{children:"단체명을 검색하여 선택하세요 (필수)"}),c.jsx("li",{children:"프로그램 유형을 선택하세요 (스포츠교실/스포츠체험존/스포츠이벤트)"}),c.jsx("li",{children:"남성/여성 인원수를 입력하세요"}),c.jsx("li",{children:"홍보 횟수를 입력하세요 (선택사항)"}),c.jsx("li",{children:"메모를 입력하세요 (선택사항)"}),c.jsx("li",{children:'"실적 저장" 버튼을 클릭하세요'})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 CSV 파일 업로드 방법"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[c.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),c.jsxs("li",{children:["데이터 입력 완료 후 ",c.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),c.jsxs("li",{children:["파일 형식에서 ",c.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),c.jsx("li",{children:"파일명 입력 후 저장"}),c.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',c.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📅 날짜 형식"}),c.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"날짜는 반드시 YYYY-MM-DD 형식으로 입력해야 합니다:"}),c.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700",children:[c.jsx("li",{children:"올바른 형식: 2024-01-15, 2024-12-31"}),c.jsx("li",{children:"잘못된 형식: 2024/01/15, 2024.01.15, 01-15-2024"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"🔧 한글 깨짐 해결방법"}),c.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"파일 업로드 시 한글이 깨지는 경우:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-700",children:[c.jsx("li",{children:"엑셀에서 파일을 다시 열기"}),c.jsx("li",{children:"파일 → 다른 이름으로 저장"}),c.jsx("li",{children:'파일 형식에서 "CSV UTF-8(쉼표로 분리)" 선택'}),c.jsx("li",{children:"새로운 파일로 저장 후 업로드"})]})]})]}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:()=>S(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},Qb=()=>{const{addToast:t}=aa(),{performances:e,demands:n,updatePerformance:r,deletePerformance:s}=xi(),[i,o]=P.useState([]),[l,u]=P.useState(null),[h,p]=P.useState({}),[g,v]=P.useState({}),[S,k]=P.useState(""),N=Array.from(new Set(n.map(y=>y.organizationName))).sort();P.useEffect(()=>{A()},[e,g,S]);const A=()=>{let y=[...e];g.startDate&&(y=y.filter(x=>x.date&&x.date>=g.startDate)),g.endDate&&(y=y.filter(x=>x.date&&x.date<=g.endDate)),g.organizationName&&(y=y.filter(x=>x.organizationName===g.organizationName)),g.program&&(y=y.filter(x=>x.program===g.program)),S&&(y=y.filter(x=>x.organizationName.toLowerCase().includes(S.toLowerCase())||x.notes&&x.notes.toLowerCase().includes(S.toLowerCase()))),y.sort((x,b)=>!x.date&&!b.date?0:x.date?b.date?b.date.getTime()-x.date.getTime():-1:1),o(y)},E=(y,x)=>{v(b=>({...b,[y]:x}))},T=()=>{v({}),k("")},I=y=>{u(y.id),p({...y,date:y.date})},D=async()=>{if(!l||!h.date||!h.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const y=h.maleCount||0,x=h.femaleCount||0,b=h.promotionCount||0;if(y<0||x<0||b<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await r(l,{...h,notes:h.notes?h.notes.trim():""}),u(null),p({}),t({type:"success",title:"수정 완료",message:"실적 데이터가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"실적 데이터 수정 중 오류가 발생했습니다"})}},L=()=>{u(null),p({})},V=async(y,x,b)=>{const R=b?b.toLocaleDateString("ko-KR"):"날짜 없음";if(window.confirm(`"${x}"의 ${R} 실적 데이터를 삭제하시겠습니까?`))try{await s(y),t({type:"success",title:"삭제 완료",message:"실적 데이터가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"실적 데이터 삭제 중 오류가 발생했습니다"})}},w=(y,x)=>{p(b=>({...b,[y]:x}))},m=()=>{if(i.length===0){t({type:"warning",title:"다운로드 불가",message:"다운로드할 데이터가 없습니다"});return}try{zb(i),t({type:"success",title:"다운로드 완료",message:"실적 데이터가 성공적으로 다운로드되었습니다"})}catch{t({type:"error",title:"다운로드 실패",message:"엑셀 파일 다운로드 중 오류가 발생했습니다"})}};return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 조회"}),c.jsx("p",{className:"text-gray-600",children:"등록된 실적 데이터를 조회하고 관리하세요"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[c.jsx(pE,{className:"w-5 h-5 mr-2"}),"필터"]}),c.jsx("button",{onClick:T,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"전체 초기화"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검색"}),c.jsxs("div",{className:"relative",children:[c.jsx(wv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c.jsx("input",{type:"text",placeholder:"검색어 입력...",value:S,onChange:y=>k(y.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 날짜"}),c.jsxs("div",{className:"relative",children:[c.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c.jsx("input",{type:"date",value:g.startDate?g.startDate.toISOString().split("T")[0]:"",onChange:y=>E("startDate",y.target.value?new Date(y.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 날짜"}),c.jsxs("div",{className:"relative",children:[c.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),c.jsx("input",{type:"date",value:g.endDate?g.endDate.toISOString().split("T")[0]:"",onChange:y=>E("endDate",y.target.value?new Date(y.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명"}),c.jsxs("select",{value:g.organizationName||"",onChange:y=>E("organizationName",y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"전체 단체"}),N.map(y=>c.jsx("option",{value:y,children:y},y))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램"}),c.jsxs("select",{value:g.program||"",onChange:y=>E("program",y.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"전체 프로그램"}),c.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),c.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),c.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"text-sm text-gray-500",children:["총 ",e.length,"건 중 ",i.length,"건 표시"]}),c.jsxs("button",{onClick:m,disabled:i.length===0,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[c.jsx(ef,{className:"w-4 h-4 mr-2"}),"엑셀 다운로드"]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-32",children:"날짜"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-48",children:"단체명"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-24",children:"시/군"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-32",children:"프로그램"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"남성"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"여성"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-20",children:"총 인원"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 w-24",children:"홍보횟수"}),c.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 min-w-32",children:"메모"}),c.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-900 w-24",children:"작업"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(y=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 w-32",children:l===y.id?c.jsx("input",{type:"date",value:h.date?new Date(h.date).toISOString().split("T")[0]:"",onChange:x=>w("date",new Date(x.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsx("span",{className:"text-sm text-gray-900",children:y.date?y.date.toLocaleDateString("ko-KR"):"날짜 없음"})}),c.jsx("td",{className:"px-6 py-4 w-48",children:l===y.id?c.jsxs("select",{value:h.organizationName||"",onChange:x=>w("organizationName",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"단체 선택"}),N.map(x=>c.jsx("option",{value:x,children:x},x))]}):c.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.organizationName})}),c.jsx("td",{className:"px-6 py-4 w-24",children:c.jsx("span",{className:"text-sm text-gray-600",children:y.city||"-"})}),c.jsx("td",{className:"px-6 py-4 w-32",children:l===y.id?c.jsxs("select",{value:h.program||y.program||"스포츠교실",onChange:x=>w("program",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),c.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),c.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]}):c.jsx("span",{className:"text-sm text-purple-600 font-medium",children:y.program||"스포츠교실"})}),c.jsx("td",{className:"px-6 py-4 w-20",children:l===y.id?c.jsx("input",{type:"number",value:h.maleCount||"",onChange:x=>w("maleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsxs("span",{className:"text-sm text-blue-600 font-mono flex items-center",children:[c.jsx(ti,{className:"w-4 h-4 mr-1"}),(y.maleCount||0).toLocaleString()]})}),c.jsx("td",{className:"px-6 py-4 w-20",children:l===y.id?c.jsx("input",{type:"number",value:h.femaleCount||"",onChange:x=>w("femaleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsxs("span",{className:"text-sm text-pink-600 font-mono flex items-center",children:[c.jsx(ti,{className:"w-4 h-4 mr-1"}),(y.femaleCount||0).toLocaleString()]})}),c.jsx("td",{className:"px-6 py-4 w-20",children:c.jsxs("span",{className:"text-sm text-gray-900 font-bold",children:[((y.maleCount||0)+(y.femaleCount||0)).toLocaleString(),"명"]})}),c.jsx("td",{className:"px-6 py-4 w-24",children:l===y.id?c.jsx("input",{type:"number",value:h.promotionCount||"",onChange:x=>w("promotionCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):c.jsxs("span",{className:"text-sm text-orange-600 font-mono flex items-center",children:[c.jsx(vv,{className:"w-4 h-4 mr-1"}),(y.promotionCount||0).toLocaleString(),"회"]})}),c.jsx("td",{className:"px-6 py-4 min-w-32",children:l===y.id?c.jsx("textarea",{value:h.notes||"",onChange:x=>w("notes",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}):c.jsx("span",{className:"text-sm text-gray-500",children:y.notes||"-"})}),c.jsx("td",{className:"px-6 py-4 text-right w-24",children:l===y.id?c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:D,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"저장",children:c.jsx(ei,{className:"w-4 h-4"})}),c.jsx("button",{onClick:L,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"취소",children:c.jsx(Do,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:()=>I(y),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"수정",children:c.jsx(_v,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>V(y.id,y.organizationName,y.date),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"삭제",children:c.jsx(Su,{className:"w-4 h-4"})})]})})]},y.id))})]})}),i.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:e.length===0?"실적 데이터가 없습니다":"검색 조건에 맞는 데이터가 없습니다"})})]})]})},Gb=({toast:t,onRemove:e})=>{const{type:n,title:r,message:s,duration:i=5e3}=t;P.useEffect(()=>{const u=setTimeout(()=>{e(t.id)},i);return()=>clearTimeout(u)},[t.id,i,e]);const o=()=>{switch(n){case"success":return c.jsx(Ro,{className:"w-5 h-5 text-green-500"});case"error":return c.jsx(Zh,{className:"w-5 h-5 text-red-500"});case"warning":return c.jsx(fE,{className:"w-5 h-5 text-orange-500"});case"info":return c.jsx(Km,{className:"w-5 h-5 text-blue-500"});default:return c.jsx(Km,{className:"w-5 h-5 text-blue-500"})}},l=()=>{switch(n){case"success":return"border-l-green-500";case"error":return"border-l-red-500";case"warning":return"border-l-orange-500";case"info":return"border-l-blue-500";default:return"border-l-blue-500"}};return c.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 ${l()} p-4 mb-3 max-w-md animate-slide-in`,children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:o()}),c.jsxs("div",{className:"ml-3 flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:r}),c.jsx("p",{className:"text-sm text-gray-500",children:s})]}),c.jsx("button",{onClick:()=>e(t.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx(Do,{className:"w-4 h-4"})})]})})},Yb=({toasts:t,onRemove:e})=>c.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.map(n=>c.jsx(Gb,{toast:n,onRemove:e},n.id))}),Xb=()=>{var w;const[t,e]=P.useState([]),[n,r]=P.useState([]),[s,i]=P.useState(null),[o,l]=P.useState({}),[u,h]=P.useState(""),p=t.filter(m=>m.name.includes(u)).sort((m,y)=>y.name.localeCompare(m.name,"ko")),g=[...n].sort((m,y)=>m.date&&y.date?new Date(y.date).getTime()-new Date(m.date).getTime():y.id.localeCompare(m.id)),[v,S]=P.useState(!1),[k,N]=P.useState({budgetItemId:((w=t[0])==null?void 0:w.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""});P.useEffect(()=>{const m=We.subscribeToBudgets(e),y=We.subscribeToBudgetUsages(r);return()=>{m(),y()}},[]);const A=()=>{var m;S(!0),N({budgetItemId:((m=t[0])==null?void 0:m.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},E=m=>{i(m.id),l({...m})},T=async()=>{s&&(await We.updateBudgetUsage(s,o),i(null),l({}))},I=async()=>{s&&(await We.deleteBudgetUsage(s),i(null),l({}))},D=(m,y)=>{l(x=>({...x,[m]:y}))},L=async()=>{var m;await We.addBudgetUsage(k),S(!1),N({budgetItemId:((m=t[0])==null?void 0:m.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},V=(m,y)=>{N(x=>({...x,[m]:y}))};return c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"예산 사용 내역"}),c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition",onClick:A,children:[c.jsx(xv,{className:"w-4 h-4"})," 내역 추가"]})]}),c.jsx("div",{className:"mb-4 flex gap-2",children:c.jsx("input",{type:"text",className:"border rounded px-3 py-2 w-64",placeholder:"예산명 검색...",value:u,onChange:m=>h(m.target.value)})}),c.jsxs("div",{className:"grid gap-4",children:[v&&c.jsx("div",{className:"rounded-xl shadow-md border-2 border-blue-300 bg-white ring-2 ring-blue-400",children:c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-6",children:[c.jsxs("div",{className:"flex-1 min-w-[120px]",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"예산명"}),c.jsx("select",{className:"border rounded px-2 py-1 w-full",value:k.budgetItemId,onChange:m=>V("budgetItemId",m.target.value),children:p.map(m=>c.jsx("option",{value:m.id,children:m.name},m.id))})]}),c.jsxs("div",{className:"flex-1 min-w-[100px]",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"적요"}),c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:k.description||"",onChange:m=>V("description",m.target.value)})]}),c.jsxs("div",{className:"flex-1 min-w-[80px]",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"채주"}),c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:k.vendor||"",onChange:m=>V("vendor",m.target.value)})]}),c.jsxs("div",{className:"w-32 text-right",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행액"}),c.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full text-right",value:k.amount!==void 0&&k.amount!==null?Number(k.amount).toLocaleString():"",onChange:m=>{const y=m.target.value.replace(/,/g,"");isNaN(Number(y))||V("amount",Number(y))}})]}),c.jsxs("div",{className:"w-32 text-center",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행일자"}),c.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:k.date||"",onChange:m=>V("date",m.target.value)})]}),c.jsxs("div",{className:"w-32 text-center",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"결제방법"}),c.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:k.paymentMethod||"",onChange:m=>V("paymentMethod",m.target.value),children:[c.jsx("option",{value:"",children:"선택"}),c.jsx("option",{value:"계좌입금",children:"계좌입금"}),c.jsx("option",{value:"카드결제",children:"카드결제"})]})]}),c.jsxs("div",{className:"flex-1 min-w-[80px]",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"메모"}),c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:k.note||"",onChange:m=>V("note",m.target.value)})]}),c.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center",children:[c.jsx("button",{className:"p-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:L,title:"저장",children:c.jsx(ei,{className:"w-5 h-5"})}),c.jsx("button",{className:"p-2 bg-gray-200 text-gray-700 rounded-full shadow hover:bg-gray-300 transition",onClick:()=>S(!1),title:"취소",children:c.jsx(Do,{className:"w-5 h-5"})})]})]})}),g.map(m=>{const y=s===m.id,x=t.find(b=>b.id===(y?o.budgetItemId:m.budgetItemId));return c.jsxs("div",{className:`rounded-xl shadow-md border border-gray-100 bg-white hover:shadow-lg transition cursor-pointer relative ${y?"ring-2 ring-blue-400":"hover:ring-1 hover:ring-blue-200"}`,onClick:()=>!y&&E(m),children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-6",children:[c.jsx("div",{className:"flex-1 min-w-[120px]",children:y?c.jsx("select",{className:"border rounded px-2 py-1 w-full",value:o.budgetItemId,onChange:b=>D("budgetItemId",b.target.value),children:p.map(b=>c.jsx("option",{value:b.id,children:b.name},b.id))}):c.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center gap-2",children:[(x==null?void 0:x.name)||"-",(x==null?void 0:x.region)==="남부"&&c.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}),(x==null?void 0:x.region)==="북부"&&c.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"})]})}),c.jsx("div",{className:"flex-1 min-w-[100px]",children:y?c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"적요"}),c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.description||"",onChange:b=>D("description",b.target.value)})]}):c.jsx("div",{className:"text-gray-800 truncate",title:m.description,children:m.description||"-"})}),c.jsx("div",{className:"flex-1 min-w-[80px]",children:y?c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"채주"}),c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.vendor||"",onChange:b=>D("vendor",b.target.value)})]}):c.jsx("div",{className:"text-gray-700 truncate",title:m.vendor,children:m.vendor||"-"})}),c.jsx("div",{className:"w-32 text-right",children:y?c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행액"}),c.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full text-right",value:o.amount!==void 0&&o.amount!==null?Number(o.amount).toLocaleString():"",onChange:b=>{const R=b.target.value.replace(/,/g,"");isNaN(Number(R))||D("amount",Number(R))}})]}):c.jsxs("span",{className:"font-bold text-blue-700",children:[m.amount.toLocaleString(),"원"]})}),c.jsx("div",{className:"w-32 text-center",children:y?c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행일자"}),c.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:o.date||"",onChange:b=>D("date",b.target.value)})]}):c.jsx("span",{className:"text-gray-600",children:m.date||"-"})}),c.jsx("div",{className:"w-32 text-center",children:y?c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"결제방법"}),c.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:o.paymentMethod||"",onChange:b=>D("paymentMethod",b.target.value),children:[c.jsx("option",{value:"",children:"선택"}),c.jsx("option",{value:"계좌입금",children:"계좌입금"}),c.jsx("option",{value:"카드결제",children:"카드결제"})]})]}):c.jsx("span",{className:"text-gray-600",children:m.paymentMethod||"-"})}),c.jsx("div",{className:"flex-1 min-w-[80px]",children:y?c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"메모"}),c.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.note||"",onChange:b=>D("note",b.target.value)})]}):c.jsx("div",{className:"text-gray-500 truncate",title:m.note,children:m.note||"-"})}),y&&c.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center",children:[c.jsx("button",{className:"p-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:T,title:"저장",children:c.jsx(ei,{className:"w-5 h-5"})}),c.jsx("button",{className:"p-2 bg-gray-200 text-gray-700 rounded-full shadow hover:bg-gray-300 transition",onClick:()=>{i(null),l({})},title:"취소",children:c.jsx(Do,{className:"w-5 h-5"})})]})]}),y&&c.jsx("div",{className:"flex justify-end border-t pt-3 pb-2 px-6 bg-gray-50 rounded-b-xl",children:c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition",onClick:I,children:[c.jsx(Su,{className:"w-4 h-4"})," 선택된 내역 삭제"]})})]},m.id)})]})]})};function Jb(){const[t,e]=P.useState("dashboard"),{toasts:n,addToast:r,removeToast:s}=aa(),{loading:i,error:o}=xi(),l=()=>{if(i)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ko,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(o)return c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-800 font-medium mb-2",children:"연결 오류"}),c.jsx("p",{className:"text-red-600 text-sm",children:o}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"다시 시도"})]})});switch(t){case"dashboard":return c.jsx(sy,{});case"demand-register":return c.jsx(qb,{});case"demand-list":return c.jsx(Wb,{});case"performance-input":return c.jsx(Kb,{});case"performance-list":return c.jsx(Qb,{});case"budget-usage":return c.jsx(Xb,{});default:return c.jsx(sy,{})}};return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(yE,{currentPage:t,onPageChange:e,children:l()}),c.jsx(Yb,{toasts:n,onRemove:s})]})}yv(document.getElementById("root")).render(c.jsx(P.StrictMode,{children:c.jsx(Jb,{})}));
