(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Gw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p0={exports:{}},pu={},g0={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),Yw=Symbol.for("react.portal"),Xw=Symbol.for("react.fragment"),Jw=Symbol.for("react.strict_mode"),Zw=Symbol.for("react.profiler"),e_=Symbol.for("react.provider"),t_=Symbol.for("react.context"),n_=Symbol.for("react.forward_ref"),r_=Symbol.for("react.suspense"),s_=Symbol.for("react.memo"),i_=Symbol.for("react.lazy"),Qm=Symbol.iterator;function o_(t){return t===null||typeof t!="object"?null:(t=Qm&&t[Qm]||t["@@iterator"],typeof t=="function"?t:null)}var y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v0=Object.assign,x0={};function gi(t,e,n){this.props=t,this.context=e,this.refs=x0,this.updater=n||y0}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w0(){}w0.prototype=gi.prototype;function gh(t,e,n){this.props=t,this.context=e,this.refs=x0,this.updater=n||y0}var yh=gh.prototype=new w0;yh.constructor=gh;v0(yh,gi.prototype);yh.isPureReactComponent=!0;var Gm=Array.isArray,_0=Object.prototype.hasOwnProperty,vh={current:null},b0={key:!0,ref:!0,__self:!0,__source:!0};function E0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)_0.call(e,r)&&!b0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Jo,type:t,key:i,ref:o,props:s,_owner:vh.current}}function a_(t,e){return{$$typeof:Jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jo}function l_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ym=/\/+/g;function dc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?l_(""+t.key):e.toString(36)}function al(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jo:case Yw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dc(o,0):r,Gm(s)?(n="",t!=null&&(n=t.replace(Ym,"$&/")+"/"),al(s,e,n,"",function(d){return d})):s!=null&&(xh(s)&&(s=a_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ym,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Gm(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+dc(i,u);o+=al(i,e,n,c,s)}else if(c=o_(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+dc(i,u++),o+=al(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pa(t,e,n){if(t==null)return t;var r=[],s=0;return al(t,r,"","",function(i){return e.call(n,i,s++)}),r}function u_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},ll={transition:null},c_={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:ll,ReactCurrentOwner:vh};function N0(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Pa,forEach:function(t,e,n){Pa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pa(t,function(){e++}),e},toArray:function(t){return Pa(t,function(e){return e})||[]},only:function(t){if(!xh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=gi;ie.Fragment=Xw;ie.Profiler=Zw;ie.PureComponent=gh;ie.StrictMode=Jw;ie.Suspense=r_;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c_;ie.act=N0;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=v0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)_0.call(e,c)&&!b0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Jo,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:t_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e_,_context:t},t.Consumer=t};ie.createElement=E0;ie.createFactory=function(t){var e=E0.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:n_,render:t}};ie.isValidElement=xh;ie.lazy=function(t){return{$$typeof:i_,_payload:{_status:-1,_result:t},_init:u_}};ie.memo=function(t,e){return{$$typeof:s_,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=ll.transition;ll.transition={};try{t()}finally{ll.transition=e}};ie.unstable_act=N0;ie.useCallback=function(t,e){return Lt.current.useCallback(t,e)};ie.useContext=function(t){return Lt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Lt.current.useEffect(t,e)};ie.useId=function(){return Lt.current.useId()};ie.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Lt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};ie.useRef=function(t){return Lt.current.useRef(t)};ie.useState=function(t){return Lt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Lt.current.useTransition()};ie.version="18.3.1";g0.exports=ie;var R=g0.exports;const Ut=Gw(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_=R,h_=Symbol.for("react.element"),f_=Symbol.for("react.fragment"),m_=Object.prototype.hasOwnProperty,p_=d_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g_={key:!0,ref:!0,__self:!0,__source:!0};function T0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)m_.call(e,r)&&!g_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:h_,type:t,key:i,ref:o,props:s,_owner:p_.current}}pu.Fragment=f_;pu.jsx=T0;pu.jsxs=T0;p0.exports=pu;var l=p0.exports,S0={exports:{}},tn={},I0={exports:{}},C0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var Y=B.length;B.push(W);e:for(;0<Y;){var fe=Y-1>>>1,$=B[fe];if(0<s($,W))B[fe]=W,B[Y]=$,Y=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],Y=B.pop();if(Y!==W){B[0]=Y;e:for(var fe=0,$=B.length,X=$>>>1;fe<X;){var _e=2*(fe+1)-1,be=B[_e],xe=_e+1,Xe=B[xe];if(0>s(be,Y))xe<$&&0>s(Xe,be)?(B[fe]=Xe,B[xe]=Y,fe=xe):(B[fe]=be,B[_e]=Y,fe=_e);else if(xe<$&&0>s(Xe,Y))B[fe]=Xe,B[xe]=Y,fe=xe;else break e}}return W}function s(B,W){var Y=B.sortIndex-W.sortIndex;return Y!==0?Y:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],m=1,p=null,v=3,N=!1,k=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(B){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=B)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function D(B){if(C=!1,T(B),!k)if(n(c)!==null)k=!0,ot(M);else{var W=n(d);W!==null&&Z(D,W.startTime-B)}}function M(B,W){k=!1,C&&(C=!1,b(y),y=-1),N=!0;var Y=v;try{for(T(W),p=n(c);p!==null&&(!(p.expirationTime>W)||B&&!S());){var fe=p.callback;if(typeof fe=="function"){p.callback=null,v=p.priorityLevel;var $=fe(p.expirationTime<=W);W=t.unstable_now(),typeof $=="function"?p.callback=$:p===n(c)&&r(c),T(W)}else r(c);p=n(c)}if(p!==null)var X=!0;else{var _e=n(d);_e!==null&&Z(D,_e.startTime-W),X=!1}return X}finally{p=null,v=Y,N=!1}}var L=!1,_=null,y=-1,g=5,x=-1;function S(){return!(t.unstable_now()-x<g)}function A(){if(_!==null){var B=t.unstable_now();x=B;var W=!0;try{W=_(!0,B)}finally{W?I():(L=!1,_=null)}}else L=!1}var I;if(typeof E=="function")I=function(){E(A)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Se=re.port2;re.port1.onmessage=A,I=function(){Se.postMessage(null)}}else I=function(){j(A,0)};function ot(B){_=B,L||(L=!0,I())}function Z(B,W){y=j(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||N||(k=!0,ot(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var Y=v;v=W;try{return B()}finally{v=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=v;v=B;try{return W()}finally{v=Y}},t.unstable_scheduleCallback=function(B,W,Y){var fe=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?fe+Y:fe):Y=fe,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Y+$,B={id:m++,callback:W,priorityLevel:B,startTime:Y,expirationTime:$,sortIndex:-1},Y>fe?(B.sortIndex=Y,e(d,B),n(c)===null&&B===n(d)&&(C?(b(y),y=-1):C=!0,Z(D,Y-fe))):(B.sortIndex=$,e(c,B),k||N||(k=!0,ot(M))),B},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(B){var W=v;return function(){var Y=v;v=W;try{return B.apply(this,arguments)}finally{v=Y}}}})(C0);I0.exports=C0;var y_=I0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_=R,en=y_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A0=new Set,wo={};function vs(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(wo[t]=e,t=0;t<e.length;t++)A0.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yc=Object.prototype.hasOwnProperty,x_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xm={},Jm={};function w_(t){return Yc.call(Jm,t)?!0:Yc.call(Xm,t)?!1:x_.test(t)?Jm[t]=!0:(Xm[t]=!0,!1)}function __(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b_(t,e,n,r){if(e===null||typeof e>"u"||__(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var wh=/[\-:]([a-z])/g;function _h(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wh,_h);pt[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wh,_h);pt[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wh,_h);pt[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function bh(t,e,n,r){var s=pt.hasOwnProperty(e)?pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b_(e,n,s,r)&&(n=null),r||s===null?w_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=v_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),js=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),j0=Symbol.for("react.provider"),R0=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),Jc=Symbol.for("react.suspense"),Zc=Symbol.for("react.suspense_list"),Th=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),k0=Symbol.for("react.offscreen"),Zm=Symbol.iterator;function Oi(t){return t===null||typeof t!="object"?null:(t=Zm&&t[Zm]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,hc;function Qi(t){if(hc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hc=e&&e[1]||""}return`
`+hc+t}var fc=!1;function mc(t,e){if(!t||fc)return"";fc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{fc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qi(t):""}function E_(t){switch(t.tag){case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 2:case 15:return t=mc(t.type,!1),t;case 11:return t=mc(t.type.render,!1),t;case 1:return t=mc(t.type,!0),t;default:return""}}function ed(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case js:return"Portal";case Xc:return"Profiler";case Eh:return"StrictMode";case Jc:return"Suspense";case Zc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R0:return(t.displayName||"Context")+".Consumer";case j0:return(t._context.displayName||"Context")+".Provider";case Nh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Th:return e=t.displayName||null,e!==null?e:ed(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return ed(t(e))}catch{}}return null}function N_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ed(e);case 8:return e===Eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function P0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T_(t){var e=P0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=T_(t))}function D0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=P0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function td(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ep(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function V0(t,e){e=e.checked,e!=null&&bh(t,"checked",e,!1)}function nd(t,e){V0(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rd(t,e.type,n):e.hasOwnProperty("defaultValue")&&rd(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rd(t,e,n){(e!=="number"||Sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function $s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function np(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Gi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function M0(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function L0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?L0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ma,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ma=Ma||document.createElement("div"),Ma.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ma.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S_=["Webkit","ms","Moz","O"];Object.keys(ro).forEach(function(t){S_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ro[e]=ro[t]})});function F0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ro.hasOwnProperty(t)&&ro[t]?(""+e).trim():e+"px"}function U0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=F0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var I_=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(t,e){if(e){if(I_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ad(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function Sh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ud=null,qs=null,Hs=null;function sp(t){if(t=ta(t)){if(typeof ud!="function")throw Error(U(280));var e=t.stateNode;e&&(e=wu(e),ud(t.stateNode,t.type,e))}}function z0(t){qs?Hs?Hs.push(t):Hs=[t]:qs=t}function B0(){if(qs){var t=qs,e=Hs;if(Hs=qs=null,sp(t),e)for(t=0;t<e.length;t++)sp(e[t])}}function $0(t,e){return t(e)}function q0(){}var pc=!1;function H0(t,e,n){if(pc)return t(e,n);pc=!0;try{return $0(t,e,n)}finally{pc=!1,(qs!==null||Hs!==null)&&(q0(),B0())}}function bo(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var cd=!1;if(Zn)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){cd=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{cd=!1}function C_(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var so=!1,Il=null,Cl=!1,dd=null,A_={onError:function(t){so=!0,Il=t}};function j_(t,e,n,r,s,i,o,u,c){so=!1,Il=null,C_.apply(A_,arguments)}function R_(t,e,n,r,s,i,o,u,c){if(j_.apply(this,arguments),so){if(so){var d=Il;so=!1,Il=null}else throw Error(U(198));Cl||(Cl=!0,dd=d)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ip(t){if(xs(t)!==t)throw Error(U(188))}function k_(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ip(s),t;if(i===r)return ip(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function K0(t){return t=k_(t),t!==null?Q0(t):null}function Q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q0(t);if(e!==null)return e;t=t.sibling}return null}var G0=en.unstable_scheduleCallback,op=en.unstable_cancelCallback,P_=en.unstable_shouldYield,D_=en.unstable_requestPaint,qe=en.unstable_now,V_=en.unstable_getCurrentPriorityLevel,Ih=en.unstable_ImmediatePriority,Y0=en.unstable_UserBlockingPriority,Al=en.unstable_NormalPriority,M_=en.unstable_LowPriority,X0=en.unstable_IdlePriority,gu=null,Mn=null;function L_(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:U_,O_=Math.log,F_=Math.LN2;function U_(t){return t>>>=0,t===0?32:31-(O_(t)/F_|0)|0}var La=64,Oa=4194304;function Yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Yi(u):(i&=o,i!==0&&(r=Yi(i)))}else o=n&~s,o!==0?r=Yi(o):i!==0&&(r=Yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),s=1<<n,r|=t[n],e&=~s;return r}function z_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Sn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=z_(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function hd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function J0(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function gc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function $_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ch(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function Z0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ey,Ah,ty,ny,ry,fd=!1,Fa=[],Er=null,Nr=null,Tr=null,Eo=new Map,No=new Map,vr=[],q_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ap(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Eo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":No.delete(e.pointerId)}}function Ui(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ta(e),e!==null&&Ah(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function H_(t,e,n,r,s){switch(e){case"focusin":return Er=Ui(Er,t,e,n,r,s),!0;case"dragenter":return Nr=Ui(Nr,t,e,n,r,s),!0;case"mouseover":return Tr=Ui(Tr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Eo.set(i,Ui(Eo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,No.set(i,Ui(No.get(i)||null,t,e,n,r,s)),!0}return!1}function sy(t){var e=ns(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=W0(n),e!==null){t.blockedOn=e,ry(t.priority,function(){ty(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ld=r,n.target.dispatchEvent(r),ld=null}else return e=ta(n),e!==null&&Ah(e),t.blockedOn=n,!1;e.shift()}return!0}function lp(t,e,n){ul(t)&&n.delete(e)}function W_(){fd=!1,Er!==null&&ul(Er)&&(Er=null),Nr!==null&&ul(Nr)&&(Nr=null),Tr!==null&&ul(Tr)&&(Tr=null),Eo.forEach(lp),No.forEach(lp)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,fd||(fd=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,W_)))}function To(t){function e(s){return zi(s,t)}if(0<Fa.length){zi(Fa[0],t);for(var n=1;n<Fa.length;n++){var r=Fa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&zi(Er,t),Nr!==null&&zi(Nr,t),Tr!==null&&zi(Tr,t),Eo.forEach(e),No.forEach(e),n=0;n<vr.length;n++)r=vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vr.length&&(n=vr[0],n.blockedOn===null);)sy(n),n.blockedOn===null&&vr.shift()}var Ws=ar.ReactCurrentBatchConfig,Rl=!0;function K_(t,e,n,r){var s=ye,i=Ws.transition;Ws.transition=null;try{ye=1,jh(t,e,n,r)}finally{ye=s,Ws.transition=i}}function Q_(t,e,n,r){var s=ye,i=Ws.transition;Ws.transition=null;try{ye=4,jh(t,e,n,r)}finally{ye=s,Ws.transition=i}}function jh(t,e,n,r){if(Rl){var s=md(t,e,n,r);if(s===null)Sc(t,e,r,kl,n),ap(t,r);else if(H_(s,t,e,n,r))r.stopPropagation();else if(ap(t,r),e&4&&-1<q_.indexOf(t)){for(;s!==null;){var i=ta(s);if(i!==null&&ey(i),i=md(t,e,n,r),i===null&&Sc(t,e,r,kl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Sc(t,e,r,null,n)}}var kl=null;function md(t,e,n,r){if(kl=null,t=Sh(r),t=ns(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=W0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function iy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V_()){case Ih:return 1;case Y0:return 4;case Al:case M_:return 16;case X0:return 536870912;default:return 16}default:return 16}}var wr=null,Rh=null,cl=null;function oy(){if(cl)return cl;var t,e=Rh,n=e.length,r,s="value"in wr?wr.value:wr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cl=s.slice(t,1<r?1-r:void 0)}function dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function up(){return!1}function nn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ua:up,this.isPropagationStopped=up,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=nn(yi),ea=Le({},yi,{view:0,detail:0}),G_=nn(ea),yc,vc,Bi,yu=Le({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bi&&(Bi&&t.type==="mousemove"?(yc=t.screenX-Bi.screenX,vc=t.screenY-Bi.screenY):vc=yc=0,Bi=t),yc)},movementY:function(t){return"movementY"in t?t.movementY:vc}}),cp=nn(yu),Y_=Le({},yu,{dataTransfer:0}),X_=nn(Y_),J_=Le({},ea,{relatedTarget:0}),xc=nn(J_),Z_=Le({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),e1=nn(Z_),t1=Le({},yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),n1=nn(t1),r1=Le({},yi,{data:0}),dp=nn(r1),s1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=o1[t])?!!e[t]:!1}function Ph(){return a1}var l1=Le({},ea,{key:function(t){if(t.key){var e=s1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(t){return t.type==="keypress"?dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u1=nn(l1),c1=Le({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hp=nn(c1),d1=Le({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),h1=nn(d1),f1=Le({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),m1=nn(f1),p1=Le({},yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g1=nn(p1),y1=[9,13,27,32],Dh=Zn&&"CompositionEvent"in window,io=null;Zn&&"documentMode"in document&&(io=document.documentMode);var v1=Zn&&"TextEvent"in window&&!io,ay=Zn&&(!Dh||io&&8<io&&11>=io),fp=" ",mp=!1;function ly(t,e){switch(t){case"keyup":return y1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function x1(t,e){switch(t){case"compositionend":return uy(e);case"keypress":return e.which!==32?null:(mp=!0,fp);case"textInput":return t=e.data,t===fp&&mp?null:t;default:return null}}function w1(t,e){if(ks)return t==="compositionend"||!Dh&&ly(t,e)?(t=oy(),cl=Rh=wr=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ay&&e.locale!=="ko"?null:e.data;default:return null}}var _1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_1[t.type]:e==="textarea"}function cy(t,e,n,r){z0(r),e=Pl(e,"onChange"),0<e.length&&(n=new kh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oo=null,So=null;function b1(t){_y(t,0)}function vu(t){var e=Vs(t);if(D0(e))return t}function E1(t,e){if(t==="change")return e}var dy=!1;if(Zn){var wc;if(Zn){var _c="oninput"in document;if(!_c){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),_c=typeof gp.oninput=="function"}wc=_c}else wc=!1;dy=wc&&(!document.documentMode||9<document.documentMode)}function yp(){oo&&(oo.detachEvent("onpropertychange",hy),So=oo=null)}function hy(t){if(t.propertyName==="value"&&vu(So)){var e=[];cy(e,So,t,Sh(t)),H0(b1,e)}}function N1(t,e,n){t==="focusin"?(yp(),oo=e,So=n,oo.attachEvent("onpropertychange",hy)):t==="focusout"&&yp()}function T1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(So)}function S1(t,e){if(t==="click")return vu(e)}function I1(t,e){if(t==="input"||t==="change")return vu(e)}function C1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:C1;function Io(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Yc.call(e,s)||!Cn(t[s],e[s]))return!1}return!0}function vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xp(t,e){var n=vp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vp(n)}}function fy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function my(){for(var t=window,e=Sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sl(t.document)}return e}function Vh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A1(t){var e=my(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fy(n.ownerDocument.documentElement,n)){if(r!==null&&Vh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=xp(n,i);var o=xp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j1=Zn&&"documentMode"in document&&11>=document.documentMode,Ps=null,pd=null,ao=null,gd=!1;function wp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gd||Ps==null||Ps!==Sl(r)||(r=Ps,"selectionStart"in r&&Vh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ao&&Io(ao,r)||(ao=r,r=Pl(pd,"onSelect"),0<r.length&&(e=new kh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ds={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},bc={},py={};Zn&&(py=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function xu(t){if(bc[t])return bc[t];if(!Ds[t])return t;var e=Ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in py)return bc[t]=e[n];return t}var gy=xu("animationend"),yy=xu("animationiteration"),vy=xu("animationstart"),xy=xu("transitionend"),wy=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){wy.set(t,e),vs(e,[t])}for(var Ec=0;Ec<_p.length;Ec++){var Nc=_p[Ec],R1=Nc.toLowerCase(),k1=Nc[0].toUpperCase()+Nc.slice(1);Fr(R1,"on"+k1)}Fr(gy,"onAnimationEnd");Fr(yy,"onAnimationIteration");Fr(vy,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(xy,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function bp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,R_(r,e,void 0,t),t.currentTarget=null}function _y(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;bp(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;bp(s,u,d),i=c}}}if(Cl)throw t=dd,Cl=!1,dd=null,t}function Ce(t,e){var n=e[_d];n===void 0&&(n=e[_d]=new Set);var r=t+"__bubble";n.has(r)||(by(e,t,2,!1),n.add(r))}function Tc(t,e,n){var r=0;e&&(r|=4),by(n,t,r,e)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[Ba]){t[Ba]=!0,A0.forEach(function(n){n!=="selectionchange"&&(P1.has(n)||Tc(n,!1,t),Tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ba]||(e[Ba]=!0,Tc("selectionchange",!1,e))}}function by(t,e,n,r){switch(iy(e)){case 1:var s=K_;break;case 4:s=Q_;break;default:s=jh}n=s.bind(null,e,n,t),s=void 0,!cd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Sc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=ns(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}H0(function(){var d=i,m=Sh(n),p=[];e:{var v=wy.get(t);if(v!==void 0){var N=kh,k=t;switch(t){case"keypress":if(dl(n)===0)break e;case"keydown":case"keyup":N=u1;break;case"focusin":k="focus",N=xc;break;case"focusout":k="blur",N=xc;break;case"beforeblur":case"afterblur":N=xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=X_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=h1;break;case gy:case yy:case vy:N=e1;break;case xy:N=m1;break;case"scroll":N=G_;break;case"wheel":N=g1;break;case"copy":case"cut":case"paste":N=n1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=hp}var C=(e&4)!==0,j=!C&&t==="scroll",b=C?v!==null?v+"Capture":null:v;C=[];for(var E=d,T;E!==null;){T=E;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,b!==null&&(D=bo(E,b),D!=null&&C.push(Ao(E,D,T)))),j)break;E=E.return}0<C.length&&(v=new N(v,k,null,n,m),p.push({event:v,listeners:C}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",v&&n!==ld&&(k=n.relatedTarget||n.fromElement)&&(ns(k)||k[er]))break e;if((N||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,N?(k=n.relatedTarget||n.toElement,N=d,k=k?ns(k):null,k!==null&&(j=xs(k),k!==j||k.tag!==5&&k.tag!==6)&&(k=null)):(N=null,k=d),N!==k)){if(C=cp,D="onMouseLeave",b="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(C=hp,D="onPointerLeave",b="onPointerEnter",E="pointer"),j=N==null?v:Vs(N),T=k==null?v:Vs(k),v=new C(D,E+"leave",N,n,m),v.target=j,v.relatedTarget=T,D=null,ns(m)===d&&(C=new C(b,E+"enter",k,n,m),C.target=T,C.relatedTarget=j,D=C),j=D,N&&k)t:{for(C=N,b=k,E=0,T=C;T;T=Ss(T))E++;for(T=0,D=b;D;D=Ss(D))T++;for(;0<E-T;)C=Ss(C),E--;for(;0<T-E;)b=Ss(b),T--;for(;E--;){if(C===b||b!==null&&C===b.alternate)break t;C=Ss(C),b=Ss(b)}C=null}else C=null;N!==null&&Ep(p,v,N,C,!1),k!==null&&j!==null&&Ep(p,j,k,C,!0)}}e:{if(v=d?Vs(d):window,N=v.nodeName&&v.nodeName.toLowerCase(),N==="select"||N==="input"&&v.type==="file")var M=E1;else if(pp(v))if(dy)M=I1;else{M=T1;var L=N1}else(N=v.nodeName)&&N.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=S1);if(M&&(M=M(t,d))){cy(p,M,n,m);break e}L&&L(t,v,d),t==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&rd(v,"number",v.value)}switch(L=d?Vs(d):window,t){case"focusin":(pp(L)||L.contentEditable==="true")&&(Ps=L,pd=d,ao=null);break;case"focusout":ao=pd=Ps=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,wp(p,n,m);break;case"selectionchange":if(j1)break;case"keydown":case"keyup":wp(p,n,m)}var _;if(Dh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ks?ly(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(ay&&n.locale!=="ko"&&(ks||y!=="onCompositionStart"?y==="onCompositionEnd"&&ks&&(_=oy()):(wr=m,Rh="value"in wr?wr.value:wr.textContent,ks=!0)),L=Pl(d,y),0<L.length&&(y=new dp(y,t,null,n,m),p.push({event:y,listeners:L}),_?y.data=_:(_=uy(n),_!==null&&(y.data=_)))),(_=v1?x1(t,n):w1(t,n))&&(d=Pl(d,"onBeforeInput"),0<d.length&&(m=new dp("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=_))}_y(p,e)})}function Ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=bo(t,n),i!=null&&r.unshift(Ao(t,i,s)),i=bo(t,e),i!=null&&r.push(Ao(t,i,s))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ep(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=bo(n,i),c!=null&&o.unshift(Ao(n,c,u))):s||(c=bo(n,i),c!=null&&o.push(Ao(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var D1=/\r\n?/g,V1=/\u0000|\uFFFD/g;function Np(t){return(typeof t=="string"?t:""+t).replace(D1,`
`).replace(V1,"")}function $a(t,e,n){if(e=Np(e),Np(t)!==e&&n)throw Error(U(425))}function Dl(){}var yd=null,vd=null;function xd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,M1=typeof clearTimeout=="function"?clearTimeout:void 0,Tp=typeof Promise=="function"?Promise:void 0,L1=typeof queueMicrotask=="function"?queueMicrotask:typeof Tp<"u"?function(t){return Tp.resolve(null).then(t).catch(O1)}:wd;function O1(t){setTimeout(function(){throw t})}function Ic(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),To(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);To(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vi=Math.random().toString(36).slice(2),Vn="__reactFiber$"+vi,jo="__reactProps$"+vi,er="__reactContainer$"+vi,_d="__reactEvents$"+vi,F1="__reactListeners$"+vi,U1="__reactHandles$"+vi;function ns(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sp(t);t!==null;){if(n=t[Vn])return n;t=Sp(t)}return e}t=n,n=t.parentNode}return null}function ta(t){return t=t[Vn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function wu(t){return t[jo]||null}var bd=[],Ms=-1;function Ur(t){return{current:t}}function Re(t){0>Ms||(t.current=bd[Ms],bd[Ms]=null,Ms--)}function Te(t,e){Ms++,bd[Ms]=t.current,t.current=e}var Vr={},jt=Ur(Vr),qt=Ur(!1),cs=Vr;function ei(t,e){var n=t.type.contextTypes;if(!n)return Vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ht(t){return t=t.childContextTypes,t!=null}function Vl(){Re(qt),Re(jt)}function Ip(t,e,n){if(jt.current!==Vr)throw Error(U(168));Te(jt,e),Te(qt,n)}function Ey(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,N_(t)||"Unknown",s));return Le({},n,r)}function Ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vr,cs=jt.current,Te(jt,t),Te(qt,qt.current),!0}function Cp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Ey(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Re(qt),Re(jt),Te(jt,t)):Re(qt),Te(qt,n)}var Qn=null,_u=!1,Cc=!1;function Ny(t){Qn===null?Qn=[t]:Qn.push(t)}function z1(t){_u=!0,Ny(t)}function zr(){if(!Cc&&Qn!==null){Cc=!0;var t=0,e=ye;try{var n=Qn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qn=null,_u=!1}catch(s){throw Qn!==null&&(Qn=Qn.slice(t+1)),G0(Ih,zr),s}finally{ye=e,Cc=!1}}return null}var Ls=[],Os=0,Ll=null,Ol=0,un=[],cn=0,ds=null,Gn=1,Yn="";function Zr(t,e){Ls[Os++]=Ol,Ls[Os++]=Ll,Ll=t,Ol=e}function Ty(t,e,n){un[cn++]=Gn,un[cn++]=Yn,un[cn++]=ds,ds=t;var r=Gn;t=Yn;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var i=32-Sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-Sn(e)+s|n<<s|r,Yn=i+t}else Gn=1<<i|n<<s|r,Yn=t}function Mh(t){t.return!==null&&(Zr(t,1),Ty(t,1,0))}function Lh(t){for(;t===Ll;)Ll=Ls[--Os],Ls[Os]=null,Ol=Ls[--Os],Ls[Os]=null;for(;t===ds;)ds=un[--cn],un[cn]=null,Yn=un[--cn],un[cn]=null,Gn=un[--cn],un[cn]=null}var Zt=null,Xt=null,Pe=!1,Tn=null;function Sy(t,e){var n=dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ap(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ds!==null?{id:Gn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Xt=null,!0):!1;default:return!1}}function Ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nd(t){if(Pe){var e=Xt;if(e){var n=e;if(!Ap(t,e)){if(Ed(t))throw Error(U(418));e=Sr(n.nextSibling);var r=Zt;e&&Ap(t,e)?Sy(r,n):(t.flags=t.flags&-4097|2,Pe=!1,Zt=t)}}else{if(Ed(t))throw Error(U(418));t.flags=t.flags&-4097|2,Pe=!1,Zt=t}}}function jp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function qa(t){if(t!==Zt)return!1;if(!Pe)return jp(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xd(t.type,t.memoizedProps)),e&&(e=Xt)){if(Ed(t))throw Iy(),Error(U(418));for(;e;)Sy(t,e),e=Sr(e.nextSibling)}if(jp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Zt?Sr(t.stateNode.nextSibling):null;return!0}function Iy(){for(var t=Xt;t;)t=Sr(t.nextSibling)}function ti(){Xt=Zt=null,Pe=!1}function Oh(t){Tn===null?Tn=[t]:Tn.push(t)}var B1=ar.ReactCurrentBatchConfig;function $i(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ha(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rp(t){var e=t._init;return e(t._payload)}function Cy(t){function e(b,E){if(t){var T=b.deletions;T===null?(b.deletions=[E],b.flags|=16):T.push(E)}}function n(b,E){if(!t)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function r(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function s(b,E){return b=jr(b,E),b.index=0,b.sibling=null,b}function i(b,E,T){return b.index=T,t?(T=b.alternate,T!==null?(T=T.index,T<E?(b.flags|=2,E):T):(b.flags|=2,E)):(b.flags|=1048576,E)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,E,T,D){return E===null||E.tag!==6?(E=Vc(T,b.mode,D),E.return=b,E):(E=s(E,T),E.return=b,E)}function c(b,E,T,D){var M=T.type;return M===Rs?m(b,E,T.props.children,D,T.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===pr&&Rp(M)===E.type)?(D=s(E,T.props),D.ref=$i(b,E,T),D.return=b,D):(D=vl(T.type,T.key,T.props,null,b.mode,D),D.ref=$i(b,E,T),D.return=b,D)}function d(b,E,T,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=Mc(T,b.mode,D),E.return=b,E):(E=s(E,T.children||[]),E.return=b,E)}function m(b,E,T,D,M){return E===null||E.tag!==7?(E=as(T,b.mode,D,M),E.return=b,E):(E=s(E,T),E.return=b,E)}function p(b,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Vc(""+E,b.mode,T),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Da:return T=vl(E.type,E.key,E.props,null,b.mode,T),T.ref=$i(b,null,E),T.return=b,T;case js:return E=Mc(E,b.mode,T),E.return=b,E;case pr:var D=E._init;return p(b,D(E._payload),T)}if(Gi(E)||Oi(E))return E=as(E,b.mode,T,null),E.return=b,E;Ha(b,E)}return null}function v(b,E,T,D){var M=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return M!==null?null:u(b,E,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Da:return T.key===M?c(b,E,T,D):null;case js:return T.key===M?d(b,E,T,D):null;case pr:return M=T._init,v(b,E,M(T._payload),D)}if(Gi(T)||Oi(T))return M!==null?null:m(b,E,T,D,null);Ha(b,T)}return null}function N(b,E,T,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(T)||null,u(E,b,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Da:return b=b.get(D.key===null?T:D.key)||null,c(E,b,D,M);case js:return b=b.get(D.key===null?T:D.key)||null,d(E,b,D,M);case pr:var L=D._init;return N(b,E,T,L(D._payload),M)}if(Gi(D)||Oi(D))return b=b.get(T)||null,m(E,b,D,M,null);Ha(E,D)}return null}function k(b,E,T,D){for(var M=null,L=null,_=E,y=E=0,g=null;_!==null&&y<T.length;y++){_.index>y?(g=_,_=null):g=_.sibling;var x=v(b,_,T[y],D);if(x===null){_===null&&(_=g);break}t&&_&&x.alternate===null&&e(b,_),E=i(x,E,y),L===null?M=x:L.sibling=x,L=x,_=g}if(y===T.length)return n(b,_),Pe&&Zr(b,y),M;if(_===null){for(;y<T.length;y++)_=p(b,T[y],D),_!==null&&(E=i(_,E,y),L===null?M=_:L.sibling=_,L=_);return Pe&&Zr(b,y),M}for(_=r(b,_);y<T.length;y++)g=N(_,b,y,T[y],D),g!==null&&(t&&g.alternate!==null&&_.delete(g.key===null?y:g.key),E=i(g,E,y),L===null?M=g:L.sibling=g,L=g);return t&&_.forEach(function(S){return e(b,S)}),Pe&&Zr(b,y),M}function C(b,E,T,D){var M=Oi(T);if(typeof M!="function")throw Error(U(150));if(T=M.call(T),T==null)throw Error(U(151));for(var L=M=null,_=E,y=E=0,g=null,x=T.next();_!==null&&!x.done;y++,x=T.next()){_.index>y?(g=_,_=null):g=_.sibling;var S=v(b,_,x.value,D);if(S===null){_===null&&(_=g);break}t&&_&&S.alternate===null&&e(b,_),E=i(S,E,y),L===null?M=S:L.sibling=S,L=S,_=g}if(x.done)return n(b,_),Pe&&Zr(b,y),M;if(_===null){for(;!x.done;y++,x=T.next())x=p(b,x.value,D),x!==null&&(E=i(x,E,y),L===null?M=x:L.sibling=x,L=x);return Pe&&Zr(b,y),M}for(_=r(b,_);!x.done;y++,x=T.next())x=N(_,b,y,x.value,D),x!==null&&(t&&x.alternate!==null&&_.delete(x.key===null?y:x.key),E=i(x,E,y),L===null?M=x:L.sibling=x,L=x);return t&&_.forEach(function(A){return e(b,A)}),Pe&&Zr(b,y),M}function j(b,E,T,D){if(typeof T=="object"&&T!==null&&T.type===Rs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Da:e:{for(var M=T.key,L=E;L!==null;){if(L.key===M){if(M=T.type,M===Rs){if(L.tag===7){n(b,L.sibling),E=s(L,T.props.children),E.return=b,b=E;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===pr&&Rp(M)===L.type){n(b,L.sibling),E=s(L,T.props),E.ref=$i(b,L,T),E.return=b,b=E;break e}n(b,L);break}else e(b,L);L=L.sibling}T.type===Rs?(E=as(T.props.children,b.mode,D,T.key),E.return=b,b=E):(D=vl(T.type,T.key,T.props,null,b.mode,D),D.ref=$i(b,E,T),D.return=b,b=D)}return o(b);case js:e:{for(L=T.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(b,E.sibling),E=s(E,T.children||[]),E.return=b,b=E;break e}else{n(b,E);break}else e(b,E);E=E.sibling}E=Mc(T,b.mode,D),E.return=b,b=E}return o(b);case pr:return L=T._init,j(b,E,L(T._payload),D)}if(Gi(T))return k(b,E,T,D);if(Oi(T))return C(b,E,T,D);Ha(b,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(b,E.sibling),E=s(E,T),E.return=b,b=E):(n(b,E),E=Vc(T,b.mode,D),E.return=b,b=E),o(b)):n(b,E)}return j}var ni=Cy(!0),Ay=Cy(!1),Fl=Ur(null),Ul=null,Fs=null,Fh=null;function Uh(){Fh=Fs=Ul=null}function zh(t){var e=Fl.current;Re(Fl),t._currentValue=e}function Td(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){Ul=t,Fh=Fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function mn(t){var e=t._currentValue;if(Fh!==t)if(t={context:t,memoizedValue:e,next:null},Fs===null){if(Ul===null)throw Error(U(308));Fs=t,Ul.dependencies={lanes:0,firstContext:t}}else Fs=Fs.next=t;return e}var rs=null;function Bh(t){rs===null?rs=[t]:rs.push(t)}function jy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bh(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function $h(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,Bh(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function hl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ch(t,n)}}function kp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zl(t,e,n,r){var s=t.updateQueue;gr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=d=c=null,u=i;do{var v=u.lane,N=u.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:N,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,C=u;switch(v=e,N=n,C.tag){case 1:if(k=C.payload,typeof k=="function"){p=k.call(N,p,v);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,v=typeof k=="function"?k.call(N,p,v):k,v==null)break e;p=Le({},p,v);break e;case 2:gr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[u]:v.push(u))}else N={eventTime:N,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=N,c=p):m=m.next=N,o|=v;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;v=u,u=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);fs|=o,t.lanes=o,t.memoizedState=p}}function Pp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var na={},Ln=Ur(na),Ro=Ur(na),ko=Ur(na);function ss(t){if(t===na)throw Error(U(174));return t}function qh(t,e){switch(Te(ko,e),Te(Ro,t),Te(Ln,na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=id(e,t)}Re(Ln),Te(Ln,e)}function ri(){Re(Ln),Re(Ro),Re(ko)}function ky(t){ss(ko.current);var e=ss(Ln.current),n=id(e,t.type);e!==n&&(Te(Ro,t),Te(Ln,n))}function Hh(t){Ro.current===t&&(Re(Ln),Re(Ro))}var Ve=Ur(0);function Bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ac=[];function Wh(){for(var t=0;t<Ac.length;t++)Ac[t]._workInProgressVersionPrimary=null;Ac.length=0}var fl=ar.ReactCurrentDispatcher,jc=ar.ReactCurrentBatchConfig,hs=0,Me=null,Ze=null,rt=null,$l=!1,lo=!1,Po=0,$1=0;function Et(){throw Error(U(321))}function Kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Qh(t,e,n,r,s,i){if(hs=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fl.current=t===null||t.memoizedState===null?K1:Q1,t=n(r,s),lo){i=0;do{if(lo=!1,Po=0,25<=i)throw Error(U(301));i+=1,rt=Ze=null,e.updateQueue=null,fl.current=G1,t=n(r,s)}while(lo)}if(fl.current=ql,e=Ze!==null&&Ze.next!==null,hs=0,rt=Ze=Me=null,$l=!1,e)throw Error(U(300));return t}function Gh(){var t=Po!==0;return Po=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Me.memoizedState=rt=t:rt=rt.next=t,rt}function pn(){if(Ze===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=rt===null?Me.memoizedState:rt.next;if(e!==null)rt=e,Ze=t;else{if(t===null)throw Error(U(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},rt===null?Me.memoizedState=rt=t:rt=rt.next=t}return rt}function Do(t,e){return typeof e=="function"?e(t):e}function Rc(t){var e=pn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var m=d.lane;if((hs&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Me.lanes|=m,fs|=m}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,Cn(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,fs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kc(t){var e=pn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Cn(i,e.memoizedState)||($t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Py(){}function Dy(t,e){var n=Me,r=pn(),s=e(),i=!Cn(r.memoizedState,s);if(i&&(r.memoizedState=s,$t=!0),r=r.queue,Yh(Ly.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Vo(9,My.bind(null,n,r,s,e),void 0,null),it===null)throw Error(U(349));hs&30||Vy(n,e,s)}return s}function Vy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function My(t,e,n,r){e.value=n,e.getSnapshot=r,Oy(e)&&Fy(t)}function Ly(t,e,n){return n(function(){Oy(e)&&Fy(t)})}function Oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function Fy(t){var e=tr(t,1);e!==null&&In(e,t,1,-1)}function Dp(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},e.queue=t,t=t.dispatch=W1.bind(null,Me,t),[e.memoizedState,t]}function Vo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uy(){return pn().memoizedState}function ml(t,e,n,r){var s=Dn();Me.flags|=t,s.memoizedState=Vo(1|e,n,void 0,r===void 0?null:r)}function bu(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(Ze!==null){var o=Ze.memoizedState;if(i=o.destroy,r!==null&&Kh(r,o.deps)){s.memoizedState=Vo(e,n,i,r);return}}Me.flags|=t,s.memoizedState=Vo(1|e,n,i,r)}function Vp(t,e){return ml(8390656,8,t,e)}function Yh(t,e){return bu(2048,8,t,e)}function zy(t,e){return bu(4,2,t,e)}function By(t,e){return bu(4,4,t,e)}function $y(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qy(t,e,n){return n=n!=null?n.concat([t]):null,bu(4,4,$y.bind(null,e,t),n)}function Xh(){}function Hy(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wy(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ky(t,e,n){return hs&21?(Cn(n,e)||(n=J0(),Me.lanes|=n,fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function q1(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=jc.transition;jc.transition={};try{t(!1),e()}finally{ye=n,jc.transition=r}}function Qy(){return pn().memoizedState}function H1(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gy(t))Yy(e,n);else if(n=jy(t,e,n,r),n!==null){var s=Mt();In(n,t,r,s),Xy(n,e,r)}}function W1(t,e,n){var r=Ar(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gy(t))Yy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Cn(u,o)){var c=e.interleaved;c===null?(s.next=s,Bh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=jy(t,e,s,r),n!==null&&(s=Mt(),In(n,t,r,s),Xy(n,e,r))}}function Gy(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Yy(t,e){lo=$l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ch(t,n)}}var ql={readContext:mn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},K1={readContext:mn,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:mn,useEffect:Vp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ml(4194308,4,$y.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ml(4194308,4,t,e)},useInsertionEffect:function(t,e){return ml(4,2,t,e)},useMemo:function(t,e){var n=Dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H1.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:Dp,useDebugValue:Xh,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=Dp(!1),e=t[0];return t=q1.bind(null,t[1]),Dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Dn();if(Pe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),it===null)throw Error(U(349));hs&30||Vy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vp(Ly.bind(null,r,i,t),[t]),r.flags|=2048,Vo(9,My.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Dn(),e=it.identifierPrefix;if(Pe){var n=Yn,r=Gn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Po++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Q1={readContext:mn,useCallback:Hy,useContext:mn,useEffect:Yh,useImperativeHandle:qy,useInsertionEffect:zy,useLayoutEffect:By,useMemo:Wy,useReducer:Rc,useRef:Uy,useState:function(){return Rc(Do)},useDebugValue:Xh,useDeferredValue:function(t){var e=pn();return Ky(e,Ze.memoizedState,t)},useTransition:function(){var t=Rc(Do)[0],e=pn().memoizedState;return[t,e]},useMutableSource:Py,useSyncExternalStore:Dy,useId:Qy,unstable_isNewReconciler:!1},G1={readContext:mn,useCallback:Hy,useContext:mn,useEffect:Yh,useImperativeHandle:qy,useInsertionEffect:zy,useLayoutEffect:By,useMemo:Wy,useReducer:kc,useRef:Uy,useState:function(){return kc(Do)},useDebugValue:Xh,useDeferredValue:function(t){var e=pn();return Ze===null?e.memoizedState=t:Ky(e,Ze.memoizedState,t)},useTransition:function(){var t=kc(Do)[0],e=pn().memoizedState;return[t,e]},useMutableSource:Py,useSyncExternalStore:Dy,useId:Qy,unstable_isNewReconciler:!1};function En(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eu={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mt(),s=Ar(t),i=Xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(In(e,t,s,r),hl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mt(),s=Ar(t),i=Xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(In(e,t,s,r),hl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mt(),r=Ar(t),s=Xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,r),e!==null&&(In(e,t,r,n),hl(e,t,r))}};function Mp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Io(n,r)||!Io(s,i):!0}function Jy(t,e,n){var r=!1,s=Vr,i=e.contextType;return typeof i=="object"&&i!==null?i=mn(i):(s=Ht(e)?cs:jt.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):Vr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Lp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eu.enqueueReplaceState(e,e.state,null)}function Id(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$h(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=mn(i):(i=Ht(e)?cs:jt.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Eu.enqueueReplaceState(s,s.state,null),zl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=E_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Pc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Y1=typeof WeakMap=="function"?WeakMap:Map;function Zy(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wl||(Wl=!0,Od=r),Cd(t,e)},n}function ev(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cd(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Op(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Y1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cb.bind(null,t,e,n),e.then(t,t))}function Fp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Up(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var X1=ar.ReactCurrentOwner,$t=!1;function Vt(t,e,n,r){e.child=t===null?Ay(e,null,n,r):ni(e,t.child,n,r)}function zp(t,e,n,r,s){n=n.render;var i=e.ref;return Ks(e,s),r=Qh(t,e,n,r,i,s),n=Gh(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Pe&&n&&Mh(e),e.flags|=1,Vt(t,e,r,s),e.child)}function Bp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!of(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tv(t,e,i,r,s)):(t=vl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=jr(i,r),t.ref=e.ref,t.return=e,e.child=t}function tv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Io(i,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,nr(t,e,s)}return Ad(t,e,n,r,s)}function nv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(zs,Yt),Yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(zs,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(zs,Yt),Yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(zs,Yt),Yt|=r;return Vt(t,e,s,n),e.child}function rv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ad(t,e,n,r,s){var i=Ht(n)?cs:jt.current;return i=ei(e,i),Ks(e,s),n=Qh(t,e,n,r,i,s),r=Gh(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Pe&&r&&Mh(e),e.flags|=1,Vt(t,e,n,s),e.child)}function $p(t,e,n,r,s){if(Ht(n)){var i=!0;Ml(e)}else i=!1;if(Ks(e,s),e.stateNode===null)pl(t,e),Jy(e,n,r),Id(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=mn(d):(d=Ht(n)?cs:jt.current,d=ei(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Lp(e,o,r,d),gr=!1;var v=e.memoizedState;o.state=v,zl(e,r,o,s),c=e.memoizedState,u!==r||v!==c||qt.current||gr?(typeof m=="function"&&(Sd(e,n,m,r),c=e.memoizedState),(u=gr||Mp(e,n,u,r,v,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ry(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:En(e.type,u),o.props=d,p=e.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mn(c):(c=Ht(n)?cs:jt.current,c=ei(e,c));var N=n.getDerivedStateFromProps;(m=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||v!==c)&&Lp(e,o,r,c),gr=!1,v=e.memoizedState,o.state=v,zl(e,r,o,s);var k=e.memoizedState;u!==p||v!==k||qt.current||gr?(typeof N=="function"&&(Sd(e,n,N,r),k=e.memoizedState),(d=gr||Mp(e,n,d,r,v,k,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return jd(t,e,n,r,i,s)}function jd(t,e,n,r,s,i){rv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Cp(e,n,!1),nr(t,e,i);r=e.stateNode,X1.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,u,i)):Vt(t,e,u,i),e.memoizedState=r.state,s&&Cp(e,n,!0),e.child}function sv(t){var e=t.stateNode;e.pendingContext?Ip(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ip(t,e.context,!1),qh(t,e.containerInfo)}function qp(t,e,n,r,s){return ti(),Oh(s),e.flags|=256,Vt(t,e,n,r),e.child}var Rd={dehydrated:null,treeContext:null,retryLane:0};function kd(t){return{baseLanes:t,cachePool:null,transitions:null}}function iv(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Ve,s&1),t===null)return Nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Su(o,r,0,null),t=as(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kd(n),e.memoizedState=Rd,t):Jh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return J1(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=jr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=jr(u,i):(i=as(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?kd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Rd,r}return i=t.child,t=i.sibling,r=jr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jh(t,e){return e=Su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,n,r){return r!==null&&Oh(r),ni(e,t.child,null,n),t=Jh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Pc(Error(U(422))),Wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Su({mode:"visible",children:r.children},s,0,null),i=as(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=kd(o),e.memoizedState=Rd,i);if(!(e.mode&1))return Wa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(U(419)),r=Pc(i,r,void 0),Wa(t,e,o,r)}if(u=(o&t.childLanes)!==0,$t||u){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),In(r,t,s,-1))}return sf(),r=Pc(Error(U(421))),Wa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=db.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xt=Sr(s.nextSibling),Zt=e,Pe=!0,Tn=null,t!==null&&(un[cn++]=Gn,un[cn++]=Yn,un[cn++]=ds,Gn=t.id,Yn=t.overflow,ds=e),e=Jh(e,r.children),e.flags|=4096,e)}function Hp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Td(t.return,e,n)}function Dc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ov(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hp(t,n,e);else if(t.tag===19)Hp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Dc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Dc(e,!0,n,null,i);break;case"together":Dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Z1(t,e,n){switch(e.tag){case 3:sv(e),ti();break;case 5:ky(e);break;case 1:Ht(e.type)&&Ml(e);break;case 4:qh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Fl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?iv(t,e,n):(Te(Ve,Ve.current&1),t=nr(t,e,n),t!==null?t.sibling:null);Te(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ov(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,nv(t,e,n)}return nr(t,e,n)}var av,Pd,lv,uv;av=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pd=function(){};lv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ss(Ln.current);var i=null;switch(n){case"input":s=td(t,s),r=td(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=sd(t,s),r=sd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dl)}od(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ce("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};uv=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eb(t,e,n){var r=e.pendingProps;switch(Lh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Ht(e.type)&&Vl(),Nt(e),null;case 3:return r=e.stateNode,ri(),Re(qt),Re(jt),Wh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tn!==null&&(zd(Tn),Tn=null))),Pd(t,e),Nt(e),null;case 5:Hh(e);var s=ss(ko.current);if(n=e.type,t!==null&&e.stateNode!=null)lv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Nt(e),null}if(t=ss(Ln.current),qa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vn]=e,r[jo]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<Xi.length;s++)Ce(Xi[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":ep(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":np(r,i),Ce("invalid",r)}od(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&$a(r.textContent,u,t),s=["children",""+u]):wo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Va(r),tp(r,i,!0);break;case"textarea":Va(r),rp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Dl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=L0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vn]=e,t[jo]=r,av(t,e,!1,!1),e.stateNode=t;e:{switch(o=ad(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xi.length;s++)Ce(Xi[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":ep(t,r),s=td(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":np(t,r),s=sd(t,r),Ce("invalid",t);break;default:s=r}od(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?U0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&O0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_o(t,c):typeof c=="number"&&_o(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",t):c!=null&&bh(t,i,c,o))}switch(n){case"input":Va(t),tp(t,r,!1);break;case"textarea":Va(t),rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$s(t,!!r.multiple,i,!1):r.defaultValue!=null&&$s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Dl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)uv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ss(ko.current),ss(Ln.current),qa(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vn]=e,(i=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:$a(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=e,e.stateNode=r}return Nt(e),null;case 13:if(Re(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Xt!==null&&e.mode&1&&!(e.flags&128))Iy(),ti(),e.flags|=98560,i=!1;else if(i=qa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Vn]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),i=!1}else Tn!==null&&(zd(Tn),Tn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?tt===0&&(tt=3):sf())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return ri(),Pd(t,e),t===null&&Co(e.stateNode.containerInfo),Nt(e),null;case 10:return zh(e.type._context),Nt(e),null;case 17:return Ht(e.type)&&Vl(),Nt(e),null;case 19:if(Re(Ve),i=e.memoizedState,i===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qi(i,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bl(t),o!==null){for(e.flags|=128,qi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>ii&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return Nt(e),null}else 2*qe()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Ve.current,Te(Ve,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return rf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function tb(t,e){switch(Lh(e),e.tag){case 1:return Ht(e.type)&&Vl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),Re(qt),Re(jt),Wh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hh(e),null;case 13:if(Re(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Ve),null;case 4:return ri(),null;case 10:return zh(e.type._context),null;case 22:case 23:return rf(),null;case 24:return null;default:return null}}var Ka=!1,It=!1,nb=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Dd(t,e,n){try{n()}catch(r){ze(t,e,r)}}var Wp=!1;function rb(t,e){if(yd=Rl,t=my(),Vh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,m=0,p=t,v=null;t:for(;;){for(var N;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(N=p.firstChild)!==null;)v=p,p=N;for(;;){if(p===t)break t;if(v===n&&++d===s&&(u=o),v===i&&++m===r&&(c=o),(N=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=N}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(vd={focusedElem:t,selectionRange:n},Rl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,j=k.memoizedState,b=e.stateNode,E=b.getSnapshotBeforeUpdate(e.elementType===e.type?C:En(e.type,C),j);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){ze(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return k=Wp,Wp=!1,k}function uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dd(e,n,i)}s=s.next}while(s!==r)}}function Nu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cv(t){var e=t.alternate;e!==null&&(t.alternate=null,cv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vn],delete e[jo],delete e[_d],delete e[F1],delete e[U1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dv(t){return t.tag===5||t.tag===3||t.tag===4}function Kp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dl));else if(r!==4&&(t=t.child,t!==null))for(Md(t,e,n),t=t.sibling;t!==null;)Md(t,e,n),t=t.sibling}function Ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ld(t,e,n),t=t.sibling;t!==null;)Ld(t,e,n),t=t.sibling}var ct=null,Nn=!1;function fr(t,e,n){for(n=n.child;n!==null;)hv(t,e,n),n=n.sibling}function hv(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:It||Us(n,e);case 6:var r=ct,s=Nn;ct=null,fr(t,e,n),ct=r,Nn=s,ct!==null&&(Nn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(Nn?(t=ct,n=n.stateNode,t.nodeType===8?Ic(t.parentNode,n):t.nodeType===1&&Ic(t,n),To(t)):Ic(ct,n.stateNode));break;case 4:r=ct,s=Nn,ct=n.stateNode.containerInfo,Nn=!0,fr(t,e,n),ct=r,Nn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dd(n,e,o),s=s.next}while(s!==r)}fr(t,e,n);break;case 1:if(!It&&(Us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ze(n,e,u)}fr(t,e,n);break;case 21:fr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,fr(t,e,n),It=r):fr(t,e,n);break;default:fr(t,e,n)}}function Qp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nb),e.forEach(function(r){var s=hb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:ct=u.stateNode,Nn=!1;break e;case 3:ct=u.stateNode.containerInfo,Nn=!0;break e;case 4:ct=u.stateNode.containerInfo,Nn=!0;break e}u=u.return}if(ct===null)throw Error(U(160));hv(i,o,s),ct=null,Nn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ze(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fv(e,t),e=e.sibling}function fv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(e,t),Pn(t),r&4){try{uo(3,t,t.return),Nu(3,t)}catch(C){ze(t,t.return,C)}try{uo(5,t,t.return)}catch(C){ze(t,t.return,C)}}break;case 1:bn(e,t),Pn(t),r&512&&n!==null&&Us(n,n.return);break;case 5:if(bn(e,t),Pn(t),r&512&&n!==null&&Us(n,n.return),t.flags&32){var s=t.stateNode;try{_o(s,"")}catch(C){ze(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&V0(s,i),ad(u,o);var d=ad(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?U0(s,p):m==="dangerouslySetInnerHTML"?O0(s,p):m==="children"?_o(s,p):bh(s,m,p,d)}switch(u){case"input":nd(s,i);break;case"textarea":M0(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?$s(s,!!i.multiple,N,!1):v!==!!i.multiple&&(i.defaultValue!=null?$s(s,!!i.multiple,i.defaultValue,!0):$s(s,!!i.multiple,i.multiple?[]:"",!1))}s[jo]=i}catch(C){ze(t,t.return,C)}}break;case 6:if(bn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){ze(t,t.return,C)}}break;case 3:if(bn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{To(e.containerInfo)}catch(C){ze(t,t.return,C)}break;case 4:bn(e,t),Pn(t);break;case 13:bn(e,t),Pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(tf=qe())),r&4&&Qp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(It=(d=It)||m,bn(e,t),It=d):bn(e,t),Pn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(Q=t,m=t.child;m!==null;){for(p=Q=m;Q!==null;){switch(v=Q,N=v.child,v.tag){case 0:case 11:case 14:case 15:uo(4,v,v.return);break;case 1:Us(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(C){ze(r,n,C)}}break;case 5:Us(v,v.return);break;case 22:if(v.memoizedState!==null){Yp(p);continue}}N!==null?(N.return=v,Q=N):Yp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=F0("display",o))}catch(C){ze(t,t.return,C)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(C){ze(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:bn(e,t),Pn(t),r&4&&Qp(t);break;case 21:break;default:bn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_o(s,""),r.flags&=-33);var i=Kp(t);Ld(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Kp(t);Md(t,u,o);break;default:throw Error(U(161))}}catch(c){ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sb(t,e,n){Q=t,mv(t)}function mv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ka;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||It;u=Ka;var d=It;if(Ka=o,(It=c)&&!d)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?Xp(s):c!==null?(c.return=o,Q=c):Xp(s);for(;i!==null;)Q=i,mv(i),i=i.sibling;Q=s,Ka=u,It=d}Gp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Gp(t)}}function Gp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Nu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:En(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pp(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&To(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}It||e.flags&512&&Vd(e)}catch(v){ze(e,e.return,v)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Yp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Xp(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nu(4,e)}catch(c){ze(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ze(e,s,c)}}var i=e.return;try{Vd(e)}catch(c){ze(e,i,c)}break;case 5:var o=e.return;try{Vd(e)}catch(c){ze(e,o,c)}}}catch(c){ze(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var ib=Math.ceil,Hl=ar.ReactCurrentDispatcher,Zh=ar.ReactCurrentOwner,hn=ar.ReactCurrentBatchConfig,he=0,it=null,Ge=null,ft=0,Yt=0,zs=Ur(0),tt=0,Mo=null,fs=0,Tu=0,ef=0,co=null,zt=null,tf=0,ii=1/0,Kn=null,Wl=!1,Od=null,Cr=null,Qa=!1,_r=null,Kl=0,ho=0,Fd=null,gl=-1,yl=0;function Mt(){return he&6?qe():gl!==-1?gl:gl=qe()}function Ar(t){return t.mode&1?he&2&&ft!==0?ft&-ft:B1.transition!==null?(yl===0&&(yl=J0()),yl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:iy(t.type)),t):1}function In(t,e,n,r){if(50<ho)throw ho=0,Fd=null,Error(U(185));Zo(t,n,r),(!(he&2)||t!==it)&&(t===it&&(!(he&2)&&(Tu|=n),tt===4&&xr(t,ft)),Wt(t,r),n===1&&he===0&&!(e.mode&1)&&(ii=qe()+500,_u&&zr()))}function Wt(t,e){var n=t.callbackNode;B_(t,e);var r=jl(t,t===it?ft:0);if(r===0)n!==null&&op(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&op(n),e===1)t.tag===0?z1(Jp.bind(null,t)):Ny(Jp.bind(null,t)),L1(function(){!(he&6)&&zr()}),n=null;else{switch(Z0(r)){case 1:n=Ih;break;case 4:n=Y0;break;case 16:n=Al;break;case 536870912:n=X0;break;default:n=Al}n=bv(n,pv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pv(t,e){if(gl=-1,yl=0,he&6)throw Error(U(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=jl(t,t===it?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ql(t,r);else{e=r;var s=he;he|=2;var i=yv();(it!==t||ft!==e)&&(Kn=null,ii=qe()+500,os(t,e));do try{lb();break}catch(u){gv(t,u)}while(!0);Uh(),Hl.current=i,he=s,Ge!==null?e=0:(it=null,ft=0,e=tt)}if(e!==0){if(e===2&&(s=hd(t),s!==0&&(r=s,e=Ud(t,s))),e===1)throw n=Mo,os(t,0),xr(t,r),Wt(t,qe()),n;if(e===6)xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ob(s)&&(e=Ql(t,r),e===2&&(i=hd(t),i!==0&&(r=i,e=Ud(t,i))),e===1))throw n=Mo,os(t,0),xr(t,r),Wt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:es(t,zt,Kn);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=tf+500-qe(),10<e)){if(jl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wd(es.bind(null,t,zt,Kn),e);break}es(t,zt,Kn);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ib(r/1960))-r,10<r){t.timeoutHandle=wd(es.bind(null,t,zt,Kn),r);break}es(t,zt,Kn);break;case 5:es(t,zt,Kn);break;default:throw Error(U(329))}}}return Wt(t,qe()),t.callbackNode===n?pv.bind(null,t):null}function Ud(t,e){var n=co;return t.current.memoizedState.isDehydrated&&(os(t,e).flags|=256),t=Ql(t,e),t!==2&&(e=zt,zt=n,e!==null&&zd(e)),t}function zd(t){zt===null?zt=t:zt.push.apply(zt,t)}function ob(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~ef,e&=~Tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function Jp(t){if(he&6)throw Error(U(327));Qs();var e=jl(t,0);if(!(e&1))return Wt(t,qe()),null;var n=Ql(t,e);if(t.tag!==0&&n===2){var r=hd(t);r!==0&&(e=r,n=Ud(t,r))}if(n===1)throw n=Mo,os(t,0),xr(t,e),Wt(t,qe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,es(t,zt,Kn),Wt(t,qe()),null}function nf(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(ii=qe()+500,_u&&zr())}}function ms(t){_r!==null&&_r.tag===0&&!(he&6)&&Qs();var e=he;he|=1;var n=hn.transition,r=ye;try{if(hn.transition=null,ye=1,t)return t()}finally{ye=r,hn.transition=n,he=e,!(he&6)&&zr()}}function rf(){Yt=zs.current,Re(zs)}function os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,M1(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Lh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vl();break;case 3:ri(),Re(qt),Re(jt),Wh();break;case 5:Hh(r);break;case 4:ri();break;case 13:Re(Ve);break;case 19:Re(Ve);break;case 10:zh(r.type._context);break;case 22:case 23:rf()}n=n.return}if(it=t,Ge=t=jr(t.current,null),ft=Yt=e,tt=0,Mo=null,ef=Tu=fs=0,zt=co=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}rs=null}return t}function gv(t,e){do{var n=Ge;try{if(Uh(),fl.current=ql,$l){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$l=!1}if(hs=0,rt=Ze=Me=null,lo=!1,Po=0,Zh.current=null,n===null||n.return===null){tt=1,Mo=e,Ge=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ft,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var N=Fp(o);if(N!==null){N.flags&=-257,Up(N,o,u,i,e),N.mode&1&&Op(i,d,e),e=N,c=d;var k=e.updateQueue;if(k===null){var C=new Set;C.add(c),e.updateQueue=C}else k.add(c);break e}else{if(!(e&1)){Op(i,d,e),sf();break e}c=Error(U(426))}}else if(Pe&&u.mode&1){var j=Fp(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Up(j,o,u,i,e),Oh(si(c,u));break e}}i=c=si(c,u),tt!==4&&(tt=2),co===null?co=[i]:co.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=Zy(i,c,e);kp(i,b);break e;case 1:u=c;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Cr===null||!Cr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=ev(i,u,e);kp(i,D);break e}}i=i.return}while(i!==null)}xv(n)}catch(M){e=M,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function yv(){var t=Hl.current;return Hl.current=ql,t===null?ql:t}function sf(){(tt===0||tt===3||tt===2)&&(tt=4),it===null||!(fs&268435455)&&!(Tu&268435455)||xr(it,ft)}function Ql(t,e){var n=he;he|=2;var r=yv();(it!==t||ft!==e)&&(Kn=null,os(t,e));do try{ab();break}catch(s){gv(t,s)}while(!0);if(Uh(),he=n,Hl.current=r,Ge!==null)throw Error(U(261));return it=null,ft=0,tt}function ab(){for(;Ge!==null;)vv(Ge)}function lb(){for(;Ge!==null&&!P_();)vv(Ge)}function vv(t){var e=_v(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?xv(t):Ge=e,Zh.current=null}function xv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tb(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ge=null;return}}else if(n=eb(n,e,Yt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);tt===0&&(tt=5)}function es(t,e,n){var r=ye,s=hn.transition;try{hn.transition=null,ye=1,ub(t,e,n,r)}finally{hn.transition=s,ye=r}return null}function ub(t,e,n,r){do Qs();while(_r!==null);if(he&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($_(t,i),t===it&&(Ge=it=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qa||(Qa=!0,bv(Al,function(){return Qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=hn.transition,hn.transition=null;var o=ye;ye=1;var u=he;he|=4,Zh.current=null,rb(t,n),fv(n,t),A1(vd),Rl=!!yd,vd=yd=null,t.current=n,sb(n),D_(),he=u,ye=o,hn.transition=i}else t.current=n;if(Qa&&(Qa=!1,_r=t,Kl=s),i=t.pendingLanes,i===0&&(Cr=null),L_(n.stateNode),Wt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,t=Od,Od=null,t;return Kl&1&&t.tag!==0&&Qs(),i=t.pendingLanes,i&1?t===Fd?ho++:(ho=0,Fd=t):ho=0,zr(),null}function Qs(){if(_r!==null){var t=Z0(Kl),e=hn.transition,n=ye;try{if(hn.transition=null,ye=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,Kl=0,he&6)throw Error(U(331));var s=he;for(he|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Q=d;Q!==null;){var m=Q;switch(m.tag){case 0:case 11:case 15:uo(8,m,i)}var p=m.child;if(p!==null)p.return=m,Q=p;else for(;Q!==null;){m=Q;var v=m.sibling,N=m.return;if(cv(m),m===d){Q=null;break}if(v!==null){v.return=N,Q=v;break}Q=N}}}var k=i.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var j=C.sibling;C.sibling=null,C=j}while(C!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:uo(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Q=b;break e}Q=i.return}}var E=t.current;for(Q=E;Q!==null;){o=Q;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Q=T;else e:for(o=E;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Nu(9,u)}}catch(M){ze(u,u.return,M)}if(u===o){Q=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,Q=D;break e}Q=u.return}}if(he=s,zr(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{ye=n,hn.transition=e}}return!1}function Zp(t,e,n){e=si(n,e),e=Zy(t,e,1),t=Ir(t,e,1),e=Mt(),t!==null&&(Zo(t,1,e),Wt(t,e))}function ze(t,e,n){if(t.tag===3)Zp(t,t,n);else for(;e!==null;){if(e.tag===3){Zp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=si(n,t),t=ev(e,t,1),e=Ir(e,t,1),t=Mt(),e!==null&&(Zo(e,1,t),Wt(e,t));break}}e=e.return}}function cb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ft&n)===n&&(tt===4||tt===3&&(ft&130023424)===ft&&500>qe()-tf?os(t,0):ef|=n),Wt(t,e)}function wv(t,e){e===0&&(t.mode&1?(e=Oa,Oa<<=1,!(Oa&130023424)&&(Oa=4194304)):e=1);var n=Mt();t=tr(t,e),t!==null&&(Zo(t,e,n),Wt(t,n))}function db(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wv(t,n)}function hb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),wv(t,n)}var _v;_v=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,Z1(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Pe&&e.flags&1048576&&Ty(e,Ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pl(t,e),t=e.pendingProps;var s=ei(e,jt.current);Ks(e,n),s=Qh(null,e,r,t,s,n);var i=Gh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(i=!0,Ml(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$h(e),s.updater=Eu,e.stateNode=s,s._reactInternals=e,Id(e,r,t,n),e=jd(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&Mh(e),Vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mb(r),t=En(r,t),s){case 0:e=Ad(null,e,r,t,n);break e;case 1:e=$p(null,e,r,t,n);break e;case 11:e=zp(null,e,r,t,n);break e;case 14:e=Bp(null,e,r,En(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),Ad(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),$p(t,e,r,s,n);case 3:e:{if(sv(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ry(t,e),zl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(U(423)),e),e=qp(t,e,r,n,s);break e}else if(r!==s){s=si(Error(U(424)),e),e=qp(t,e,r,n,s);break e}else for(Xt=Sr(e.stateNode.containerInfo.firstChild),Zt=e,Pe=!0,Tn=null,n=Ay(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=nr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return ky(e),t===null&&Nd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xd(r,s)?o=null:i!==null&&xd(r,i)&&(e.flags|=32),rv(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&Nd(e),null;case 13:return iv(t,e,n);case 4:return qh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),zp(t,e,r,s,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Fl,r._currentValue),r._currentValue=o,i!==null)if(Cn(i.value,o)){if(i.children===s.children&&!qt.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Xn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Td(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Td(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ks(e,n),s=mn(s),r=r(s),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,s=En(r,e.pendingProps),s=En(r.type,s),Bp(t,e,r,s,n);case 15:return tv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:En(r,s),pl(t,e),e.tag=1,Ht(r)?(t=!0,Ml(e)):t=!1,Ks(e,n),Jy(e,r,s),Id(e,r,s,n),jd(null,e,r,!0,t,n);case 19:return ov(t,e,n);case 22:return nv(t,e,n)}throw Error(U(156,e.tag))};function bv(t,e){return G0(t,e)}function fb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,e,n,r){return new fb(t,e,n,r)}function of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mb(t){if(typeof t=="function")return of(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nh)return 11;if(t===Th)return 14}return 2}function jr(t,e){var n=t.alternate;return n===null?(n=dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")of(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return as(n.children,s,i,e);case Eh:o=8,s|=8;break;case Xc:return t=dn(12,n,e,s|2),t.elementType=Xc,t.lanes=i,t;case Jc:return t=dn(13,n,e,s),t.elementType=Jc,t.lanes=i,t;case Zc:return t=dn(19,n,e,s),t.elementType=Zc,t.lanes=i,t;case k0:return Su(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j0:o=10;break e;case R0:o=9;break e;case Nh:o=11;break e;case Th:o=14;break e;case pr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=dn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function as(t,e,n,r){return t=dn(7,t,r,e),t.lanes=n,t}function Su(t,e,n,r){return t=dn(22,t,r,e),t.elementType=k0,t.lanes=n,t.stateNode={isHidden:!1},t}function Vc(t,e,n){return t=dn(6,t,null,e),t.lanes=n,t}function Mc(t,e,n){return e=dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gc(0),this.expirationTimes=gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function af(t,e,n,r,s,i,o,u,c){return t=new pb(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=dn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$h(i),t}function gb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:js,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ev(t){if(!t)return Vr;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ht(n))return Ey(t,n,e)}return e}function Nv(t,e,n,r,s,i,o,u,c){return t=af(n,r,!0,t,s,i,o,u,c),t.context=Ev(null),n=t.current,r=Mt(),s=Ar(n),i=Xn(r,s),i.callback=e??null,Ir(n,i,s),t.current.lanes=s,Zo(t,s,r),Wt(t,r),t}function Iu(t,e,n,r){var s=e.current,i=Mt(),o=Ar(s);return n=Ev(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(s,e,o),t!==null&&(In(t,s,o,i),hl(t,s,o)),o}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lf(t,e){eg(t,e),(t=t.alternate)&&eg(t,e)}function yb(){return null}var Tv=typeof reportError=="function"?reportError:function(t){console.error(t)};function uf(t){this._internalRoot=t}Cu.prototype.render=uf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Iu(t,e,null,null)};Cu.prototype.unmount=uf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ms(function(){Iu(null,t,null,null)}),e[er]=null}};function Cu(t){this._internalRoot=t}Cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ny();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vr.length&&e!==0&&e<vr[n].priority;n++);vr.splice(n,0,t),n===0&&sy(t)}};function cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tg(){}function vb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Gl(o);i.call(d)}}var o=Nv(e,r,t,0,null,!1,!1,"",tg);return t._reactRootContainer=o,t[er]=o.current,Co(t.nodeType===8?t.parentNode:t),ms(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Gl(c);u.call(d)}}var c=af(t,0,!1,null,null,!1,!1,"",tg);return t._reactRootContainer=c,t[er]=c.current,Co(t.nodeType===8?t.parentNode:t),ms(function(){Iu(e,c,n,r)}),c}function ju(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Gl(o);u.call(c)}}Iu(e,o,t,s)}else o=vb(n,e,t,s,r);return Gl(o)}ey=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yi(e.pendingLanes);n!==0&&(Ch(e,n|1),Wt(e,qe()),!(he&6)&&(ii=qe()+500,zr()))}break;case 13:ms(function(){var r=tr(t,1);if(r!==null){var s=Mt();In(r,t,1,s)}}),lf(t,1)}};Ah=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Mt();In(e,t,134217728,n)}lf(t,134217728)}};ty=function(t){if(t.tag===13){var e=Ar(t),n=tr(t,e);if(n!==null){var r=Mt();In(n,t,e,r)}lf(t,e)}};ny=function(){return ye};ry=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};ud=function(t,e,n){switch(e){case"input":if(nd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wu(r);if(!s)throw Error(U(90));D0(r),nd(r,s)}}}break;case"textarea":M0(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};$0=nf;q0=ms;var xb={usingClientEntryPoint:!1,Events:[ta,Vs,wu,z0,B0,nf]},Hi={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wb={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K0(t),t===null?null:t.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||yb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ga.isDisabled&&Ga.supportsFiber)try{gu=Ga.inject(wb),Mn=Ga}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xb;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cf(e))throw Error(U(200));return gb(t,e,null,n)};tn.createRoot=function(t,e){if(!cf(t))throw Error(U(299));var n=!1,r="",s=Tv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=af(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,Co(t.nodeType===8?t.parentNode:t),new uf(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=K0(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return ms(t)};tn.hydrate=function(t,e,n){if(!Au(e))throw Error(U(200));return ju(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!cf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Tv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Nv(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,Co(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cu(e)};tn.render=function(t,e,n){if(!Au(e))throw Error(U(200));return ju(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!Au(t))throw Error(U(40));return t._reactRootContainer?(ms(function(){ju(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};tn.unstable_batchedUpdates=nf;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Au(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return ju(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function Sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sv)}catch(t){console.error(t)}}Sv(),S0.exports=tn;var Bs=S0.exports,Iv,ng=Bs;Iv=ng.createRoot,ng.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _b={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...d},m)=>R.createElement("svg",{ref:m,..._b,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${bb(t)}`,u].join(" "),...d},[...e.map(([p,v])=>R.createElement(p,v)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=we("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=we("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=we("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=we("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=we("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=we("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=we("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=we("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=we("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=we("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=we("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=we("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ab=({children:t,currentPage:e,onPageChange:n})=>{const[r,s]=R.useState(!1),i=[{id:"dashboard",name:"대시보드",icon:Gs},{id:"demand-register",name:"수요처 등록",icon:Fo},{id:"demand-list",name:"수요처 관리",icon:ls},{id:"performance-input",name:"실적 입력",icon:Xl},{id:"performance-list",name:"실적 조회",icon:ai},{id:"budget-usage",name:"예산 사용 내역",icon:ls},{id:"manual",name:"사용매뉴얼",icon:Bd}],o=u=>{n(u),s(!1)};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs("div",{className:"lg:hidden mobile-header bg-white shadow-sm border-b border-gray-200 px-4 py-3 flex items-center justify-between sticky top-0 z-30",children:[l.jsx("h1",{className:"text-lg font-bold text-gray-900 truncate",children:"관리자 대시보드"}),l.jsx("button",{onClick:()=>s(!r),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":r?"메뉴 닫기":"메뉴 열기",children:r?l.jsx(li,{className:"w-6 h-6"}):l.jsx(Ib,{className:"w-6 h-6"})})]}),r&&l.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50 touch-none",onClick:()=>s(!1),onTouchStart:u=>u.preventDefault()}),l.jsxs("div",{className:"hidden lg:block fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[l.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200 px-4",children:l.jsx("h1",{className:"text-xl font-bold text-gray-900 truncate",children:"관리자 대시보드"})}),l.jsx("nav",{className:"sidebar-nav mt-4 pb-4",children:l.jsx("div",{className:"space-y-1 px-4",children:i.map(u=>{const c=u.icon;return l.jsxs("button",{onClick:()=>o(u.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors min-h-[48px] ${e===u.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,"aria-current":e===u.id?"page":void 0,children:[l.jsx(c,{className:"mr-3 h-5 w-5 flex-shrink-0"}),l.jsx("span",{className:"truncate text-left",children:u.name})]},u.id)})})})]}),l.jsxs("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out ${r?"translate-x-0":"-translate-x-full"}`,children:[l.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200 px-4",children:l.jsx("h1",{className:"text-lg font-bold text-gray-900 truncate",children:"메뉴"})}),l.jsx("nav",{className:"sidebar-nav mt-4 pb-4",children:l.jsx("div",{className:"space-y-1 px-4",children:i.map(u=>{const c=u.icon;return l.jsxs("button",{onClick:()=>o(u.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors min-h-[48px] ${e===u.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,"aria-current":e===u.id?"page":void 0,children:[l.jsx(c,{className:"mr-3 h-5 w-5 flex-shrink-0"}),l.jsx("span",{className:"truncate text-left",children:u.name})]},u.id)})})})]}),l.jsx("div",{className:"lg:pl-64 pt-16 lg:pt-0",children:l.jsx("main",{className:"p-4 lg:p-8 min-h-screen",children:t})})]})};function jb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return R.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const ku=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xi(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function ff(t){return"nodeType"in t}function Qt(t){var e,n;return t?xi(t)?t:ff(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function mf(t){const{Document:e}=Qt(t);return t instanceof e}function ra(t){return xi(t)?!1:t instanceof Qt(t).HTMLElement}function Pv(t){return t instanceof Qt(t).SVGElement}function wi(t){return t?xi(t)?t.document:ff(t)?mf(t)?t:ra(t)||Pv(t)?t.ownerDocument:document:document:document}const Un=ku?R.useLayoutEffect:R.useEffect;function pf(t){const e=R.useRef(t);return Un(()=>{e.current=t}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Rb(){const t=R.useRef(null),e=R.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=R.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Uo(t,e){e===void 0&&(e=[t]);const n=R.useRef(t);return Un(()=>{n.current!==t&&(n.current=t)},e),n}function sa(t,e){const n=R.useRef();return R.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Jl(t){const e=pf(t),n=R.useRef(null),r=R.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function $d(t){const e=R.useRef();return R.useEffect(()=>{e.current=t},[t]),e.current}let Oc={};function ia(t,e){return R.useMemo(()=>{if(e)return e;const n=Oc[t]==null?0:Oc[t]+1;return Oc[t]=n,t+"-"+n},[t,e])}function Dv(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const u=Object.entries(o);for(const[c,d]of u){const m=i[c];m!=null&&(i[c]=m+t*d)}return i},{...e})}}const Ys=Dv(1),Zl=Dv(-1);function kb(t){return"clientX"in t&&"clientY"in t}function gf(t){if(!t)return!1;const{KeyboardEvent:e}=Qt(t.target);return e&&t instanceof e}function Pb(t){if(!t)return!1;const{TouchEvent:e}=Qt(t.target);return e&&t instanceof e}function qd(t){if(Pb(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return kb(t)?{x:t.clientX,y:t.clientY}:null}const zo=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[zo.Translate.toString(t),zo.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),rg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Db(t){return t.matches(rg)?t:t.querySelector(rg)}const Vb={display:"none"};function Mb(t){let{id:e,value:n}=t;return Ut.createElement("div",{id:e,style:Vb},n)}function Lb(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ut.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ob(){const[t,e]=R.useState("");return{announce:R.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Vv=R.createContext(null);function Fb(t){const e=R.useContext(Vv);R.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Ub(){const[t]=R.useState(()=>new Set),e=R.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[R.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var u;return(u=o[s])==null?void 0:u.call(o,i)})},[t]),e]}const zb={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Bb={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function $b(t){let{announcements:e=Bb,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=zb}=t;const{announce:i,announcement:o}=Ob(),u=ia("DndLiveRegion"),[c,d]=R.useState(!1);if(R.useEffect(()=>{d(!0)},[]),Fb(R.useMemo(()=>({onDragStart(p){let{active:v}=p;i(e.onDragStart({active:v}))},onDragMove(p){let{active:v,over:N}=p;e.onDragMove&&i(e.onDragMove({active:v,over:N}))},onDragOver(p){let{active:v,over:N}=p;i(e.onDragOver({active:v,over:N}))},onDragEnd(p){let{active:v,over:N}=p;i(e.onDragEnd({active:v,over:N}))},onDragCancel(p){let{active:v,over:N}=p;i(e.onDragCancel({active:v,over:N}))}}),[i,e])),!c)return null;const m=Ut.createElement(Ut.Fragment,null,Ut.createElement(Mb,{id:r,value:s.draggable}),Ut.createElement(Lb,{id:u,announcement:o}));return n?Bs.createPortal(m,n):m}var et;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(et||(et={}));function eu(){}function qb(t,e){return R.useMemo(()=>({sensor:t,options:{}}),[t,e])}function Hb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return R.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const An=Object.freeze({x:0,y:0});function Wb(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Kb(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function Qb(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Gb(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function sg(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Yb=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=sg(e,e.left,e.top),i=[];for(const o of r){const{id:u}=o,c=n.get(u);if(c){const d=Wb(sg(c),s);i.push({id:u,data:{droppableContainer:o,value:d}})}}return i.sort(Kb)};function Xb(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,u=i-n;if(r<s&&n<i){const c=e.width*e.height,d=t.width*t.height,m=o*u,p=m/(c+d-m);return Number(p.toFixed(4))}return 0}const Jb=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,u=n.get(o);if(u){const c=Xb(u,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(Qb)};function Zb(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Mv(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:An}function eE(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,u)=>({...o,top:o.top+t*u.y,bottom:o.bottom+t*u.y,left:o.left+t*u.x,right:o.right+t*u.x}),{...n})}}const tE=eE(1);function nE(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function rE(t,e,n){const r=nE(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:u}=r,c=t.left-o-(1-s)*parseFloat(n),d=t.top-u-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),m=s?t.width/s:t.width,p=i?t.height/i:t.height;return{width:m,height:p,top:d,right:c+m,bottom:d+p,left:c}}const sE={ignoreTransform:!1};function _i(t,e){e===void 0&&(e=sE);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:m}=Qt(t).getComputedStyle(t);d&&(n=rE(n,d,m))}const{top:r,left:s,width:i,height:o,bottom:u,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:u,right:c}}function ig(t){return _i(t,{ignoreTransform:!0})}function iE(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function oE(t,e){return e===void 0&&(e=Qt(t).getComputedStyle(t)),e.position==="fixed"}function aE(t,e){e===void 0&&(e=Qt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function yf(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(mf(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ra(s)||Pv(s)||n.includes(s))return n;const i=Qt(t).getComputedStyle(s);return s!==t&&aE(s,i)&&n.push(s),oE(s,i)?n:r(s.parentNode)}return t?r(t):n}function Lv(t){const[e]=yf(t,1);return e??null}function Fc(t){return!ku||!t?null:xi(t)?t:ff(t)?mf(t)||t===wi(t).scrollingElement?window:ra(t)?t:null:null}function Ov(t){return xi(t)?t.scrollX:t.scrollLeft}function Fv(t){return xi(t)?t.scrollY:t.scrollTop}function Hd(t){return{x:Ov(t),y:Fv(t)}}var st;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(st||(st={}));function Uv(t){return!ku||!t?!1:t===document.scrollingElement}function zv(t){const e={x:0,y:0},n=Uv(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:u,maxScroll:r,minScroll:e}}const lE={x:.2,y:.2};function uE(t,e,n,r,s){let{top:i,left:o,right:u,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=lE);const{isTop:d,isBottom:m,isLeft:p,isRight:v}=zv(t),N={x:0,y:0},k={x:0,y:0},C={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+C.height?(N.y=st.Backward,k.y=r*Math.abs((e.top+C.height-i)/C.height)):!m&&c>=e.bottom-C.height&&(N.y=st.Forward,k.y=r*Math.abs((e.bottom-C.height-c)/C.height)),!v&&u>=e.right-C.width?(N.x=st.Forward,k.x=r*Math.abs((e.right-C.width-u)/C.width)):!p&&o<=e.left+C.width&&(N.x=st.Backward,k.x=r*Math.abs((e.left+C.width-o)/C.width)),{direction:N,speed:k}}function cE(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Bv(t){return t.reduce((e,n)=>Ys(e,Hd(n)),An)}function dE(t){return t.reduce((e,n)=>e+Ov(n),0)}function hE(t){return t.reduce((e,n)=>e+Fv(n),0)}function fE(t,e){if(e===void 0&&(e=_i),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Lv(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const mE=[["x",["left","right"],dE],["y",["top","bottom"],hE]];class vf{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=yf(n),s=Bv(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,u]of mE)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=u(r),m=s[i]-d;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class fo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function pE(t){const{EventTarget:e}=Qt(t);return t instanceof e?t:wi(t)}function Uc(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var ln;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ln||(ln={}));function og(t){t.preventDefault()}function gE(t){t.stopPropagation()}var ge;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ge||(ge={}));const $v={start:[ge.Space,ge.Enter],cancel:[ge.Esc],end:[ge.Space,ge.Enter,ge.Tab]},yE=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ge.Right:return{...n,x:n.x+25};case ge.Left:return{...n,x:n.x-25};case ge.Down:return{...n,y:n.y+25};case ge.Up:return{...n,y:n.y-25}}};class qv{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new fo(wi(n)),this.windowListeners=new fo(Qt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ln.Resize,this.handleCancel),this.windowListeners.add(ln.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ln.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&fE(r),n(An)}handleKeyDown(e){if(gf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=$v,coordinateGetter:o=yE,scrollBehavior:u="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=r.current,m=d?{x:d.left,y:d.top}:An;this.referenceCoordinates||(this.referenceCoordinates=m);const p=o(e,{active:n,context:r.current,currentCoordinates:m});if(p){const v=Zl(p,m),N={x:0,y:0},{scrollableAncestors:k}=r.current;for(const C of k){const j=e.code,{isTop:b,isRight:E,isLeft:T,isBottom:D,maxScroll:M,minScroll:L}=zv(C),_=cE(C),y={x:Math.min(j===ge.Right?_.right-_.width/2:_.right,Math.max(j===ge.Right?_.left:_.left+_.width/2,p.x)),y:Math.min(j===ge.Down?_.bottom-_.height/2:_.bottom,Math.max(j===ge.Down?_.top:_.top+_.height/2,p.y))},g=j===ge.Right&&!E||j===ge.Left&&!T,x=j===ge.Down&&!D||j===ge.Up&&!b;if(g&&y.x!==p.x){const S=C.scrollLeft+v.x,A=j===ge.Right&&S<=M.x||j===ge.Left&&S>=L.x;if(A&&!v.y){C.scrollTo({left:S,behavior:u});return}A?N.x=C.scrollLeft-S:N.x=j===ge.Right?C.scrollLeft-M.x:C.scrollLeft-L.x,N.x&&C.scrollBy({left:-N.x,behavior:u});break}else if(x&&y.y!==p.y){const S=C.scrollTop+v.y,A=j===ge.Down&&S<=M.y||j===ge.Up&&S>=L.y;if(A&&!v.x){C.scrollTo({top:S,behavior:u});return}A?N.y=C.scrollTop-S:N.y=j===ge.Down?C.scrollTop-M.y:C.scrollTop-L.y,N.y&&C.scrollBy({top:-N.y,behavior:u});break}}this.handleMove(e,Ys(Zl(p,this.referenceCoordinates),N))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}qv.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=$v,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const u=i.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function ag(t){return!!(t&&"distance"in t)}function lg(t){return!!(t&&"delay"in t)}class xf{constructor(e,n,r){var s;r===void 0&&(r=pE(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=wi(o),this.documentListeners=new fo(this.document),this.listeners=new fo(r),this.windowListeners=new fo(Qt(o)),this.initialCoordinates=(s=qd(i))!=null?s:An,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ln.Resize,this.handleCancel),this.windowListeners.add(ln.DragStart,og),this.windowListeners.add(ln.VisibilityChange,this.handleCancel),this.windowListeners.add(ln.ContextMenu,og),this.documentListeners.add(ln.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(lg(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ag(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ln.Click,gE,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ln.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:u}}=i;if(!s)return;const c=(n=qd(e))!=null?n:An,d=Zl(s,c);if(!r&&u){if(ag(u)){if(u.tolerance!=null&&Uc(d,u.tolerance))return this.handleCancel();if(Uc(d,u.distance))return this.handleStart()}if(lg(u)&&Uc(d,u.tolerance))return this.handleCancel();this.handlePending(u,d);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ge.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const vE={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class wf extends xf{constructor(e){const{event:n}=e,r=wi(n.target);super(e,vE,r)}}wf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const xE={move:{name:"mousemove"},end:{name:"mouseup"}};var Wd;(function(t){t[t.RightClick=2]="RightClick"})(Wd||(Wd={}));class wE extends xf{constructor(e){super(e,xE,wi(e.event.target))}}wE.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Wd.RightClick?!1:(r==null||r({event:n}),!0)}}];const zc={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class _E extends xf{constructor(e){super(e,zc)}static setup(){return window.addEventListener(zc.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(zc.move.name,e)};function e(){}}}_E.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var mo;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(mo||(mo={}));var tu;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(tu||(tu={}));function bE(t){let{acceleration:e,activator:n=mo.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:u=tu.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:m,delta:p,threshold:v}=t;const N=NE({delta:p,disabled:!i}),[k,C]=Rb(),j=R.useRef({x:0,y:0}),b=R.useRef({x:0,y:0}),E=R.useMemo(()=>{switch(n){case mo.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case mo.DraggableRect:return s}},[n,s,c]),T=R.useRef(null),D=R.useCallback(()=>{const L=T.current;if(!L)return;const _=j.current.x*b.current.x,y=j.current.y*b.current.y;L.scrollBy(_,y)},[]),M=R.useMemo(()=>u===tu.TreeOrder?[...d].reverse():d,[u,d]);R.useEffect(()=>{if(!i||!d.length||!E){C();return}for(const L of M){if((r==null?void 0:r(L))===!1)continue;const _=d.indexOf(L),y=m[_];if(!y)continue;const{direction:g,speed:x}=uE(L,y,E,e,v);for(const S of["x","y"])N[S][g[S]]||(x[S]=0,g[S]=0);if(x.x>0||x.y>0){C(),T.current=L,k(D,o),j.current=x,b.current=g;return}}j.current={x:0,y:0},b.current={x:0,y:0},C()},[e,D,r,C,i,o,JSON.stringify(E),JSON.stringify(N),k,d,M,m,JSON.stringify(v)])}const EE={x:{[st.Backward]:!1,[st.Forward]:!1},y:{[st.Backward]:!1,[st.Forward]:!1}};function NE(t){let{delta:e,disabled:n}=t;const r=$d(e);return sa(s=>{if(n||!r||!s)return EE;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[st.Backward]:s.x[st.Backward]||i.x===-1,[st.Forward]:s.x[st.Forward]||i.x===1},y:{[st.Backward]:s.y[st.Backward]||i.y===-1,[st.Forward]:s.y[st.Forward]||i.y===1}}},[n,e,r])}function TE(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return sa(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function SE(t,e){return R.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Bo;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Bo||(Bo={}));var Kd;(function(t){t.Optimized="optimized"})(Kd||(Kd={}));const ug=new Map;function IE(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=R.useState(null),{frequency:u,measure:c,strategy:d}=s,m=R.useRef(t),p=j(),v=Uo(p),N=R.useCallback(function(b){b===void 0&&(b=[]),!v.current&&o(E=>E===null?b:E.concat(b.filter(T=>!E.includes(T))))},[v]),k=R.useRef(null),C=sa(b=>{if(p&&!n)return ug;if(!b||b===ug||m.current!==t||i!=null){const E=new Map;for(let T of t){if(!T)continue;if(i&&i.length>0&&!i.includes(T.id)&&T.rect.current){E.set(T.id,T.rect.current);continue}const D=T.node.current,M=D?new vf(c(D),D):null;T.rect.current=M,M&&E.set(T.id,M)}return E}return b},[t,i,n,p,c]);return R.useEffect(()=>{m.current=t},[t]),R.useEffect(()=>{p||N()},[n,p]),R.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),R.useEffect(()=>{p||typeof u!="number"||k.current!==null||(k.current=setTimeout(()=>{N(),k.current=null},u))},[u,p,N,...r]),{droppableRects:C,measureDroppableContainers:N,measuringScheduled:i!=null};function j(){switch(d){case Bo.Always:return!1;case Bo.BeforeDragging:return n;default:return!n}}}function Hv(t,e){return sa(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function CE(t,e){return Hv(t,e)}function AE(t){let{callback:e,disabled:n}=t;const r=pf(e),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Pu(t){let{callback:e,disabled:n}=t;const r=pf(e),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function jE(t){return new vf(_i(t),t)}function cg(t,e,n){e===void 0&&(e=jE);const[r,s]=R.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=c??n)!=null?d:null}const m=e(t);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const o=AE({callback(c){if(t)for(const d of c){const{type:m,target:p}=d;if(m==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),u=Pu({callback:i});return Un(()=>{i(),t?(u==null||u.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),o==null||o.disconnect())},[t]),r}function RE(t){const e=Hv(t);return Mv(t,e)}const dg=[];function kE(t){const e=R.useRef(t),n=sa(r=>t?r&&r!==dg&&t&&e.current&&t.parentNode===e.current.parentNode?r:yf(t):dg,[t]);return R.useEffect(()=>{e.current=t},[t]),n}function PE(t){const[e,n]=R.useState(null),r=R.useRef(t),s=R.useCallback(i=>{const o=Fc(i.target);o&&n(u=>u?(u.set(o,Hd(o)),new Map(u)):null)},[]);return R.useEffect(()=>{const i=r.current;if(t!==i){o(i);const u=t.map(c=>{const d=Fc(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Hd(d)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=t}return()=>{o(t),o(i)};function o(u){u.forEach(c=>{const d=Fc(c);d==null||d.removeEventListener("scroll",s)})}},[s,t]),R.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Ys(i,o),An):Bv(t):An,[t,e])}function hg(t,e){e===void 0&&(e=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},e),R.useEffect(()=>{const r=t!==An;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Zl(t,n.current):An}function DE(t){R.useEffect(()=>{if(!ku)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function VE(t,e){return R.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function Wv(t){return R.useMemo(()=>t?iE(t):null,[t])}const fg=[];function ME(t,e){e===void 0&&(e=_i);const[n]=t,r=Wv(n?Qt(n):null),[s,i]=R.useState(fg);function o(){i(()=>t.length?t.map(c=>Uv(c)?r:new vf(e(c),c)):fg)}const u=Pu({callback:o});return Un(()=>{u==null||u.disconnect(),o(),t.forEach(c=>u==null?void 0:u.observe(c))},[t]),s}function LE(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ra(e)?e:t}function OE(t){let{measure:e}=t;const[n,r]=R.useState(null),s=R.useCallback(d=>{for(const{target:m}of d)if(ra(m)){r(p=>{const v=e(m);return p?{...p,width:v.width,height:v.height}:v});break}},[e]),i=Pu({callback:s}),o=R.useCallback(d=>{const m=LE(d);i==null||i.disconnect(),m&&(i==null||i.observe(m)),r(m?e(m):null)},[e,i]),[u,c]=Jl(o);return R.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const FE=[{sensor:wf,options:{}},{sensor:qv,options:{}}],UE={current:{}},xl={draggable:{measure:ig},droppable:{measure:ig,strategy:Bo.WhileDragging,frequency:Kd.Optimized},dragOverlay:{measure:_i}};class po extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const zE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new po,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xl,measureDroppableContainers:eu,windowRect:null,measuringScheduled:!1},BE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eu,draggableNodes:new Map,over:null,measureDroppableContainers:eu},Du=R.createContext(BE),Kv=R.createContext(zE);function $E(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new po}}}function qE(t,e){switch(e.type){case et.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case et.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case et.DragEnd:case et.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case et.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new po(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case et.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new po(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case et.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new po(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function HE(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=R.useContext(Du),i=$d(r),o=$d(n==null?void 0:n.id);return R.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!gf(i)||document.activeElement===i.target)return;const u=s.get(o);if(!u)return;const{activatorNode:c,node:d}=u;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const m of[c.current,d.current]){if(!m)continue;const p=Db(m);if(p){p.focus();break}}})}},[r,e,s,o,i]),null}function WE(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function KE(t){return R.useMemo(()=>({draggable:{...xl.draggable,...t==null?void 0:t.draggable},droppable:{...xl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...xl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function QE(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=R.useRef(!1),{x:o,y:u}=typeof s=="boolean"?{x:s,y:s}:s;Un(()=>{if(!o&&!u||!e){i.current=!1;return}if(i.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const m=n(d),p=Mv(m,r);if(o||(p.x=0),u||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=Lv(d);v&&v.scrollBy({top:p.y,left:p.x})}},[e,o,u,r,n])}const Qv=R.createContext({...An,scaleX:1,scaleY:1});var yr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(yr||(yr={}));const GE=R.memo(function(e){var n,r,s,i;let{id:o,accessibility:u,autoScroll:c=!0,children:d,sensors:m=FE,collisionDetection:p=Jb,measuring:v,modifiers:N,...k}=e;const C=R.useReducer(qE,void 0,$E),[j,b]=C,[E,T]=Ub(),[D,M]=R.useState(yr.Uninitialized),L=D===yr.Initialized,{draggable:{active:_,nodes:y,translate:g},droppable:{containers:x}}=j,S=_!=null?y.get(_):null,A=R.useRef({initial:null,translated:null}),I=R.useMemo(()=>{var Ke;return _!=null?{id:_,data:(Ke=S==null?void 0:S.data)!=null?Ke:UE,rect:A}:null},[_,S]),re=R.useRef(null),[Se,ot]=R.useState(null),[Z,B]=R.useState(null),W=Uo(k,Object.values(k)),Y=ia("DndDescribedBy",o),fe=R.useMemo(()=>x.getEnabled(),[x]),$=KE(v),{droppableRects:X,measureDroppableContainers:_e,measuringScheduled:be}=IE(fe,{dragging:L,dependencies:[g.x,g.y],config:$.droppable}),xe=TE(y,_),Xe=R.useMemo(()=>Z?qd(Z):null,[Z]),Rt=Wr(),He=CE(xe,$.draggable.measure);QE({activeNode:_!=null?y.get(_):null,config:Rt.layoutShiftCompensation,initialRect:He,measure:$.draggable.measure});const se=cg(xe,$.draggable.measure,He),rn=cg(xe?xe.parentElement:null),yt=R.useRef({activatorEvent:null,active:null,activeNode:xe,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:x,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Je=x.getNodeFor((n=yt.current.over)==null?void 0:n.id),kt=OE({measure:$.dragOverlay.measure}),sn=(r=kt.nodeRef.current)!=null?r:xe,gn=L?(s=kt.rect)!=null?s:se:null,qr=!!(kt.nodeRef.current&&kt.rect),$n=RE(qr?null:se),z=Wv(sn?Qt(sn):null),H=kE(L?Je??xe:null),oe=ME(H),le=WE(N,{transform:{x:g.x-$n.x,y:g.y-$n.y,scaleX:1,scaleY:1},activatorEvent:Z,active:I,activeNodeRect:se,containerNodeRect:rn,draggingNodeRect:gn,over:yt.current.over,overlayNodeRect:kt.rect,scrollableAncestors:H,scrollableAncestorRects:oe,windowRect:z}),Ft=Xe?Ys(Xe,g):null,yn=PE(H),Rn=hg(yn),We=hg(yn,[se]),Fe=Ys(le,Rn),vn=gn?tE(gn,le):null,lr=I&&vn?p({active:I,collisionRect:vn,droppableRects:X,droppableContainers:fe,pointerCoordinates:Ft}):null,Ci=Gb(lr,"id"),[kn,ur]=R.useState(null),ma=qr?le:Ys(le,We),pa=Zb(ma,(i=kn==null?void 0:kn.rect)!=null?i:null,se),Hr=R.useRef(null),ga=R.useCallback((Ke,at)=>{let{sensor:Be,options:xn}=at;if(re.current==null)return;const lt=y.get(re.current);if(!lt)return;const vt=Ke.nativeEvent,xt=new Be({active:re.current,activeNode:lt,event:vt,options:xn,context:yt,onAbort(ce){if(!y.get(ce))return;const{onDragAbort:wt}=W.current,Pt={id:ce};wt==null||wt(Pt),E({type:"onDragAbort",event:Pt})},onPending(ce,wn,wt,Pt){if(!y.get(ce))return;const{onDragPending:Qr}=W.current,Dt={id:ce,constraint:wn,initialCoordinates:wt,offset:Pt};Qr==null||Qr(Dt),E({type:"onDragPending",event:Dt})},onStart(ce){const wn=re.current;if(wn==null)return;const wt=y.get(wn);if(!wt)return;const{onDragStart:Pt}=W.current,Kr={activatorEvent:vt,active:{id:wn,data:wt.data,rect:A}};Bs.unstable_batchedUpdates(()=>{Pt==null||Pt(Kr),M(yr.Initializing),b({type:et.DragStart,initialCoordinates:ce,active:wn}),E({type:"onDragStart",event:Kr}),ot(Hr.current),B(vt)})},onMove(ce){b({type:et.DragMove,coordinates:ce})},onEnd:qn(et.DragEnd),onCancel:qn(et.DragCancel)});Hr.current=xt;function qn(ce){return async function(){const{active:wt,collisions:Pt,over:Kr,scrollAdjustedTranslate:Qr}=yt.current;let Dt=null;if(wt&&Qr){const{cancelDrop:Gr}=W.current;Dt={activatorEvent:vt,active:wt,collisions:Pt,delta:Qr,over:Kr},ce===et.DragEnd&&typeof Gr=="function"&&await Promise.resolve(Gr(Dt))&&(ce=et.DragCancel)}re.current=null,Bs.unstable_batchedUpdates(()=>{b({type:ce}),M(yr.Uninitialized),ur(null),ot(null),B(null),Hr.current=null;const Gr=ce===et.DragEnd?"onDragEnd":"onDragCancel";if(Dt){const Ai=W.current[Gr];Ai==null||Ai(Dt),E({type:Gr,event:Dt})}})}}},[y]),Ju=R.useCallback((Ke,at)=>(Be,xn)=>{const lt=Be.nativeEvent,vt=y.get(xn);if(re.current!==null||!vt||lt.dndKit||lt.defaultPrevented)return;const xt={active:vt};Ke(Be,at.options,xt)===!0&&(lt.dndKit={capturedBy:at.sensor},re.current=xn,ga(Be,at))},[y,ga]),bs=SE(m,Ju);DE(m),Un(()=>{se&&D===yr.Initializing&&M(yr.Initialized)},[se,D]),R.useEffect(()=>{const{onDragMove:Ke}=W.current,{active:at,activatorEvent:Be,collisions:xn,over:lt}=yt.current;if(!at||!Be)return;const vt={active:at,activatorEvent:Be,collisions:xn,delta:{x:Fe.x,y:Fe.y},over:lt};Bs.unstable_batchedUpdates(()=>{Ke==null||Ke(vt),E({type:"onDragMove",event:vt})})},[Fe.x,Fe.y]),R.useEffect(()=>{const{active:Ke,activatorEvent:at,collisions:Be,droppableContainers:xn,scrollAdjustedTranslate:lt}=yt.current;if(!Ke||re.current==null||!at||!lt)return;const{onDragOver:vt}=W.current,xt=xn.get(Ci),qn=xt&&xt.rect.current?{id:xt.id,rect:xt.rect.current,data:xt.data,disabled:xt.disabled}:null,ce={active:Ke,activatorEvent:at,collisions:Be,delta:{x:lt.x,y:lt.y},over:qn};Bs.unstable_batchedUpdates(()=>{ur(qn),vt==null||vt(ce),E({type:"onDragOver",event:ce})})},[Ci]),Un(()=>{yt.current={activatorEvent:Z,active:I,activeNode:xe,collisionRect:vn,collisions:lr,droppableRects:X,draggableNodes:y,draggingNode:sn,draggingNodeRect:gn,droppableContainers:x,over:kn,scrollableAncestors:H,scrollAdjustedTranslate:Fe},A.current={initial:gn,translated:vn}},[I,xe,lr,vn,y,sn,gn,X,x,kn,H,Fe]),bE({...Rt,delta:g,draggingRect:vn,pointerCoordinates:Ft,scrollableAncestors:H,scrollableAncestorRects:oe});const ya=R.useMemo(()=>({active:I,activeNode:xe,activeNodeRect:se,activatorEvent:Z,collisions:lr,containerNodeRect:rn,dragOverlay:kt,draggableNodes:y,droppableContainers:x,droppableRects:X,over:kn,measureDroppableContainers:_e,scrollableAncestors:H,scrollableAncestorRects:oe,measuringConfiguration:$,measuringScheduled:be,windowRect:z}),[I,xe,se,Z,lr,rn,kt,y,x,X,kn,_e,H,oe,$,be,z]),va=R.useMemo(()=>({activatorEvent:Z,activators:bs,active:I,activeNodeRect:se,ariaDescribedById:{draggable:Y},dispatch:b,draggableNodes:y,over:kn,measureDroppableContainers:_e}),[Z,bs,I,se,b,Y,y,kn,_e]);return Ut.createElement(Vv.Provider,{value:T},Ut.createElement(Du.Provider,{value:va},Ut.createElement(Kv.Provider,{value:ya},Ut.createElement(Qv.Provider,{value:pa},d)),Ut.createElement(HE,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Ut.createElement($b,{...u,hiddenTextDescribedById:Y}));function Wr(){const Ke=(Se==null?void 0:Se.autoScrollEnabled)===!1,at=typeof c=="object"?c.enabled===!1:c===!1,Be=L&&!Ke&&!at;return typeof c=="object"?{...c,enabled:Be}:{enabled:Be}}}),YE=R.createContext(null),mg="button",XE="Draggable";function JE(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=ia(XE),{activators:o,activatorEvent:u,active:c,activeNodeRect:d,ariaDescribedById:m,draggableNodes:p,over:v}=R.useContext(Du),{role:N=mg,roleDescription:k="draggable",tabIndex:C=0}=s??{},j=(c==null?void 0:c.id)===e,b=R.useContext(j?Qv:YE),[E,T]=Jl(),[D,M]=Jl(),L=VE(o,e),_=Uo(n);Un(()=>(p.set(e,{id:e,key:i,node:E,activatorNode:D,data:_}),()=>{const g=p.get(e);g&&g.key===i&&p.delete(e)}),[p,e]);const y=R.useMemo(()=>({role:N,tabIndex:C,"aria-disabled":r,"aria-pressed":j&&N===mg?!0:void 0,"aria-roledescription":k,"aria-describedby":m.draggable}),[r,N,C,j,k,m.draggable]);return{active:c,activatorEvent:u,activeNodeRect:d,attributes:y,isDragging:j,listeners:r?void 0:L,node:E,over:v,setNodeRef:T,setActivatorNodeRef:M,transform:b}}function ZE(){return R.useContext(Kv)}const eN="Droppable",tN={timeout:25};function nN(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=ia(eN),{active:o,dispatch:u,over:c,measureDroppableContainers:d}=R.useContext(Du),m=R.useRef({disabled:n}),p=R.useRef(!1),v=R.useRef(null),N=R.useRef(null),{disabled:k,updateMeasurementsFor:C,timeout:j}={...tN,...s},b=Uo(C??r),E=R.useCallback(()=>{if(!p.current){p.current=!0;return}N.current!=null&&clearTimeout(N.current),N.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),N.current=null},j)},[j]),T=Pu({callback:E,disabled:k||!o}),D=R.useCallback((y,g)=>{T&&(g&&(T.unobserve(g),p.current=!1),y&&T.observe(y))},[T]),[M,L]=Jl(D),_=Uo(e);return R.useEffect(()=>{!T||!M.current||(T.disconnect(),p.current=!1,T.observe(M.current))},[M,T]),R.useEffect(()=>(u({type:et.RegisterDroppable,element:{id:r,key:i,disabled:n,node:M,rect:v,data:_}}),()=>u({type:et.UnregisterDroppable,key:i,id:r})),[r]),R.useEffect(()=>{n!==m.current.disabled&&(u({type:et.SetDroppableDisabled,id:r,key:i,disabled:n}),m.current.disabled=n)},[r,i,n,u]),{active:o,rect:v,isOver:(c==null?void 0:c.id)===r,node:M,over:c,setNodeRef:L}}function _f(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function rN(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ya(t){return t!==null&&t>=0}function sN(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function iN(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Gv=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=_f(e,r,n),o=e[s],u=i[s];return!u||!o?null:{x:u.left-o.left,y:u.top-o.top,scaleX:u.width/o.width,scaleY:u.height/o.height}},Xa={scaleX:1,scaleY:1},oN=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const u=(e=i[n])!=null?e:r;if(!u)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(u.top+u.height):d.top-u.top,...Xa}:null}const c=aN(i,s,n);return s>n&&s<=o?{x:0,y:-u.height-c,...Xa}:s<n&&s>=o?{x:0,y:u.height+c,...Xa}:{x:0,y:0,...Xa}};function aN(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Yv="Sortable",Xv=Ut.createContext({activeIndex:-1,containerId:Yv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Gv,disabled:{draggable:!1,droppable:!1}});function lN(t){let{children:e,id:n,items:r,strategy:s=Gv,disabled:i=!1}=t;const{active:o,dragOverlay:u,droppableRects:c,over:d,measureDroppableContainers:m}=ZE(),p=ia(Yv,n),v=u.rect!==null,N=R.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),k=o!=null,C=o?N.indexOf(o.id):-1,j=d?N.indexOf(d.id):-1,b=R.useRef(N),E=!sN(N,b.current),T=j!==-1&&C===-1||E,D=iN(i);Un(()=>{E&&k&&m(N)},[E,N,k,m]),R.useEffect(()=>{b.current=N},[N]);const M=R.useMemo(()=>({activeIndex:C,containerId:p,disabled:D,disableTransforms:T,items:N,overIndex:j,useDragOverlay:v,sortedRects:rN(N,c),strategy:s}),[C,p,D.draggable,D.droppable,T,N,j,c,v,s]);return Ut.createElement(Xv.Provider,{value:M},e)}const uN=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return _f(n,r,s).indexOf(e)},cN=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:u,previousContainerId:c,transition:d}=t;return!d||!r||u!==i&&s===o?!1:n?!0:o!==s&&e===c},dN={duration:200,easing:"ease"},Jv="transform",hN=zo.Transition.toString({property:Jv,duration:0,easing:"linear"}),fN={roleDescription:"sortable"};function mN(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=R.useState(null),u=R.useRef(n);return Un(()=>{if(!e&&n!==u.current&&r.current){const c=s.current;if(c){const d=_i(r.current,{ignoreTransform:!0}),m={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(m.x||m.y)&&o(m)}}n!==u.current&&(u.current=n)},[e,n,r,s]),R.useEffect(()=>{i&&o(null)},[i]),i}function pN(t){let{animateLayoutChanges:e=cN,attributes:n,disabled:r,data:s,getNewIndex:i=uN,id:o,strategy:u,resizeObserverConfig:c,transition:d=dN}=t;const{items:m,containerId:p,activeIndex:v,disabled:N,disableTransforms:k,sortedRects:C,overIndex:j,useDragOverlay:b,strategy:E}=R.useContext(Xv),T=gN(r,N),D=m.indexOf(o),M=R.useMemo(()=>({sortable:{containerId:p,index:D,items:m},...s}),[p,s,D,m]),L=R.useMemo(()=>m.slice(m.indexOf(o)),[m,o]),{rect:_,node:y,isOver:g,setNodeRef:x}=nN({id:o,data:M,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...c}}),{active:S,activatorEvent:A,activeNodeRect:I,attributes:re,setNodeRef:Se,listeners:ot,isDragging:Z,over:B,setActivatorNodeRef:W,transform:Y}=JE({id:o,data:M,attributes:{...fN,...n},disabled:T.draggable}),fe=jb(x,Se),$=!!S,X=$&&!k&&Ya(v)&&Ya(j),_e=!b&&Z,be=_e&&X?Y:null,Xe=X?be??(u??E)({rects:C,activeNodeRect:I,activeIndex:v,overIndex:j,index:D}):null,Rt=Ya(v)&&Ya(j)?i({id:o,items:m,activeIndex:v,overIndex:j}):D,He=S==null?void 0:S.id,se=R.useRef({activeId:He,items:m,newIndex:Rt,containerId:p}),rn=m!==se.current.items,yt=e({active:S,containerId:p,isDragging:Z,isSorting:$,id:o,index:D,items:m,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:d,wasDragging:se.current.activeId!=null}),Je=mN({disabled:!yt,index:D,node:y,rect:_});return R.useEffect(()=>{$&&se.current.newIndex!==Rt&&(se.current.newIndex=Rt),p!==se.current.containerId&&(se.current.containerId=p),m!==se.current.items&&(se.current.items=m)},[$,Rt,p,m]),R.useEffect(()=>{if(He===se.current.activeId)return;if(He!=null&&se.current.activeId==null){se.current.activeId=He;return}const sn=setTimeout(()=>{se.current.activeId=He},50);return()=>clearTimeout(sn)},[He]),{active:S,activeIndex:v,attributes:re,data:M,rect:_,index:D,newIndex:Rt,items:m,isOver:g,isSorting:$,isDragging:Z,listeners:ot,node:y,overIndex:j,over:B,setNodeRef:fe,setActivatorNodeRef:W,setDroppableNodeRef:x,setDraggableNodeRef:Se,transform:Je??Xe,transition:kt()};function kt(){if(Je||rn&&se.current.newIndex===D)return hN;if(!(_e&&!gf(A)||!d)&&($||yt))return zo.Transition.toString({...d,property:Jv})}}function gN(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}ge.Down,ge.Right,ge.Up,ge.Left;const yN="modulepreload",vN=function(t){return"/result/"+t},pg={},xN=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=vN(c),c in pg)return;pg[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":yN,d||(p.as="script"),p.crossOrigin="",p.href=c,u&&p.setAttribute("nonce",u),document.head.appendChild(p),d)return new Promise((v,N)=>{p.addEventListener("load",v),p.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return s.then(o=>{for(const u of o||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};var gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},wN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ex={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let v=(u&15)<<2|d>>6,N=d&63;c||(N=64,o||(v=64)),r.push(n[m],n[p],n[v],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||p==null)throw new _N;const v=i<<2|u>>4;if(r.push(v),d!==64){const N=u<<4&240|d>>2;if(r.push(N),p!==64){const k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _N extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bN=function(t){const e=Zv(t);return ex.encodeByteArray(e,!0)},nu=function(t){return bN(t).replace(/\./g,"")},EN=function(t){try{return ex.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=()=>NN().__FIREBASE_DEFAULTS__,SN=()=>{if(typeof process>"u"||typeof gg>"u")return;const t=gg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&EN(t[1]);return e&&JSON.parse(e)},bf=()=>{try{return TN()||SN()||IN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CN=t=>{var e,n;return(n=(e=bf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AN=t=>{const e=CN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tx=()=>{var t;return(t=bf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nu(JSON.stringify(n)),nu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PN(){var t;const e=(t=bf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DN(){return!PN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VN(){try{return typeof indexedDB=="object"}catch{return!1}}function MN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="FirebaseError";class bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LN,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nx.prototype.create)}}class nx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ON(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new bi(s,u,r)}}function ON(t,e){return t.replace(FN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FN=/\{\$([^}]+)}/g;function Qd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(yg(i)&&yg(o)){if(!Qd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t){return t&&t._delegate?t._delegate:t}class $o{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BN(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zN(t){return t===ts?void 0:t}function BN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const qN={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},HN=de.INFO,WN={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},KN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=WN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rx{constructor(e){this.name=e,this._logLevel=HN,this._logHandler=KN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const QN=(t,e)=>e.some(n=>t instanceof n);let vg,xg;function GN(){return vg||(vg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YN(){return xg||(xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sx=new WeakMap,Gd=new WeakMap,ix=new WeakMap,Bc=new WeakMap,Ef=new WeakMap;function XN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Rr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sx.set(n,t)}).catch(()=>{}),Ef.set(e,t),e}function JN(t){if(Gd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Gd.set(t,e)}let Yd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ix.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZN(t){Yd=t(Yd)}function e2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($c(this),e,...n);return ix.set(r,e.sort?e.sort():[e]),Rr(r)}:YN().includes(t)?function(...e){return t.apply($c(this),e),Rr(sx.get(this))}:function(...e){return Rr(t.apply($c(this),e))}}function t2(t){return typeof t=="function"?e2(t):(t instanceof IDBTransaction&&JN(t),QN(t,GN())?new Proxy(t,Yd):t)}function Rr(t){if(t instanceof IDBRequest)return XN(t);if(Bc.has(t))return Bc.get(t);const e=t2(t);return e!==t&&(Bc.set(t,e),Ef.set(e,t)),e}const $c=t=>Ef.get(t);function n2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Rr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Rr(o.result),c.oldVersion,c.newVersion,Rr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const r2=["get","getKey","getAll","getAllKeys","count"],s2=["put","add","delete","clear"],qc=new Map;function wg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qc.get(e))return qc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=s2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||r2.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return qc.set(e,i),i}ZN(t=>({...t,get:(e,n,r)=>wg(e,n)||t.get(e,n,r),has:(e,n)=>!!wg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xd="@firebase/app",_g="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new rx("@firebase/app"),a2="@firebase/app-compat",l2="@firebase/analytics-compat",u2="@firebase/analytics",c2="@firebase/app-check-compat",d2="@firebase/app-check",h2="@firebase/auth",f2="@firebase/auth-compat",m2="@firebase/database",p2="@firebase/data-connect",g2="@firebase/database-compat",y2="@firebase/functions",v2="@firebase/functions-compat",x2="@firebase/installations",w2="@firebase/installations-compat",_2="@firebase/messaging",b2="@firebase/messaging-compat",E2="@firebase/performance",N2="@firebase/performance-compat",T2="@firebase/remote-config",S2="@firebase/remote-config-compat",I2="@firebase/storage",C2="@firebase/storage-compat",A2="@firebase/firestore",j2="@firebase/vertexai-preview",R2="@firebase/firestore-compat",k2="firebase",P2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",D2={[Xd]:"fire-core",[a2]:"fire-core-compat",[u2]:"fire-analytics",[l2]:"fire-analytics-compat",[d2]:"fire-app-check",[c2]:"fire-app-check-compat",[h2]:"fire-auth",[f2]:"fire-auth-compat",[m2]:"fire-rtdb",[p2]:"fire-data-connect",[g2]:"fire-rtdb-compat",[y2]:"fire-fn",[v2]:"fire-fn-compat",[x2]:"fire-iid",[w2]:"fire-iid-compat",[_2]:"fire-fcm",[b2]:"fire-fcm-compat",[E2]:"fire-perf",[N2]:"fire-perf-compat",[T2]:"fire-rc",[S2]:"fire-rc-compat",[I2]:"fire-gcs",[C2]:"fire-gcs-compat",[A2]:"fire-fst",[R2]:"fire-fst-compat",[j2]:"fire-vertex","fire-js":"fire-js",[k2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,V2=new Map,Zd=new Map;function bg(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function su(t){const e=t.name;if(Zd.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Zd.set(e,t);for(const n of ru.values())bg(n,t);for(const n of V2.values())bg(n,t);return!0}function M2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new nx("app","Firebase",L2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=P2;function ox(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw kr.create("bad-app-name",{appName:String(s)});if(n||(n=tx()),!n)throw kr.create("no-options");const i=ru.get(s);if(i){if(Qd(n,i.options)&&Qd(r,i.config))return i;throw kr.create("duplicate-app",{appName:s})}const o=new $N(s);for(const c of Zd.values())o.addComponent(c);const u=new O2(n,r,o);return ru.set(s,u),u}function U2(t=Jd){const e=ru.get(t);if(!e&&t===Jd&&tx())return ox();if(!e)throw kr.create("no-app",{appName:t});return e}function Xs(t,e,n){var r;let s=(r=D2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(u.join(" "));return}su(new $o(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="firebase-heartbeat-database",B2=1,qo="firebase-heartbeat-store";let Hc=null;function ax(){return Hc||(Hc=n2(z2,B2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qo)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),Hc}async function $2(t){try{const n=(await ax()).transaction(qo),r=await n.objectStore(qo).get(lx(t));return await n.done,r}catch(e){if(e instanceof bi)rr.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function Eg(t,e){try{const r=(await ax()).transaction(qo,"readwrite");await r.objectStore(qo).put(e,lx(t)),await r.done}catch(n){if(n instanceof bi)rr.warn(n.message);else{const r=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function lx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=1024,H2=30*24*60*60*1e3;class W2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ng();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=H2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ng(),{heartbeatsToSend:r,unsentEntries:s}=K2(this._heartbeatsCache.heartbeats),i=nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function Ng(){return new Date().toISOString().substring(0,10)}function K2(t,e=q2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Tg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Tg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VN()?MN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Tg(t){return nu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t){su(new $o("platform-logger",e=>new i2(e),"PRIVATE")),su(new $o("heartbeat",e=>new W2(e),"PRIVATE")),Xs(Xd,_g,t),Xs(Xd,_g,"esm2017"),Xs("fire-js","")}G2("");var Sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,ux;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function g(){}g.prototype=y.prototype,_.D=y.prototype,_.prototype=new g,_.prototype.constructor=_,_.C=function(x,S,A){for(var I=Array(arguments.length-2),re=2;re<arguments.length;re++)I[re-2]=arguments[re];return y.prototype[S].apply(x,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,g){g||(g=0);var x=Array(16);if(typeof y=="string")for(var S=0;16>S;++S)x[S]=y.charCodeAt(g++)|y.charCodeAt(g++)<<8|y.charCodeAt(g++)<<16|y.charCodeAt(g++)<<24;else for(S=0;16>S;++S)x[S]=y[g++]|y[g++]<<8|y[g++]<<16|y[g++]<<24;y=_.g[0],g=_.g[1],S=_.g[2];var A=_.g[3],I=y+(A^g&(S^A))+x[0]+3614090360&4294967295;y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[1]+3905402710&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[2]+606105819&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[3]+3250441966&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(A^g&(S^A))+x[4]+4118548399&4294967295,y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[5]+1200080426&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[6]+2821735955&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[7]+4249261313&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(A^g&(S^A))+x[8]+1770035416&4294967295,y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[9]+2336552879&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[10]+4294925233&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[11]+2304563134&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(A^g&(S^A))+x[12]+1804603682&4294967295,y=g+(I<<7&4294967295|I>>>25),I=A+(S^y&(g^S))+x[13]+4254626195&4294967295,A=y+(I<<12&4294967295|I>>>20),I=S+(g^A&(y^g))+x[14]+2792965006&4294967295,S=A+(I<<17&4294967295|I>>>15),I=g+(y^S&(A^y))+x[15]+1236535329&4294967295,g=S+(I<<22&4294967295|I>>>10),I=y+(S^A&(g^S))+x[1]+4129170786&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[6]+3225465664&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[11]+643717713&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[0]+3921069994&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(S^A&(g^S))+x[5]+3593408605&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[10]+38016083&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[15]+3634488961&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[4]+3889429448&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(S^A&(g^S))+x[9]+568446438&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[14]+3275163606&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[3]+4107603335&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[8]+1163531501&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(S^A&(g^S))+x[13]+2850285829&4294967295,y=g+(I<<5&4294967295|I>>>27),I=A+(g^S&(y^g))+x[2]+4243563512&4294967295,A=y+(I<<9&4294967295|I>>>23),I=S+(y^g&(A^y))+x[7]+1735328473&4294967295,S=A+(I<<14&4294967295|I>>>18),I=g+(A^y&(S^A))+x[12]+2368359562&4294967295,g=S+(I<<20&4294967295|I>>>12),I=y+(g^S^A)+x[5]+4294588738&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[8]+2272392833&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[11]+1839030562&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[14]+4259657740&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(g^S^A)+x[1]+2763975236&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[4]+1272893353&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[7]+4139469664&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[10]+3200236656&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(g^S^A)+x[13]+681279174&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[0]+3936430074&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[3]+3572445317&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[6]+76029189&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(g^S^A)+x[9]+3654602809&4294967295,y=g+(I<<4&4294967295|I>>>28),I=A+(y^g^S)+x[12]+3873151461&4294967295,A=y+(I<<11&4294967295|I>>>21),I=S+(A^y^g)+x[15]+530742520&4294967295,S=A+(I<<16&4294967295|I>>>16),I=g+(S^A^y)+x[2]+3299628645&4294967295,g=S+(I<<23&4294967295|I>>>9),I=y+(S^(g|~A))+x[0]+4096336452&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[7]+1126891415&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[14]+2878612391&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[5]+4237533241&4294967295,g=S+(I<<21&4294967295|I>>>11),I=y+(S^(g|~A))+x[12]+1700485571&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[3]+2399980690&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[10]+4293915773&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[1]+2240044497&4294967295,g=S+(I<<21&4294967295|I>>>11),I=y+(S^(g|~A))+x[8]+1873313359&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[15]+4264355552&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[6]+2734768916&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[13]+1309151649&4294967295,g=S+(I<<21&4294967295|I>>>11),I=y+(S^(g|~A))+x[4]+4149444226&4294967295,y=g+(I<<6&4294967295|I>>>26),I=A+(g^(y|~S))+x[11]+3174756917&4294967295,A=y+(I<<10&4294967295|I>>>22),I=S+(y^(A|~g))+x[2]+718787259&4294967295,S=A+(I<<15&4294967295|I>>>17),I=g+(A^(S|~y))+x[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(S+(I<<21&4294967295|I>>>11))&4294967295,_.g[2]=_.g[2]+S&4294967295,_.g[3]=_.g[3]+A&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var g=y-this.blockSize,x=this.B,S=this.h,A=0;A<y;){if(S==0)for(;A<=g;)s(this,_,A),A+=this.blockSize;if(typeof _=="string"){for(;A<y;)if(x[S++]=_.charCodeAt(A++),S==this.blockSize){s(this,x),S=0;break}}else for(;A<y;)if(x[S++]=_[A++],S==this.blockSize){s(this,x),S=0;break}}this.h=S,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var g=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=g&255,g/=256;for(this.u(_),_=Array(16),y=g=0;4>y;++y)for(var x=0;32>x;x+=8)_[g++]=this.g[y]>>>x&255;return _};function i(_,y){var g=u;return Object.prototype.hasOwnProperty.call(g,_)?g[_]:g[_]=y(_)}function o(_,y){this.h=y;for(var g=[],x=!0,S=_.length-1;0<=S;S--){var A=_[S]|0;x&&A==y||(g[S]=A,x=!1)}this.g=g}var u={};function c(_){return-128<=_&&128>_?i(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return p;if(0>_)return j(d(-_));for(var y=[],g=1,x=0;_>=g;x++)y[x]=_/g|0,g*=4294967296;return new o(y,0)}function m(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return j(m(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=d(Math.pow(y,8)),x=p,S=0;S<_.length;S+=8){var A=Math.min(8,_.length-S),I=parseInt(_.substring(S,S+A),y);8>A?(A=d(Math.pow(y,A)),x=x.j(A).add(d(I))):(x=x.j(g),x=x.add(d(I)))}return x}var p=c(0),v=c(1),N=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-j(this).m();for(var _=0,y=1,g=0;g<this.g.length;g++){var x=this.i(g);_+=(0<=x?x:4294967296+x)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k(this))return"0";if(C(this))return"-"+j(this).toString(_);for(var y=d(Math.pow(_,6)),g=this,x="";;){var S=D(g,y).g;g=b(g,S.j(y));var A=((0<g.g.length?g.g[0]:g.h)>>>0).toString(_);if(g=S,k(g))return A+x;for(;6>A.length;)A="0"+A;x=A+x}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function k(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function C(_){return _.h==-1}t.l=function(_){return _=b(this,_),C(_)?-1:k(_)?0:1};function j(_){for(var y=_.g.length,g=[],x=0;x<y;x++)g[x]=~_.g[x];return new o(g,~_.h).add(v)}t.abs=function(){return C(this)?j(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0,S=0;S<=y;S++){var A=x+(this.i(S)&65535)+(_.i(S)&65535),I=(A>>>16)+(this.i(S)>>>16)+(_.i(S)>>>16);x=I>>>16,A&=65535,I&=65535,g[S]=I<<16|A}return new o(g,g[g.length-1]&-2147483648?-1:0)};function b(_,y){return _.add(j(y))}t.j=function(_){if(k(this)||k(_))return p;if(C(this))return C(_)?j(this).j(j(_)):j(j(this).j(_));if(C(_))return j(this.j(j(_)));if(0>this.l(N)&&0>_.l(N))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,g=[],x=0;x<2*y;x++)g[x]=0;for(x=0;x<this.g.length;x++)for(var S=0;S<_.g.length;S++){var A=this.i(x)>>>16,I=this.i(x)&65535,re=_.i(S)>>>16,Se=_.i(S)&65535;g[2*x+2*S]+=I*Se,E(g,2*x+2*S),g[2*x+2*S+1]+=A*Se,E(g,2*x+2*S+1),g[2*x+2*S+1]+=I*re,E(g,2*x+2*S+1),g[2*x+2*S+2]+=A*re,E(g,2*x+2*S+2)}for(x=0;x<y;x++)g[x]=g[2*x+1]<<16|g[2*x];for(x=y;x<2*y;x++)g[x]=0;return new o(g,0)};function E(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function T(_,y){this.g=_,this.h=y}function D(_,y){if(k(y))throw Error("division by zero");if(k(_))return new T(p,p);if(C(_))return y=D(j(_),y),new T(j(y.g),j(y.h));if(C(y))return y=D(_,j(y)),new T(j(y.g),y.h);if(30<_.g.length){if(C(_)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var g=v,x=y;0>=x.l(_);)g=M(g),x=M(x);var S=L(g,1),A=L(x,1);for(x=L(x,2),g=L(g,2);!k(x);){var I=A.add(x);0>=I.l(_)&&(S=S.add(g),A=I),x=L(x,1),g=L(g,1)}return y=b(_,S.j(y)),new T(S,y)}for(S=p;0<=_.l(y);){for(g=Math.max(1,Math.floor(_.m()/y.m())),x=Math.ceil(Math.log(g)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),A=d(g),I=A.j(y);C(I)||0<I.l(_);)g-=x,A=d(g),I=A.j(y);k(A)&&(A=v),S=S.add(A),_=b(_,I)}return new T(S,_)}t.A=function(_){return D(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0;x<y;x++)g[x]=this.i(x)&_.i(x);return new o(g,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0;x<y;x++)g[x]=this.i(x)|_.i(x);return new o(g,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),g=[],x=0;x<y;x++)g[x]=this.i(x)^_.i(x);return new o(g,this.h^_.h)};function M(_){for(var y=_.g.length+1,g=[],x=0;x<y;x++)g[x]=_.i(x)<<1|_.i(x-1)>>>31;return new o(g,_.h)}function L(_,y){var g=y>>5;y%=32;for(var x=_.g.length-g,S=[],A=0;A<x;A++)S[A]=0<y?_.i(A+g)>>>y|_.i(A+g+1)<<32-y:_.i(A+g);return new o(S,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ux=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,us=o}).apply(typeof Sg<"u"?Sg:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cx,Zi,dx,wl,eh,hx,fx,mx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var P=a[w];if(!(P in f))break e;f=f[P]}a=a[a.length-1],w=f[a],h=h(w),h!=w&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,w=!1,P={next:function(){if(!w&&f<a.length){var V=f++;return{value:h(V,a[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function m(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),a.apply(h,P)}}return function(){return a.apply(h,arguments)}}function v(a,h,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,v.apply(null,arguments)}function N(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var w=f.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function k(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(w,P,V){for(var q=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)q[Ee-2]=arguments[Ee];return h.prototype[P].apply(w,q)}}function C(a){const h=a.length;if(0<h){const f=Array(h);for(let w=0;w<h;w++)f[w]=a[w];return f}return[]}function j(a,h){for(let f=1;f<arguments.length;f++){const w=arguments[f];if(c(w)){const P=a.length||0,V=w.length||0;a.length=P+V;for(let q=0;q<V;q++)a[P+q]=w[q]}else a.push(w)}}class b{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var M=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function L(a,h,f){for(const w in a)h.call(f,a[w],w,a)}function _(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function y(a){const h={};for(const f in a)h[f]=a[f];return h}const g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,h){let f,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(f in w)a[f]=w[f];for(let V=0;V<g.length;V++)f=g[V],Object.prototype.hasOwnProperty.call(w,f)&&(a[f]=w[f])}}function S(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function A(a){u.setTimeout(()=>{throw a},0)}function I(){var a=W;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class re{constructor(){this.h=this.g=null}add(h,f){const w=Se.get();w.set(h,f),this.h?this.h.next=w:this.g=w,this.h=w}}var Se=new b(()=>new ot,a=>a.reset());class ot{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,B=!1,W=new re,Y=()=>{const a=u.Promise.resolve(void 0);Z=()=>{a.then(fe)}};var fe=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){A(f)}var h=Se;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,h),u.removeEventListener("test",f,h)}catch{}return a}();function be(a,h){if(X.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(M){e:{try{D(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:xe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&be.aa.h.call(this)}}k(be,X);var xe={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function He(a,h,f,w,P){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!w,this.ha=P,this.key=++Rt,this.da=this.fa=!1}function se(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function rn(a){this.src=a,this.g={},this.h=0}rn.prototype.add=function(a,h,f,w,P){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var q=Je(a,h,w,P);return-1<q?(h=a[q],f||(h.fa=!1)):(h=new He(h,this.src,V,!!w,P),h.fa=f,a.push(h)),h};function yt(a,h){var f=h.type;if(f in a.g){var w=a.g[f],P=Array.prototype.indexOf.call(w,h,void 0),V;(V=0<=P)&&Array.prototype.splice.call(w,P,1),V&&(se(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Je(a,h,f,w){for(var P=0;P<a.length;++P){var V=a[P];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==w)return P}return-1}var kt="closure_lm_"+(1e6*Math.random()|0),sn={};function gn(a,h,f,w,P){if(Array.isArray(h)){for(var V=0;V<h.length;V++)gn(a,h[V],f,w,P);return null}return f=Rn(f),a&&a[Xe]?a.K(h,f,d(w)?!!w.capture:!!w,P):qr(a,h,f,!1,w,P)}function qr(a,h,f,w,P,V){if(!h)throw Error("Invalid event type");var q=d(P)?!!P.capture:!!P,Ee=Ft(a);if(Ee||(a[kt]=Ee=new rn(a)),f=Ee.add(h,f,w,q,V),f.proxy)return f;if(w=$n(),f.proxy=w,w.src=a,w.listener=f,a.addEventListener)_e||(P=q),P===void 0&&(P=!1),a.addEventListener(h.toString(),w,P);else if(a.attachEvent)a.attachEvent(oe(h.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $n(){function a(f){return h.call(a.src,a.listener,f)}const h=le;return a}function z(a,h,f,w,P){if(Array.isArray(h))for(var V=0;V<h.length;V++)z(a,h[V],f,w,P);else w=d(w)?!!w.capture:!!w,f=Rn(f),a&&a[Xe]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],f=Je(V,f,w,P),-1<f&&(se(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=Ft(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Je(h,f,w,P)),(f=-1<a?h[a]:null)&&H(f))}function H(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Xe])yt(h.i,a);else{var f=a.type,w=a.proxy;h.removeEventListener?h.removeEventListener(f,w,a.capture):h.detachEvent?h.detachEvent(oe(f),w):h.addListener&&h.removeListener&&h.removeListener(w),(f=Ft(h))?(yt(f,a),f.h==0&&(f.src=null,h[kt]=null)):se(a)}}}function oe(a){return a in sn?sn[a]:sn[a]="on"+a}function le(a,h){if(a.da)a=!0;else{h=new be(h,this);var f=a.listener,w=a.ha||a.src;a.fa&&H(a),a=f.call(w,h)}return a}function Ft(a){return a=a[kt],a instanceof rn?a:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rn(a){return typeof a=="function"?a:(a[yn]||(a[yn]=function(h){return a.handleEvent(h)}),a[yn])}function We(){$.call(this),this.i=new rn(this),this.M=this,this.F=null}k(We,$),We.prototype[Xe]=!0,We.prototype.removeEventListener=function(a,h,f,w){z(this,a,h,f,w)};function Fe(a,h){var f,w=a.F;if(w)for(f=[];w;w=w.F)f.push(w);if(a=a.M,w=h.type||h,typeof h=="string")h=new X(h,a);else if(h instanceof X)h.target=h.target||a;else{var P=h;h=new X(w,a),x(h,P)}if(P=!0,f)for(var V=f.length-1;0<=V;V--){var q=h.g=f[V];P=vn(q,w,!0,h)&&P}if(q=h.g=a,P=vn(q,w,!0,h)&&P,P=vn(q,w,!1,h)&&P,f)for(V=0;V<f.length;V++)q=h.g=f[V],P=vn(q,w,!1,h)&&P}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],w=0;w<f.length;w++)se(f[w]);delete a.g[h],a.h--}}this.F=null},We.prototype.K=function(a,h,f,w){return this.i.add(String(a),h,!1,f,w)},We.prototype.L=function(a,h,f,w){return this.i.add(String(a),h,!0,f,w)};function vn(a,h,f,w){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,V=0;V<h.length;++V){var q=h[V];if(q&&!q.da&&q.capture==f){var Ee=q.listener,ut=q.ha||q.src;q.fa&&yt(a.i,q),P=Ee.call(ut,w)!==!1&&P}}return P&&!w.defaultPrevented}function lr(a,h,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function Ci(a){a.g=lr(()=>{a.g=null,a.i&&(a.i=!1,Ci(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class kn extends ${constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ci(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(a){$.call(this),this.h=a,this.g={}}k(ur,$);var ma=[];function pa(a){L(a.g,function(h,f){this.g.hasOwnProperty(f)&&H(h)},a),a.g={}}ur.prototype.N=function(){ur.aa.N.call(this),pa(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hr=u.JSON.stringify,ga=u.JSON.parse,Ju=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function bs(){}bs.prototype.h=null;function ya(a){return a.h||(a.h=a.i())}function va(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ke(){X.call(this,"d")}k(Ke,X);function at(){X.call(this,"c")}k(at,X);var Be={},xn=null;function lt(){return xn=xn||new We}Be.La="serverreachability";function vt(a){X.call(this,Be.La,a)}k(vt,X);function xt(a){const h=lt();Fe(h,new vt(h))}Be.STAT_EVENT="statevent";function qn(a,h){X.call(this,Be.STAT_EVENT,a),this.stat=h}k(qn,X);function ce(a){const h=lt();Fe(h,new qn(h,a))}Be.Ma="timingevent";function wn(a,h){X.call(this,Be.Ma,a),this.size=h}k(wn,X);function wt(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function Pt(){this.g=!0}Pt.prototype.xa=function(){this.g=!1};function Kr(a,h,f,w,P,V){a.info(function(){if(a.g)if(V)for(var q="",Ee=V.split("&"),ut=0;ut<Ee.length;ut++){var me=Ee[ut].split("=");if(1<me.length){var _t=me[0];me=me[1];var bt=_t.split("_");q=2<=bt.length&&bt[1]=="type"?q+(_t+"="+me+"&"):q+(_t+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+h+`
`+f+`
`+q})}function Qr(a,h,f,w,P,V,q){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+h+`
`+f+`
`+V+" "+q})}function Dt(a,h,f,w){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Ai(a,f)+(w?" "+w:"")})}function Gr(a,h){a.info(function(){return"TIMEOUT: "+h})}Pt.prototype.info=function(){};function Ai(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var w=f[a];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<P.length;q++)P[q]=""}}}}return Hr(f)}catch{return h}}var xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},um={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zu;function wa(){}k(wa,bs),wa.prototype.g=function(){return new XMLHttpRequest},wa.prototype.i=function(){return{}},Zu=new wa;function cr(a,h,f,w){this.j=a,this.i=h,this.l=f,this.R=w||1,this.U=new ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cm}function cm(){this.i=null,this.g="",this.h=!1}var dm={},ec={};function tc(a,h,f){a.L=1,a.v=Na(Hn(h)),a.m=f,a.P=!0,hm(a,null)}function hm(a,h){a.F=Date.now(),_a(a),a.A=Hn(a.v);var f=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),Sm(f.i,"t",w),a.C=0,f=a.j.J,a.h=new cm,a.g=qm(a.j,f?h:null,!a.m),0<a.O&&(a.M=new kn(v(a.Y,a,a.g),a.O)),h=a.U,f=a.g,w=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(ma[0]=P.toString()),P=ma);for(var V=0;V<P.length;V++){var q=gn(f,P[V],w||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),xt(),Kr(a.i,a.u,a.A,a.l,a.R,a.m)}cr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Wn(a)==3?h.j():this.Y(a)},cr.prototype.Y=function(a){try{if(a==this.g)e:{const bt=Wn(this.g);var h=this.g.Ba();const Ts=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||bt!=4||h==7||(h==8||0>=Ts?xt(3):xt(2)),nc(this);var f=this.g.Z();this.X=f;t:if(fm(this)){var w=Pm(this.g);a="";var P=w.length,V=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),ji(this);var q="";break t}this.h.i=new u.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,a+=this.h.i.decode(w[h],{stream:!(V&&h==P-1)});w.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,Qr(this.i,this.u,this.A,this.l,this.R,bt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,ut=this.g;if((Ee=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ee)){var me=Ee;break t}}me=null}if(f=me)Dt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rc(this,f);else{this.o=!1,this.s=3,ce(12),Yr(this),ji(this);break e}}if(this.P){f=!0;let _n;for(;!this.J&&this.C<q.length;)if(_n=jw(this,q),_n==ec){bt==4&&(this.s=4,ce(14),f=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==dm){this.s=4,ce(15),Dt(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Dt(this.i,this.l,_n,null),rc(this,_n);if(fm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||q.length!=0||this.h.h||(this.s=1,ce(16),f=!1),this.o=this.o&&f,!f)Dt(this.i,this.l,q,"[Invalid Chunked Response]"),Yr(this),ji(this);else if(0<q.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),uc(_t),_t.M=!0,ce(11))}}else Dt(this.i,this.l,q,null),rc(this,q);bt==4&&Yr(this),this.o&&!this.J&&(bt==4?Um(this.j,this):(this.o=!1,_a(this)))}else Kw(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Yr(this),ji(this)}}}catch{}finally{}};function fm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function jw(a,h){var f=a.C,w=h.indexOf(`
`,f);return w==-1?ec:(f=Number(h.substring(f,w)),isNaN(f)?dm:(w+=1,w+f>h.length?ec:(h=h.slice(w,w+f),a.C=w+f,h)))}cr.prototype.cancel=function(){this.J=!0,Yr(this)};function _a(a){a.S=Date.now()+a.I,mm(a,a.I)}function mm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=wt(v(a.ba,a),h)}function nc(a){a.B&&(u.clearTimeout(a.B),a.B=null)}cr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Gr(this.i,this.A),this.L!=2&&(xt(),ce(17)),Yr(this),this.s=2,ji(this)):mm(this,this.S-a)};function ji(a){a.j.G==0||a.J||Um(a.j,a)}function Yr(a){nc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,pa(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function rc(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||sc(f.h,a))){if(!a.K&&sc(f.h,a)&&f.G==3){try{var w=f.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ja(f),Ca(f);else break e;lc(f),ce(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=wt(v(f.Za,f),6e3));if(1>=ym(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Jr(f,11)}else if((a.K||f.g==a)&&ja(f),!E(h))for(P=f.Da.g.parse(h),h=0;h<P.length;h++){let me=P[h];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];const _t=me[3];_t!=null&&(f.la=_t,f.j.info("VER="+f.la));const bt=me[4];bt!=null&&(f.Aa=bt,f.j.info("SVER="+f.Aa));const Ts=me[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(w=1.5*Ts,f.L=w,f.j.info("backChannelRequestTimeoutMs_="+w)),w=f;const _n=a.g;if(_n){const ka=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var V=w.h;V.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(ic(V,V.h),V.h=null))}if(w.D){const cc=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;cc&&(w.ya=cc,Ie(w.I,w.D,cc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),w=f;var q=a;if(w.qa=$m(w,w.J?w.ia:null,w.W),q.K){vm(w.h,q);var Ee=q,ut=w.L;ut&&(Ee.I=ut),Ee.B&&(nc(Ee),_a(Ee)),w.g=q}else Om(w);0<f.i.length&&Aa(f)}else me[0]!="stop"&&me[0]!="close"||Jr(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Jr(f,7):ac(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}xt(4)}catch{}}var Rw=class{constructor(a,h){this.g=a,this.map=h}};function pm(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ym(a){return a.h?1:a.g?a.g.size:0}function sc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ic(a,h){a.g?a.g.add(h):a.h=h}function vm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}pm.prototype.cancel=function(){if(this.i=xm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function xm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return C(a.i)}function kw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,w=0;w<f;w++)h.push(a[w]);return h}h=[],f=0;for(w in a)h[f++]=a[w];return h}function Pw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const w in a)h[f++]=w;return h}}}function wm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=Pw(a),w=kw(a),P=w.length,V=0;V<P;V++)h.call(void 0,w[V],f&&f[V],a)}var _m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dw(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var w=a[f].indexOf("="),P=null;if(0<=w){var V=a[f].substring(0,w);P=a[f].substring(w+1)}else V=a[f];h(V,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Xr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Xr){this.h=a.h,ba(this,a.j),this.o=a.o,this.g=a.g,Ea(this,a.s),this.l=a.l;var h=a.i,f=new Pi;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),bm(this,f),this.m=a.m}else a&&(h=String(a).match(_m))?(this.h=!1,ba(this,h[1]||"",!0),this.o=Ri(h[2]||""),this.g=Ri(h[3]||"",!0),Ea(this,h[4]),this.l=Ri(h[5]||"",!0),bm(this,h[6]||"",!0),this.m=Ri(h[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}Xr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(ki(h,Em,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ki(h,Em,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ki(f,f.charAt(0)=="/"?Lw:Mw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ki(f,Fw)),a.join("")};function Hn(a){return new Xr(a)}function ba(a,h,f){a.j=f?Ri(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ea(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function bm(a,h,f){h instanceof Pi?(a.i=h,Uw(a.i,a.h)):(f||(h=ki(h,Ow)),a.i=new Pi(h,a.h))}function Ie(a,h,f){a.i.set(h,f)}function Na(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ri(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ki(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,Vw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Vw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Em=/[#\/\?@]/g,Mw=/[#\?:]/g,Lw=/[#\?]/g,Ow=/[#\?@]/g,Fw=/#/g;function Pi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function dr(a){a.g||(a.g=new Map,a.h=0,a.i&&Dw(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Pi.prototype,t.add=function(a,h){dr(this),this.i=null,a=Es(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Nm(a,h){dr(a),h=Es(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Tm(a,h){return dr(a),h=Es(a,h),a.g.has(h)}t.forEach=function(a,h){dr(this),this.g.forEach(function(f,w){f.forEach(function(P){a.call(h,P,w,this)},this)},this)},t.na=function(){dr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let w=0;w<h.length;w++){const P=a[w];for(let V=0;V<P.length;V++)f.push(h[w])}return f},t.V=function(a){dr(this);let h=[];if(typeof a=="string")Tm(this,a)&&(h=h.concat(this.g.get(Es(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return dr(this),this.i=null,a=Es(this,a),Tm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Sm(a,h,f){Nm(a,h),0<f.length&&(a.i=null,a.g.set(Es(a,h),C(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var w=h[f];const V=encodeURIComponent(String(w)),q=this.V(w);for(w=0;w<q.length;w++){var P=V;q[w]!==""&&(P+="="+encodeURIComponent(String(q[w]))),a.push(P)}}return this.i=a.join("&")};function Es(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Uw(a,h){h&&!a.j&&(dr(a),a.i=null,a.g.forEach(function(f,w){var P=w.toLowerCase();w!=P&&(Nm(this,w),Sm(this,P,f))},a)),a.j=h}function zw(a,h){const f=new Pt;if(u.Image){const w=new Image;w.onload=N(hr,f,"TestLoadImage: loaded",!0,h,w),w.onerror=N(hr,f,"TestLoadImage: error",!1,h,w),w.onabort=N(hr,f,"TestLoadImage: abort",!1,h,w),w.ontimeout=N(hr,f,"TestLoadImage: timeout",!1,h,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else h(!1)}function Bw(a,h){const f=new Pt,w=new AbortController,P=setTimeout(()=>{w.abort(),hr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:w.signal}).then(V=>{clearTimeout(P),V.ok?hr(f,"TestPingServer: ok",!0,h):hr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),hr(f,"TestPingServer: error",!1,h)})}function hr(a,h,f,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(f)}catch{}}function $w(){this.g=new Ju}function qw(a,h,f){const w=f||"";try{wm(a,function(P,V){let q=P;d(P)&&(q=Hr(P)),h.push(w+V+"="+encodeURIComponent(q))})}catch(P){throw h.push(w+"type="+encodeURIComponent("_badmap")),P}}function Ta(a){this.l=a.Ub||null,this.j=a.eb||!1}k(Ta,bs),Ta.prototype.g=function(){return new Sa(this.l,this.j)},Ta.prototype.i=function(a){return function(){return a}}({});function Sa(a,h){We.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Sa,We),t=Sa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Vi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Im(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Im(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Di(this):Vi(this),this.readyState==3&&Im(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Di(this))},t.Qa=function(a){this.g&&(this.response=a,Di(this))},t.ga=function(){this.g&&Di(this)};function Di(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Vi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Vi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Cm(a){let h="";return L(a,function(f,w){h+=w,h+=":",h+=f,h+=`\r
`}),h}function oc(a,h,f){e:{for(w in f){var w=!1;break e}w=!0}w||(f=Cm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ie(a,h,f))}function Ue(a){We.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Ue,We);var Hw=/^https?$/i,Ww=["POST","PUT"];t=Ue.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zu.g(),this.v=this.o?ya(this.o):ya(Zu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){Am(this,V);return}if(a=f||"",f=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)f.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const V of w.keys())f.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),P=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ww,h,void 0))||w||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of f)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{km(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Am(this,V)}};function Am(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,jm(a),Ia(a)}function jm(a){a.A||(a.A=!0,Fe(a,"complete"),Fe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Fe(this,"complete"),Fe(this,"abort"),Ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rm(this):this.bb())},t.bb=function(){Rm(this)};function Rm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Wn(a)!=4||a.Z()!=2)){if(a.u&&Wn(a)==4)lr(a.Ea,0,a);else if(Fe(a,"readystatechange"),Wn(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var w;if(w=q===0){var P=String(a.D).match(_m)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),w=!Hw.test(P?P.toLowerCase():"")}f=w}if(f)Fe(a,"complete"),Fe(a,"success");else{a.m=6;try{var V=2<Wn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",jm(a)}}finally{Ia(a)}}}}function Ia(a,h){if(a.g){km(a);const f=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Fe(a,"ready");try{f.onreadystatechange=w}catch{}}}function km(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Wn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ga(h)}};function Pm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Kw(a){const h={};a=(a.g&&2<=Wn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(E(a[w]))continue;var f=S(a[w]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[P]||[];h[P]=V,V.push(f)}_(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Dm(a){this.Aa=0,this.i=[],this.j=new Pt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mi("baseRetryDelayMs",5e3,a),this.cb=Mi("retryDelaySeedMs",1e4,a),this.Wa=Mi("forwardChannelMaxRetries",2,a),this.wa=Mi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new pm(a&&a.concurrentRequestLimit),this.Da=new $w,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dm.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,w){ce(0),this.W=a,this.H=h||{},f&&w!==void 0&&(this.H.OSID=f,this.H.OAID=w),this.F=this.X,this.I=$m(this,null,this.W),Aa(this)};function ac(a){if(Vm(a),a.G==3){var h=a.U++,f=Hn(a.I);if(Ie(f,"SID",a.K),Ie(f,"RID",h),Ie(f,"TYPE","terminate"),Li(a,f),h=new cr(a,a.j,h),h.L=2,h.v=Na(Hn(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=h.v,f=!0),f||(h.g=qm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),_a(h)}Bm(a)}function Ca(a){a.g&&(uc(a),a.g.cancel(),a.g=null)}function Vm(a){Ca(a),a.u&&(u.clearTimeout(a.u),a.u=null),ja(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Aa(a){if(!gm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Z||Y(),B||(Z(),B=!0),W.add(h,a),a.B=0}}function Qw(a,h){return ym(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=wt(v(a.Ga,a,h),zm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new cr(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),x(V,this.S)):V=this.S),this.m!==null||this.O||(P.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var w=this.i[f];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Lm(this,P,h),f=Hn(this.I),Ie(f,"RID",a),Ie(f,"CVER",22),this.D&&Ie(f,"X-HTTP-Session-Id",this.D),Li(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(Cm(V)))+"&"+h:this.m&&oc(f,this.m,V)),ic(this.h,P),this.Ua&&Ie(f,"TYPE","init"),this.P?(Ie(f,"$req",h),Ie(f,"SID","null"),P.T=!0,tc(P,f,null)):tc(P,f,h),this.G=2}}else this.G==3&&(a?Mm(this,a):this.i.length==0||gm(this.h)||Mm(this))};function Mm(a,h){var f;h?f=h.l:f=a.U++;const w=Hn(a.I);Ie(w,"SID",a.K),Ie(w,"RID",f),Ie(w,"AID",a.T),Li(a,w),a.m&&a.o&&oc(w,a.m,a.o),f=new cr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Lm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ic(a.h,f),tc(f,w,h)}function Li(a,h){a.H&&L(a.H,function(f,w){Ie(h,w,f)}),a.l&&wm({},function(f,w){Ie(h,w,f)})}function Lm(a,h,f){f=Math.min(a.i.length,f);var w=a.l?v(a.l.Na,a.l,a):null;e:{var P=a.i;let V=-1;for(;;){const q=["count="+f];V==-1?0<f?(V=P[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Ee=!0;for(let ut=0;ut<f;ut++){let me=P[ut].g;const _t=P[ut].map;if(me-=V,0>me)V=Math.max(0,P[ut].g-100),Ee=!1;else try{qw(_t,q,"req"+me+"_")}catch{w&&w(_t)}}if(Ee){w=q.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,w}function Om(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Z||Y(),B||(Z(),B=!0),W.add(h,a),a.v=0}}function lc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=wt(v(a.Fa,a),zm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Fm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=wt(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Ca(this),Fm(this))};function uc(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Fm(a){a.g=new cr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Hn(a.qa);Ie(h,"RID","rpc"),Ie(h,"SID",a.K),Ie(h,"AID",a.T),Ie(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(h,"TO",a.ja),Ie(h,"TYPE","xmlhttp"),Li(a,h),a.m&&a.o&&oc(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Na(Hn(h)),f.m=null,f.P=!0,hm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ca(this),lc(this),ce(19))};function ja(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Um(a,h){var f=null;if(a.g==h){ja(a),uc(a),a.g=null;var w=2}else if(sc(a.h,h))f=h.D,vm(a.h,h),w=1;else return;if(a.G!=0){if(h.o)if(w==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var P=a.B;w=lt(),Fe(w,new wn(w,f)),Aa(a)}else Om(a);else if(P=h.s,P==3||P==0&&0<h.X||!(w==1&&Qw(a,h)||w==2&&lc(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),P){case 1:Jr(a,5);break;case 4:Jr(a,10);break;case 3:Jr(a,6);break;default:Jr(a,2)}}}function zm(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Jr(a,h){if(a.j.info("Error code "+h),h==2){var f=v(a.fb,a),w=a.Xa;const P=!w;w=new Xr(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ba(w,"https"),Na(w),P?zw(w.toString(),f):Bw(w.toString(),f)}else ce(2);a.G=0,a.l&&a.l.sa(h),Bm(a),Vm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Bm(a){if(a.G=0,a.ka=[],a.l){const h=xm(a.h);(h.length!=0||a.i.length!=0)&&(j(a.ka,h),j(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function $m(a,h,f){var w=f instanceof Xr?Hn(f):new Xr(f);if(w.g!="")h&&(w.g=h+"."+w.g),Ea(w,w.s);else{var P=u.location;w=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var V=new Xr(null);w&&ba(V,w),h&&(V.g=h),P&&Ea(V,P),f&&(V.l=f),w=V}return f=a.D,h=a.ya,f&&h&&Ie(w,f,h),Ie(w,"VER",a.la),Li(a,w),w}function qm(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ue(new Ta({eb:f})):new Ue(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hm(){}t=Hm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ra(){}Ra.prototype.g=function(a,h){return new Gt(a,h)};function Gt(a,h){We.call(this),this.g=new Dm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!E(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ns(this)}k(Gt,We),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){ac(this.g)},Gt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Hr(a),a=f);h.i.push(new Rw(h.Ya++,a)),h.G==3&&Aa(h)},Gt.prototype.N=function(){this.g.l=null,delete this.j,ac(this.g),delete this.g,Gt.aa.N.call(this)};function Wm(a){Ke.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}k(Wm,Ke);function Km(){at.call(this),this.status=1}k(Km,at);function Ns(a){this.g=a}k(Ns,Hm),Ns.prototype.ua=function(){Fe(this.g,"a")},Ns.prototype.ta=function(a){Fe(this.g,new Wm(a))},Ns.prototype.sa=function(a){Fe(this.g,new Km)},Ns.prototype.ra=function(){Fe(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,mx=function(){return new Ra},fx=function(){return lt()},hx=Be,eh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,wl=xa,um.COMPLETE="complete",dx=um,va.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",We.prototype.listen=We.prototype.K,Zi=va,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,cx=Ue}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const Ig="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ei="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new rx("@firebase/firestore");function Wi(){return ps.logLevel}function G(t,...e){if(ps.logLevel<=de.DEBUG){const n=e.map(Nf);ps.debug(`Firestore (${Ei}): ${t}`,...n)}}function sr(t,...e){if(ps.logLevel<=de.ERROR){const n=e.map(Nf);ps.error(`Firestore (${Ei}): ${t}`,...n)}}function ui(t,...e){if(ps.logLevel<=de.WARN){const n=e.map(Nf);ps.warn(`Firestore (${Ei}): ${t}`,...n)}}function Nf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Ei}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function ve(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class X2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class J2{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new px(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new St(e)}}class Z2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eT{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Z2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new tT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=rT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function ci(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ae(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Ae(0,0))}static max(){return new te(new Ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ho.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ho?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Ho{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const sT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Ho{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return sT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new K(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new K(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(je.fromString(e))}static fromName(e){return new J(je.fromString(e).popFirst(5))}static empty(){return new J(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new je(e.slice()))}}function iT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Mr(s,J.empty(),e)}function oT(t){return new Mr(t.readTime,t.key,-1)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(te.min(),J.empty(),-1)}static max(){return new Mr(te.max(),J.empty(),-1)}}function aT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==lT)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{o[d]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function cT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tf.oe=-1;function Vu(t){return t==null}function iu(t){return t===0&&1/t==-1/0}function dT(t){return typeof t=="number"&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Za(this.root,e,this.comparator,!1)}getReverseIterator(){return new Za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Za(this.root,e,this.comparator,!0)}}class Za{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??dt.RED,this.left=s??dt.EMPTY,this.right=i??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new dt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new mt(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ci(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vx("Invalid base64 string: "+i):i}}(e);return new gt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const hT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=hT.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function If(t){const e=t.mapValue.fields.__previous_value__;return Sf(e)?If(e):e}function Wo(t){const e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r,s,i,o,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Ko{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ko("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sf(t)?4:pT(t)?9007199254740991:mT(t)?10:11:ee()}function Bn(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wo(t).isEqual(Wo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Lr(s.timestampValue),u=Lr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gs(s.bytesValue).isEqual(gs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$e(s.doubleValue),u=$e(i.doubleValue);return o===u?iu(o)===iu(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ci(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Cg(o)!==Cg(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Bn(o[c],u[c])))return!1;return!0}(t,e);default:return ee()}}function Qo(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function di(t,e){if(t===e)return 0;const n=ys(t),r=ys(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=$e(i.integerValue||i.doubleValue),c=$e(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return jg(t.timestampValue,e.timestampValue);case 4:return jg(Wo(t),Wo(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(i,o){const u=gs(i),c=gs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const m=pe(u[d],c[d]);if(m!==0)return m}return pe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=pe($e(i.latitude),$e(o.latitude));return u!==0?u:pe($e(i.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,d,m;const p=i.fields||{},v=o.fields||{},N=(u=p.value)===null||u===void 0?void 0:u.arrayValue,k=(c=v.value)===null||c===void 0?void 0:c.arrayValue,C=pe(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((m=k==null?void 0:k.values)===null||m===void 0?void 0:m.length)||0);return C!==0?C:Rg(N,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===el.mapValue&&o===el.mapValue)return 0;if(i===el.mapValue)return 1;if(o===el.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const v=pe(c[p],m[p]);if(v!==0)return v;const N=di(u[c[p]],d[m[p]]);if(N!==0)return N}return pe(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ee()}}function jg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Lr(t),r=Lr(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function Rg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=di(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function hi(t){return th(t)}function th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=th(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${th(n.fields[o])}`;return s+"}"}(t.mapValue):ee()}function kg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nh(t){return!!t&&"integerValue"in t}function Cf(t){return!!t&&"arrayValue"in t}function Pg(t){return!!t&&"nullValue"in t}function Dg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _l(t){return!!t&&"mapValue"in t}function mT(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function go(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=go(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=go(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=go(n)}setAll(e){let n=ht.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=go(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ws(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Bt(go(this.value))}}function xx(t){const e=[];return ws(t.fields,(n,r)=>{const s=new ht([n]);if(_l(r)){const i=xx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Ct(e,0,te.min(),te.min(),te.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ct(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new Ct(e,2,n,te.min(),te.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,te.min(),te.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.position=e,this.inclusive=n}}function Vg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n="asc"){this.field=e,this.dir=n}}function gT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{}class Ye extends wx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vT(e,n,r):n==="array-contains"?new _T(e,r):n==="in"?new bT(e,r):n==="not-in"?new ET(e,r):n==="array-contains-any"?new NT(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xT(e,r):new wT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(di(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends wx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new jn(e,n)}matches(e){return _x(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _x(t){return t.op==="and"}function bx(t){return yT(t)&&_x(t)}function yT(t){for(const e of t.filters)if(e instanceof jn)return!1;return!0}function rh(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(bx(t))return t.filters.map(e=>rh(e)).join(",");{const e=t.filters.map(n=>rh(n)).join(",");return`${t.op}(${e})`}}function Ex(t,e){return t instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Bn(r.value,s.value)}(t,e):t instanceof jn?function(r,s){return s instanceof jn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Ex(o,s.filters[u]),!0):!1}(t,e):void ee()}function Nx(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${hi(n.value)}`}(t):t instanceof jn?function(n){return n.op.toString()+" {"+n.getFilters().map(Nx).join(" ,")+"}"}(t):"Filter"}class vT extends Ye{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class xT extends Ye{constructor(e,n){super(e,"in",n),this.keys=Tx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wT extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=Tx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class _T extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cf(n)&&Qo(n.arrayValue,this.value)}}class bT extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qo(this.value.arrayValue,n)}}class ET extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qo(this.value.arrayValue,n)}}class NT extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function Lg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new TT(t,e,n,r,s,i,o)}function Af(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hi(r)).join(",")),e.ue=n}return e.ue}function jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ex(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mg(t.startAt,e.startAt)&&Mg(t.endAt,e.endAt)}function sh(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ST(t,e,n,r,s,i,o,u){return new Ni(t,e,n,r,s,i,o,u)}function Mu(t){return new Ni(t)}function Og(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sx(t){return t.collectionGroup!==null}function yo(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new mt(ht.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Go(i,r))}),n.has(ht.keyField().canonicalString())||e.ce.push(new Go(ht.keyField(),r))}return e.ce}function On(t){const e=ne(t);return e.le||(e.le=IT(e,yo(t))),e.le}function IT(t,e){if(t.limitType==="F")return Lg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Go(s.field,i)});const n=t.endAt?new ou(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ou(t.startAt.position,t.startAt.inclusive):null;return Lg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ih(t,e){const n=t.filters.concat([e]);return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oh(t,e,n){return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return jf(On(t),On(e))&&t.limitType===e.limitType}function Ix(t){return`${Af(On(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Nx(s)).join(", ")}]`),Vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>hi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>hi(s)).join(",")),`Target(${r})`}(On(t))}; limitType=${t.limitType})`}function Ou(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of yo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=Vg(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,yo(r),s)||r.endAt&&!function(o,u,c){const d=Vg(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,yo(r),s))}(t,e)}function CT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Cx(t){return(e,n)=>{let r=!1;for(const s of yo(t)){const i=AT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function AT(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?di(c,d):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return yx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new Oe(J.comparator);function ir(){return jT}const Ax=new Oe(J.comparator);function eo(...t){let e=Ax;for(const n of t)e=e.insert(n.key,n);return e}function jx(t){let e=Ax;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return vo()}function Rx(){return vo()}function vo(){return new Ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const RT=new Oe(J.comparator),kT=new mt(J.comparator);function ae(...t){let e=kT;for(const n of t)e=e.add(n);return e}const PT=new mt(pe);function DT(){return PT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function kx(t){return{integerValue:""+t}}function VT(t,e){return dT(e)?kx(e):Rf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this._=void 0}}function MT(t,e,n){return t instanceof au?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Sf(i)&&(i=If(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Yo?Dx(t,e):t instanceof Xo?Vx(t,e):function(s,i){const o=Px(s,i),u=Fg(o)+Fg(s.Pe);return nh(o)&&nh(s.Pe)?kx(u):Rf(s.serializer,u)}(t,e)}function LT(t,e,n){return t instanceof Yo?Dx(t,e):t instanceof Xo?Vx(t,e):n}function Px(t,e){return t instanceof lu?function(r){return nh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class au extends Fu{}class Yo extends Fu{constructor(e){super(),this.elements=e}}function Dx(t,e){const n=Mx(e);for(const r of t.elements)n.some(s=>Bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xo extends Fu{constructor(e){super(),this.elements=e}}function Vx(t,e){let n=Mx(e);for(const r of t.elements)n=n.filter(s=>!Bn(s,r));return{arrayValue:{values:n}}}class lu extends Fu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Fg(t){return $e(t.integerValue||t.doubleValue)}function Mx(t){return Cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function OT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Yo&&s instanceof Yo||r instanceof Xo&&s instanceof Xo?ci(r.elements,s.elements,Bn):r instanceof lu&&s instanceof lu?Bn(r.Pe,s.Pe):r instanceof au&&s instanceof au}(t.transform,e.transform)}class FT{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uu{}function Lx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kf(t.key,fn.none()):new la(t.key,t.data,fn.none());{const n=t.data,r=Bt.empty();let s=new mt(ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Br(t.key,r,new Jt(s.toArray()),fn.none())}}function UT(t,e,n){t instanceof la?function(s,i,o){const u=s.value.clone(),c=zg(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Br?function(s,i,o){if(!bl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=zg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Ox(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xo(t,e,n,r){return t instanceof la?function(i,o,u,c){if(!bl(i.precondition,o))return u;const d=i.value.clone(),m=Bg(i.fieldTransforms,c,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Br?function(i,o,u,c){if(!bl(i.precondition,o))return u;const d=Bg(i.fieldTransforms,c,o),m=o.data;return m.setAll(Ox(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return bl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function zT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Px(r.transform,s||null);i!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,i))}return n||null}function Ug(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ci(r,s,(i,o)=>OT(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class la extends Uu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Br extends Uu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ox(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zg(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,LT(o,u,n[s]))}return r}function Bg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,MT(i,o,e))}return r}class kf extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BT extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&UT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Rx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Lx(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ci(this.mutations,e.mutations,(n,r)=>Ug(n,r))&&ci(this.baseMutations,e.baseMutations,(n,r)=>Ug(n,r))}}class Pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return RT}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Pf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,ue;function WT(t){switch(t){default:return ee();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Fx(t){if(t===void 0)return sr("GRPC error has no .code"),O.UNKNOWN;switch(t){case Qe.OK:return O.OK;case Qe.CANCELLED:return O.CANCELLED;case Qe.UNKNOWN:return O.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return O.INTERNAL;case Qe.UNAVAILABLE:return O.UNAVAILABLE;case Qe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Qe.NOT_FOUND:return O.NOT_FOUND;case Qe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Qe.ABORTED:return O.ABORTED;case Qe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Qe.DATA_LOSS:return O.DATA_LOSS;default:return ee()}}(ue=Qe||(Qe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new us([4294967295,4294967295],0);function $g(t){const e=KT().encode(t),n=new ux;return n.update(e),new Uint8Array(n.digest())}function qg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new us([n,r],0),new us([s,i],0)]}class Df{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new to(`Invalid padding: ${n}`);if(r<0)throw new to(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new to(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new to(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=us.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(us.fromNumber(r)));return s.compare(QT)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$g(e),[r,s]=qg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Df(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=$g(e),[r,s]=qg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class to extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zu(te.min(),s,new Oe(pe),ir(),ae())}}class ua{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ua(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Ux{constructor(e,n){this.targetId=e,this.me=n}}class zx{constructor(e,n,r=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Hg{constructor(){this.fe=0,this.ge=Kg(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new ua(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Kg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GT{constructor(e){this.Le=e,this.Be=new Map,this.ke=ir(),this.qe=Wg(),this.Qe=new Oe(pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(sh(i))if(r===0){const o=new J(i.path);this.Ue(n,o,Ct.newNoDocument(o,te.min()))}else ve(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=gs(r).toUint8Array()}catch(c){if(c instanceof vx)return ui("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Df(o,s,i)}catch(c){return ui(c instanceof to?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&sh(u.target)){const c=new J(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ct.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new zu(e,n,this.Qe,this.ke,r);return this.ke=ir(),this.qe=Wg(),this.Qe=new Oe(pe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Hg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Hg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Wg(){return new Oe(J.comparator)}function Kg(){return new Oe(J.comparator)}const YT={asc:"ASCENDING",desc:"DESCENDING"},XT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JT={and:"AND",or:"OR"};class ZT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ah(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eS(t,e){return uu(t,e.toTimestamp())}function Fn(t){return ve(!!t),te.fromTimestamp(function(n){const r=Lr(n);return new Ae(r.seconds,r.nanos)}(t))}function Vf(t,e){return lh(t,e).canonicalString()}function lh(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $x(t){const e=je.fromString(t);return ve(Qx(e)),e}function uh(t,e){return Vf(t.databaseId,e.path)}function Wc(t,e){const n=$x(e);if(n.get(1)!==t.databaseId.projectId)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(Hx(n))}function qx(t,e){return Vf(t.databaseId,e)}function tS(t){const e=$x(t);return e.length===4?je.emptyPath():Hx(e)}function ch(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hx(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Qg(t,e,n){return{name:uh(t,e),fields:n.value.mapValue.fields}}function nS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ve(m===void 0||typeof m=="string"),gt.fromBase64String(m||"")):(ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array),gt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const m=d.code===void 0?O.UNKNOWN:Fx(d.code);return new K(m,d.message||"")}(o);n=new zx(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wc(t,r.document.name),i=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):te.min(),u=new Bt({mapValue:{fields:r.document.fields}}),c=Ct.newFoundDocument(s,i,o,u),d=r.targetIds||[],m=r.removedTargetIds||[];n=new El(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wc(t,r.document),i=r.readTime?Fn(r.readTime):te.min(),o=Ct.newNoDocument(s,i),u=r.removedTargetIds||[];n=new El([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wc(t,r.document),i=r.removedTargetIds||[];n=new El([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new HT(s,i),u=r.targetId;n=new Ux(u,o)}}return n}function rS(t,e){let n;if(e instanceof la)n={update:Qg(t,e.key,e.value)};else if(e instanceof kf)n={delete:uh(t,e.key)};else if(e instanceof Br)n={update:Qg(t,e.key,e.data),updateMask:hS(e.fieldMask)};else{if(!(e instanceof BT))return ee();n={verify:uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof au)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Xo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof lu)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:eS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function sS(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Fn(s.updateTime):Fn(i);return o.isEqual(te.min())&&(o=Fn(i)),new FT(o,s.transformResults||[])}(n,e))):[]}function iS(t,e){return{documents:[qx(t,e.path)]}}function oS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qx(t,s);const i=function(d){if(d.length!==0)return Kx(jn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(v){return{field:Cs(v.field),direction:uS(v.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=ah(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function aS(t){let e=tS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const v=Wx(p);return v instanceof jn&&bx(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(v=>function(k){return new Go(As(k.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(p){let v;return v=typeof p=="object"?p.value:p,Vu(v)?null:v}(n.limit));let c=null;n.startAt&&(c=function(p){const v=!!p.before,N=p.values||[];return new ou(N,v)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const v=!p.before,N=p.values||[];return new ou(N,v)}(n.endAt)),ST(e,s,o,i,u,"F",c,d)}function lS(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=As(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=As(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=As(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=As(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(As(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jn.create(n.compositeFilter.filters.map(r=>Wx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function uS(t){return YT[t]}function cS(t){return XT[t]}function dS(t){return JT[t]}function Cs(t){return{fieldPath:t.canonicalString()}}function As(t){return ht.fromServerFormat(t.fieldPath)}function Kx(t){return t instanceof Ye?function(n){if(n.op==="=="){if(Dg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(Pg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(Pg(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:cS(n.op),value:n.value}}}(t):t instanceof jn?function(n){const r=n.getFilters().map(s=>Kx(s));return r.length===1?r[0]:{compositeFilter:{op:dS(n.op),filters:r}}}(t):ee()}function hS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,s,i=te.min(),o=te.min(),u=gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.ct=e}}function mS(t){const e=aS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.un=new gS}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Mr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class gS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new mt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fi(0)}static kn(){return new fi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.changes=new Ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xo(r.mutation,s,Jt.empty(),Ae.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=eo();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=ir();const o=vo(),u=function(){return vo()}();return n.forEach((c,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Br)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),xo(m.mutation,d,m.mutation.getFieldMask(),Ae.now())):o.set(d.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>{var p;return u.set(d,new vS(m,(p=o.get(d))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,n){const r=vo();let s=new Oe((o,u)=>o-u),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=r.get(c)||Jt.empty();m=u.applyToLocalView(d,m),r.set(c,m);const p=(s.get(u.batchId)||ae()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,m=c.value,p=Rx();m.forEach(v=>{if(!i.has(v)){const N=Lx(n.get(v),r.get(v));N!==null&&p.set(v,N),i=i.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(is());let u=-1,c=i;return o.next(d=>F.forEach(d,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?F.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{c=c.insert(m,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ae())).next(m=>({batchId:u,changes:jx(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=eo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=eo();return this.indexManager.getCollectionParents(e,i).next(u=>F.forEach(u,c=>{const d=function(p,v){return new Ni(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Ct.newInvalidDocument(m)))});let u=eo();return o.forEach((c,d)=>{const m=i.get(c);m!==void 0&&xo(m.mutation,d,Jt.empty(),Ae.now()),Ou(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Fn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:mS(s.bundledQuery),readTime:Fn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.overlays=new Oe(J.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=is(),i=n.length+1,o=new J(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=is(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const u=is(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>u.set(d,m)),!(u.size()>=s)););return F.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qT(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.Tr=new mt(nt.Er),this.dr=new mt(nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new je([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new je([])),r=new nt(n,e),s=new nt(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(nt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $T(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new nt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(pe);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new nt(new J(i),0);let u=new mt(pe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},o),F.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.Mr=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ct.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ir();const o=n.path,u=new J(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||aT(oT(m),r)<=0||(s.has(m.key)||Ou(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TS(this)}getSize(e){return F.resolve(this.size)}}class TS extends yS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.persistence=e,this.Nr=new Ti(n=>Af(n),jf),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mf,this.targetCount=0,this.kr=fi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Tf(0),this.Kr=!1,this.Kr=!0,this.$r=new bS,this.referenceDelegate=e(this),this.Ur=new SS(this),this.indexManager=new pS,this.remoteDocumentCache=function(s){return new NS(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new fS(n),this.Gr=new wS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _S,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ES(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new CS(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class CS extends uT{constructor(e){super(),this.currentSequenceNumber=e}}class Lf{constructor(e){this.persistence=e,this.Jr=new Mf,this.Yr=null}static Zr(e){return new Lf(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Of(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DN()?8:cT(kN())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new AS;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Wi()<=de.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Wi()<=de.DEBUG&&G("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Wi()<=de.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(n))):F.resolve())}Yi(e,n){if(Og(n))return F.resolve(null);let r=On(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=oh(n,null,"F"),r=On(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,o,c.readTime)?this.Yi(e,oh(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Og(n)||s.isEqual(te.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Wi()<=de.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Is(n)),this.rs(e,o,n,iT(s,-1)).next(u=>u))})}ts(e,n){let r=new mt(Cx(e));return n.forEach((s,i)=>{Ou(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Wi()<=de.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Is(n)),this.Ji.getDocumentsMatchingQuery(e,n,Mr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Oe(pe),this._s=new Ti(i=>Af(i),jf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function kS(t,e,n,r){return new RS(t,e,n,r)}async function Gx(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ae();for(const d of s){o.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){u.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})}function PS(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,m){const p=d.batch,v=p.keys();let N=F.resolve();return v.forEach(k=>{N=N.next(()=>m.getEntry(c,k)).next(C=>{const j=d.docVersions.get(k);ve(j!==null),C.version.compareTo(j)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),m.addEntry(C)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ae();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Yx(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function DS(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((m,p)=>{const v=s.get(p);if(!v)return;u.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,p)));let N=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?N=N.withResumeToken(gt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):m.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(m.resumeToken,r)),s=s.insert(p,N),function(C,j,b){return C.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(v,N,m)&&u.push(n.Ur.updateTargetData(i,N))});let c=ir(),d=ae();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(VS(i,o,e.documentUpdates).next(m=>{c=m.Ps,d=m.Is})),!r.isEqual(te.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return F.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function VS(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ir();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):G("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function MS(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LS(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function dh(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!aa(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Gg(t,e,n){const r=ne(t);let s=te.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,m){const p=ne(c),v=p._s.get(m);return v!==void 0?F.resolve(p.os.get(v)):p.Ur.getTargetData(d,m)}(r,o,On(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:te.min(),n?i:ae())).next(u=>(OS(r,CT(e),u),{documents:u,Ts:i})))}function OS(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Yg{constructor(){this.activeTargetIds=DT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FS{constructor(){this.so=new Yg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=null;function Kc(){return tl===null?tl=function(){return 268435456+Math.round(2147483648*Math.random())}():tl++,"0x"+tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class $S extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=Kc(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(m=>(G("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw ui("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",s),m})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ei}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=zS[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Kc();return new Promise((o,u)=>{const c=new cx;c.setWithCredentials(!0),c.listenOnce(dx.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wl.NO_ERROR:const m=c.getResponseJson();G(Tt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case wl.TIMEOUT:G(Tt,`RPC '${e}' ${i} timed out`),u(new K(O.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const p=c.getStatus();if(G(Tt,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const N=v==null?void 0:v.error;if(N&&N.status&&N.message){const k=function(j){const b=j.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(b)>=0?b:O.UNKNOWN}(N.status);u(new K(k,N.message))}else u(new K(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new K(O.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{G(Tt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);G(Tt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Kc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mx(),u=fx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");G(Tt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);let v=!1,N=!1;const k=new BS({Io:j=>{N?G(Tt,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(v||(G(Tt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),v=!0),G(Tt,`RPC '${e}' stream ${s} sending:`,j),p.send(j))},To:()=>p.close()}),C=(j,b,E)=>{j.listen(b,T=>{try{E(T)}catch(D){setTimeout(()=>{throw D},0)}})};return C(p,Zi.EventType.OPEN,()=>{N||(G(Tt,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),C(p,Zi.EventType.CLOSE,()=>{N||(N=!0,G(Tt,`RPC '${e}' stream ${s} transport closed`),k.So())}),C(p,Zi.EventType.ERROR,j=>{N||(N=!0,ui(Tt,`RPC '${e}' stream ${s} transport errored:`,j),k.So(new K(O.UNAVAILABLE,"The operation could not be completed")))}),C(p,Zi.EventType.MESSAGE,j=>{var b;if(!N){const E=j.data[0];ve(!!E);const T=E,D=T.error||((b=T[0])===null||b===void 0?void 0:b.error);if(D){G(Tt,`RPC '${e}' stream ${s} received error:`,D);const M=D.status;let L=function(g){const x=Qe[g];if(x!==void 0)return Fx(x)}(M),_=D.message;L===void 0&&(L=O.INTERNAL,_="Unknown error status: "+M+" with message "+D.message),N=!0,k.So(new K(L,_)),p.close()}else G(Tt,`RPC '${e}' stream ${s} received:`,E),k.bo(E)}}),C(u,hx.STAT_EVENT,j=>{j.stat===eh.PROXY?G(Tt,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===eh.NOPROXY&&G(Tt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function Qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){return new ZT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Xx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qS extends Jx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=nS(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Fn(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ch(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=sh(c)?{documents:iS(i,c)}:{query:oS(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Bx(i,o.resumeToken);const d=ah(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(te.min())>0){u.readTime=uu(i,o.snapshotVersion.toTimestamp());const d=ah(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=lS(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ch(this.serializer),n.removeTarget=e,this.a_(n)}}class HS extends Jx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sS(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ch(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rS(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,lh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,lh(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class KS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{_s(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=ne(c);d.L_.add(4),await ca(d),d.q_.set("Unknown"),d.L_.delete(4),await $u(d)}(this))})}),this.q_=new KS(r,s)}}async function $u(t){if(_s(t))for(const e of t.B_)await e(!0)}async function ca(t){for(const e of t.B_)await e(!1)}function Zx(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Bf(n)?zf(n):Si(n).r_()&&Uf(n,e))}function Ff(t,e){const n=ne(t),r=Si(n);n.N_.delete(e),r.r_()&&ew(n,e),n.N_.size===0&&(r.r_()?r.o_():_s(n)&&n.q_.set("Unknown"))}function Uf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Si(t).A_(e)}function ew(t,e){t.Q_.xe(e),Si(t).R_(e)}function zf(t){t.Q_=new GT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Si(t).start(),t.q_.v_()}function Bf(t){return _s(t)&&!Si(t).n_()&&t.N_.size>0}function _s(t){return ne(t).L_.size===0}function tw(t){t.Q_=void 0}async function GS(t){t.q_.set("Online")}async function YS(t){t.N_.forEach((e,n)=>{Uf(t,e)})}async function XS(t,e){tw(t),Bf(t)?(t.q_.M_(e),zf(t)):t.q_.set("Unknown")}async function JS(t,e,n){if(t.q_.set("Online"),e instanceof zx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cu(t,r)}else if(e instanceof El?t.Q_.Ke(e):e instanceof Ux?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await Yx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.N_.get(d);m&&i.N_.set(d,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const m=i.N_.get(c);if(!m)return;i.N_.set(c,m.withResumeToken(gt.EMPTY_BYTE_STRING,m.snapshotVersion)),ew(i,c);const p=new br(m.target,c,d,m.sequenceNumber);Uf(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await cu(t,r)}}async function cu(t,e,n){if(!aa(e))throw e;t.L_.add(1),await ca(t),t.q_.set("Offline"),n||(n=()=>Yx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $u(t)})}function nw(t,e){return e().catch(n=>cu(t,n,e))}async function qu(t){const e=ne(t),n=Or(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ZS(e);)try{const s=await MS(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,eI(e,s)}catch(s){await cu(e,s)}rw(e)&&sw(e)}function ZS(t){return _s(t)&&t.O_.length<10}function eI(t,e){t.O_.push(e);const n=Or(t);n.r_()&&n.V_&&n.m_(e.mutations)}function rw(t){return _s(t)&&!Or(t).n_()&&t.O_.length>0}function sw(t){Or(t).start()}async function tI(t){Or(t).p_()}async function nI(t){const e=Or(t);for(const n of t.O_)e.m_(n.mutations)}async function rI(t,e,n){const r=t.O_.shift(),s=Pf.from(r,e,n);await nw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qu(t)}async function sI(t,e){e&&Or(t).V_&&await async function(r,s){if(function(o){return WT(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();Or(r).s_(),await nw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qu(r)}}(t,e),rw(t)&&sw(t)}async function Jg(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.L_.add(3),await ca(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $u(n)}async function iI(t,e){const n=ne(t);e?(n.L_.delete(2),await $u(n)):e||(n.L_.add(2),await ca(n),n.q_.set("Unknown"))}function Si(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new qS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:GS.bind(null,t),Ro:YS.bind(null,t),mo:XS.bind(null,t),d_:JS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Bf(t)?zf(t):t.q_.set("Unknown")):(await t.K_.stop(),tw(t))})),t.K_}function Or(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new HS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tI.bind(null,t),mo:sI.bind(null,t),f_:nI.bind(null,t),g_:rI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new $f(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qf(t,e){if(sr("AsyncQueue",`${e}: ${t}`),aa(t))return new K(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=eo(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new Js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.W_=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mi{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new mi(e,n,Js.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class aI{constructor(){this.queries=e0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=e0(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new K(O.ABORTED,"Firestore shutting down"))}}function e0(){return new Ti(t=>Ix(t),Lu)}async function Hf(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new oI,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=qf(o,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Kf(n)}async function Wf(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lI(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Kf(n)}function uI(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Kf(t){t.Y_.forEach(e=>{e.next()})}var hh,t0;(t0=hh||(hh={})).ea="default",t0.Cache="cache";class Qf{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.key=e}}class ow{constructor(e){this.key=e}}class cI{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=Cx(e),this.Ra=new Js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const v=s.get(m),N=Ou(this.query,p)?p:null,k=!!v&&this.mutatedKeys.has(v.key),C=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let j=!1;v&&N?v.data.isEqual(N.data)?k!==C&&(r.track({type:3,doc:N}),j=!0):this.ga(v,N)||(r.track({type:2,doc:N}),j=!0,(c&&this.Aa(N,c)>0||d&&this.Aa(N,d)<0)&&(u=!0)):!v&&N?(r.track({type:0,doc:N}),j=!0):v&&!N&&(r.track({type:1,doc:v}),j=!0,(c||d)&&(u=!0)),j&&(N?(o=o.add(N),i=C?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,p)=>function(N,k){const C=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return C(N)-C(k)}(m.type,p.type)||this.Aa(m.doc,p.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new mi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ow(r))}),this.da.forEach(r=>{e.has(r)||n.push(new iw(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class dI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hI{constructor(e){this.key=e,this.va=!1}}class fI{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ti(u=>Ix(u),Lu),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(J.comparator),this.Na=new Map,this.La=new Mf,this.Ba={},this.ka=new Map,this.qa=fi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mI(t,e,n=!0){const r=hw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await aw(r,e,n,!0),s}async function pI(t,e){const n=hw(t);await aw(n,e,!0,!1)}async function aw(t,e,n,r){const s=await LS(t.localStore,On(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await gI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Zx(t.remoteStore,s),u}async function gI(t,e,n,r,s){t.Ka=(p,v,N)=>async function(C,j,b,E){let T=j.view.ma(b);T.ns&&(T=await Gg(C.localStore,j.query,!1).then(({documents:_})=>j.view.ma(_,T)));const D=E&&E.targetChanges.get(j.targetId),M=E&&E.targetMismatches.get(j.targetId)!=null,L=j.view.applyChanges(T,C.isPrimaryClient,D,M);return r0(C,j.targetId,L.wa),L.snapshot}(t,p,v,N);const i=await Gg(t.localStore,e,!0),o=new cI(e,i.Ts),u=o.ma(i.documents),c=ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);r0(t,n,d.wa);const m=new dI(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function yI(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Lu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ff(r.remoteStore,s.targetId),fh(r,s.targetId)}).catch(oa)):(fh(r,s.targetId),await dh(r.localStore,s.targetId,!0))}async function vI(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ff(n.remoteStore,r.targetId))}async function xI(t,e,n){const r=SI(t);try{const s=await function(o,u){const c=ne(o),d=Ae.now(),m=u.reduce((N,k)=>N.add(k.key),ae());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=ir(),C=ae();return c.cs.getEntries(N,m).next(j=>{k=j,k.forEach((b,E)=>{E.isValidDocument()||(C=C.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(N,k)).next(j=>{p=j;const b=[];for(const E of u){const T=zT(E,p.get(E.key).overlayedDocument);T!=null&&b.push(new Br(E.key,T,xx(T.value.mapValue),fn.exists(!0)))}return c.mutationQueue.addMutationBatch(N,d,b,u)}).next(j=>{v=j;const b=j.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(N,j.batchId,b)})}).then(()=>({batchId:v.batchId,changes:jx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Oe(pe)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await da(r,s.changes),await qu(r.remoteStore)}catch(s){const i=qf(s,"Failed to persist write");n.reject(i)}}async function lw(t,e){const n=ne(t);try{const r=await DS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ve(o.va):s.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await da(n,r,e)}catch(r){await oa(r)}}function n0(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ne(o);c.onlineState=u;let d=!1;c.queries.forEach((m,p)=>{for(const v of p.j_)v.Z_(u)&&(d=!0)}),d&&Kf(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wI(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Oe(J.comparator);o=o.insert(i,Ct.newNoDocument(i,te.min()));const u=ae().add(i),c=new zu(te.min(),new Map,new Oe(pe),o,u);await lw(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Gf(r)}else await dh(r.localStore,e,!1).then(()=>fh(r,e,n)).catch(oa)}async function _I(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await PS(n.localStore,e);cw(n,r,null),uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await da(n,s)}catch(s){await oa(s)}}async function bI(t,e,n){const r=ne(t);try{const s=await function(o,u){const c=ne(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,u).next(p=>(ve(p!==null),m=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(r.localStore,e);cw(r,e,n),uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await da(r,s)}catch(s){await oa(s)}}function uw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function cw(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||dw(t,r)})}function dw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ff(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gf(t))}function r0(t,e,n){for(const r of n)r instanceof iw?(t.La.addReference(r.key,e),EI(t,r)):r instanceof ow?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||dw(t,r.key)):ee()}function EI(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Gf(t))}function Gf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(je.fromString(e)),r=t.qa.next();t.Na.set(r,new hI(n)),t.Oa=t.Oa.insert(n,r),Zx(t.remoteStore,new br(On(Mu(n.path)),r,"TargetPurposeLimboResolution",Tf.oe))}}async function da(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Of.Wi(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const m=ne(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,v=>F.forEach(v.$i,N=>m.persistence.referenceDelegate.addReference(p,v.targetId,N)).next(()=>F.forEach(v.Ui,N=>m.persistence.referenceDelegate.removeReference(p,v.targetId,N)))))}catch(p){if(!aa(p))throw p;G("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const v=p.targetId;if(!p.fromCache){const N=m.os.get(v),k=N.snapshotVersion,C=N.withLastLimboFreeSnapshotVersion(k);m.os=m.os.insert(v,C)}}}(r.localStore,i))}async function NI(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await Gx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new K(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await da(n,r.hs)}}function TI(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function hw(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wI.bind(null,e),e.Ca.d_=lI.bind(null,e.eventManager),e.Ca.$a=uI.bind(null,e.eventManager),e}function SI(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_I.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,e),e}class du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return kS(this.persistence,new jS,e.initialUser,this.serializer)}Ga(e){return new IS(Lf.Zr,this.serializer)}Wa(e){return new FS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}du.provider={build:()=>new du};class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NI.bind(null,this.syncEngine),await iI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aI}()}createDatastore(e){const n=Bu(e.databaseInfo.databaseId),r=function(i){return new $S(i)}(e.databaseInfo);return function(i,o,u,c){return new WS(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new QS(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>n0(this.syncEngine,n,0),function(){return Xg.D()?new Xg:new US}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,m){const p=new fI(s,i,o,u,c,d);return m&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ca(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=St.UNAUTHENTICATED,this.clientId=gx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Gx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function s0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CI(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Jg(e.remoteStore,s)),t._onlineComponents=e}async function CI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ui("Error using user provided cache. Falling back to memory cache: "+n),await Gc(t,new du)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Gc(t,new du);return t._offlineComponents}async function fw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await s0(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await s0(t,new mh))),t._onlineComponents}function AI(t){return fw(t).then(e=>e.syncEngine)}async function hu(t){const e=await fw(t),n=e.eventManager;return n.onListen=mI.bind(null,e.syncEngine),n.onUnlisten=yI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vI.bind(null,e.syncEngine),n}function jI(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const m=new Yf({next:v=>{m.Za(),o.enqueueAndForget(()=>Wf(i,p));const N=v.docs.has(u);!N&&v.fromCache?d.reject(new K(O.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&v.fromCache&&c&&c.source==="server"?d.reject(new K(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new Qf(Mu(u.path),m,{includeMetadataChanges:!0,_a:!0});return Hf(i,p)}(await hu(t),t.asyncQueue,e,n,r)),r.promise}function RI(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const m=new Yf({next:v=>{m.Za(),o.enqueueAndForget(()=>Wf(i,p)),v.fromCache&&c.source==="server"?d.reject(new K(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),p=new Qf(u,m,{includeMetadataChanges:!0,_a:!0});return Hf(i,p)}(await hu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e,n){if(!n)throw new K(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kI(t,e,n,r){if(e===!0&&r===!0)throw new K(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o0(t){if(!J.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a0(t){if(J.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hu(t);throw new K(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Y2;switch(r.type){case"firstParty":return new eT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=i0.get(n);r&&(G("ComponentProvider","Removing Datastore"),i0.delete(n),r.terminate())}(this),Promise.resolve()}}function PI(t,e,n,r={}){var s;const i=(t=Kt(t,Wu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=St.MOCK_USER;else{u=RN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new St(d)}t._authCredentials=new X2(new px(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $r(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class Pr extends $r{constructor(e,n,r){super(e,n,Mu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new J(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function on(t,e,...n){if(t=zn(t),pw("collection","path",e),t instanceof Wu){const r=je.fromString(e,...n);return a0(r),new Pr(t,null,r)}{if(!(t instanceof At||t instanceof Pr))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return a0(r),new Pr(t.firestore,null,r)}}function an(t,e,...n){if(t=zn(t),arguments.length===1&&(e=gx.newId()),pw("doc","path",e),t instanceof Wu){const r=je.fromString(e,...n);return o0(r),new At(t,null,new J(r))}{if(!(t instanceof At||t instanceof Pr))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return o0(r),new At(t.firestore,t instanceof Pr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Xx(this,"async_queue_retry"),this.Vu=()=>{const r=Qc();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!aa(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw sr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=$f.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function c0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class or extends Wu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new u0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u0(e),this._firestoreClient=void 0,await e}}}function DI(t,e){const n=typeof t=="object"?t:U2(),r=typeof t=="string"?t:"(default)",s=M2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=AN("firestore");i&&PI(s,...i)}return s}function Ku(t){if(t._terminated)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VI(t),t._firestoreClient}function VI(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,m){return new fT(u,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,mw(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new II(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(gt.fromBase64String(e))}catch(n){throw new K(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pi(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=/^__.*__$/;class LI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new la(e,this.data,n,this.fieldTransforms)}}class gw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Br(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class em{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new em(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yw(this.Cu)&&MI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class OI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bu(e)}Qu(e,n,r,s=!1){return new em({Cu:e,methodName:n,qu:r,path:ht.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(t){const e=t._freezeSettings(),n=Bu(t._databaseId);return new OI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);tm("Data must be an object, but it was:",o,r);const u=xw(r,o);let c,d;if(i.merge)c=new Jt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const v=ph(e,p,n);if(!o.contains(v))throw new K(O.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);_w(m,v)||m.push(v)}c=new Jt(m),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new LI(new Bt(u),c,d)}class Yu extends Xf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yu}}function FI(t,e,n,r){const s=t.Qu(1,e,n);tm("Data must be an object, but it was:",s,r);const i=[],o=Bt.empty();ws(r,(c,d)=>{const m=nm(e,c,n);d=zn(d);const p=s.Nu(m);if(d instanceof Yu)i.push(m);else{const v=ha(d,p);v!=null&&(i.push(m),o.set(m,v))}});const u=new Jt(i);return new gw(o,u,s.fieldTransforms)}function UI(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[ph(e,r,n)],c=[s];if(i.length%2!=0)throw new K(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)u.push(ph(e,i[v])),c.push(i[v+1]);const d=[],m=Bt.empty();for(let v=u.length-1;v>=0;--v)if(!_w(d,u[v])){const N=u[v];let k=c[v];k=zn(k);const C=o.Nu(N);if(k instanceof Yu)d.push(N);else{const j=ha(k,C);j!=null&&(d.push(N),m.set(N,j))}}const p=new Jt(d);return new gw(m,p,o.fieldTransforms)}function zI(t,e,n,r=!1){return ha(n,t.Qu(r?4:3,e))}function ha(t,e){if(ww(t=zn(t)))return tm("Unsupported field value:",e,t),xw(t,e);if(t instanceof Xf)return function(r,s){if(!yw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=ha(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=zn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ae.fromDate(r);return{timestampValue:uu(s.serializer,i)}}if(r instanceof Ae){const i=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uu(s.serializer,i)}}if(r instanceof Jf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pi)return{bytesValue:Bx(s.serializer,r._byteString)};if(r instanceof At){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zf)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return Rf(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Hu(r)}`)}(t,e)}function xw(t,e){const n={};return yx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(t,(r,s)=>{const i=ha(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ww(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Jf||t instanceof pi||t instanceof At||t instanceof Xf||t instanceof Zf)}function tm(t,e,n){if(!ww(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Hu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ph(t,e,n){if((e=zn(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return nm(t,e);throw fu("Field path arguments must be of type string or ",t,!1,void 0,n)}const BI=new RegExp("[~\\*/\\[\\]]");function nm(t,e,n){if(e.search(BI)>=0)throw fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(O.INVALID_ARGUMENT,u+t+c)}function _w(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $I(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $I extends bw{data(){return super.data()}}function rm(t,e){return typeof e=="string"?nm(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sm{}class Nw extends sm{}function mr(t,e,...n){let r=[];e instanceof sm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof om).length,u=i.filter(c=>c instanceof im).length;if(o>1||o>0&&u>0)throw new K(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class im extends Nw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new im(e,n,r)}_apply(e){const n=this._parse(e);return Tw(e._query,n),new $r(e.firestore,e.converter,ih(e._query,n))}_parse(e){const n=Gu(e.firestore);return function(i,o,u,c,d,m,p){let v;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new K(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){h0(p,m);const N=[];for(const k of p)N.push(d0(c,i,k));v={arrayValue:{values:N}}}else v=d0(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||h0(p,m),v=zI(u,o,p,m==="in"||m==="not-in");return Ye.create(d,m,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class om extends sm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new om(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)Tw(o,c),o=ih(o,c)}(e._query,n),new $r(e.firestore,e.converter,ih(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class am extends Nw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new am(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(i,o)}(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ni(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nl(t,e="asc"){const n=e,r=rm("orderBy",t);return am._create(r,n)}function d0(t,e,n){if(typeof(n=zn(n))=="string"){if(n==="")throw new K(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sx(e)&&n.indexOf("/")!==-1)throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!J.isDocumentKey(r))throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kg(t,new J(r))}if(n instanceof At)return kg(t,n._key);throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(n)}.`)}function h0(t,e){if(!Array.isArray(t)||t.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tw(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qI{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ws(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>$e(o.doubleValue));return new Zf(i)}convertGeoPoint(e){return new Jf($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=If(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wo(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);ve(Qx(r));const s=new Ko(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||sr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iw extends bw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Nl extends Iw{data(e={}){return super.data(e)}}class Cw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new no(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nl(this._firestore,this._userDataWriter,r.key,r,new no(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new Nl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new no(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new Nl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new no(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:HI(u.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){t=Kt(t,At);const e=Kt(t.firestore,or);return jI(Ku(e),t._key).then(n=>Aw(e,t,n))}class lm extends qI{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function rl(t){t=Kt(t,$r);const e=Kt(t.firestore,or),n=Ku(e),r=new lm(e);return Ew(t._query),RI(n,t._query).then(s=>new Cw(e,r,t,s))}function KI(t,e,n){t=Kt(t,At);const r=Kt(t.firestore,or),s=Sw(t.converter,e);return Xu(r,[vw(Gu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fn.none())])}function Ki(t,e,n,...r){t=Kt(t,At);const s=Kt(t.firestore,or),i=Gu(s);let o;return o=typeof(e=zn(e))=="string"||e instanceof Qu?UI(i,"updateDoc",t._key,e,n,r):FI(i,"updateDoc",t._key,e),Xu(s,[o.toMutation(t._key,fn.exists(!0))])}function sl(t){return Xu(Kt(t.firestore,or),[new kf(t._key,fn.none())])}function il(t,e){const n=Kt(t.firestore,or),r=an(t),s=Sw(t.converter,e);return Xu(n,[vw(Gu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function ol(t,...e){var n,r,s;t=zn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||c0(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(c0(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,d,m;if(t instanceof At)d=Kt(t.firestore,or),m=Mu(t._key.path),c={next:p=>{e[o]&&e[o](Aw(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Kt(t,$r);d=Kt(p.firestore,or),m=p._query;const v=new lm(d);c={next:N=>{e[o]&&e[o](new Cw(d,v,p,N))},error:e[o+1],complete:e[o+2]},Ew(t._query)}return function(v,N,k,C){const j=new Yf(C),b=new Qf(N,j,k);return v.asyncQueue.enqueueAndForget(async()=>Hf(await hu(v),b)),()=>{j.Za(),v.asyncQueue.enqueueAndForget(async()=>Wf(await hu(v),b))}}(Ku(d),m,u,c)}function Xu(t,e){return function(r,s){const i=new Jn;return r.asyncQueue.enqueueAndForget(async()=>xI(await AI(r),s,i)),i.promise}(Ku(t),e)}function Aw(t,e,n){const r=n.docs.get(e._key),s=new lm(t);return new Iw(t,s,e._key,r,new no(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ei=s})(F2),su(new $o("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new or(new J2(r.getProvider("auth-internal")),new nT(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(d.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Xs(Ig,"4.7.3",e),Xs(Ig,"4.7.3","esm2017")})();var QI="firebase",GI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs(QI,GI,"app");const YI={apiKey:"AIzaSyCkgUUr8CADydWb62Qdb8p8MHZ_TUkrCzE",authDomain:"sportsbox-result.firebaseapp.com",projectId:"sportsbox-result",storageBucket:"sportsbox-result.appspot.com",messagingSenderId:"1098188923070",appId:"1:1098188923070:web:b021c52a64965bf79dbeef",measurementId:"G-DR5V9BNFZ2"},XI=ox(YI),De=DI(XI),ke={async getDemands(){try{const t=mr(on(De,"demands"),nl("createdAt","desc"));return(await rl(t)).docs.map(n=>{var r,s;return{id:n.id,...n.data(),createdAt:((r=n.data().createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((s=n.data().updatedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("수요처 데이터 로드 실패:",t),t}},async addDemand(t){try{const e=Ae.now(),n={...t,email:t.email||"",createdAt:e,updatedAt:e};return{id:(await il(on(De,"demands"),n)).id,...t,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("수요처 추가 실패:",e),e}},async updateDemand(t,e){try{const n=an(De,"demands",t);await Ki(n,{...e,updatedAt:Ae.now()})}catch(n){throw console.error("수요처 수정 실패:",n),n}},async deleteDemand(t){try{await sl(an(De,"demands",t))}catch(e){throw console.error("수요처 삭제 실패:",e),e}},async getPerformances(){try{const t=mr(on(De,"performances"),nl("date","desc"));return(await rl(t)).docs.map(n=>{var r,s,i;return{id:n.id,...n.data(),date:((r=n.data().date)==null?void 0:r.toDate())||new Date,createdAt:((s=n.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((i=n.data().updatedAt)==null?void 0:i.toDate())||new Date}})}catch(t){throw console.error("실적 데이터 로드 실패:",t),t}},async addPerformance(t){try{const e=Ae.now(),n=t.notes!==void 0&&t.notes!==null?t.notes.toString().trim():"";return{id:(await il(on(De,"performances"),{...t,notes:n,date:Ae.fromDate(t.date),createdAt:e,updatedAt:e})).id,...t,notes:n,createdAt:e.toDate(),updatedAt:e.toDate()}}catch(e){throw console.error("실적 추가 실패:",e),e}},async updatePerformance(t,e){try{const n=an(De,"performances",t),r=e.notes!==void 0&&e.notes!==null?e.notes.toString().trim():void 0,s={...e,updatedAt:Ae.now()};r!==void 0&&(s.notes=r),e.date&&(s.date=Ae.fromDate(e.date)),await Ki(n,s)}catch(n){throw console.error("실적 수정 실패:",n),n}},async deletePerformance(t){try{await sl(an(De,"performances",t))}catch(e){throw console.error("실적 삭제 실패:",e),e}},subscribeToDemands(t){const e=mr(on(De,"demands"),nl("createdAt","desc"));return ol(e,n=>{const r=n.docs.map(s=>{var i,o;return{id:s.id,...s.data(),createdAt:((i=s.data().createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=s.data().updatedAt)==null?void 0:o.toDate())||new Date}});t(r)})},subscribeToPerformances(t){const e=mr(on(De,"performances"),nl("date","desc"));return ol(e,n=>{const r=n.docs.map(s=>{var i,o,u;return{id:s.id,...s.data(),date:((i=s.data().date)==null?void 0:i.toDate())||new Date,createdAt:((o=s.data().createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((u=s.data().updatedAt)==null?void 0:u.toDate())||new Date}});t(r)})},async getBudgets(){try{const t=mr(on(De,"budgets"));return(await rl(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 항목 데이터 로드 실패:",t),t}},async addBudget(t){try{return{id:(await il(on(De,"budgets"),t)).id,...t}}catch(e){throw console.error("예산 항목 추가 실패:",e),e}},async updateBudget(t,e){try{const n=an(De,"budgets",t);await Ki(n,e)}catch(n){throw console.error("예산 항목 수정 실패:",n),n}},async deleteBudget(t){try{await sl(an(De,"budgets",t))}catch(e){throw console.error("예산 항목 삭제 실패:",e),e}},async updateBudgetOrder(t){const e=[];for(const n of t){const r=an(De,"budgets",n.id);e.push(Ki(r,{order:n.order??0}))}await Promise.all(e)},subscribeToBudgets(t){const e=mr(on(De,"budgets"));return ol(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async getBudgetUsages(){try{const t=mr(on(De,"budgetUsages"));return(await rl(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("예산 사용 내역 데이터 로드 실패:",t),t}},async addBudgetUsage(t){try{return{id:(await il(on(De,"budgetUsages"),t)).id,...t}}catch(e){throw console.error("예산 사용 내역 추가 실패:",e),e}},async updateBudgetUsage(t,e){try{const n=an(De,"budgetUsages",t);await Ki(n,e)}catch(n){throw console.error("예산 사용 내역 수정 실패:",n),n}},async deleteBudgetUsage(t){try{await sl(an(De,"budgetUsages",t))}catch(e){throw console.error("예산 사용 내역 삭제 실패:",e),e}},subscribeToBudgetUsages(t){const e=mr(on(De,"budgetUsages"));return ol(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},async getAdminUser(){try{const t=an(De,"admin","user"),e=await WI(t);return e.exists()?e.data():null}catch(t){throw console.error("관리자 계정 로드 실패:",t),t}},async saveAdminUser(t){try{const e=an(De,"admin","user");await KI(e,t)}catch(e){throw console.error("관리자 계정 저장 실패:",e),e}},async createDefaultAdmin(){try{const{hashPassword:t}=await xN(async()=>{const{hashPassword:n}=await Promise.resolve().then(()=>pC);return{hashPassword:n}},void 0),e=await t("admin123");await this.saveAdminUser({username:"admin",passwordHash:e})}catch(t){throw console.error("기본 관리자 계정 생성 실패:",t),t}}},Ii=()=>{const[t,e]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,u]=R.useState(null);return R.useEffect(()=>{let c=null,d=null;return(async()=>{try{i(!0),u(null),c=ke.subscribeToDemands(p=>{e(p)}),d=ke.subscribeToPerformances(p=>{r(p)}),i(!1)}catch(p){console.error("Firebase 데이터 초기화 실패:",p),u("데이터를 불러오는데 실패했습니다. 네트워크 연결을 확인해주세요."),i(!1)}})(),()=>{c&&c(),d&&d()}},[]),{demands:t,performances:n,loading:s,error:o,addDemand:ke.addDemand,updateDemand:ke.updateDemand,deleteDemand:ke.deleteDemand,addPerformance:ke.addPerformance,updatePerformance:ke.updatePerformance,deletePerformance:ke.deletePerformance}},f0=(t,e=[])=>{if(t.length===0)return{totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]};const n=t.reduce((C,j)=>C+(j.maleCount||0),0),r=t.reduce((C,j)=>C+(j.femaleCount||0),0),s=n+r,i=t.reduce((C,j)=>C+(j.promotionCount||0),0),u=new Set(t.map(C=>C.organizationName)).size,c=new Date,d=[];for(let C=11;C>=0;C--){const j=new Date(c.getFullYear(),c.getMonth()-C,1),b=j.toLocaleDateString("ko-KR",{month:"short",year:"2-digit"}),E=t.filter(L=>{if(!L.date)return!1;const _=new Date(L.date);return _.getMonth()===j.getMonth()&&_.getFullYear()===j.getFullYear()}),T=E.reduce((L,_)=>L+(_.maleCount||0),0),D=E.reduce((L,_)=>L+(_.femaleCount||0),0),M=E.reduce((L,_)=>L+(_.promotionCount||0),0);d.push({month:b,male:T,female:D,total:T+D,promotions:M})}const m=new Map;t.forEach(C=>{const j=m.get(C.organizationName)||{total:0,count:0,city:""},b=e.find(E=>E.organizationName===C.organizationName);m.set(C.organizationName,{total:j.total+(C.maleCount||0)+(C.femaleCount||0),count:j.count+1,city:(b==null?void 0:b.city)||j.city||""})});const p=Array.from(m.entries()).map(([C,j])=>({name:C,total:j.total,count:j.count,city:j.city})).sort((C,j)=>j.total-C.total),v=new Map;["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"].forEach(C=>{v.set(C,{total:0,count:0})}),t.forEach(C=>{const j=e.find(b=>b.organizationName===C.organizationName);if(j&&v.has(j.city)){const b=v.get(j.city);v.set(j.city,{total:b.total+(C.maleCount||0)+(C.femaleCount||0),count:b.count+1})}});const k=Array.from(v.entries()).map(([C,j])=>({name:C,total:j.total,count:j.count})).sort((C,j)=>j.total-C.total);return{totalMale:n,totalFemale:r,totalPeople:s,totalPromotions:i,totalOrganizations:u,monthlyData:d,organizationData:p,cityData:k}},m0=()=>{const{demands:t,performances:e}=Ii(),[n,r]=R.useState({totalMale:0,totalFemale:0,totalPeople:0,totalPromotions:0,totalOrganizations:0,monthlyData:[],organizationData:[],cityData:[]}),[s,i]=R.useState([]),[o,u]=R.useState([]),[c,d]=R.useState(null),[m,p]=R.useState(""),[v,N]=R.useState(0),k=["과천시","광명시","광주시","군포시","김포시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","여주시","오산시","용인시","의왕시","이천시","평택시","하남시","화성시","양평군"],C=["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"],[j,b]=R.useState("전체"),[E,T]=R.useState(null),[D,M]=R.useState(!1),[L,_]=R.useState(!1),[y,g]=R.useState(!1),[x,S]=R.useState(null),[A,I]=R.useState({}),[re,Se]=R.useState("overview");function ot(){const z={};W.forEach(H=>{const oe=H.program||"스포츠교실";z[oe]||(z[oe]={count:0,people:0}),z[oe].count+=1,z[oe].people+=(H.maleCount||0)+(H.femaleCount||0)}),I(z),_(!0)}R.useEffect(()=>{const z=ke.subscribeToBudgets(i),H=ke.subscribeToBudgetUsages(u);return()=>{z(),H()}},[]);const[Z,B]=R.useState({}),W=e.filter(z=>{const H=new Date(z.date),oe=Z.startDate instanceof Date?Z.startDate:Z.startDate?new Date(Z.startDate):void 0,le=Z.endDate instanceof Date?Z.endDate:Z.endDate?new Date(Z.endDate):void 0;return!(oe&&H<oe||le&&H>le)});R.useEffect(()=>{o.filter(H=>!(Z.startDate&&new Date(H.date)<Z.startDate||Z.endDate&&new Date(H.date)>Z.endDate));const z=f0(W,t);r({...z,totalOrganizations:t.length})},[t,e,Z.startDate,Z.endDate]);const Y=z=>{d(z.id),p(z.name),N(z.amount)},fe=async z=>{await ke.updateBudget(z,{name:m,amount:v}),d(null)},$=async()=>{await ke.addBudget({name:"",amount:0})},X=Hb(qb(wf)),_e=async z=>{const{active:H,over:oe}=z;if(H.id!==oe.id){const le=s.findIndex(Rn=>Rn.id===H.id),Ft=s.findIndex(Rn=>Rn.id===oe.id),yn=_f(s,le,Ft).map((Rn,We)=>({...Rn,order:We}));await ke.updateBudgetOrder(yn)}},be=o.filter(z=>!(Z.startDate&&new Date(z.date)<Z.startDate||Z.endDate&&new Date(z.date)>Z.endDate)),xe=z=>be.filter(H=>H.budgetItemId===z).reduce((H,oe)=>H+(Number(oe.amount)||0),0),Xe=async z=>{await ke.deleteBudget(z)},Rt=z=>{S(z),g(!0)};R.useEffect(()=>{const z=f0(e,t);r({...z,totalOrganizations:t.length})},[t,e]);const He=s.reduce((z,H)=>z+(Number(H.amount)||0),0),se=be.reduce((z,H)=>z+(Number(H.amount)||0),0),rn=He-se,yt=He>0?Math.round(se/He*1e3)/10:0,Je=({title:z,value:H,icon:oe,color:le,gradient:Ft,onClick:yn})=>l.jsx("div",{className:`bg-white rounded-xl shadow-lg border-0 p-6 min-h-[120px] transition-all duration-300 hover:shadow-xl hover:scale-105 ${yn?"cursor-pointer":""}`,onClick:yn,children:l.jsxs("div",{className:"flex flex-col space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:z}),l.jsx("div",{className:`p-3 rounded-xl ${Ft||le} flex-shrink-0`,children:l.jsx(oe,{className:"w-6 h-6 text-white"})})]}),l.jsx("div",{className:"w-full",children:l.jsx("p",{className:"text-xl lg:text-2xl font-bold text-gray-900 break-words leading-tight whitespace-normal",children:H})})]})}),kt=({data:z,onBarClick:H})=>{const oe=Math.max(...z.map(le=>le.total),1);return l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-0 p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"시/군별 참여 현황"}),l.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:["전체","남부","북부"].map(le=>l.jsx("button",{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 text-sm ${j===le?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:shadow-md"}`,onClick:()=>b(le),children:le},le))}),z.length>0?l.jsx("div",{className:"grid grid-cols-1 gap-4 max-h-96 overflow-y-auto",children:z.map((le,Ft)=>l.jsxs("div",{className:`flex items-center space-x-4 p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl transition-all duration-200 cursor-pointer hover:shadow-lg hover:scale-[1.02] ${H?"hover:from-blue-100 hover:to-purple-100":""}`,onClick:H?()=>H(le.name):void 0,children:[l.jsx("div",{className:"text-sm font-bold text-gray-700 min-w-[70px] text-center bg-white rounded-lg py-2 px-3 shadow-sm",children:le.name}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"bg-gray-200 rounded-full h-6 relative overflow-hidden",children:l.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-6 rounded-full transition-all duration-700 ease-out flex items-center justify-end pr-3",style:{width:`${Math.max(le.total/oe*100,8)}%`},title:`${le.count}회, ${le.total.toLocaleString()}명`,children:l.jsxs("span",{className:"text-xs text-white font-bold hidden sm:inline",children:[le.total.toLocaleString(),"명"]})})})}),l.jsxs("div",{className:"text-sm text-gray-600 font-mono min-w-[60px] text-right",children:[l.jsx("div",{className:"sm:hidden font-bold text-blue-600",children:le.total.toLocaleString()}),l.jsxs("div",{className:"font-semibold",children:[le.count,"회"]})]})]},Ft))}):l.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📊"}),l.jsx("div",{className:"text-lg font-medium",children:"데이터가 없습니다"})]})})]})},sn=({data:z})=>l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-0 p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"수요처별 참여 현황"}),z.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"순위"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"수요처명"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"시/군"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"횟수"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"총 참여인원"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:z.map((H,oe)=>l.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all duration-200",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:l.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 text-xs font-bold rounded-full ${oe<3?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white":"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800"}`,children:oe+1})}),l.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900 max-w-[200px] truncate",title:H.name,children:H.name}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 font-medium",children:H.city||"-"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right font-bold",children:l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[H.count,"회"]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 text-right font-bold",children:l.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full",children:[H.total.toLocaleString(),"명"]})})]},oe))})]})}):l.jsx("div",{className:"flex items-center justify-center h-32 text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🏢"}),l.jsx("div",{className:"text-lg font-medium",children:"데이터가 없습니다"})]})})]}),gn=n.cityData.filter(z=>j==="전체"?!0:j==="남부"?k.includes(z.name):j==="북부"?C.includes(z.name):!0),qr=n.organizationData.filter(z=>z.city===E),$n=({id:z,label:H,icon:oe,isActive:le,onClick:Ft})=>l.jsxs("button",{onClick:Ft,className:`flex items-center px-6 py-3 rounded-lg font-semibold transition-all duration-200 ${le?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900 border border-gray-200"}`,children:[l.jsx(oe,{className:"w-5 h-5 mr-2"}),H]});return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-3",children:"대시보드"}),l.jsx("p",{className:"text-lg text-gray-600",children:"수요처 및 실적 현황을 한눈에 확인하세요"})]}),l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl shadow-sm border border-blue-100 p-6 mb-8",children:l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:flex lg:items-center gap-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[l.jsx("label",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"시작 날짜"}),l.jsx("input",{type:"date",className:"border-0 rounded-lg px-4 py-2 text-sm w-full sm:w-auto shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:Z.startDate?Z.startDate.toISOString().split("T")[0]:"",onChange:z=>B(H=>({...H,startDate:z.target.value?new Date(z.target.value):void 0}))})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[l.jsx("label",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"종료 날짜"}),l.jsx("input",{type:"date",className:"border-0 rounded-lg px-4 py-2 text-sm w-full sm:w-auto shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:Z.endDate?Z.endDate.toISOString().split("T")[0]:"",onChange:z=>B(H=>({...H,endDate:z.target.value?new Date(z.target.value):void 0}))})]})]}),l.jsx("button",{className:"px-6 py-2 bg-white rounded-lg hover:bg-gray-50 text-sm font-semibold whitespace-nowrap shadow-sm border border-gray-200 transition-colors",onClick:()=>B({}),children:"전체 초기화"})]})}),l.jsxs("div",{className:"flex flex-wrap gap-3 mb-8",children:[l.jsx($n,{id:"overview",label:"수요처 및 실적 현황 개요",icon:Eb,isActive:re==="overview",onClick:()=>Se("overview")}),l.jsx($n,{id:"city",label:"시군별 참여현황",icon:Gs,isActive:re==="city",onClick:()=>Se("city")}),l.jsx($n,{id:"organization",label:"수요처별 참여현황",icon:Lc,isActive:re==="organization",onClick:()=>Se("organization")}),l.jsx($n,{id:"budget",label:"예산사용현황",icon:Cb,isActive:re==="budget",onClick:()=>Se("budget")})]}),re==="overview"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Je,{title:"등록 단체수",value:n.totalOrganizations.toString(),icon:Lc,gradient:"bg-gradient-to-br from-blue-500 to-blue-600"}),l.jsx(Je,{title:"총 횟수",value:W.length.toString(),icon:Lo,gradient:"bg-gradient-to-br from-green-500 to-green-600",onClick:ot}),l.jsx(Je,{title:"총 참여 인원",value:W.reduce((z,H)=>z+(H.maleCount||0)+(H.femaleCount||0),0).toLocaleString()+"명",icon:ai,gradient:"bg-gradient-to-br from-purple-500 to-purple-600"}),l.jsx(Je,{title:"평균 참여 인원",value:W.length>0?Math.round(W.reduce((z,H)=>z+(H.maleCount||0)+(H.femaleCount||0),0)/W.length).toLocaleString()+"명":"0명",icon:Xl,gradient:"bg-gradient-to-br from-orange-500 to-orange-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Je,{title:"전체 예산액",value:He.toLocaleString()+"원",icon:Gs,gradient:"bg-gradient-to-br from-indigo-500 to-indigo-600"}),l.jsx(Je,{title:"전체 사용액",value:se.toLocaleString()+"원",icon:ai,gradient:"bg-gradient-to-br from-emerald-500 to-emerald-600"}),l.jsx(Je,{title:"전체 잔액",value:rn.toLocaleString()+"원",icon:Lc,gradient:"bg-gradient-to-br from-gray-500 to-gray-600"}),l.jsx(Je,{title:"전체 집행율",value:yt+"%",icon:Lo,gradient:"bg-gradient-to-br from-amber-500 to-amber-600"})]})]}),re==="city"&&l.jsx("div",{className:"mb-8",children:l.jsx(kt,{data:gn,onBarClick:z=>{T(z),M(!0)}})}),re==="organization"&&l.jsx("div",{className:"mb-8",children:l.jsx(sn,{data:n.organizationData})}),re==="budget"&&l.jsx(GE,{sensors:X,collisionDetection:Yb,onDragEnd:_e,children:l.jsx(lN,{items:s.map(z=>z.id),strategy:oN,children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-0 p-6 mb-8",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"예산 사용 현황"}),l.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 font-semibold shadow-lg transition-all duration-200 hover:shadow-xl",onClick:$,children:"+ 예산 항목 추가"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-3 text-center w-8"}),l.jsx("th",{className:"px-2 py-3 text-left min-w-[120px] font-semibold text-gray-700",children:"예산명"}),l.jsx("th",{className:"px-2 py-3 text-right min-w-[80px] font-semibold text-gray-700",children:"예산액"}),l.jsx("th",{className:"px-2 py-3 text-right min-w-[80px] font-semibold text-gray-700",children:"사용액"}),l.jsx("th",{className:"px-2 py-3 text-right min-w-[80px] font-semibold text-gray-700",children:"잔액"}),l.jsx("th",{className:"px-2 py-3 text-right min-w-[60px] font-semibold text-gray-700",children:"집행율"}),l.jsx("th",{className:"px-2 py-3 text-center w-16 font-semibold text-gray-700",children:"수정"}),l.jsx("th",{className:"px-2 py-3 text-center w-16 font-semibold text-gray-700",children:"삭제"})]})}),l.jsx("tbody",{children:s.sort((z,H)=>(z.order??0)-(H.order??0)).map(z=>l.jsx(JI,{item:z,editingBudgetId:c,editingBudgetName:m,editingBudgetAmount:v,setEditingBudgetName:p,setEditingBudgetAmount:N,setEditingBudgetId:d,handleEditBudget:Y,handleSaveBudget:fe,handleDeleteBudget:Xe,handleBudgetItemClick:Rt,used:xe(z.id),isDragging:!1},z.id))})]})})]})})}),D&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto p-6 relative animate-fadeIn",children:[l.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>M(!1),children:"×"}),l.jsxs("h3",{className:"text-2xl font-bold mb-6 text-blue-700 pr-8",children:[E," 수요처별 참여 현황"]}),qr.length>0?l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[l.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700",children:"수요처명"}),l.jsx("th",{className:"px-3 py-3 text-right font-semibold text-gray-700",children:"횟수"}),l.jsx("th",{className:"px-3 py-3 text-right font-semibold text-gray-700",children:"총 참여인원"})]})}),l.jsx("tbody",{children:qr.map((z,H)=>l.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[l.jsx("td",{className:"px-3 py-3 font-medium text-gray-900",children:z.name}),l.jsxs("td",{className:"px-3 py-3 text-right",children:[z.count,"회"]}),l.jsxs("td",{className:"px-3 py-3 text-right",children:[z.total.toLocaleString(),"명"]})]},H))})]}):l.jsx("div",{className:"text-gray-500 text-center py-8",children:"데이터가 없습니다"})]})}),L&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto p-8 relative animate-fadeIn",children:[l.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>_(!1),children:"×"}),l.jsx("h3",{className:"text-2xl font-bold mb-8 text-green-700 text-center pr-8",children:"프로그램별 실적 요약"}),l.jsx("div",{className:"grid gap-6",children:["스포츠교실","스포츠체험존","스포츠이벤트"].map(z=>{var H,oe,le;return l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 flex items-center justify-between shadow-sm border border-green-100",children:[l.jsx("div",{className:"font-bold text-xl text-green-900",children:z}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"총 횟수"}),l.jsxs("span",{className:"text-2xl font-bold text-green-700",children:[((H=A[z])==null?void 0:H.count)||0,"회"]})]}),l.jsxs("div",{className:"flex flex-col items-end ml-6",children:[l.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"총 인원"}),l.jsxs("span",{className:"text-2xl font-bold text-green-700",children:[((le=(oe=A[z])==null?void 0:oe.people)==null?void 0:le.toLocaleString())||0,"명"]})]})]},z)})})]})}),y&&x&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] p-6 relative animate-fadeIn",children:[l.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>g(!1),children:"×"}),l.jsxs("h3",{className:"text-2xl font-bold mb-6 text-blue-700 pr-8",children:[x.name," 사용 내역"]}),l.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:(()=>{const z=be.filter(H=>H.budgetItemId===x.id);return z.length>0?l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"적요"}),l.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"채주"}),l.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"집행액"}),l.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"집행일자"}),l.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"결제방법"}),l.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"메모"})]})}),l.jsx("tbody",{children:z.map((H,oe)=>l.jsxs("tr",{className:"hover:bg-blue-50 border-b transition-colors",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:H.description}),l.jsx("td",{className:"px-4 py-3 text-gray-700",children:H.vendor}),l.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-blue-600",children:[Number(H.amount).toLocaleString(),"원"]}),l.jsx("td",{className:"px-4 py-3 text-center text-gray-700",children:H.date}),l.jsx("td",{className:"px-4 py-3 text-center text-gray-700",children:H.paymentMethod}),l.jsx("td",{className:"px-4 py-3 text-gray-600",children:H.note||"-"})]},H.id))}),l.jsx("tfoot",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:l.jsxs("tr",{children:[l.jsx("td",{colSpan:2,className:"px-4 py-3 font-bold text-gray-900",children:"총 사용액"}),l.jsxs("td",{className:"px-4 py-3 text-right font-bold text-blue-600",children:[z.reduce((H,oe)=>H+Number(oe.amount),0).toLocaleString(),"원"]}),l.jsx("td",{colSpan:3})]})})]}):l.jsx("div",{className:"text-gray-500 text-center py-8",children:"사용 내역이 없습니다"})})()})]})})]})};function JI({item:t,editingBudgetId:e,editingBudgetName:n,editingBudgetAmount:r,setEditingBudgetName:s,setEditingBudgetAmount:i,setEditingBudgetId:o,handleEditBudget:u,handleSaveBudget:c,handleDeleteBudget:d,handleBudgetItemClick:m,used:p,isDragging:v}){const{attributes:N,listeners:k,setNodeRef:C,transform:j,transition:b,isDragging:E}=pN({id:t.id}),T={transform:zo.Transform.toString(j),transition:b,background:E?"#e0f2fe":void 0},D=t.amount-p,M=t.amount>0?p/t.amount*100:0;return l.jsxs("tr",{ref:C,style:T,...N,children:[l.jsx("td",{className:"px-2 py-2 text-center cursor-grab",...k,children:l.jsx(Sb,{className:"w-4 h-4 text-gray-400"})}),l.jsx("td",{className:"px-2 py-2 flex items-center gap-2",children:e===t.id?l.jsx("input",{className:"border rounded px-2 py-1 w-32",value:n,onChange:L=>s(L.target.value)}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`${t.name.includes("북부")?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded font-semibold":"bg-gray-100 text-gray-800 px-2 py-1 rounded font-semibold"} cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>m(t),title:"클릭하여 사용 내역 보기",children:t.name}),t.region==="남부"&&l.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:"남부"}),t.region==="북부"&&l.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"북부"})]})}),l.jsx("td",{className:"px-2 py-2 text-right",children:e===t.id?l.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:r,onChange:L=>i(Number(L.target.value))}):t.amount.toLocaleString()}),l.jsx("td",{className:"px-2 py-2 text-right",children:p.toLocaleString()}),l.jsx("td",{className:"px-2 py-2 text-right",children:D.toLocaleString()}),l.jsx("td",{className:"px-2 py-2 text-right",children:M.toFixed(2)}),l.jsx("td",{className:"px-2 py-2 text-center",children:e===t.id?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 text-green-600 hover:underline",onClick:()=>c(t.id),children:"저장"}),l.jsx("button",{className:"px-2 py-1 text-gray-500 hover:underline",onClick:()=>o(null),children:"취소"})]}):l.jsx("button",{className:"px-2 py-1 text-blue-600 hover:underline",onClick:()=>u(t),children:"수정"})}),l.jsx("td",{className:"px-2 py-2 text-center",children:l.jsx("button",{className:"px-2 py-1 text-red-500 hover:underline",onClick:()=>d(t.id),children:l.jsx(Ru,{className:"inline w-4 h-4"})})})]})}const Tl=t=>["고양시","구리시","남양주시","동두천시","양주시","의정부시","파주시","포천시","가평군","연천군"].includes(t)?"북부":"남부",ZI=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));i.length>=4&&n.push({city:i[0]||"",organizationName:i[1]||"",contactPerson:i[2]||"",phoneNumber:i[3]||"",email:i[4]||""})}return n},eC=()=>{const t=`\uFEFF시/군,단체명,담당자명,연락처,이메일
수원시,예시 단체,홍길동,010-1234-5678,hong@example.com
성남시,샘플 그룹,김철수,010-9876-5432,kim@sample.org`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="수요처_등록_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},tC=t=>{let e=`\uFEFF날짜,단체명,시군,지역,프로그램,남성,여성,총인원,홍보횟수,메모
`;t.forEach(i=>{const o=(i.maleCount||0)+(i.femaleCount||0),u=i.date?i.date.toLocaleDateString("ko-KR"):"",c=i.notes||"",d=Tl(i.city),m=[u,`"${i.organizationName}"`,`"${i.city||""}"`,`"${d}"`,`"${i.program||"스포츠교실"}"`,i.maleCount||0,i.femaleCount||0,o,i.promotionCount||0,`"${c.replace(/"/g,'""')}"`].join(",");e+=m+`
`});const n=new Blob([e],{type:"text/csv;charset=utf-8"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`실적_데이터_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)},nC=()=>{const t=`\uFEFF날짜,단체명,시군,프로그램,남성,여성,홍보횟수,메모
2024-01-15,예시 단체,수원시,스포츠교실,10,15,5,샘플 메모
2024-01-16,샘플 그룹,성남시,스포츠체험존,8,12,3,테스트 데이터
2024-01-17,테스트 단체,안양시,스포츠이벤트,5,10,2,이벤트 데이터`,e=new Blob([t],{type:"text/csv;charset=utf-8"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="실적_업로드_템플릿.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},rC=t=>{const e=t.split(`
`),n=[];for(let r=1;r<e.length;r++){const s=e[r].trim();if(!s)continue;const i=s.split(",").map(o=>o.trim().replace(/"/g,""));if(i.length>=8){const o=i[0];let u;try{o.includes("-")?u=new Date(o):o.includes("/")?u=new Date(o):u=new Date,isNaN(u.getTime())&&(u=new Date)}catch{u=new Date}n.push({date:u,organizationName:i[1]||"",city:i[2]||"",program:i[3]||"스포츠교실",maleCount:parseInt(i[4])||0,femaleCount:parseInt(i[5])||0,promotionCount:parseInt(i[6])||0,notes:i[7]||""})}}return n},sC=(t,e)=>{let n=`\uFEFF예산명,적요,채주,집행액,집행일자,결제방법,메모
`;t.forEach(o=>{var d;const c=[`"${((d=e.find(m=>m.id===o.budgetItemId))==null?void 0:d.name)||""}"`,`"${o.description||""}"`,`"${o.vendor||""}"`,o.amount||0,o.date||"",o.paymentMethod||"",`"${o.note||""}"`].join(",");n+=c+`
`});const r=new Blob([n],{type:"text/csv;charset=utf-8"}),s=window.URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`예산사용내역_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)},fa=()=>{const[t,e]=R.useState([]),n=R.useCallback(s=>{const i=crypto.randomUUID(),o={...s,id:i,duration:s.duration||5e3};e(u=>[...u,o]),setTimeout(()=>{e(u=>u.filter(c=>c.id!==i))},o.duration)},[]),r=R.useCallback(s=>{e(i=>i.filter(o=>o.id!==s))},[]);return{toasts:t,addToast:n,removeToast:r}},iC=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],oC=()=>{const{addToast:t}=fa(),{addDemand:e}=Ii(),n=R.useRef(null),[r,s]=R.useState("manual"),[i,o]=R.useState(!1),[u,c]=R.useState(!1),[d,m]=R.useState(!1),[p,v]=R.useState(!1),[N,k]=R.useState({success:0,error:0}),[C,j]=R.useState(!1),[b,E]=R.useState(!1),[T,D]=R.useState({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""}),M=A=>{const{name:I,value:re}=A.target;D(Se=>({...Se,[I]:re}))},L=async A=>{if(A.preventDefault(),!T.city||!T.organizationName||!T.contactPerson||!T.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}j(!0);try{await e({city:T.city,organizationName:T.organizationName,contactPerson:T.contactPerson,phoneNumber:T.phoneNumber,email:T.email||""}),c(!0),D({city:"",organizationName:"",contactPerson:"",phoneNumber:"",email:""})}catch{t({type:"error",title:"등록 실패",message:"수요처 등록 중 오류가 발생했습니다"})}finally{j(!1)}},_=async A=>{E(!0);const I=new FileReader;I.onload=async re=>{var Se;try{const ot=(Se=re.target)==null?void 0:Se.result,Z=ZI(ot);if(Z.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let B=0,W=0;for(const Y of Z)try{Y.city&&Y.organizationName&&Y.contactPerson&&Y.phoneNumber?(await e(Y),B++):W++}catch{W++}k({success:B,error:W}),v(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{E(!1)}},I.readAsText(A,"UTF-8")},y=A=>{A.preventDefault(),o(!1);const I=Array.from(A.dataTransfer.files);I.length>0&&_(I[0])},g=A=>{A.preventDefault(),o(!0)},x=A=>{A.preventDefault(),o(!1)},S=A=>{const I=A.target.files;I&&I.length>0&&_(I[0]),A.target.value=""};return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"수요처 등록"}),l.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 수요처를 등록하세요"})]}),l.jsx("div",{className:"border-b border-gray-200 mb-6 lg:mb-8",children:l.jsxs("nav",{className:"-mb-px flex space-x-4 lg:space-x-8 overflow-x-auto",children:[l.jsxs("button",{onClick:()=>s("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${r==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Rv,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),l.jsxs("button",{onClick:()=>s("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${r==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Fo,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),r==="manual"&&l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 lg:p-8",children:l.jsxs("form",{onSubmit:L,className:"space-y-4 lg:space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"시/군 *"}),l.jsxs("select",{id:"city",name:"city",value:T.city,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[l.jsx("option",{value:"",children:"시/군을 선택하세요"}),iC.map(A=>l.jsx("option",{value:A,children:A},A))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),l.jsx("input",{type:"text",id:"organizationName",name:"organizationName",value:T.organizationName,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"단체명을 입력하세요",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contactPerson",className:"block text-sm font-medium text-gray-700 mb-2",children:"담당자명 *"}),l.jsx("input",{type:"text",id:"contactPerson",name:"contactPerson",value:T.contactPerson,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"담당자명을 입력하세요",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"연락처 *"}),l.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:T.phoneNumber,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"연락처를 입력하세요",required:!0})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일 (선택사항)"}),l.jsx("input",{type:"email",id:"email",name:"email",value:T.email,onChange:M,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"이메일 주소를 입력하세요"})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",className:"w-full lg:w-auto bg-blue-600 text-white px-6 lg:px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center",disabled:C,children:C?l.jsxs(l.Fragment,{children:[l.jsx(Oo,{className:"w-4 h-4 mr-2 animate-spin"}),"등록 중..."]}):"수요처 등록"})})]})}),r==="bulk"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(ls,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),l.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 시/군, 단체명, 담당자명, 연락처, 이메일(선택)"}),l.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[l.jsxs("button",{onClick:eC,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(hf,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),l.jsxs("button",{onClick:()=>m(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(df,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:l.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:y,onDragOver:g,onDragLeave:x,children:b?l.jsxs(l.Fragment,{children:[l.jsx(Oo,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),l.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Fo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),l.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),l.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),l.jsx("input",{ref:n,type:"file",accept:".csv,.txt",onChange:S,className:"hidden"}),l.jsx("button",{onClick:()=>{var A;return(A=n.current)==null?void 0:A.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),u&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-white rounded-lg p-6 lg:p-8 max-w-md w-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ne,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"등록 완료!"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"수요처가 성공적으로 등록되었습니다."}),l.jsx("button",{onClick:()=>c(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-white rounded-lg p-6 lg:p-8 max-w-md w-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ne,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"업로드 완료!"}),l.jsxs("div",{className:"text-gray-600 mb-6",children:[l.jsx("p",{className:"mb-2",children:"파일 업로드가 완료되었습니다."}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{children:"성공:"}),l.jsxs("span",{className:"font-semibold text-green-600",children:[N.success,"건"]})]}),N.error>0&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:"실패:"}),l.jsxs("span",{className:"font-semibold text-red-600",children:[N.error,"건"]})]})]})]}),l.jsx("button",{onClick:()=>v(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),d&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 lg:p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"CSV 파일 저장 방법"}),l.jsx("p",{className:"text-gray-600",children:"한글이 깨지지 않게 저장하는 방법을 안내합니다."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 Microsoft Excel 사용시"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),l.jsxs("li",{children:["데이터 입력 완료 후 ",l.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),l.jsxs("li",{children:["파일 형식에서 ",l.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),l.jsx("li",{children:"파일명 입력 후 저장"}),l.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),l.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',l.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 Google Sheets 사용시"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"구글 시트에서 데이터 입력"}),l.jsxs("li",{children:[l.jsx("strong",{children:"파일 → 다운로드 → 쉼표로 구분된 값(.csv, 현재 시트)"})," 선택"]}),l.jsx("li",{children:"다운로드된 파일을 업로드"})]}),l.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:l.jsx("p",{className:"text-sm text-green-800",children:"구글 시트는 자동으로 UTF-8로 저장되어 한글 문제가 없습니다."})})]})]}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:()=>m(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},aC=["가평군","고양시","과천시","광명시","광주시","구리시","군포시","김포시","남양주시","동두천시","부천시","성남시","수원시","시흥시","안산시","안성시","안양시","양주시","양평군","여주시","연천군","오산시","용인시","의왕시","의정부시","이천시","파주시","평택시","포천시","하남시","화성시"],lC=()=>{const{addToast:t}=fa(),{demands:e,updateDemand:n,deleteDemand:r}=Ii(),[s,i]=R.useState(null),[o,u]=R.useState(""),[c,d]=R.useState({}),m=e.filter(j=>j.organizationName.toLowerCase().includes(o.toLowerCase())||j.city.toLowerCase().includes(o.toLowerCase())||j.contactPerson.toLowerCase().includes(o.toLowerCase())),p=j=>{i(j.id),d(j)},v=async()=>{if(!s||!c.city||!c.organizationName||!c.contactPerson||!c.phoneNumber){t({type:"error",title:"입력 오류",message:"필수 항목을 모두 입력해주세요"});return}try{await n(s,c),i(null),d({}),t({type:"success",title:"수정 완료",message:"수요처 정보가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"수요처 정보 수정 중 오류가 발생했습니다"})}},N=()=>{i(null),d({})},k=async(j,b)=>{if(window.confirm(`"${b}"의 수요처 정보를 삭제하시겠습니까?`))try{await r(j),t({type:"success",title:"삭제 완료",message:"수요처 정보가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"수요처 정보 삭제 중 오류가 발생했습니다"})}},C=(j,b)=>{d(E=>({...E,[j]:b}))};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-3",children:"수요처 관리"}),l.jsx("p",{className:"text-lg text-gray-600",children:"등록된 수요처 정보를 조회, 수정, 삭제할 수 있습니다"})]}),l.jsxs("div",{className:"mb-6 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[l.jsxs("div",{className:"text-sm lg:text-base text-gray-600 font-medium bg-gradient-to-r from-blue-50 to-purple-50 px-4 py-2 rounded-lg border border-blue-100",children:["총 ",e.length,"건 중 ",m.length,"건 표시"]}),l.jsxs("div",{className:"relative max-w-full lg:max-w-md",children:[l.jsx(kv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"수요처 검색...",value:o,onChange:j=>u(j.target.value),className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-0 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full min-w-[800px]",children:[l.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"시/군"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"단체명"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"담당자"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"연락처"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 hidden lg:table-cell",children:"이메일"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 hidden lg:table-cell",children:"등록일"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"작업"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:m.map(j=>l.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all duration-200",children:[l.jsx("td",{className:"px-6 py-4",children:s===j.id?l.jsxs("select",{value:c.city||"",onChange:b=>C("city",b.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm",children:[l.jsx("option",{value:"",children:"시/군 선택"}),aC.map(b=>l.jsx("option",{value:b,children:b},b))]}):l.jsx("span",{className:"text-sm font-medium text-gray-900 bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:j.city})}),l.jsx("td",{className:"px-6 py-4",children:s===j.id?l.jsx("input",{type:"text",value:c.organizationName||"",onChange:b=>C("organizationName",b.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"}):l.jsx("span",{className:"text-sm font-bold text-gray-900",children:j.organizationName})}),l.jsx("td",{className:"px-6 py-4",children:s===j.id?l.jsx("input",{type:"text",value:c.contactPerson||"",onChange:b=>C("contactPerson",b.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"}):l.jsx("span",{className:"text-sm font-semibold text-gray-900",children:j.contactPerson})}),l.jsx("td",{className:"px-6 py-4",children:s===j.id?l.jsx("input",{type:"tel",value:c.phoneNumber||"",onChange:b=>C("phoneNumber",b.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"}):l.jsx("span",{className:"text-sm font-mono text-gray-900 bg-gray-100 px-3 py-1 rounded-lg",children:j.phoneNumber})}),l.jsx("td",{className:"px-6 py-4 hidden lg:table-cell",children:s===j.id?l.jsx("input",{type:"email",value:c.email||"",onChange:b=>C("email",b.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"}):l.jsx("span",{className:"text-sm text-gray-600",children:j.email||"-"})}),l.jsx("td",{className:"px-6 py-4 hidden lg:table-cell",children:l.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-lg font-mono",children:j.createdAt.toLocaleDateString("ko-KR")})}),l.jsx("td",{className:"px-6 py-4 text-right",children:s===j.id?l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:v,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-all duration-200 hover:scale-110",title:"저장",children:l.jsx(oi,{className:"w-5 h-5"})}),l.jsx("button",{onClick:N,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200 hover:scale-110",title:"취소",children:l.jsx(li,{className:"w-5 h-5"})})]}):l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:()=>p(j),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-all duration-200 hover:scale-110",title:"수정",children:l.jsx(jv,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>k(j.id,j.organizationName),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all duration-200 hover:scale-110",title:"삭제",children:l.jsx(Ru,{className:"w-5 h-5"})})]})})]},j.id))})]})}),m.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),l.jsx("p",{className:"text-lg font-medium text-gray-500",children:"검색 결과가 없습니다"})]})]})]})},uC=()=>{const{addToast:t}=fa(),{demands:e,addPerformance:n}=Ii(),r=R.useRef(null),[s,i]=R.useState("manual"),[o,u]=R.useState(!1),[c,d]=R.useState(!1),[m,p]=R.useState(!1),[v,N]=R.useState(!1),[k,C]=R.useState({success:0,error:0}),[j,b]=R.useState(""),[E,T]=R.useState(!1),[D,M]=R.useState(!1),[L,_]=R.useState(!1),[y,g]=R.useState({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),x=Array.from(new Set(e.map($=>$.organizationName))).sort(),S=x.filter($=>$.toLowerCase().includes(j.toLowerCase())),A=e.find($=>$.organizationName===y.organizationName),I=(A==null?void 0:A.city)||"",re=$=>{const{name:X,value:_e}=$.target;g(be=>({...be,[X]:_e}))},Se=()=>{const $=parseInt(y.maleCount)||0,X=parseInt(y.femaleCount)||0;return $+X},ot=async $=>{if($.preventDefault(),!y.date||!y.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const X=parseInt(y.maleCount)||0,_e=parseInt(y.femaleCount)||0,be=parseInt(y.promotionCount)||0;if(X<0||_e<0||be<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}M(!0);try{await n({date:new Date(y.date),organizationName:y.organizationName,city:I,program:y.program,maleCount:X,femaleCount:_e,promotionCount:be,notes:y.notes?y.notes.trim():""}),d(!0),g({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),b(""),T(!1)}catch{t({type:"error",title:"저장 실패",message:"실적 데이터 저장 중 오류가 발생했습니다"})}finally{M(!1)}},Z=async $=>{_(!0);const X=new FileReader;X.onload=async _e=>{var be;try{const xe=(be=_e.target)==null?void 0:be.result,Xe=rC(xe);if(Xe.length===0){t({type:"warning",title:"데이터 없음",message:"파일에서 유효한 데이터를 찾을 수 없습니다"});return}let Rt=0,He=0;for(const se of Xe)try{se.date&&se.organizationName?(await n(se),Rt++):He++}catch{He++}C({success:Rt,error:He}),p(!0)}catch{t({type:"error",title:"업로드 오류",message:"파일 형식을 확인해주세요"})}finally{_(!1)}},X.readAsText($,"UTF-8")},B=$=>{$.preventDefault(),u(!1);const X=Array.from($.dataTransfer.files);X.length>0&&Z(X[0])},W=$=>{$.preventDefault(),u(!0)},Y=$=>{$.preventDefault(),u(!1)},fe=$=>{const X=$.target.files;X&&X.length>0&&Z(X[0]),$.target.value=""};return R.useEffect(()=>{const $=X=>{X.target.closest(".organization-dropdown")||T(!1)};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[]),l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실적 입력"}),l.jsx("p",{className:"text-gray-600",children:"수기 입력 또는 CSV 파일로 실적 데이터를 등록하세요"})]}),l.jsx("div",{className:"border-b border-gray-200 mb-8",children:l.jsxs("nav",{className:"-mb-px flex space-x-8",children:[l.jsxs("button",{onClick:()=>i("manual"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="manual"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(oi,{className:"w-4 h-4 inline mr-2"}),"수기 입력"]}),l.jsxs("button",{onClick:()=>i("bulk"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="bulk"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Fo,{className:"w-4 h-4 inline mr-2"}),"일괄 업로드"]})]})}),s==="manual"&&l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 lg:p-8",children:l.jsxs("form",{onSubmit:ot,className:"space-y-4 lg:space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),l.jsxs("div",{className:"relative",children:[l.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"date",id:"date",name:"date",value:y.date,onChange:re,className:"pl-10 pr-4 py-3 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명 *"}),l.jsxs("div",{className:"relative organization-dropdown",children:[l.jsx("input",{type:"text",placeholder:"단체명을 검색하세요...",value:j,onChange:$=>{b($.target.value),T(!0)},onFocus:()=>T(!0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),y.organizationName&&l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l.jsx("button",{type:"button",onClick:()=>{g($=>({...$,organizationName:""})),b("")},className:"text-gray-400 hover:text-gray-600",children:"×"})}),E&&l.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:S.length>0?S.map($=>l.jsx("button",{type:"button",onClick:()=>{g(X=>({...X,organizationName:$})),b($),T(!1)},className:"w-full px-4 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none",children:$},$)):l.jsx("div",{className:"px-4 py-2 text-gray-500",children:"검색 결과가 없습니다"})})]}),x.length===0&&l.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"등록된 단체가 없습니다. 먼저 수요처를 등록해주세요."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"program",className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램 *"}),l.jsxs("select",{id:"program",name:"program",value:y.program,onChange:re,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[l.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),l.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),l.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]}),y.organizationName&&l.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("span",{className:"font-medium",children:"선택된 단체:"})," ",y.organizationName,I&&` (${I})`]})}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 lg:p-6",children:[l.jsxs("h3",{className:"text-base lg:text-lg font-medium text-gray-900 mb-4 flex items-center",children:[l.jsx(ai,{className:"w-5 h-5 mr-2 text-blue-600"}),"참여 인원"]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"maleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"남성 인원"}),l.jsx("input",{type:"number",id:"maleCount",name:"maleCount",value:y.maleCount,onChange:re,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"femaleCount",className:"block text-sm font-medium text-gray-700 mb-2",children:"여성 인원"}),l.jsx("input",{type:"number",id:"femaleCount",name:"femaleCount",value:y.femaleCount,onChange:re,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"총 인원"}),l.jsxs("div",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:[Se().toLocaleString(),"명"]})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"promotionCount",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[l.jsx(Av,{className:"w-4 h-4 mr-2 text-orange-500"}),"홍보 횟수"]}),l.jsx("input",{type:"number",id:"promotionCount",name:"promotionCount",value:y.promotionCount,onChange:re,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"홍보 횟수를 입력하세요"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"메모 (선택사항)"}),l.jsx("textarea",{id:"notes",name:"notes",value:y.notes,onChange:re,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"추가 메모를 입력하세요..."})]}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{type:"submit",className:"w-full lg:w-auto bg-blue-600 text-white px-6 lg:px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center",children:[D?l.jsx(Oo,{className:"w-4 h-4 mr-2 animate-spin"}):l.jsx(oi,{className:"w-4 h-4 mr-2"}),"실적 저장"]})})]})}),s==="bulk"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(ls,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"파일 형식 안내"}),l.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"CSV 파일을 업로드하세요. 열 순서: 날짜, 단체명, 시군, 프로그램, 남성, 여성, 홍보횟수, 메모"}),l.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"중요:"})," 날짜는 YYYY-MM-DD 형식으로 입력하세요 (예: 2024-01-15)"]})}),l.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[l.jsxs("button",{onClick:nC,className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(hf,{className:"w-4 h-4 mr-1"}),"템플릿 다운로드"]}),l.jsxs("button",{onClick:()=>N(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[l.jsx(df,{className:"w-4 h-4 mr-1"}),"저장 방법 보기"]})]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:l.jsx("div",{className:`border-2 border-dashed rounded-lg p-12 text-center transition-colors ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:B,onDragOver:W,onDragLeave:Y,children:L?l.jsxs(l.Fragment,{children:[l.jsx(Oo,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"파일을 업로드하고 있습니다..."}),l.jsx("p",{className:"text-gray-500 mb-2",children:"잠시만 기다려주세요"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Fo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV 파일을 여기에 드롭하거나 클릭하여 선택하세요"}),l.jsx("p",{className:"text-gray-500 mb-2",children:"최대 10MB까지 지원합니다"}),l.jsx("p",{className:"text-sm text-amber-600 mb-6",children:'한글이 깨지는 경우 "저장 방법 보기"를 참고하세요'}),l.jsx("input",{ref:r,type:"file",accept:".csv,.txt",onChange:fe,className:"hidden"}),l.jsx("button",{onClick:()=>{var $;return($=r.current)==null?void 0:$.click()},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"파일 선택"})]})})})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-white rounded-lg p-6 lg:p-8 max-w-md w-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ne,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"저장 완료!"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"실적 데이터가 성공적으로 저장되었습니다."}),l.jsx("button",{onClick:()=>{d(!1),g({date:new Date().toISOString().split("T")[0],organizationName:"",program:"스포츠교실",maleCount:"",femaleCount:"",promotionCount:"",notes:""}),b(""),T(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),m&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-white rounded-lg p-6 lg:p-8 max-w-md w-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ne,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"일괄등록 완료!"}),l.jsxs("div",{className:"text-gray-600 mb-6",children:[l.jsx("p",{className:"mb-2",children:"실적 데이터 일괄등록이 완료되었습니다."}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{children:"성공:"}),l.jsxs("span",{className:"font-semibold text-green-600",children:[k.success,"건"]})]}),k.error>0&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:"실패:"}),l.jsxs("span",{className:"font-semibold text-red-600",children:[k.error,"건"]})]})]})]}),l.jsx("button",{onClick:()=>p(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})]})})}),v&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 lg:p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"실적 데이터 저장 방법"}),l.jsx("p",{className:"text-gray-600",children:"실적 데이터를 올바르게 저장하는 방법을 안내합니다."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📊 수기 입력 방법"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"날짜를 선택하세요 (필수)"}),l.jsx("li",{children:"단체명을 검색하여 선택하세요 (필수)"}),l.jsx("li",{children:"프로그램 유형을 선택하세요 (스포츠교실/스포츠체험존/스포츠이벤트)"}),l.jsx("li",{children:"남성/여성 인원수를 입력하세요"}),l.jsx("li",{children:"홍보 횟수를 입력하세요 (선택사항)"}),l.jsx("li",{children:"메모를 입력하세요 (선택사항)"}),l.jsx("li",{children:'"실적 저장" 버튼을 클릭하세요'})]})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📋 CSV 파일 업로드 방법"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:[l.jsx("li",{children:"템플릿을 다운로드하여 엑셀에서 열기"}),l.jsxs("li",{children:["데이터 입력 완료 후 ",l.jsx("strong",{children:"파일 → 다른 이름으로 저장"})," 클릭"]}),l.jsxs("li",{children:["파일 형식에서 ",l.jsx("strong",{children:'"CSV UTF-8(쉼표로 분리)(*.csv)"'})," 선택"]}),l.jsx("li",{children:"파일명 입력 후 저장"}),l.jsx("li",{children:"저장된 CSV 파일을 업로드"})]}),l.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"주의:"}),' "CSV(쉼표로 분리)" 대신 반드시 ',l.jsx("strong",{children:'"CSV UTF-8"'}),"을 선택하세요!"]})})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"📅 날짜 형식"}),l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"날짜는 반드시 YYYY-MM-DD 형식으로 입력해야 합니다:"}),l.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700",children:[l.jsx("li",{children:"올바른 형식: 2024-01-15, 2024-12-31"}),l.jsx("li",{children:"잘못된 형식: 2024/01/15, 2024.01.15, 01-15-2024"})]})]}),l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"🔧 한글 깨짐 해결방법"}),l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"파일 업로드 시 한글이 깨지는 경우:"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-700",children:[l.jsx("li",{children:"엑셀에서 파일을 다시 열기"}),l.jsx("li",{children:"파일 → 다른 이름으로 저장"}),l.jsx("li",{children:'파일 형식에서 "CSV UTF-8(쉼표로 분리)" 선택'}),l.jsx("li",{children:"새로운 파일로 저장 후 업로드"})]})]})]}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:()=>N(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"확인"})})]})})]})},cC=()=>{const{addToast:t}=fa(),{performances:e,demands:n,updatePerformance:r,deletePerformance:s}=Ii(),[i,o]=R.useState([]),[u,c]=R.useState(null),[d,m]=R.useState({}),[p,v]=R.useState({}),[N,k]=R.useState(""),C=Array.from(new Set(n.map(g=>g.organizationName))).sort();R.useEffect(()=>{j()},[e,p,N]);const j=()=>{let g=[...e];p.startDate&&(g=g.filter(x=>x.date&&x.date>=p.startDate)),p.endDate&&(g=g.filter(x=>x.date&&x.date<=p.endDate)),p.region&&(g=g.filter(x=>Tl(x.city)===p.region)),p.organizationName&&(g=g.filter(x=>x.organizationName===p.organizationName)),p.program&&(g=g.filter(x=>x.program===p.program)),N&&(g=g.filter(x=>x.organizationName.toLowerCase().includes(N.toLowerCase())||x.city.toLowerCase().includes(N.toLowerCase())||x.notes&&x.notes.toLowerCase().includes(N.toLowerCase()))),g.sort((x,S)=>!x.date&&!S.date?0:x.date?S.date?S.date.getTime()-x.date.getTime():-1:1),o(g)},b=(g,x)=>{v(S=>({...S,[g]:x}))},E=()=>{v({}),k("")},T=g=>{c(g.id),m({...g,date:g.date})},D=async()=>{if(!u||!d.date||!d.organizationName){t({type:"error",title:"입력 오류",message:"날짜와 단체명은 필수 항목입니다"});return}const g=d.maleCount||0,x=d.femaleCount||0,S=d.promotionCount||0;if(g<0||x<0||S<0){t({type:"error",title:"입력 오류",message:"인원수와 홍보횟수는 0 이상의 숫자를 입력해주세요"});return}try{await r(u,{...d,notes:d.notes?d.notes.trim():""}),c(null),m({}),t({type:"success",title:"수정 완료",message:"실적 데이터가 성공적으로 수정되었습니다"})}catch{t({type:"error",title:"수정 실패",message:"실적 데이터 수정 중 오류가 발생했습니다"})}},M=()=>{c(null),m({})},L=async(g,x,S)=>{const A=S?S.toLocaleDateString("ko-KR"):"날짜 없음";if(window.confirm(`"${x}"의 ${A} 실적 데이터를 삭제하시겠습니까?`))try{await s(g),t({type:"success",title:"삭제 완료",message:"실적 데이터가 성공적으로 삭제되었습니다"})}catch{t({type:"error",title:"삭제 실패",message:"실적 데이터 삭제 중 오류가 발생했습니다"})}},_=(g,x)=>{m(S=>({...S,[g]:x}))},y=()=>{if(i.length===0){t({type:"warning",title:"다운로드 불가",message:"다운로드할 데이터가 없습니다"});return}try{tC(i),t({type:"success",title:"다운로드 완료",message:"실적 데이터가 성공적으로 다운로드되었습니다"})}catch{t({type:"error",title:"다운로드 실패",message:"엑셀 파일 다운로드 중 오류가 발생했습니다"})}};return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-6 lg:mb-8",children:[l.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"실적 조회"}),l.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"등록된 실적 데이터를 조회하고 관리하세요"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 lg:p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-base lg:text-lg font-medium text-gray-900 flex items-center",children:[l.jsx(Tb,{className:"w-4 h-4 lg:w-5 lg:h-5 mr-2"}),"필터"]}),l.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-800 font-medium min-h-[44px] px-2",children:"전체 초기화"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검색"}),l.jsxs("div",{className:"relative",children:[l.jsx(kv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx("input",{type:"text",placeholder:"검색어 입력...",value:N,onChange:g=>k(g.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"지역"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsxs("select",{value:p.region||"",onChange:g=>b("region",g.target.value||void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[l.jsx("option",{value:"",children:"전체 지역"}),l.jsx("option",{value:"남부",children:"남부"}),l.jsx("option",{value:"북부",children:"북부"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 날짜"}),l.jsxs("div",{className:"relative",children:[l.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx("input",{type:"date",value:p.startDate?p.startDate.toISOString().split("T")[0]:"",onChange:g=>b("startDate",g.target.value?new Date(g.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 날짜"}),l.jsxs("div",{className:"relative",children:[l.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),l.jsx("input",{type:"date",value:p.endDate?p.endDate.toISOString().split("T")[0]:"",onChange:g=>b("endDate",g.target.value?new Date(g.target.value):void 0),className:"pl-9 pr-3 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단체명"}),l.jsxs("select",{value:p.organizationName||"",onChange:g=>b("organizationName",g.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"전체 단체"}),C.map(g=>l.jsx("option",{value:g,children:g},g))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로그램"}),l.jsxs("select",{value:p.program||"",onChange:g=>b("program",g.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"전체 프로그램"}),l.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),l.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),l.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]})]})]})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4",children:[l.jsxs("div",{className:"text-sm text-gray-500",children:["총 ",e.length,"건 중 ",i.length,"건 표시"]}),l.jsxs("button",{onClick:y,disabled:i.length===0,className:"flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[l.jsx(hf,{className:"w-4 h-4 mr-2"}),"엑셀 다운로드"]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full min-w-[800px]",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-20 lg:w-32",children:"날짜"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-24 lg:w-48",children:"단체명"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-16 lg:w-24 hidden lg:table-cell",children:"시/군"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-12 lg:w-16 hidden lg:table-cell",children:"지역"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-16 lg:w-32",children:"프로그램"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-12 lg:w-20",children:"남성"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-12 lg:w-20",children:"여성"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-14 lg:w-20",children:"총 인원"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-16 lg:w-24 hidden lg:table-cell",children:"홍보횟수"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-left text-xs lg:text-sm font-medium text-gray-900 w-20 lg:min-w-32",children:"메모"}),l.jsx("th",{className:"px-2 lg:px-6 py-3 lg:py-4 text-right text-xs lg:text-sm font-medium text-gray-900 w-16 lg:w-24",children:"작업"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(g=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-20 lg:w-32",children:u===g.id?l.jsx("input",{type:"date",value:d.date?new Date(d.date).toISOString().split("T")[0]:"",onChange:x=>_("date",new Date(x.target.value)),className:"w-full px-1 lg:px-3 py-1 lg:py-2 text-xs lg:text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-xs lg:text-sm text-gray-900",children:g.date?g.date.toLocaleDateString("ko-KR"):"날짜 없음"})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-24 lg:w-48",children:u===g.id?l.jsxs("select",{value:d.organizationName||"",onChange:x=>_("organizationName",x.target.value),className:"w-full px-1 lg:px-3 py-1 lg:py-2 text-xs lg:text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"단체 선택"}),C.map(x=>l.jsx("option",{value:x,children:x},x))]}):l.jsx("span",{className:"text-xs lg:text-sm font-medium text-gray-900 truncate block",children:g.organizationName})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-16 lg:w-24 hidden lg:table-cell",children:l.jsx("span",{className:"text-xs lg:text-sm text-gray-600",children:g.city||"-"})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-12 lg:w-16 hidden lg:table-cell",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Tl(g.city)==="남부"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:Tl(g.city)})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-16 lg:w-32",children:u===g.id?l.jsxs("select",{value:d.program||g.program||"스포츠교실",onChange:x=>_("program",x.target.value),className:"w-full px-2 lg:px-3 py-1 lg:py-2 text-xs lg:text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"스포츠교실",children:"스포츠교실"}),l.jsx("option",{value:"스포츠체험존",children:"스포츠체험존"}),l.jsx("option",{value:"스포츠이벤트",children:"스포츠이벤트"})]}):l.jsx("span",{className:"text-xs lg:text-sm text-purple-600 font-medium",children:g.program||"스포츠교실"})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-12 lg:w-20",children:u===g.id?l.jsx("input",{type:"number",value:d.maleCount||"",onChange:x=>_("maleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-1 lg:px-3 py-1 lg:py-2 text-xs lg:text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-xs lg:text-sm text-blue-600 font-mono",children:(g.maleCount||0).toLocaleString()})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-12 lg:w-20",children:u===g.id?l.jsx("input",{type:"number",value:d.femaleCount||"",onChange:x=>_("femaleCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-1 lg:px-3 py-1 lg:py-2 text-xs lg:text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsx("span",{className:"text-xs lg:text-sm text-pink-600 font-mono",children:(g.femaleCount||0).toLocaleString()})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-14 lg:w-20",children:l.jsx("span",{className:"text-xs lg:text-sm text-gray-900 font-bold",children:((g.maleCount||0)+(g.femaleCount||0)).toLocaleString()})}),l.jsx("td",{className:"px-3 lg:px-6 py-3 lg:py-4 w-20 lg:w-24 hidden lg:table-cell",children:u===g.id?l.jsx("input",{type:"number",value:d.promotionCount||"",onChange:x=>_("promotionCount",parseInt(x.target.value)||0),min:"0",className:"w-full px-2 lg:px-3 py-1 lg:py-2 text-xs lg:text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):l.jsxs("span",{className:"text-xs lg:text-sm text-orange-600 font-mono flex items-center",children:[l.jsx(Av,{className:"w-3 h-3 lg:w-4 lg:h-4 mr-1"}),(g.promotionCount||0).toLocaleString(),"회"]})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 w-20 lg:min-w-32",children:u===g.id?l.jsx("textarea",{value:d.notes||"",onChange:x=>_("notes",x.target.value),className:"w-full px-1 lg:px-3 py-1 lg:py-2 text-xs lg:text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2}):l.jsx("span",{className:"text-xs lg:text-sm text-gray-500 block truncate",title:g.notes||"",children:g.notes||"-"})}),l.jsx("td",{className:"px-2 lg:px-6 py-3 lg:py-4 text-right w-16 lg:w-24",children:u===g.id?l.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-end space-y-1 lg:space-y-0 lg:space-x-2",children:[l.jsx("button",{onClick:D,className:"p-1 lg:p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors min-w-[32px] min-h-[32px]",title:"저장",children:l.jsx(oi,{className:"w-3 h-3 lg:w-4 lg:h-4"})}),l.jsx("button",{onClick:M,className:"p-1 lg:p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors min-w-[32px] min-h-[32px]",title:"취소",children:l.jsx(li,{className:"w-3 h-3 lg:w-4 lg:h-4"})})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-end space-y-1 lg:space-y-0 lg:space-x-2",children:[l.jsx("button",{onClick:()=>T(g),className:"p-1 lg:p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors min-w-[32px] min-h-[32px]",title:"수정",children:l.jsx(jv,{className:"w-3 h-3 lg:w-4 lg:h-4"})}),l.jsx("button",{onClick:()=>L(g.id,g.organizationName,g.date),className:"p-1 lg:p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors min-w-[32px] min-h-[32px]",title:"삭제",children:l.jsx(Ru,{className:"w-3 h-3 lg:w-4 lg:h-4"})})]})})]},g.id))})]})}),i.length===0&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-gray-500",children:e.length===0?"실적 데이터가 없습니다":"검색 조건에 맞는 데이터가 없습니다"})})]})]})},dC=({toast:t,onRemove:e})=>{const{type:n,title:r,message:s,duration:i=5e3}=t;R.useEffect(()=>{const c=setTimeout(()=>{e(t.id)},i);return()=>clearTimeout(c)},[t.id,i,e]);const o=()=>{switch(n){case"success":return l.jsx(Ne,{className:"w-5 h-5 text-green-500"});case"error":return l.jsx(df,{className:"w-5 h-5 text-red-500"});case"warning":return l.jsx(Cv,{className:"w-5 h-5 text-orange-500"});case"info":return l.jsx(Yl,{className:"w-5 h-5 text-blue-500"});default:return l.jsx(Yl,{className:"w-5 h-5 text-blue-500"})}},u=()=>{switch(n){case"success":return"border-l-green-500";case"error":return"border-l-red-500";case"warning":return"border-l-orange-500";case"info":return"border-l-blue-500";default:return"border-l-blue-500"}};return l.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 ${u()} p-4 mb-3 max-w-sm lg:max-w-md animate-slide-in mx-4 lg:mx-0`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:o()}),l.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r}),l.jsx("p",{className:"text-sm text-gray-500 break-words",children:s})]}),l.jsx("button",{onClick:()=>e(t.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center -mr-2 -mt-2","aria-label":"알림 닫기",children:l.jsx(li,{className:"w-4 h-4"})})]})})},hC=({toasts:t,onRemove:e})=>l.jsx("div",{className:"fixed top-4 right-0 lg:right-4 z-50 w-full lg:w-auto pointer-events-none",children:l.jsx("div",{className:"pointer-events-auto",children:t.map(n=>l.jsx(dC,{toast:n,onRemove:e},n.id))})}),fC=()=>{var y;const[t,e]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(null),[o,u]=R.useState({}),[c,d]=R.useState("전체"),m=g=>{const x=["스포츠이벤트(동/하계)","용품구입비","근무자피복비(동/하계)","간담회 및 회의운영","차량리스비","차량관리비(유류비,정비,세차 등)","차량보험료","기타운영비","사업홍보비","전산구축 및 유지보수","주최자배상책임공제","운동 영상장비 구입"],S=["용품구입비_북부","근무자 피복비_북부(동/하계)","간담회 및 회의운영_북부","차량리스비_북부","차량관리비_북부(유류비,정비,세차 등)","차량개조비_북부(래핑,앵글제작 등)","차량보험료_북부","기타운영비_북부","사업홍보비_북부","운영수당(스포츠박스)_북부"];return x.includes(g)?"남부":S.includes(g)?"북부":null},p=t.filter(g=>{const x=m(g.name);return c==="전체"||x===c}).sort((g,x)=>g.name.localeCompare(x.name,"ko")),v=[...n].sort((g,x)=>g.date&&x.date?new Date(x.date).getTime()-new Date(g.date).getTime():x.id.localeCompare(g.id)),[N,k]=R.useState(!1),[C,j]=R.useState({budgetItemId:((y=t[0])==null?void 0:y.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""});R.useEffect(()=>{const g=ke.subscribeToBudgets(e),x=ke.subscribeToBudgetUsages(r);return()=>{g(),x()}},[]),R.useEffect(()=>{const g=x=>{var S;x.key==="Escape"&&(s&&(i(null),u({})),N&&(k(!1),j({budgetItemId:((S=t[0])==null?void 0:S.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})))};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s,N,t]);const b=()=>{var x;k(!0);const g=p[0];j({budgetItemId:(g==null?void 0:g.id)||((x=t[0])==null?void 0:x.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},E=g=>{i(g.id),u({...g})},T=async()=>{s&&(await ke.updateBudgetUsage(s,o),i(null),u({}))},D=async()=>{s&&(await ke.deleteBudgetUsage(s),i(null),u({}))},M=(g,x)=>{u(S=>({...S,[g]:x}))},L=async()=>{var g;await ke.addBudgetUsage(C),k(!1),j({budgetItemId:((g=t[0])==null?void 0:g.id)||"",description:"",vendor:"",amount:0,date:"",paymentMethod:"",note:""})},_=(g,x)=>{j(S=>({...S,[g]:x}))};return R.useEffect(()=>{if(N&&p.length>0){const g=t.find(S=>S.id===C.budgetItemId),x=g?m(g.name):null;c!=="전체"&&x!==c&&j(S=>{var A;return{...S,budgetItemId:((A=p[0])==null?void 0:A.id)||""}})}if(s&&p.length>0){const g=t.find(S=>S.id===o.budgetItemId),x=g?m(g.name):null;c!=="전체"&&x!==c&&u(S=>{var A;return{...S,budgetItemId:((A=p[0])==null?void 0:A.id)||""}})}},[c,N,s,p,C.budgetItemId,o.budgetItemId,t]),l.jsxs("div",{className:"w-full max-w-[2000px] mx-auto px-2 lg:px-4 overflow-x-hidden",children:[l.jsxs("div",{className:"mb-6 lg:mb-8 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[l.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:"예산 사용 내역"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition min-h-[44px]",onClick:b,children:[l.jsx(Rv,{className:"w-4 h-4"})," 내역 추가"]}),l.jsx("button",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition min-h-[44px]",onClick:()=>sC(n,t),children:"엑셀 다운로드"})]})]}),l.jsxs("div",{className:"grid gap-4",children:[N&&l.jsx("div",{className:"rounded-xl shadow-md border-2 border-blue-300 bg-white ring-2 ring-blue-400",children:l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 p-4 lg:p-6 w-full",children:[l.jsxs("div",{className:"flex-none w-full lg:w-48 lg:min-w-[180px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"예산명"}),l.jsx("div",{className:"flex gap-2 mb-2",children:["전체","남부","북부"].map(g=>l.jsx("button",{type:"button",className:`px-3 py-1 rounded-full border text-xs font-semibold transition-colors duration-200 ${c===g?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>d(g),children:g},g))}),l.jsx("select",{className:"border rounded px-2 py-1 w-full",value:C.budgetItemId,onChange:g=>_("budgetItemId",g.target.value),children:p.map(g=>l.jsx("option",{value:g.id,children:g.name},g.id))})]}),l.jsxs("div",{className:"flex-1 lg:flex-[3] lg:min-w-[400px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"적요"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full min-h-[44px]",value:C.description||"",onChange:g=>_("description",g.target.value)})]}),l.jsxs("div",{className:"flex-1 lg:flex-none lg:w-28 lg:min-w-[80px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"채주"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full min-h-[44px]",value:C.vendor||"",onChange:g=>_("vendor",g.target.value)})]}),l.jsxs("div",{className:"flex-1 lg:flex-none lg:w-32 lg:min-w-[100px] text-right",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행액"}),l.jsx("input",{type:"text",className:"border rounded px-3 py-2 w-full text-right min-h-[44px]",value:C.amount!==void 0&&C.amount!==null?Number(C.amount).toLocaleString():"",onChange:g=>{const x=g.target.value.replace(/,/g,"");isNaN(Number(x))||_("amount",Number(x))}})]}),l.jsxs("div",{className:"flex-1 lg:flex-none lg:w-36 lg:min-w-[120px] text-center",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행일자"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full min-h-[44px]",value:C.date||"",onChange:g=>_("date",g.target.value)})]}),l.jsxs("div",{className:"flex-1 lg:flex-none lg:w-32 lg:min-w-[100px] text-center",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"결제방법"}),l.jsxs("select",{className:"border rounded px-3 py-2 w-full min-h-[44px]",value:C.paymentMethod||"",onChange:g=>_("paymentMethod",g.target.value),children:[l.jsx("option",{value:"",children:"선택"}),l.jsx("option",{value:"계좌입금",children:"계좌입금"}),l.jsx("option",{value:"카드결제",children:"카드결제"})]})]}),l.jsxs("div",{className:"flex-1 lg:flex-none lg:w-32 lg:min-w-[100px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"메모"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full min-h-[44px]",value:C.note||"",onChange:g=>_("note",g.target.value)})]}),l.jsxs("div",{className:"flex flex-row lg:flex-col gap-2 items-center justify-center flex-none w-full lg:w-16 lg:min-w-[60px]",children:[l.jsx("button",{className:"p-3 lg:p-2 bg-blue-600 text-white rounded-lg lg:rounded-full shadow hover:bg-blue-700 transition min-h-[44px] min-w-[44px] flex-1 lg:flex-none",onClick:L,title:"저장",children:l.jsx(oi,{className:"w-5 h-5 mx-auto"})}),l.jsx("button",{className:"p-3 lg:p-2 bg-gray-200 text-gray-700 rounded-lg lg:rounded-full shadow hover:bg-gray-300 transition min-h-[44px] min-w-[44px] flex-1 lg:flex-none",onClick:()=>k(!1),title:"취소",children:l.jsx(li,{className:"w-5 h-5 mx-auto"})})]})]})}),v.map(g=>{const x=s===g.id,S=t.find(A=>A.id===(x?o.budgetItemId:g.budgetItemId));return l.jsxs("div",{className:`rounded-xl shadow-md border border-gray-100 bg-white hover:shadow-lg transition cursor-pointer relative ${x?"ring-2 ring-blue-400":"hover:ring-1 hover:ring-blue-200"}`,onClick:()=>!x&&E(g),children:[l.jsxs("div",{className:"flex md:flex-row md:items-center gap-4 p-6 w-full",children:[l.jsxs("div",{className:"flex-none w-48 min-w-[180px]",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"예산명"}),x?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex gap-2 mb-2",children:["전체","남부","북부"].map(A=>l.jsx("button",{type:"button",className:`px-3 py-1 rounded-full border text-xs font-semibold transition-colors duration-200 ${c===A?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"}`,onClick:()=>d(A),children:A},A))}),l.jsx("select",{className:"border rounded px-2 py-1 w-full",value:o.budgetItemId,onChange:A=>M("budgetItemId",A.target.value),children:p.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))})]}):l.jsx("span",{className:S!=null&&S.name.includes("북부")?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded font-semibold":"bg-gray-100 text-gray-800 px-2 py-1 rounded font-semibold",children:(S==null?void 0:S.name)||"-"})]}),l.jsx("div",{className:"flex-[3] min-w-[400px]",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"적요"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.description||"",onChange:A=>M("description",A.target.value)})]}):l.jsx("div",{className:"text-gray-800 truncate",title:g.description,children:g.description||"-"})}),l.jsx("div",{className:"flex-none w-28 min-w-[80px]",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"채주"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.vendor||"",onChange:A=>M("vendor",A.target.value)})]}):l.jsx("div",{className:"text-gray-700 truncate",title:g.vendor,children:g.vendor||"-"})}),l.jsx("div",{className:"flex-none w-32 min-w-[100px] text-right",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행액"}),l.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-full text-right",value:o.amount!==void 0&&o.amount!==null?Number(o.amount).toLocaleString():"",onChange:A=>{const I=A.target.value.replace(/,/g,"");isNaN(Number(I))||M("amount",Number(I))}})]}):l.jsxs("span",{className:"font-bold text-blue-700",children:[g.amount.toLocaleString(),"원"]})}),l.jsx("div",{className:"flex-none w-36 min-w-[120px] text-center",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"집행일자"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:o.date||"",onChange:A=>M("date",A.target.value)})]}):l.jsx("span",{className:"text-gray-600",children:g.date||"-"})}),l.jsx("div",{className:"flex-none w-32 min-w-[100px] text-center",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"결제방법"}),l.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:o.paymentMethod||"",onChange:A=>M("paymentMethod",A.target.value),children:[l.jsx("option",{value:"",children:"선택"}),l.jsx("option",{value:"계좌입금",children:"계좌입금"}),l.jsx("option",{value:"카드결제",children:"카드결제"})]})]}):l.jsx("span",{className:"text-gray-600",children:g.paymentMethod||"-"})}),l.jsx("div",{className:"flex-none w-32 min-w-[100px]",children:x?l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"메모"}),l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:o.note||"",onChange:A=>M("note",A.target.value)})]}):l.jsx("div",{className:"text-gray-500 truncate",title:g.note,children:g.note||"-"})}),x&&l.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center flex-none w-16 min-w-[60px]",children:[l.jsx("button",{className:"p-2 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:T,title:"저장",children:l.jsx(oi,{className:"w-5 h-5"})}),l.jsx("button",{className:"p-2 bg-gray-200 text-gray-700 rounded-full shadow hover:bg-gray-300 transition",onClick:()=>{i(null),u({})},title:"취소",children:l.jsx(li,{className:"w-5 h-5"})})]})]}),x&&l.jsx("div",{className:"flex justify-end border-t pt-3 pb-2 px-6 bg-gray-50 rounded-b-xl",children:l.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition",onClick:D,children:[l.jsx(Ru,{className:"w-4 h-4"})," 선택된 내역 삭제"]})})]},g.id)})]})]})},mC=()=>l.jsxs("div",{className:"w-full max-w-6xl mx-auto px-2",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center",children:[l.jsx(Bd,{className:"mr-3 h-8 w-8 text-blue-600"}),"스포츠박스 예산/실적 통합관리 시스템 사용 매뉴얼"]}),l.jsx("p",{className:"text-gray-600 text-lg",children:"효율적인 스포츠박스 운영을 위한 통합 관리 시스템"})]}),l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-8 border border-blue-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-4 flex items-center",children:[l.jsx(Yl,{className:"mr-2 h-6 w-6"}),"📋 시스템 개요"]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[l.jsx("p",{className:"text-gray-700 mb-3",children:"이 시스템은 스포츠박스 운영에 필요한 실적관리와 예산관리를 통합적으로 처리할 수 있는 웹 기반 시스템입니다."}),l.jsxs("div",{className:"flex items-center bg-blue-100 rounded-lg p-3",children:[l.jsx(Nb,{className:"mr-2 h-5 w-5 text-blue-600"}),l.jsx("span",{className:"font-semibold text-blue-800",children:"접속 주소:"}),l.jsx("a",{href:"https://sportsbox031.github.io/result/",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"https://sportsbox031.github.io/result/"})]})]})})]}),l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 mb-8 border border-green-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-green-900 mb-6 flex items-center",children:[l.jsx(Gs,{className:"mr-2 h-6 w-6"}),"🎯 주요 기능"]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-green-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:l.jsx(Xl,{className:"h-6 w-6 text-blue-600"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"1️⃣ 실적 입력"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"사용 시점:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"수업 완료 후"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"입력 내용:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"프로그램별 수업 실적 데이터"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"수요처 관리:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"기존 수요처 검색 후 없을 경우에만 신규 등록"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-green-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"bg-purple-100 rounded-full p-2 mr-3",children:l.jsx(ls,{className:"h-6 w-6 text-purple-600"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"2️⃣ 예산 사용내역"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"사용 시점:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"지출 발생 후"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"입력 내용:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"예산 사용 관련 모든 내역"})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"지역 구분:"}),l.jsx("span",{className:"text-gray-600 ml-2",children:"남부/북부 예산 구분을 위한 지역 버튼 제공"})]})]})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-6 mb-8 border border-orange-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-orange-900 mb-6 flex items-center",children:[l.jsx(Bd,{className:"mr-2 h-6 w-6"}),"🔧 상세 사용 방법"]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 mb-6 border border-orange-200 shadow-sm",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[l.jsx(Xl,{className:"mr-2 h-5 w-5 text-blue-600"}),"📊 실적 입력 방법"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"1"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"수업 완료 후 시스템 접속"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"2"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"실적 입력 메뉴 선택"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"수요처 검색"}),l.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"기존 수요처가 있는 경우: 선택하여 사용"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"기존 수요처가 없는 경우: 신규 수요처 등록 진행"})]})]})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"4"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"프로그램별 실적 데이터 입력 및 저장"})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-orange-200 shadow-sm",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[l.jsx(ls,{className:"mr-2 h-5 w-5 text-purple-600"}),"💰 예산 사용내역 입력 방법"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"1"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"지출 발생 후 시스템 접속"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"2"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"예산 사용내역 메뉴 선택"})})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"지역 버튼 클릭 (남부/북부 구분)"}),l.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ji,{className:"h-4 w-4 text-blue-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"남부 버튼: 남부 지역 예산 항목만 표시"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ji,{className:"h-4 w-4 text-green-500 mr-2"}),l.jsx("span",{className:"text-gray-600",children:"북부 버튼: 북부 지역 예산 항목만 표시"})]})]})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"bg-purple-100 rounded-full w-8 h-8 flex items-center justify-center mr-3 mt-0.5",children:l.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"4"})}),l.jsx("div",{children:l.jsx("span",{className:"font-semibold text-gray-700",children:"해당 예산 항목 선택 후 사용 내역 입력"})})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 mb-8 border border-indigo-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-indigo-900 mb-6 flex items-center",children:[l.jsx(Gs,{className:"mr-2 h-6 w-6"}),"📈 대시보드 활용 방법"]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-indigo-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(ai,{className:"mr-2 h-5 w-5 text-blue-600"}),"📋 총 실적 현황 확인"]}),l.jsx("p",{className:"text-gray-600 mb-3",children:"총 횟수 클릭 → 프로그램별 횟수 및 참여 인원 상세 조회"}),l.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-blue-700",children:["💡 ",l.jsx("strong",{children:"팁:"})," 각 프로그램별 실적을 한눈에 확인할 수 있습니다."]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-indigo-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Ji,{className:"mr-2 h-5 w-5 text-green-600"}),"🗺️ 시군별 참여 현황"]}),l.jsx("p",{className:"text-gray-600 mb-3",children:"각 시군명 클릭 → 해당 시군 소속 수요처별 횟수 및 인원 상세 조회"}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-green-700",children:["💡 ",l.jsx("strong",{children:"팁:"})," 지역별 실적 현황을 세부적으로 분석할 수 있습니다."]})})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-indigo-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(ls,{className:"mr-2 h-5 w-5 text-purple-600"}),"💳 예산 사용 현황"]}),l.jsx("p",{className:"text-gray-600 mb-3",children:"각 예산명 클릭 → 해당 예산의 세부 사용 내역 조회"}),l.jsx("div",{className:"bg-purple-50 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-purple-700",children:["💡 ",l.jsx("strong",{children:"팁:"})," 예산별 사용 내역을 상세히 확인할 수 있습니다."]})})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-6 border border-red-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-red-900 mb-6 flex items-center",children:[l.jsx(Cv,{className:"mr-2 h-6 w-6"}),"⚠️ 주의사항"]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-red-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(ai,{className:"mr-2 h-5 w-5 text-blue-600"}),"✅ 수요처 관리"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"실적 입력 시 반드시 기존 수요처 검색 먼저 진행"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"검색 결과가 없을 경우에만 신규 수요처 등록"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"중복 등록 방지를 위해 꼼꼼한 검색 필요"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-red-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Ji,{className:"mr-2 h-5 w-5 text-green-600"}),"✅ 예산 구분"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"남부/북부 예산 혼동 방지를 위해 지역 버튼 활용 필수"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"지출 전 해당 지역 예산 확인 후 사용내역 입력"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-6 border border-red-200 shadow-sm",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[l.jsx(Gs,{className:"mr-2 h-5 w-5 text-orange-600"}),"✅ 입력 타이밍"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"실적 입력: 수업 완료 직후"})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),l.jsx("span",{className:"text-gray-600",children:"예산 사용내역: 지출 발생 직후"})]})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-6 border border-teal-200",children:[l.jsxs("h2",{className:"text-2xl font-bold text-teal-900 mb-4 flex items-center",children:[l.jsx(Yl,{className:"mr-2 h-6 w-6"}),"💡 추가 정보"]}),l.jsx("div",{className:"bg-white rounded-lg p-6 border border-teal-200 shadow-sm",children:l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"🔐 보안"}),l.jsxs("ul",{className:"space-y-2 text-gray-600",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"관리자 계정으로만 접근 가능"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"비밀번호 변경 시 모든 사용자에게 적용"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"실시간 데이터 동기화"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"📱 사용성"}),l.jsxs("ul",{className:"space-y-2 text-gray-600",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"반응형 디자인으로 모바일에서도 사용 가능"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"ESC 키로 빠른 모드 종료"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx(Ne,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"엑셀 다운로드 기능 제공"})]})]})]})]})})]})]});async function mu(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")}const pC=Object.freeze(Object.defineProperty({__proto__:null,hashPassword:mu},Symbol.toStringTag,{value:"Module"}));function gC({onLogin:t}){const[e,n]=R.useState("admin"),[r,s]=R.useState(""),[i,o]=R.useState(""),[u,c]=R.useState(!1);async function d(m){m.preventDefault(),c(!0),o("");try{let p=await ke.getAdminUser();p||(await ke.createDefaultAdmin(),p=await ke.getAdminUser());const v=await mu(r);e===(p==null?void 0:p.username)&&v===(p==null?void 0:p.passwordHash)?t():o("아이디 또는 비밀번호가 올바르지 않습니다.")}catch(p){console.error("로그인 실패:",p),o("로그인 중 오류가 발생했습니다. 네트워크 연결을 확인해주세요.")}finally{c(!1)}}return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4",children:l.jsxs("form",{onSubmit:d,className:"bg-white p-6 lg:p-8 rounded-xl shadow-md w-full max-w-sm",children:[l.jsx("h2",{className:"text-xl lg:text-2xl font-bold mb-6 text-center",children:"관리자 로그인"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"아이디"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:e,onChange:m=>n(m.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"비밀번호"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:r,onChange:m=>s(m.target.value)})]}),i&&l.jsx("div",{className:"text-red-600 text-sm mb-2",children:i}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-semibold hover:bg-blue-700 transition",disabled:u,children:u?"로그인 중...":"로그인"})]})})}function yC({onClose:t}){const[e,n]=R.useState(""),[r,s]=R.useState(""),[i,o]=R.useState(""),[u,c]=R.useState(""),[d,m]=R.useState(""),[p,v]=R.useState(!1);R.useEffect(()=>{if(u){const k=setTimeout(()=>{t()},2e3);return()=>clearTimeout(k)}},[u,t]);async function N(k){k.preventDefault(),v(!0),m(""),c("");try{const C=await ke.getAdminUser();if(!C){m("관리자 계정이 존재하지 않습니다."),v(!1);return}if(await mu(e)!==C.passwordHash){m("기존 비밀번호가 올바르지 않습니다."),v(!1);return}if(r.length<6){m("새 비밀번호는 6자 이상이어야 합니다."),v(!1);return}if(r!==i){m("새 비밀번호가 일치하지 않습니다."),v(!1);return}const b=await mu(r);await ke.saveAdminUser({username:"admin",passwordHash:b}),c("비밀번호가 성공적으로 변경되었습니다."),n(""),s(""),o("")}catch(C){console.error("비밀번호 변경 실패:",C),m("비밀번호 변경 중 오류가 발생했습니다. 네트워크 연결을 확인해주세요.")}finally{v(!1)}}return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30 p-4",children:l.jsxs("form",{onSubmit:N,className:"bg-white p-6 lg:p-8 rounded-xl shadow-md w-full max-w-sm relative",children:[l.jsx("button",{type:"button",className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-xl",onClick:t,children:"×"}),l.jsx("h2",{className:"text-xl font-bold mb-6 text-center",children:"비밀번호 변경"}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"기존 비밀번호"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:e,onChange:k=>n(k.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"새 비밀번호"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:r,onChange:k=>s(k.target.value)})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"새 비밀번호 확인"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",type:"password",value:i,onChange:k=>o(k.target.value)})]}),d&&l.jsx("div",{className:"text-red-600 text-sm mb-2",children:d}),u&&l.jsx("div",{className:"text-green-600 text-sm mb-2",children:u}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-semibold hover:bg-blue-700 transition",disabled:p,children:p?"변경 중...":"비밀번호 변경"})]})})}function vC(){const[t,e]=R.useState("dashboard"),{toasts:n,addToast:r,removeToast:s}=fa(),{loading:i,error:o}=Ii(),[u,c]=R.useState(!1),[d,m]=R.useState(!1);R.useEffect(()=>{localStorage.getItem("admin_logged_in")==="true"&&c(!0)},[]);function p(){c(!0),localStorage.setItem("admin_logged_in","true")}function v(){c(!1),localStorage.removeItem("admin_logged_in")}if(!u)return l.jsx(gC,{onLogin:p});const N=()=>{if(i)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Oo,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})});if(o)return l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-800 font-medium mb-2",children:"연결 오류"}),l.jsx("p",{className:"text-red-600 text-sm",children:o}),l.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"다시 시도"})]})});switch(t){case"dashboard":return l.jsx(m0,{});case"demand-register":return l.jsx(oC,{});case"demand-list":return l.jsx(lC,{});case"performance-input":return l.jsx(uC,{});case"performance-list":return l.jsx(cC,{});case"budget-usage":return l.jsx(fC,{});case"manual":return l.jsx(mC,{});default:return l.jsx(m0,{})}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsxs(Ab,{currentPage:t,onPageChange:e,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 mb-4",children:[l.jsx("button",{className:"px-4 py-3 bg-gray-200 rounded hover:bg-gray-300 text-sm font-medium min-h-[44px] transition-colors",onClick:()=>m(!0),children:"비밀번호 변경"}),l.jsx("button",{className:"px-4 py-3 bg-red-200 rounded hover:bg-red-300 text-sm font-medium min-h-[44px] transition-colors",onClick:v,children:"로그아웃"})]}),N()]}),l.jsx(hC,{toasts:n,onRemove:s}),d&&l.jsx(yC,{onClose:()=>m(!1)})]})}Iv(document.getElementById("root")).render(l.jsx(R.StrictMode,{children:l.jsx(vC,{})}));
